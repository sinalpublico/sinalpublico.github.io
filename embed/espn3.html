
<!DOCTYPE html>
<html lang="pt-BR">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <!-- Style -->
    <link rel="stylesheet" href="https://embedflix.online/css/selectize.min.css?v=1.0.0.1">
    <link rel="stylesheet" href="https://embedflix.online/css/player.css?v=1.0.0.1">
    <link rel="stylesheet" href="https://embedflix.online/css/lancaster_io.css?v=1.0.0.1">
    <link rel="stylesheet" href="https://embedflix.online/css/remixicon.css?v=1.0.0.1">
    <!-- JS -->
    <script src="https://cdn.jsdelivr.net/npm/jquery@3.6/dist/jquery.min.js"></script>
    <style>
        .plyr--video {
            overflow: hidden;
            position: fixed;
            width: 100%;
            height: 100%;
            top: 0;
            left: 0;
        }

        .plyr__volume,
        [data-plyr=play],
        .vjs-big-play-button,
        .media-control, .play-wrapper {
            display: none !important;
        }

        .player-poster{
            background-size: auto!important;
            background-color: rgb(33, 42, 49)!important; 
        }

        #videoControl {
            position: absolute;
            display: flex;
            z-index: 9999;
            width: 100%;
            height: 100%;
            left: 0;
            top: 0;
            color: aqua;
            align-items: center;
            justify-content: center;
            background-color: rgb(0 0 0 / 61%);
        }

        #videoControl .button .play {
            color: #c6c6c6;
            width: 80px;
        }

        #videoControl .button .pause {
            color: #c6c6c6;
            width: 80px;
            display: none;
        }
    </style>
</head>

<div onclick="window.location.href = window.location.href;" style="
    position: absolute;
    right: 35px;
    top: 15px;
    padding: 10px 15px;
    background-color: #990000;
    z-index: 99999999;
    border-radius: 4px;
    color: #e9e9e9;
    font-family: 'Montserrat';font-size: 15px;
">Atualizar</div>

<div id="videoControl">
    <div class="button">
        <svg class="pause" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <g id="SVGRepo_bgCarrier" stroke-width="0"></g>
            <g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g>
            <g id="SVGRepo_iconCarrier">
                <path d="M2 6C2 4.11438 2 3.17157 2.58579 2.58579C3.17157 2 4.11438 2 6 2C7.88562 2 8.82843 2 9.41421 2.58579C10 3.17157 10 4.11438 10 6V18C10 19.8856 10 20.8284 9.41421 21.4142C8.82843 22 7.88562 22 6 22C4.11438 22 3.17157 22 2.58579 21.4142C2 20.8284 2 19.8856 2 18V6Z" fill="#c6c6c6"></path>
                <path d="M14 6C14 4.11438 14 3.17157 14.5858 2.58579C15.1716 2 16.1144 2 18 2C19.8856 2 20.8284 2 21.4142 2.58579C22 3.17157 22 4.11438 22 6V18C22 19.8856 22 20.8284 21.4142 21.4142C20.8284 22 19.8856 22 18 22C16.1144 22 15.1716 22 14.5858 21.4142C14 20.8284 14 19.8856 14 18V6Z" fill="#c6c6c6"></path>
            </g>
        </svg>
        <svg class="play" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <g id="SVGRepo_bgCarrier" stroke-width="0"></g>
            <g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g>
            <g id="SVGRepo_iconCarrier">
                <path d="M21.4086 9.35258C23.5305 10.5065 23.5305 13.4935 21.4086 14.6474L8.59662 21.6145C6.53435 22.736 4 21.2763 4 18.9671L4 5.0329C4 2.72368 6.53435 1.26402 8.59661 2.38548L21.4086 9.35258Z" fill="#c6c6c6"></path>
            </g>
        </svg>
    </div>
</div>
<div class="player_screen">
    <div class="player_container visible">
        <!-- Info -->
        <div class="infra" style="width:100%;height:100vh;"></div>
    </div>
</div>
</div>


<script src="https://cdn.jsdelivr.net/npm/p2p-media-loader-core@latest/build/p2p-media-loader-core.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/p2p-media-loader-hlsjs@latest/build/p2p-media-loader-hlsjs.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/clappr@latest"></script>
<script type="text/javascript" charset="utf-8" src="https://cdn.jsdelivr.net/npm/clappr-chromecast-plugin@latest/dist/clappr-chromecast-plugin.min.js"></script>
<script type="text/javascript" src="//cdn.jsdelivr.net/gh/ewwink/clappr-quality-selector-plugin@latest/quality-selector.js"></script>
<script>
    if (p2pml.hlsjs.Engine.isSupported()) {
        const config = {
            segments: {
            swarmId: 24,
            },
            cachedSegmentExpiration: 86400000,
            cachedSegmentsCount: 1000,
            // number of simultaneous downloads for P2P and HTTP methods
            simultaneousHttpDownloads: 1,
            httpDownloadProbabilitySkipIfNoPeers: true,

            // enable mode, that try to prevent HTTP downloads on stream start-up
            httpDownloadInitialTimeout: 220000, // try to prevent HTTP downloads during first 2 minutes
            httpDownloadInitialTimeoutPerSegment: 17000, // try to prevent HTTP download per segment during first 17 seconds

            loader: {
                httpUseRanges: true,
                WaitForTracker: true,
                WaitForTrackerCounter: 9500,
                trackerAnnounce: [
                    "ws://89.149.197.225:666"
                    //"wss://up.embedflix.info:442"
                ],
                rtcConfig: {
                    iceServers: [{
                            urls: "stun:stun4.l.google.com:19302"
                        },
                        {
                            urls: "stun:stun3.l.google.com:19302"
                        },
                        {
                            urls: "stun:stun2.l.google.com:19302"
                        },
                        {
                            urls: "stun:stun2.l.google.com:19302"
                        },
                    ]
                }
            }
        };        

        var engine = new p2pml.hlsjs.Engine(config);
        engine.on("peer_connect", peer => console.log("peer_connect", peer.id, peer.remoteAddress));
        engine.on("peer_close", peerId => console.log("peer_close", peerId));
        engine.on("segment_loaded", (segment, peerId) => console.log("segment_loaded from", peerId ? `peer ${peerId}` : "HTTPS", segment.url));

                
        $('.player_container .infra').append(`<div id="video" style="height: 100%; width: 100%;"></div>`);

        console.log('ersadfasfror');

        var player = new Clappr.Player({
            parentId: "#video",
            source: `https://sinalpublico.github.io/embed/espn3.m3u8`,
            mimeType: 'application/x-mpegURL',
            poster: '',
            autoPlay: false,
            //mute:true,
            width: '100%',
            height: '100%',
            //plugins: [ChromecastPlugin, QualitySelector],
            playback: {
                hlsjsConfig: {
                    liveSyncDurationCount: 60, // To have at least 7 segments in queue
                    maxBufferLength: 60,
                    loader: engine.createLoaderClass(),
                }
            },
            events: {
                onError: function(e) {
                    console.log('error');
                    setTimeout(function() {
                        player.configure(player.options);
                    }, 7000);
                }
            }
        });

        p2pml.hlsjs.initClapprPlayer(player);
        //player.setVolume(50);
    } else {
        alert('Seu navegador n√£o suporta a');
    }

    
    var pause = 1;

    $(document).on('click', ".play", function(e) {
        player.play();
        $(".play").hide();
        $(".pause").show();
        $("#videoControl").hide();
        pause = 0;
    });
    $(document).on('click', ".pause", function(e) {
        player.stop();
    });

    player.on("play", function(e) {
        pause = 0;
    });

    player.on("stop", function(e) {
        $(".pause").hide();
        $(".play").show();
        pause = 1;
    });

    var interval;
    $(document).on('mouseover', function() {
        clearInterval(interval);
        $("#videoControl").show();


        if (pause == 0)
        interval = setInterval(function() {
        $("#videoControl").hide();
        }, 3000);

    });


    /*setInterval(function() {
        if (pause == 1)
            $("#videoControl").show();
        else
        if ($(".vjs-user-active").length)
            $("#videoControl").show();
        else
            $("#videoControl").hide();
    }, 100);*/
</script>
</body>

</html>
