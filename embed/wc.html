<html>
<head>
    <title>UFC | JWPlayer</title>
    <meta content='width=device-width, initial-scale=1' name='viewport'>
    <meta http-equiv="Content-Language" content="pt-br" />
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <link rel="stylesheet" type="text/css" href="//cdn.jsdelivr.net/gh/reidoscanais/rdc@main/assets/css/player-v3.1.min.css">
    <link rel="stylesheet" href="//cdn.jsdelivr.net/gh/reidoscanais/rdc@main/assets/css/hotstar.css">
    <script src="//cdn.jsdelivr.net/gh/reidoscanais/rdc@main/assets/jwplayer/jwplayer.latest.js"></script>
    <script>
    document.addEventListener("DOMContentLoaded", function() {
        var allowedDomains = ['sinalpublico.github.io'];
        var referrer = document.referrer;
        var isIframe = false;

        try {
            isIframe = window.self !== window.top;
        } catch (e) {
            isIframe = true;
        }

        var currentDomain = window.location.hostname;

        if (!isIframe) {
            window.location.href = "https://www.google.com";
        } else if (referrer) {
            var referrerDomain = new URL(referrer).hostname;
            if (!allowedDomains.includes(referrerDomain)) {
                window.location.href = "https://www.google.com";
            }
        } else if (!allowedDomains.includes(currentDomain)) {
            window.location.href = "https://www.google.com";
        }
    });
</script>    
    <script src="https://cdn.jsdelivr.net/npm/console-ban@4.1.0/dist/console-ban.min.js"></script>
    <script>
        // default options
        ConsoleBan.init()
        // custom options
        ConsoleBan.init({
          redirect: 'https://www.google.com'
        })
      </script>  
    <script>
        jwplayer.key = 'ITWMv7t88JGzI0xPwW8I0+LveiXX9SWbfdmt0ArUSyc=';
    </script>
</head>

<body>
<div id="player"></div>
<script>
try {
    document.domain = document.domain;

    const urlParams = new URLSearchParams(window.location.search);
    const channelId = urlParams.get('id');
    const apiUrl = `https://reidoscanais.app/embed/player.php?l=aHR0cHM6Ly94bi0tLS1pdGJhdmJ2YWNlaXoueG4tLS0tLS0tNDNkYmFiYmNxdnNhYzhhZmJmZHdjb2Vja3ZrbmdkMWZybGd1aGFqOWIubmV0L3d0Yy5waHA/aWQ9MTU3OQ==`;

    if (channelId) {
        fetch(apiUrl)
            .then(response => response.json())
            .then(data => {
                const { link, licenses } = data[0];

                var playerInstance = jwplayer("player");
                playerInstance.setup({
                    playlist: [{
                        title: "",
                        sources: [{
                            default: false,
                            type: "dash",
                            file: link,
                            drm: {
                                widevine: {
                                    url: licenses.find(l => l.scheme === 'drm.WIDEVINE_CENC').licenseURL,
                                },
                                playready: {
                                    url: licenses.find(l => l.scheme === 'drm.PLAYREADY_CENC').licenseURL,
                                }
                            },
                            label: "0"
                        }]
                    }],
                    width: "100%",
                    height: "100%",
                    cast: {},
                    autostart: false,
                    logo: {
                        file: '',
                        link: '',
                        position: 'top-right'
                    },
                    sharing: {}
                });
            })
            .catch(error => {
                console.error('Error fetching data:', error);
            });
    } else {
        console.error('ID do canal n√£o fornecido na URL');
    }
} catch (e) {
    window.location.href = "https://sinalpublico.github.io/sandbox.html";
}
</script>
</body>
</html>
